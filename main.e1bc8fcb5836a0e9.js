var are=Object.defineProperty,lre=Object.defineProperties,cre=Object.getOwnPropertyDescriptors,Kz=Object.getOwnPropertySymbols,ure=Object.prototype.hasOwnProperty,dre=Object.prototype.propertyIsEnumerable,Qz=(Ve,$,O)=>$ in Ve?are(Ve,$,{enumerable:!0,configurable:!0,writable:!0,value:O}):Ve[$]=O,Xz=(Ve,$)=>{for(var O in $||($={}))ure.call($,O)&&Qz(Ve,O,$[O]);if(Kz)for(var O of Kz($))dre.call($,O)&&Qz(Ve,O,$[O]);return Ve},Jz=(Ve,$)=>lre(Ve,cre($));(self.webpackChunkGerenciadorDePresenca=self.webpackChunkGerenciadorDePresenca||[]).push([[179],{2011:(Ve,$,O)=>{"use strict";O.d($,{Dh:()=>Y,GT:()=>W,cc:()=>ye,hO:()=>ke,on:()=>Z,pX:()=>U,xv:()=>se});var o=O(5e3),B=O(127),x=O(5813);Ve=O.hmd(Ve);const V=["ngOnDestroy"],U=(_e,Pe,Fe,xe={})=>new Proxy(_e,{get:(De,he)=>Fe.runOutsideAngular(()=>{var Re;if(_e[he])return(null===(Re=null==xe?void 0:xe.spy)||void 0===Re?void 0:Re.get)&&xe.spy.get(he,_e[he]),_e[he];if(V.indexOf(he)>-1)return()=>{};const Ae=Pe.toPromise().then(q=>{const ge=q&&q[he];return"function"==typeof ge?ge.bind(q):ge&&ge.then?ge.then(X=>Fe.run(()=>X)):Fe.run(()=>ge)});return new Proxy(()=>{},{get:(q,ge)=>Ae[ge],apply:(q,ge,X)=>Ae.then(re=>{var oe;const pe=re&&re(...X);return(null===(oe=null==xe?void 0:xe.spy)||void 0===oe?void 0:oe.apply)&&xe.spy.apply(he,X,pe),pe})})})}),W=(_e,Pe)=>{Pe.forEach(Fe=>{Object.getOwnPropertyNames(Fe.prototype||Fe).forEach(xe=>{Object.defineProperty(_e.prototype,xe,Object.getOwnPropertyDescriptor(Fe.prototype||Fe,xe))})})};class G{constructor(Pe){return Pe}}const Y=new o.OlP("angularfire2.app.options"),se=new o.OlP("angularfire2.app.name");function Z(_e,Pe,Fe){const De="object"==typeof Fe&&Fe||{};De.name=De.name||"string"==typeof Fe&&Fe||"[DEFAULT]";const Re=B.Z.apps.filter(Ae=>Ae&&Ae.name===De.name)[0]||Pe.runOutsideAngular(()=>B.Z.initializeApp(_e,De));try{JSON.stringify(_e)!==JSON.stringify(Re.options)&&Q("error",`${Re.name} Firebase App already initialized with different options${Ve.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ae){}return new G(Re)}const Q=(_e,...Pe)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[_e](...Pe)},ee={provide:G,useFactory:Z,deps:[Y,o.R0b,[new o.FiY,se]]};let ke=(()=>{class _e{constructor(Fe){B.Z.registerVersion("angularfire",x.q4.full,"core"),B.Z.registerVersion("angularfire",x.q4.full,"app-compat"),B.Z.registerVersion("angular",o.q4F.full,Fe.toString())}static initializeApp(Fe,xe){return{ngModule:_e,providers:[{provide:Y,useValue:Fe},{provide:se,useValue:xe}]}}}return _e.\u0275fac=function(Fe){return new(Fe||_e)(o.LFG(o.Lbi))},_e.\u0275mod=o.oAB({type:_e}),_e.\u0275inj=o.cJS({providers:[ee]}),_e})();function ye(_e,Pe,Fe,xe,De){const[,he,Re]=globalThis.\u0275AngularfireInstanceCache.find(Ae=>Ae[0]===_e)||[];if(he)return function Me(_e,Pe){try{return _e.toString()===Pe.toString()}catch(Fe){return _e===Pe}}(De,Re)||(de("error",`${Pe} was already initialized on the ${Fe} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:De,was:Re})),he;{const Ae=xe();return globalThis.\u0275AngularfireInstanceCache.push([_e,Ae,De]),Ae}}const je=!!Ve.hot,de=(_e,...Pe)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[_e](...Pe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ve,$,O)=>{"use strict";O.d($,{q4:()=>ki,iC:()=>Gc,fc:()=>Qs,HU:()=>Xu,vb:()=>sp,JM:()=>$a});var o=O(5e3),B=O(5867),x=O(5861),V=O(9681),U=O(2090),W=O(4859),G=O(1877),Y=O(8766);const se="@firebase/installations",Z="0.5.9",ee=`w:${Z}`,ke="FIS_v2",Pe=new U.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Fe(I){return I instanceof U.ZR&&I.code.includes("request-failed")}function xe({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function De(I){return{token:I.token,requestStatus:2,expiresIn:re(I.expiresIn),creationTime:Date.now()}}function he(I,S){return Re.apply(this,arguments)}function Re(){return(Re=(0,x.Z)(function*(I,S){const K=(yield S.json()).error;return Pe.create("request-failed",{requestName:I,serverCode:K.code,serverMessage:K.message,serverStatus:K.status})})).apply(this,arguments)}function Ae({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function q(I,{refreshToken:S}){const N=Ae(I);return N.append("Authorization",function oe(I){return`${ke} ${I}`}(S)),N}function ge(I){return X.apply(this,arguments)}function X(){return(X=(0,x.Z)(function*(I){const S=yield I();return S.status>=500&&S.status<600?I():S})).apply(this,arguments)}function re(I){return Number(I.replace("s","000"))}function pe(I,S){return ve.apply(this,arguments)}function ve(){return(ve=(0,x.Z)(function*({appConfig:I,heartbeatServiceProvider:S},{fid:N}){const K=xe(I),ue=Ae(I),be=S.getImmediate({optional:!0});if(be){const dt=yield be.getHeartbeatsHeader();dt&&ue.append("x-firebase-client",dt)}const rt={method:"POST",headers:ue,body:JSON.stringify({fid:N,authVersion:ke,appId:I.appId,sdkVersion:ee})},st=yield ge(()=>fetch(K,rt));if(st.ok){const dt=yield st.json();return{fid:dt.fid||N,registrationStatus:2,refreshToken:dt.refreshToken,authToken:De(dt.authToken)}}throw yield he("Create Installation",st)})).apply(this,arguments)}function ze(I){return new Promise(S=>{setTimeout(S,I)})}const zt=/^[cdef][\w-]{21}$/;function Ye(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const N=function Xt(I){return function ft(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return zt.test(N)?N:""}catch(I){return""}}function Mn(I){return`${I.appName}!${I.appId}`}const ln=new Map;function sn(I,S){const N=Mn(I);xt(N,S),function Hn(I,S){const N=function Kn(){return!Yn&&"BroadcastChannel"in self&&(Yn=new BroadcastChannel("[Firebase] FID Change"),Yn.onmessage=I=>{xt(I.data.key,I.data.fid)}),Yn}();N&&N.postMessage({key:I,fid:S}),function Ki(){0===ln.size&&Yn&&(Yn.close(),Yn=null)}()}(N,S)}function xt(I,S){const N=ln.get(I);if(N)for(const K of N)K(S)}let Yn=null;const dr="firebase-installations-store";let fs=null;function wt(){return fs||(fs=(0,Y.X3)("firebase-installations-database",1,{upgrade:(I,S)=>{0===S&&I.createObjectStore(dr)}})),fs}function Tr(I,S){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,x.Z)(function*(I,S){const N=Mn(I),ue=(yield wt()).transaction(dr,"readwrite"),be=ue.objectStore(dr),Ue=yield be.get(N);return yield be.put(S,N),yield ue.done,(!Ue||Ue.fid!==S.fid)&&sn(I,S.fid),S})).apply(this,arguments)}function jn(I){return wo.apply(this,arguments)}function wo(){return(wo=(0,x.Z)(function*(I){const S=Mn(I),K=(yield wt()).transaction(dr,"readwrite");yield K.objectStore(dr).delete(S),yield K.done})).apply(this,arguments)}function hr(I,S){return _i.apply(this,arguments)}function _i(){return(_i=(0,x.Z)(function*(I,S){const N=Mn(I),ue=(yield wt()).transaction(dr,"readwrite"),be=ue.objectStore(dr),Ue=yield be.get(N),rt=S(Ue);return void 0===rt?yield be.delete(N):yield be.put(rt,N),yield ue.done,rt&&(!Ue||Ue.fid!==rt.fid)&&sn(I,rt.fid),rt})).apply(this,arguments)}function Gn(I){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,x.Z)(function*(I){let S;const N=yield hr(I.appConfig,K=>{const ue=Go(K),be=Jt(I,ue);return S=be.registrationPromise,be.installationEntry});return""===N.fid?{installationEntry:yield S}:{installationEntry:N,registrationPromise:S}})).apply(this,arguments)}function Go(I){return zo(I||{fid:Ye(),registrationStatus:0})}function Jt(I,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Pe.create("app-offline"))};const N={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},K=function ct(I,S){return Et.apply(this,arguments)}(I,N);return{installationEntry:N,registrationPromise:K}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Bi(I)}:{installationEntry:S}}function Et(){return(Et=(0,x.Z)(function*(I,S){try{const N=yield pe(I,S);return Tr(I.appConfig,N)}catch(N){throw Fe(N)&&409===N.customData.serverCode?yield jn(I.appConfig):yield Tr(I.appConfig,{fid:S.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Bi(I){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,x.Z)(function*(I){let S=yield Yt(I.appConfig);for(;1===S.registrationStatus;)yield ze(100),S=yield Yt(I.appConfig);if(0===S.registrationStatus){const{installationEntry:N,registrationPromise:K}=yield Gn(I);return K||N}return S})).apply(this,arguments)}function Yt(I){return hr(I,S=>{if(!S)throw Pe.create("installation-not-found");return zo(S)})}function zo(I){return function Vi(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ui(I,S){return J.apply(this,arguments)}function J(){return(J=(0,x.Z)(function*({appConfig:I,heartbeatServiceProvider:S},N){const K=ie(I,N),ue=q(I,N),be=S.getImmediate({optional:!0});if(be){const dt=yield be.getHeartbeatsHeader();dt&&ue.append("x-firebase-client",dt)}const rt={method:"POST",headers:ue,body:JSON.stringify({installation:{sdkVersion:ee,appId:I.appId}})},st=yield ge(()=>fetch(K,rt));if(st.ok)return De(yield st.json());throw yield he("Generate Auth Token",st)})).apply(this,arguments)}function ie(I,{fid:S}){return`${xe(I)}/${S}/authTokens:generate`}function ae(I){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,x.Z)(function*(I,S=!1){let N;const K=yield hr(I.appConfig,be=>{if(!Mt(be))throw Pe.create("not-registered");const Ue=be.authToken;if(!S&&In(Ue))return be;if(1===Ue.requestStatus)return N=ne(I,S),be;{if(!navigator.onLine)throw Pe.create("app-offline");const rt=li(be);return N=nt(I,rt),rt}});return N?yield N:K.authToken})).apply(this,arguments)}function ne(I,S){return me.apply(this,arguments)}function me(){return(me=(0,x.Z)(function*(I,S){let N=yield He(I.appConfig);for(;1===N.authToken.requestStatus;)yield ze(100),N=yield He(I.appConfig);const K=N.authToken;return 0===K.requestStatus?ae(I,S):K})).apply(this,arguments)}function He(I){return hr(I,S=>{if(!Mt(S))throw Pe.create("not-registered");return function Qi(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function nt(I,S){return vt.apply(this,arguments)}function vt(){return(vt=(0,x.Z)(function*(I,S){try{const N=yield Ui(I,S),K=Object.assign(Object.assign({},S),{authToken:N});return yield Tr(I.appConfig,K),N}catch(N){if(!Fe(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const K=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield Tr(I.appConfig,K)}else yield jn(I.appConfig);throw N}})).apply(this,arguments)}function Mt(I){return void 0!==I&&2===I.registrationStatus}function In(I){return 2===I.requestStatus&&!function It(I){const S=Date.now();return S<I.creationTime||I.creationTime+I.expiresIn<S+36e5}(I)}function li(I){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:S})}function wl(){return(wl=(0,x.Z)(function*(I){const S=I,{installationEntry:N,registrationPromise:K}=yield Gn(S);return K?K.catch(console.error):ae(S).catch(console.error),N.fid})).apply(this,arguments)}function Cl(){return(Cl=(0,x.Z)(function*(I,S=!1){const N=I;return yield ci(N),(yield ae(N,S)).token})).apply(this,arguments)}function ci(I){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,x.Z)(function*(I){const{registrationPromise:S}=yield Gn(I);S&&(yield S)})).apply(this,arguments)}function Ma(I){return Pe.create("missing-app-config-values",{valueName:I})}const pr="installations",gt=I=>{const S=I.getProvider("app").getImmediate(),N=function Si(I){if(!I||!I.options)throw Ma("App Configuration");if(!I.name)throw Ma("App Name");const S=["projectId","apiKey","appId"];for(const N of S)if(!I.options[N])throw Ma(N);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(S);return{app:S,appConfig:N,heartbeatServiceProvider:(0,V._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},mn=I=>{const S=I.getProvider("app").getImmediate(),N=(0,V._getProvider)(S,pr).getImmediate();return{getId:()=>function bl(I){return wl.apply(this,arguments)}(N),getToken:ue=>function hc(I){return Cl.apply(this,arguments)}(N,ue)}};(function mr(){(0,V._registerComponent)(new W.wA(pr,gt,"PUBLIC")),(0,V._registerComponent)(new W.wA("installations-internal",mn,"PRIVATE"))})(),(0,V.registerVersion)(se,Z),(0,V.registerVersion)(se,Z,"esm2017");const ps="@firebase/remote-config",zn=new U.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class hg{constructor(S,N,K,ue){this.client=S,this.storage=N,this.storageCache=K,this.logger=ue}isCachedDataFresh(S,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const K=Date.now()-N,ue=K<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${K}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ue}.`),ue}fetch(S){var N=this;return(0,x.Z)(function*(){const[K,ue]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(ue&&N.isCachedDataFresh(S.cacheMaxAgeMillis,K))return ue;S.eTag=ue&&ue.eTag;const be=yield N.client.fetch(S),Ue=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===be.status&&Ue.push(N.storage.setLastSuccessfulFetchResponse(be)),yield Promise.all(Ue),be})()}}function Ud(I=navigator){return I.languages&&I.languages[0]||I.language}class Hi{constructor(S,N,K,ue,be,Ue){this.firebaseInstallations=S,this.sdkVersion=N,this.namespace=K,this.projectId=ue,this.apiKey=be,this.appId=Ue}fetch(S){var N=this;return(0,x.Z)(function*(){const[K,ue]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Ue=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,rt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},st={sdk_version:N.sdkVersion,app_instance_id:K,app_instance_id_token:ue,app_id:N.appId,language_code:Ud()},dt={method:"POST",headers:rt,body:JSON.stringify(st)},Vt=fetch(Ue,dt),Dt=new Promise((Rr,es)=>{S.signal.addEventListener(()=>{const Ya=new Error("The operation was aborted.");Ya.name="AbortError",es(Ya)})});let hi;try{yield Promise.race([Vt,Dt]),hi=yield Vt}catch(Rr){let es="fetch-client-network";throw"AbortError"===Rr.name&&(es="fetch-timeout"),zn.create(es,{originalErrorMessage:Rr.message})}let ti=hi.status;const ca=hi.headers.get("ETag")||void 0;let Xs,yr;if(200===hi.status){let Rr;try{Rr=yield hi.json()}catch(es){throw zn.create("fetch-client-parse",{originalErrorMessage:es.message})}Xs=Rr.entries,yr=Rr.state}if("INSTANCE_STATE_UNSPECIFIED"===yr?ti=500:"NO_CHANGE"===yr?ti=304:("NO_TEMPLATE"===yr||"EMPTY_CONFIG"===yr)&&(Xs={}),304!==ti&&200!==ti)throw zn.create("fetch-status",{httpStatus:ti});return{status:ti,eTag:ca,config:Xs}})()}}class fg{constructor(S,N){this.client=S,this.storage=N}fetch(S){var N=this;return(0,x.Z)(function*(){const K=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(S,K)})()}attemptFetch(S,{throttleEndTimeMillis:N,backoffCount:K}){var ue=this;return(0,x.Z)(function*(){yield function To(I,S){return new Promise((N,K)=>{const ue=Math.max(S-Date.now(),0),be=setTimeout(N,ue);I.addEventListener(()=>{clearTimeout(be),K(zn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,N);try{const be=yield ue.client.fetch(S);return yield ue.storage.deleteThrottleMetadata(),be}catch(be){if(!function Hd(I){if(!(I instanceof U.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}(be))throw be;const Ue={throttleEndTimeMillis:Date.now()+(0,U.$s)(K),backoffCount:K+1};return yield ue.storage.setThrottleMetadata(Ue),ue.attemptFetch(S,Ue)}})()}}class jd{constructor(S,N,K,ue,be){this.app=S,this._client=N,this._storageCache=K,this._storage=ue,this._logger=be,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ru(I,S){const N=I.target.error||void 0;return zn.create(S,{originalErrorMessage:N&&N.message})}const Io="app_namespace_store";class _g{constructor(S,N,K,ue=function gg(){return new Promise((I,S)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=K=>{S(Ru(K,"storage-open"))},N.onsuccess=K=>{I(K.target.result)},N.onupgradeneeded=K=>{0===K.oldVersion&&K.target.result.createObjectStore(Io,{keyPath:"compositeKey"})}}catch(N){S(zn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=S,this.appName=N,this.namespace=K,this.openDbPromise=ue}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var N=this;return(0,x.Z)(function*(){const K=yield N.openDbPromise;return new Promise((ue,be)=>{const rt=K.transaction([Io],"readonly").objectStore(Io),st=N.createCompositeKey(S);try{const dt=rt.get(st);dt.onerror=Vt=>{be(Ru(Vt,"storage-get"))},dt.onsuccess=Vt=>{const Dt=Vt.target.result;ue(Dt?Dt.value:void 0)}}catch(dt){be(zn.create("storage-get",{originalErrorMessage:dt&&dt.message}))}})})()}set(S,N){var K=this;return(0,x.Z)(function*(){const ue=yield K.openDbPromise;return new Promise((be,Ue)=>{const st=ue.transaction([Io],"readwrite").objectStore(Io),dt=K.createCompositeKey(S);try{const Vt=st.put({compositeKey:dt,value:N});Vt.onerror=Dt=>{Ue(Ru(Dt,"storage-set"))},Vt.onsuccess=()=>{be()}}catch(Vt){Ue(zn.create("storage-set",{originalErrorMessage:Vt&&Vt.message}))}})})()}delete(S){var N=this;return(0,x.Z)(function*(){const K=yield N.openDbPromise;return new Promise((ue,be)=>{const rt=K.transaction([Io],"readwrite").objectStore(Io),st=N.createCompositeKey(S);try{const dt=rt.delete(st);dt.onerror=Vt=>{be(Ru(Vt,"storage-delete"))},dt.onsuccess=()=>{ue()}}catch(dt){be(zn.create("storage-delete",{originalErrorMessage:dt&&dt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class zd{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,x.Z)(function*(){const N=S.storage.getLastFetchStatus(),K=S.storage.getLastSuccessfulFetchTimestampMillis(),ue=S.storage.getActiveConfig(),be=yield N;be&&(S.lastFetchStatus=be);const Ue=yield K;Ue&&(S.lastSuccessfulFetchTimestampMillis=Ue);const rt=yield ue;rt&&(S.activeConfig=rt)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function gc(){return qd.apply(this,arguments)}function qd(){return(qd=(0,x.Z)(function*(){if(!(0,U.hl)())return!1;try{return yield(0,U.eu)()}catch(I){return!1}})).apply(this,arguments)}!function ka(){(0,V._registerComponent)(new W.wA("remote-config",function I(S,{instanceIdentifier:N}){const K=S.getProvider("app").getImmediate(),ue=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw zn.create("registration-window");if(!(0,U.hl)())throw zn.create("indexed-db-unavailable");const{projectId:be,apiKey:Ue,appId:rt}=K.options;if(!be)throw zn.create("registration-project-id");if(!Ue)throw zn.create("registration-api-key");if(!rt)throw zn.create("registration-app-id");const st=new _g(rt,K.name,N=N||"firebase"),dt=new zd(st),Vt=new G.Yd(ps);Vt.logLevel=G.in.ERROR;const Dt=new Hi(ue,V.SDK_VERSION,N,be,Ue,rt),hi=new fg(Dt,st),ti=new hg(hi,st,dt,Vt),ca=new jd(K,ti,dt,st,Vt);return function vn(I){const S=(0,U.m9)(I);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ca),ca},"PUBLIC").setMultipleInstances(!0)),(0,V.registerVersion)(ps,"0.3.8"),(0,V.registerVersion)(ps,"0.3.8","esm2017")}();const $d="/firebase-messaging-sw.js",ji="/firebase-cloud-messaging-push-scope",Wo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ra="google.c.a.c_id",Wd="google.c.a.c_l",Qf="google.c.a.ts",gr="google.c.a.e";var Oa=(()=>{return(I=Oa||(Oa={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Oa;var I})();function er(I){const S=new Uint8Array(I);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zd(I){const N=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),K=atob(N),ue=new Uint8Array(K.length);for(let be=0;be<K.length;++be)ue[be]=K.charCodeAt(be);return ue}const Gi="fcm_token_details_db",Ar="fcm_token_object_Store";function Ou(I){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,x.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(be=>be.name).includes(Gi))return null;let S=null;return(yield(0,Y.X3)(Gi,5,{upgrade:(K=(0,x.Z)(function*(ue,be,Ue,rt){var st;if(be<2||!ue.objectStoreNames.contains(Ar))return;const dt=rt.objectStore(Ar),Vt=yield dt.index("fcmSenderId").get(I);if(yield dt.clear(),Vt)if(2===be){const Dt=Vt;if(!Dt.auth||!Dt.p256dh||!Dt.endpoint)return;S={token:Dt.fcmToken,createTime:null!==(st=Dt.createTime)&&void 0!==st?st:Date.now(),subscriptionOptions:{auth:Dt.auth,p256dh:Dt.p256dh,endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:"string"==typeof Dt.vapidKey?Dt.vapidKey:er(Dt.vapidKey)}}}else if(3===be){const Dt=Vt;S={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:er(Dt.auth),p256dh:er(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:er(Dt.vapidKey)}}}else if(4===be){const Dt=Vt;S={token:Dt.fcmToken,createTime:Dt.createTime,subscriptionOptions:{auth:er(Dt.auth),p256dh:er(Dt.p256dh),endpoint:Dt.endpoint,swScope:Dt.swScope,vapidKey:er(Dt.vapidKey)}}}}),function(be,Ue,rt,st){return K.apply(this,arguments)})})).close(),yield(0,Y.Lj)(Gi),yield(0,Y.Lj)("fcm_vapid_details_db"),yield(0,Y.Lj)("undefined"),Pu(S)?S:null;var K}),Yd.apply(this,arguments)}function Pu(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:S}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const bs="firebase-messaging-store";let Xf=null;function bn(){return Xf||(Xf=(0,Y.X3)("firebase-messaging-database",1,{upgrade:(I,S)=>{0===S&&I.createObjectStore(bs)}})),Xf}function Sl(I){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,x.Z)(function*(I){const S=Ai(I),K=yield(yield bn()).transaction(bs).objectStore(bs).get(S);if(K)return K;{const ue=yield Ou(I.appConfig.senderId);if(ue)return yield dn(I,ue),ue}})).apply(this,arguments)}function dn(I,S){return Al.apply(this,arguments)}function Al(){return(Al=(0,x.Z)(function*(I,S){const N=Ai(I),ue=(yield bn()).transaction(bs,"readwrite");return yield ue.objectStore(bs).put(S,N),yield ue.done,S})).apply(this,arguments)}function _c(I){return So.apply(this,arguments)}function So(){return(So=(0,x.Z)(function*(I){const S=Ai(I),K=(yield bn()).transaction(bs,"readwrite");yield K.objectStore(bs).delete(S),yield K.done})).apply(this,arguments)}function Ai({appConfig:I}){return I.appId}const Fn=new U.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ws(I,S){return xi.apply(this,arguments)}function xi(){return(xi=(0,x.Z)(function*(I,S){const N=yield Fa(I),K=Ao(S),ue={method:"POST",headers:N,body:JSON.stringify(K)};let be;try{be=yield(yield fetch(Cs(I.appConfig),ue)).json()}catch(Ue){throw Fn.create("token-subscribe-failed",{errorInfo:Ue})}if(be.error)throw Fn.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw Fn.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function Ko(I,S){return zs.apply(this,arguments)}function zs(){return(zs=(0,x.Z)(function*(I,S){const N=yield Fa(I),K=Ao(S.subscriptionOptions),ue={method:"PATCH",headers:N,body:JSON.stringify(K)};let be;try{be=yield(yield fetch(`${Cs(I.appConfig)}/${S.token}`,ue)).json()}catch(Ue){throw Fn.create("token-update-failed",{errorInfo:Ue})}if(be.error)throw Fn.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw Fn.create("token-update-no-token");return be.token})).apply(this,arguments)}function xl(I,S){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,x.Z)(function*(I,S){const K={method:"DELETE",headers:yield Fa(I)};try{const be=yield(yield fetch(`${Cs(I.appConfig)}/${S}`,K)).json();if(be.error)throw Fn.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ue){throw Fn.create("token-unsubscribe-failed",{errorInfo:ue})}})).apply(this,arguments)}function Cs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Fa(I){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,x.Z)(function*({appConfig:I,installations:S}){const N=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Ao({p256dh:I,auth:S,endpoint:N,vapidKey:K}){const ue={web:{endpoint:N,auth:S,p256dh:I}};return K!==Wo&&(ue.web.applicationPubKey=K),ue}const Lu=6048e5;function Ml(I){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,x.Z)(function*(I){const S=yield Qo(I.swRegistration,I.vapidKey),N={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:S.endpoint,auth:er(S.getKey("auth")),p256dh:er(S.getKey("p256dh"))},K=yield Sl(I.firebaseDependencies);if(K){if(bc(K.subscriptionOptions,N))return Date.now()>=K.createTime+Lu?Vu(I,{token:K.token,createTime:Date.now(),subscriptionOptions:N}):K.token;try{yield xl(I.firebaseDependencies,K.token)}catch(ue){console.warn(ue)}return Le(I.firebaseDependencies,N)}return Le(I.firebaseDependencies,N)})).apply(this,arguments)}function yc(I){return vc.apply(this,arguments)}function vc(){return(vc=(0,x.Z)(function*(I){const S=yield Sl(I.firebaseDependencies);S&&(yield xl(I.firebaseDependencies,S.token),yield _c(I.firebaseDependencies));const N=yield I.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Vu(I,S){return La.apply(this,arguments)}function La(){return(La=(0,x.Z)(function*(I,S){try{const N=yield Ko(I.firebaseDependencies,S),K=Object.assign(Object.assign({},S),{token:N,createTime:Date.now()});return yield dn(I.firebaseDependencies,K),N}catch(N){throw yield yc(I),N}})).apply(this,arguments)}function Le(I,S){return qt.apply(this,arguments)}function qt(){return(qt=(0,x.Z)(function*(I,S){const K={token:yield ws(I,S),createTime:Date.now(),subscriptionOptions:S};return yield dn(I,K),K.token})).apply(this,arguments)}function Qo(I,S){return kn.apply(this,arguments)}function kn(){return(kn=(0,x.Z)(function*(I,S){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zd(S)})})).apply(this,arguments)}function bc(I,S){return S.vapidKey===I.vapidKey&&S.endpoint===I.endpoint&&S.auth===I.auth&&S.p256dh===I.p256dh}function Xo(I){const S={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function xr(I,S){if(!S.notification)return;I.notification={};const N=S.notification.title;N&&(I.notification.title=N);const K=S.notification.body;K&&(I.notification.body=K);const ue=S.notification.image;ue&&(I.notification.image=ue)}(S,I),function Uu(I,S){!S.data||(I.data=S.data)}(S,I),function Hu(I,S){if(!S.fcmOptions)return;I.fcmOptions={};const N=S.fcmOptions.link;N&&(I.fcmOptions.link=N);const K=S.fcmOptions.analytics_label;K&&(I.fcmOptions.analyticsLabel=K)}(S,I),S}function ju(I){return"object"==typeof I&&!!I&&Ra in I}function Kd(I,S){const N=[];for(let K=0;K<I.length;K++)N.push(I.charAt(K)),K<S.length&&N.push(S.charAt(K));return N.join("")}function qs(I){return Fn.create("missing-app-config-values",{valueName:I})}Kd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Kd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class zi{constructor(S,N,K){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ue=function yg(I){if(!I||!I.options)throw qs("App Configuration Object");if(!I.name)throw qs("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:N}=I;for(const K of S)if(!N[K])throw qs(K);return{appName:I.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ue,installations:N,analyticsProvider:K}}_delete(){return Promise.resolve()}}function Mr(I){return wc.apply(this,arguments)}function wc(){return(wc=(0,x.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register($d,{scope:ji}),I.swRegistration.update().catch(()=>{})}catch(S){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function xo(I,S){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,x.Z)(function*(I,S){if(!S&&!I.swRegistration&&(yield Mr(I)),S||!I.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");I.swRegistration=S}})).apply(this,arguments)}function Gu(I,S){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,x.Z)(function*(I,S){S?I.vapidKey=S:I.vapidKey||(I.vapidKey=Wo)})).apply(this,arguments)}function zu(){return(zu=(0,x.Z)(function*(I,S){if(!navigator)throw Fn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Fn.create("permission-blocked");return yield Gu(I,null==S?void 0:S.vapidKey),yield xo(I,null==S?void 0:S.serviceWorkerRegistration),Ml(I)})).apply(this,arguments)}function Ba(I,S,N){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,x.Z)(function*(I,S,N){const K=Tc(S);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(K,{message_id:N[Ra],message_name:N[Wd],message_time:N[Qf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tc(I){switch(I){case Oa.NOTIFICATION_CLICKED:return"notification_open";case Oa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xd(){return(Xd=(0,x.Z)(function*(I,S){const N=S.data;if(!N.isFirebaseMessaging)return;I.onMessageHandler&&N.messageType===Oa.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Xo(N)):I.onMessageHandler.next(Xo(N)));const K=N.data;ju(K)&&"1"===K[gr]&&(yield Ba(I,N.messageType,K))})).apply(this,arguments)}const Ic="@firebase/messaging",Jd=I=>{const S=new zi(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Qd(I,S){return Xd.apply(this,arguments)}(S,N)),S},Va=I=>{const S=I.getProvider("messaging").getImmediate();return{getToken:K=>function Ec(I,S){return zu.apply(this,arguments)}(S,K)}};function Sc(){return _r.apply(this,arguments)}function _r(){return(_r=(0,x.Z)(function*(){try{yield(0,U.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,U.hl)()&&(0,U.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function eh(){(0,V._registerComponent)(new W.wA("messaging",Jd,"PUBLIC")),(0,V._registerComponent)(new W.wA("messaging-internal",Va,"PRIVATE")),(0,V.registerVersion)(Ic,"0.9.13"),(0,V.registerVersion)(Ic,"0.9.13","esm2017")}();const nh="analytics",bg="firebase_id",$s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ta="https://www.googletagmanager.com/gtag/js",di=new G.Yd("@firebase/analytics");function ih(I){return Promise.all(I.map(S=>S.catch(N=>N)))}function wg(I,S){const N=document.createElement("script");N.src=`${ta}?l=${I}&id=${S}`,N.async=!0,document.head.appendChild(N)}function Ua(I,S,N,K,ue,be){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,x.Z)(function*(I,S,N,K,ue,be){const Ue=K[ue];try{if(Ue)yield S[Ue];else{const st=(yield ih(N)).find(dt=>dt.measurementId===ue);st&&(yield S[st.appId])}}catch(rt){di.error(rt)}I("config",ue,be)})).apply(this,arguments)}function $u(I,S,N,K,ue){return Es.apply(this,arguments)}function Es(){return(Es=(0,x.Z)(function*(I,S,N,K,ue){try{let be=[];if(ue&&ue.send_to){let Ue=ue.send_to;Array.isArray(Ue)||(Ue=[Ue]);const rt=yield ih(N);for(const st of Ue){const dt=rt.find(Dt=>Dt.measurementId===st),Vt=dt&&S[dt.appId];if(!Vt){be=[];break}be.push(Vt)}}0===be.length&&(be=Object.values(S)),yield Promise.all(be),I("event",K,ue||{})}catch(be){di.error(be)}})).apply(this,arguments)}function rh(){const I=window.document.getElementsByTagName("script");for(const S of Object.values(I))if(S.src&&S.src.includes(ta))return S;return null}const Jn=new U.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ha=new class Qr{constructor(S={},N=1e3){this.throttleMetadata=S,this.intervalMillis=N}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,N){this.throttleMetadata[S]=N}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function _t(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Kt(I){return kr.apply(this,arguments)}function kr(){return(kr=(0,x.Z)(function*(I){var S;const{appId:N,apiKey:K}=I,ue={method:"GET",headers:_t(K)},be=$s.replace("{app-id}",N),Ue=yield fetch(be,ue);if(200!==Ue.status&&304!==Ue.status){let rt="";try{const st=yield Ue.json();(null===(S=st.error)||void 0===S?void 0:S.message)&&(rt=st.error.message)}catch(st){}throw Jn.create("config-fetch-failed",{httpStatus:Ue.status,responseMessage:rt})}return Ue.json()})).apply(this,arguments)}function Rt(I){return ia.apply(this,arguments)}function ia(){return(ia=(0,x.Z)(function*(I,S=Ha,N){const{appId:K,apiKey:ue,measurementId:be}=I.options;if(!K)throw Jn.create("no-app-id");if(!ue){if(be)return{measurementId:be,appId:K};throw Jn.create("no-api-key")}const Ue=S.getThrottleMetadata(K)||{backoffCount:0,throttleEndTimeMillis:Date.now()},rt=new Wu;return setTimeout((0,x.Z)(function*(){rt.abort()}),void 0!==N?N:6e4),Ws({appId:K,apiKey:ue,measurementId:be},Ue,rt,S)})).apply(this,arguments)}function Ws(I,S,N){return Ol.apply(this,arguments)}function Ol(){return(Ol=(0,x.Z)(function*(I,{throttleEndTimeMillis:S,backoffCount:N},K,ue=Ha){const{appId:be,measurementId:Ue}=I;try{yield Pl(K,S)}catch(rt){if(Ue)return di.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${rt.message}]`),{appId:be,measurementId:Ue};throw rt}try{const rt=yield Kt(I);return ue.deleteThrottleMetadata(be),rt}catch(rt){if(!ep(rt)){if(ue.deleteThrottleMetadata(be),Ue)return di.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ue} provided in the "measurementId" field in the local Firebase config. [${rt.message}]`),{appId:be,measurementId:Ue};throw rt}const st=503===Number(rt.customData.httpStatus)?(0,U.$s)(N,ue.intervalMillis,30):(0,U.$s)(N,ue.intervalMillis),dt={throttleEndTimeMillis:Date.now()+st,backoffCount:N+1};return ue.setThrottleMetadata(be,dt),di.debug(`Calling attemptFetch again in ${st} millis`),Ws(I,dt,K,ue)}})).apply(this,arguments)}function Pl(I,S){return new Promise((N,K)=>{const ue=Math.max(S-Date.now(),0),be=setTimeout(N,ue);I.addEventListener(()=>{clearTimeout(be),K(Jn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function ep(I){if(!(I instanceof U.ZR&&I.customData))return!1;const S=Number(I.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Wu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function ja(){return xc.apply(this,arguments)}function xc(){return(xc=(0,x.Z)(function*(){if(!(0,U.hl)())return di.warn(Jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,U.eu)()}catch(I){return di.warn(Jn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Lt(){return(Lt=(0,x.Z)(function*(I,S,N,K,ue,be,Ue){var rt;const st=Rt(I);st.then(ti=>{N[ti.measurementId]=ti.appId,I.options.measurementId&&ti.measurementId!==I.options.measurementId&&di.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${ti.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ti=>di.error(ti)),S.push(st);const dt=ja().then(ti=>{if(ti)return K.getId()}),[Vt,Dt]=yield Promise.all([st,dt]);rh()||wg(be,Vt.measurementId),ue("js",new Date);const hi=null!==(rt=null==Ue?void 0:Ue.config)&&void 0!==rt?rt:{};return hi.origin="firebase",hi.update=!0,null!=Dt&&(hi[bg]=Dt),ue("config",Vt.measurementId,hi),Vt.measurementId})).apply(this,arguments)}class Ts{constructor(S){this.app=S}_delete(){return delete Mi[this.app.options.appId],Promise.resolve()}}let Mi={},Nl=[];const Mc={};let Zu,Mo,Ga="dataLayer",kc=!1;function Oc(I,S,N){!function Rc(){const I=[];if((0,U.ru)()&&I.push("This is a browser extension environment."),(0,U.zI)()||I.push("Cookies are not available."),I.length>0){const S=I.map((K,ue)=>`(${ue+1}) ${K}`).join(" "),N=Jn.create("invalid-analytics-context",{errorInfo:S});di.warn(N.message)}}();const K=I.options.appId;if(!K)throw Jn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Jn.create("no-api-key");di.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Mi[K])throw Jn.create("already-exists",{id:K});if(!kc){!function na(I){let S=[];Array.isArray(window[I])?S=window[I]:window[I]=S}(Ga);const{wrappedGtag:be,gtagCore:Ue}=function Cg(I,S,N,K,ue){let be=function(...Ue){window[K].push(arguments)};return window[ue]&&"function"==typeof window[ue]&&(be=window[ue]),window[ue]=function Rl(I,S,N,K){function be(){return(be=(0,x.Z)(function*(Ue,rt,st){try{"event"===Ue?yield $u(I,S,N,rt,st):"config"===Ue?yield Ua(I,S,N,K,rt,st):I("set",rt)}catch(dt){di.error(dt)}})).apply(this,arguments)}return function ue(Ue,rt,st){return be.apply(this,arguments)}}(be,I,S,N),{gtagCore:be,wrappedGtag:window[ue]}}(Mi,Nl,Mc,Ga,"gtag");Mo=be,Zu=Ue,kc=!0}return Mi[K]=function Ds(I,S,N,K,ue,be,Ue){return Lt.apply(this,arguments)}(I,Nl,Mc,S,Zu,Ga,N),new Ts(I)}function Pc(){return(Pc=(0,x.Z)(function*(I,S,N,K,ue){if(ue&&ue.global)I("event",N,K);else{const be=yield S;I("event",N,Object.assign(Object.assign({},K),{send_to:be}))}})).apply(this,arguments)}function qa(){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,x.Z)(function*(){if((0,U.ru)()||!(0,U.zI)()||!(0,U.hl)())return!1;try{return yield(0,U.eu)()}catch(I){return!1}})).apply(this,arguments)}const np="@firebase/analytics";!function Ig(){(0,V._registerComponent)(new W.wA(nh,(S,{options:N})=>Oc(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,V._registerComponent)(new W.wA("analytics-internal",function I(S){try{const N=S.getProvider(nh).getImmediate();return{logEvent:(K,ue,be)=>function tp(I,S,N,K){I=(0,U.m9)(I),function Ll(I,S,N,K,ue){return Pc.apply(this,arguments)}(Mo,Mi[I.app.options.appId],S,N,K).catch(ue=>di.error(ue))}(N,K,ue,be)}}catch(N){throw Jn.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,V.registerVersion)(np,"0.7.9"),(0,V.registerVersion)(np,"0.7.9","esm2017")}();var ip=O(4408),lh=O(7565);const ra=new class ei extends lh.v{}(class Vc extends ip.o{constructor(S,N){super(S,N),this.scheduler=S,this.work=N}schedule(S,N=0){return N>0?super.schedule(S,N):(this.delay=N,this.state=S,this.scheduler.flush(this),this)}execute(S,N){return N>0||this.closed?super.execute(S,N):this._execute(S,N)}requestAsyncId(S,N,K=0){return null!=K&&K>0||null==K&&this.delay>0?super.requestAsyncId(S,N,K):S.flush(this)}});var Ku=O(4986),Qu=O(8505),vi=O(5363),qi=O(9468);const ki=new o.GfV("7.3.0"),sa="__angularfire_symbol__analyticsIsSupportedValue",Jr="__angularfire_symbol__analyticsIsSupported",Ys="__angularfire_symbol__remoteConfigIsSupportedValue",Is="__angularfire_symbol__remoteConfigIsSupported",oa="__angularfire_symbol__messagingIsSupportedValue",rp="__angularfire_symbol__messagingIsSupported";function $a(I,S,N){if(S){if(1===S.length)return S[0];const be=S.filter(Ue=>Ue.app===N);if(1===be.length)return be[0]}return N.container.getProvider(I).getImmediate({optional:!0})}globalThis[Jr]||(globalThis[Jr]=qa().then(I=>globalThis[sa]=I).catch(()=>globalThis[sa]=!1)),globalThis[rp]||(globalThis[rp]=Sc().then(I=>globalThis[oa]=I).catch(()=>globalThis[oa]=!1)),globalThis[Is]||(globalThis[Is]=gc().then(I=>globalThis[Ys]=I).catch(()=>globalThis[Ys]=!1));const sp=(I,S)=>{const N=S?[S]:(0,B.C6)(),K=[];return N.forEach(ue=>{ue.container.getProvider(I).instances.forEach(Ue=>{K.includes(Ue)||K.push(Ue)})}),K};function Ss(){}class op{constructor(S,N=ra){this.zone=S,this.delegate=N}now(){return this.delegate.now()}schedule(S,N,K){const ue=this.zone;return this.delegate.schedule(function(Ue){ue.runGuarded(()=>{S.apply(this,[Ue])})},N,K)}}class Hc{constructor(S){this.zone=S,this.task=null}call(S,N){const K=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ss,{},Ss,Ss)),N.pipe((0,Qu.b)({next:K,complete:K,error:K})).subscribe(S).add(K)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xu=(()=>{class I{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new op(Zone.current)),this.insideAngular=N.run(()=>new op(Zone.current,Ku.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(N){return new(N||I)(o.LFG(o.R0b))},I.\u0275prov=o.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Ks(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Qs(I){return I.pipe((0,vi.Q)(Ks().outsideAngular))}function Gc(I){return Ks(),function As(I){return function(N){return(N=N.lift(new Hc(I.ngZone))).pipe((0,qi.R)(I.outsideAngular),(0,vi.Q)(I.insideAngular))}}(Ks())(I)}},2090:(Ve,$,O)=>{"use strict";O.d($,{$s:()=>Yt,BH:()=>ke,DV:()=>Zt,Dv:()=>wo,G6:()=>Ae,GJ:()=>sn,L:()=>Y,LL:()=>ve,Mn:()=>he,Pz:()=>jt,Sg:()=>ye,UG:()=>de,UI:()=>Hn,US:()=>W,Wj:()=>Gn,Yr:()=>Re,ZB:()=>Q,ZR:()=>pe,b$:()=>Fe,cI:()=>zt,d:()=>xe,dS:()=>Go,eu:()=>ge,g5:()=>x,gK:()=>hr,gQ:()=>dr,h$:()=>G,hl:()=>q,hu:()=>B,jU:()=>_e,lb:()=>Ir,m9:()=>Ui,ne:()=>fs,p$:()=>Z,pd:()=>bo,r3:()=>ai,ru:()=>Pe,tV:()=>se,uI:()=>je,ug:()=>Jt,vZ:()=>Yn,w1:()=>De,w9:()=>ln,xO:()=>Ki,xb:()=>xt,z$:()=>Me,zI:()=>X,zd:()=>hs});const B=function(J,ie){if(!J)throw x(ie)},x=function(J){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+J)},V=function(J){const ie=[];let ae=0;for(let Ne=0;Ne<J.length;Ne++){let ne=J.charCodeAt(Ne);ne<128?ie[ae++]=ne:ne<2048?(ie[ae++]=ne>>6|192,ie[ae++]=63&ne|128):55296==(64512&ne)&&Ne+1<J.length&&56320==(64512&J.charCodeAt(Ne+1))?(ne=65536+((1023&ne)<<10)+(1023&J.charCodeAt(++Ne)),ie[ae++]=ne>>18|240,ie[ae++]=ne>>12&63|128,ie[ae++]=ne>>6&63|128,ie[ae++]=63&ne|128):(ie[ae++]=ne>>12|224,ie[ae++]=ne>>6&63|128,ie[ae++]=63&ne|128)}return ie},W={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(J,ie){if(!Array.isArray(J))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ae=ie?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ne=[];for(let ne=0;ne<J.length;ne+=3){const me=J[ne],He=ne+1<J.length,nt=He?J[ne+1]:0,vt=ne+2<J.length,Mt=vt?J[ne+2]:0;let li=(15&nt)<<2|Mt>>6,Qi=63&Mt;vt||(Qi=64,He||(li=64)),Ne.push(ae[me>>2],ae[(3&me)<<4|nt>>4],ae[li],ae[Qi])}return Ne.join("")},encodeString(J,ie){return this.HAS_NATIVE_SUPPORT&&!ie?btoa(J):this.encodeByteArray(V(J),ie)},decodeString(J,ie){return this.HAS_NATIVE_SUPPORT&&!ie?atob(J):function(J){const ie=[];let ae=0,Ne=0;for(;ae<J.length;){const ne=J[ae++];if(ne<128)ie[Ne++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const me=J[ae++];ie[Ne++]=String.fromCharCode((31&ne)<<6|63&me)}else if(ne>239&&ne<365){const vt=((7&ne)<<18|(63&J[ae++])<<12|(63&J[ae++])<<6|63&J[ae++])-65536;ie[Ne++]=String.fromCharCode(55296+(vt>>10)),ie[Ne++]=String.fromCharCode(56320+(1023&vt))}else{const me=J[ae++],He=J[ae++];ie[Ne++]=String.fromCharCode((15&ne)<<12|(63&me)<<6|63&He)}}return ie.join("")}(this.decodeStringToByteArray(J,ie))},decodeStringToByteArray(J,ie){this.init_();const ae=ie?this.charToByteMapWebSafe_:this.charToByteMap_,Ne=[];for(let ne=0;ne<J.length;){const me=ae[J.charAt(ne++)],nt=ne<J.length?ae[J.charAt(ne)]:0;++ne;const Mt=ne<J.length?ae[J.charAt(ne)]:64;++ne;const It=ne<J.length?ae[J.charAt(ne)]:64;if(++ne,null==me||null==nt||null==Mt||null==It)throw Error();Ne.push(me<<2|nt>>4),64!==Mt&&(Ne.push(nt<<4&240|Mt>>2),64!==It&&Ne.push(Mt<<6&192|It))}return Ne},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let J=0;J<this.ENCODED_VALS.length;J++)this.byteToCharMap_[J]=this.ENCODED_VALS.charAt(J),this.charToByteMap_[this.byteToCharMap_[J]]=J,this.byteToCharMapWebSafe_[J]=this.ENCODED_VALS_WEBSAFE.charAt(J),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[J]]=J,J>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(J)]=J,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(J)]=J)}}},G=function(J){const ie=V(J);return W.encodeByteArray(ie,!0)},Y=function(J){return G(J).replace(/\./g,"")},se=function(J){try{return W.decodeString(J,!0)}catch(ie){console.error("base64Decode failed: ",ie)}return null};function Z(J){return Q(void 0,J)}function Q(J,ie){if(!(ie instanceof Object))return ie;switch(ie.constructor){case Date:return new Date(ie.getTime());case Object:void 0===J&&(J={});break;case Array:J=[];break;default:return ie}for(const ae in ie)!ie.hasOwnProperty(ae)||!ee(ae)||(J[ae]=Q(J[ae],ie[ae]));return J}function ee(J){return"__proto__"!==J}class ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ie,ae)=>{this.resolve=ie,this.reject=ae})}wrapCallback(ie){return(ae,Ne)=>{ae?this.reject(ae):this.resolve(Ne),"function"==typeof ie&&(this.promise.catch(()=>{}),1===ie.length?ie(ae):ie(ae,Ne))}}}function ye(J,ie){if(J.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ne=ie||"demo-project",ne=J.iat||0,me=J.sub||J.user_id;if(!me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const He=Object.assign({iss:`https://securetoken.google.com/${Ne}`,aud:Ne,iat:ne,exp:ne+3600,auth_time:ne,sub:me,user_id:me,firebase:{sign_in_provider:"custom",identities:{}}},J);return[Y(JSON.stringify({alg:"none",type:"JWT"})),Y(JSON.stringify(He)),""].join(".")}function Me(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function de(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(J){return!1}}function _e(){return"object"==typeof self&&self.self===self}function Pe(){const J="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof J&&void 0!==J.id}function Fe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function xe(){return Me().indexOf("Electron/")>=0}function De(){const J=Me();return J.indexOf("MSIE ")>=0||J.indexOf("Trident/")>=0}function he(){return Me().indexOf("MSAppHost/")>=0}function Re(){return!1}function Ae(){return!de()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function q(){return"object"==typeof indexedDB}function ge(){return new Promise((J,ie)=>{try{let ae=!0;const Ne="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ne);ne.onsuccess=()=>{ne.result.close(),ae||self.indexedDB.deleteDatabase(Ne),J(!0)},ne.onupgradeneeded=()=>{ae=!1},ne.onerror=()=>{var me;ie((null===(me=ne.error)||void 0===me?void 0:me.message)||"")}}catch(ae){ie(ae)}})}function X(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(ie,ae,Ne){super(ae),this.code=ie,this.customData=Ne,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ve.prototype.create)}}class ve{constructor(ie,ae,Ne){this.service=ie,this.serviceName=ae,this.errors=Ne}create(ie,...ae){const Ne=ae[0]||{},ne=`${this.service}/${ie}`,me=this.errors[ie],He=me?function ze(J,ie){return J.replace(ft,(ae,Ne)=>{const ne=ie[Ne];return null!=ne?String(ne):`<${Ne}?>`})}(me,Ne):"Error";return new pe(ne,`${this.serviceName}: ${He} (${ne}).`,Ne)}}const ft=/\{\$([^}]+)}/g;function zt(J){return JSON.parse(J)}function jt(J){return JSON.stringify(J)}const Ye=function(J){let ie={},ae={},Ne={},ne="";try{const me=J.split(".");ie=zt(se(me[0])||""),ae=zt(se(me[1])||""),ne=me[2],Ne=ae.d||{},delete ae.d}catch(me){}return{header:ie,claims:ae,data:Ne,signature:ne}},ln=function(J){const ae=Ye(J).claims;return!!ae&&"object"==typeof ae&&ae.hasOwnProperty("iat")},sn=function(J){const ie=Ye(J).claims;return"object"==typeof ie&&!0===ie.admin};function ai(J,ie){return Object.prototype.hasOwnProperty.call(J,ie)}function Zt(J,ie){if(Object.prototype.hasOwnProperty.call(J,ie))return J[ie]}function xt(J){for(const ie in J)if(Object.prototype.hasOwnProperty.call(J,ie))return!1;return!0}function Hn(J,ie,ae){const Ne={};for(const ne in J)Object.prototype.hasOwnProperty.call(J,ne)&&(Ne[ne]=ie.call(ae,J[ne],ne,J));return Ne}function Yn(J,ie){if(J===ie)return!0;const ae=Object.keys(J),Ne=Object.keys(ie);for(const ne of ae){if(!Ne.includes(ne))return!1;const me=J[ne],He=ie[ne];if(Kn(me)&&Kn(He)){if(!Yn(me,He))return!1}else if(me!==He)return!1}for(const ne of Ne)if(!ae.includes(ne))return!1;return!0}function Kn(J){return null!==J&&"object"==typeof J}function Ki(J){const ie=[];for(const[ae,Ne]of Object.entries(J))Array.isArray(Ne)?Ne.forEach(ne=>{ie.push(encodeURIComponent(ae)+"="+encodeURIComponent(ne))}):ie.push(encodeURIComponent(ae)+"="+encodeURIComponent(Ne));return ie.length?"&"+ie.join("&"):""}function hs(J){const ie={};return J.replace(/^\?/,"").split("&").forEach(Ne=>{if(Ne){const[ne,me]=Ne.split("=");ie[decodeURIComponent(ne)]=decodeURIComponent(me)}}),ie}function bo(J){const ie=J.indexOf("?");if(!ie)return"";const ae=J.indexOf("#",ie);return J.substring(ie,ae>0?ae:void 0)}class dr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ie=1;ie<this.blockSize;++ie)this.pad_[ie]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ie,ae){ae||(ae=0);const Ne=this.W_;if("string"==typeof ie)for(let It=0;It<16;It++)Ne[It]=ie.charCodeAt(ae)<<24|ie.charCodeAt(ae+1)<<16|ie.charCodeAt(ae+2)<<8|ie.charCodeAt(ae+3),ae+=4;else for(let It=0;It<16;It++)Ne[It]=ie[ae]<<24|ie[ae+1]<<16|ie[ae+2]<<8|ie[ae+3],ae+=4;for(let It=16;It<80;It++){const li=Ne[It-3]^Ne[It-8]^Ne[It-14]^Ne[It-16];Ne[It]=4294967295&(li<<1|li>>>31)}let Mt,In,ne=this.chain_[0],me=this.chain_[1],He=this.chain_[2],nt=this.chain_[3],vt=this.chain_[4];for(let It=0;It<80;It++){It<40?It<20?(Mt=nt^me&(He^nt),In=1518500249):(Mt=me^He^nt,In=1859775393):It<60?(Mt=me&He|nt&(me|He),In=2400959708):(Mt=me^He^nt,In=3395469782);const li=(ne<<5|ne>>>27)+Mt+vt+In+Ne[It]&4294967295;vt=nt,nt=He,He=4294967295&(me<<30|me>>>2),me=ne,ne=li}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+me&4294967295,this.chain_[2]=this.chain_[2]+He&4294967295,this.chain_[3]=this.chain_[3]+nt&4294967295,this.chain_[4]=this.chain_[4]+vt&4294967295}update(ie,ae){if(null==ie)return;void 0===ae&&(ae=ie.length);const Ne=ae-this.blockSize;let ne=0;const me=this.buf_;let He=this.inbuf_;for(;ne<ae;){if(0===He)for(;ne<=Ne;)this.compress_(ie,ne),ne+=this.blockSize;if("string"==typeof ie){for(;ne<ae;)if(me[He]=ie.charCodeAt(ne),++He,++ne,He===this.blockSize){this.compress_(me),He=0;break}}else for(;ne<ae;)if(me[He]=ie[ne],++He,++ne,He===this.blockSize){this.compress_(me),He=0;break}}this.inbuf_=He,this.total_+=ae}digest(){const ie=[];let ae=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&ae,ae/=256;this.compress_(this.buf_);let Ne=0;for(let ne=0;ne<5;ne++)for(let me=24;me>=0;me-=8)ie[Ne]=this.chain_[ne]>>me&255,++Ne;return ie}}function fs(J,ie){const ae=new wt(J,ie);return ae.subscribe.bind(ae)}class wt{constructor(ie,ae){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ae,this.task.then(()=>{ie(this)}).catch(Ne=>{this.error(Ne)})}next(ie){this.forEachObserver(ae=>{ae.next(ie)})}error(ie){this.forEachObserver(ae=>{ae.error(ie)}),this.close(ie)}complete(){this.forEachObserver(ie=>{ie.complete()}),this.close()}subscribe(ie,ae,Ne){let ne;if(void 0===ie&&void 0===ae&&void 0===Ne)throw new Error("Missing Observer.");ne=function Ln(J,ie){if("object"!=typeof J||null===J)return!1;for(const ae of ie)if(ae in J&&"function"==typeof J[ae])return!0;return!1}(ie,["next","error","complete"])?ie:{next:ie,error:ae,complete:Ne},void 0===ne.next&&(ne.next=jn),void 0===ne.error&&(ne.error=jn),void 0===ne.complete&&(ne.complete=jn);const me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(He){}}),this.observers.push(ne),me}unsubscribeOne(ie){void 0===this.observers||void 0===this.observers[ie]||(delete this.observers[ie],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ie){if(!this.finalized)for(let ae=0;ae<this.observers.length;ae++)this.sendOne(ae,ie)}sendOne(ie,ae){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ie])try{ae(this.observers[ie])}catch(Ne){"undefined"!=typeof console&&console.error&&console.error(Ne)}})}close(ie){this.finalized||(this.finalized=!0,void 0!==ie&&(this.finalError=ie),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jn(){}const wo=function(J,ie,ae,Ne){let ne;if(Ne<ie?ne="at least "+ie:Ne>ae&&(ne=0===ae?"none":"no more than "+ae),ne)throw new Error(J+" failed: Was called with "+Ne+(1===Ne?" argument.":" arguments.")+" Expects "+ne+".")};function hr(J,ie){return`${J} failed: ${ie} argument `}function Gn(J,ie,ae,Ne){if((!Ne||ae)&&"function"!=typeof ae)throw new Error(hr(J,ie)+"must be a valid function.")}function Ir(J,ie,ae,Ne){if((!Ne||ae)&&("object"!=typeof ae||null===ae))throw new Error(hr(J,ie)+"must be a valid context object.")}const Go=function(J){const ie=[];let ae=0;for(let Ne=0;Ne<J.length;Ne++){let ne=J.charCodeAt(Ne);if(ne>=55296&&ne<=56319){const me=ne-55296;Ne++,B(Ne<J.length,"Surrogate pair missing trail surrogate."),ne=65536+(me<<10)+(J.charCodeAt(Ne)-56320)}ne<128?ie[ae++]=ne:ne<2048?(ie[ae++]=ne>>6|192,ie[ae++]=63&ne|128):ne<65536?(ie[ae++]=ne>>12|224,ie[ae++]=ne>>6&63|128,ie[ae++]=63&ne|128):(ie[ae++]=ne>>18|240,ie[ae++]=ne>>12&63|128,ie[ae++]=ne>>6&63|128,ie[ae++]=63&ne|128)}return ie},Jt=function(J){let ie=0;for(let ae=0;ae<J.length;ae++){const Ne=J.charCodeAt(ae);Ne<128?ie++:Ne<2048?ie+=2:Ne>=55296&&Ne<=56319?(ie+=4,ae++):ie+=3}return ie};function Yt(J,ie=1e3,ae=2){const Ne=ie*Math.pow(ae,J),ne=Math.round(.5*Ne*(Math.random()-.5)*2);return Math.min(144e5,Ne+ne)}function Ui(J){return J&&J._delegate?J._delegate:J}},7520:(Ve,$,O)=>{"use strict";var o=O(5e3);let B=null;function x(){return B}const G=new o.OlP("DocumentToken");let Y=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function se(){return(0,o.LFG)(Q)}()},providedIn:"platform"}),n})();const Z=new o.OlP("Location Initialized");let Q=(()=>{class n extends Y{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return x().getBaseHref(this._doc)}onPopState(e){const i=x().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=x().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){ee()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){ee()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function ke(){return new Q((0,o.LFG)(G))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function ye(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function Me(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function _e(n){const t=(0,o.LFG)(G).location;return new Fe((0,o.LFG)(Y),t&&t.origin||"")}()},providedIn:"root"}),n})();const Pe=new o.OlP("appBaseHref");let Fe=(()=>{class n extends de{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ye(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+je(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+je(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+je(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Y),o.LFG(Pe,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n extends de{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=ye(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+je(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+je(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Y),o.LFG(Pe,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),De=(()=>{class n{constructor(e,i){this._subject=new o.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Me(Ae(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+je(i))}normalize(e){return n.stripTrailingSlash(function Re(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,Ae(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+je(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+je(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=je,n.joinWithSlash=ye,n.stripTrailingSlash=Me,n.\u0275fac=function(e){return new(e||n)(o.LFG(de),o.LFG(Y))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function he(){return new De((0,o.LFG)(de),(0,o.LFG)(Y))}()},providedIn:"root"}),n})();function Ae(n){return n.replace(/\/index.html$/,"")}let gs=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,o.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,o.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Eo{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Nn=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Eo(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),$o(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{$o(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function $o(n,t){n.context.$implicit=t.item}let un=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new vn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){pc("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){pc("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class vn{constructor(){this.$implicit=null,this.ngIf=null}}function pc(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}class Tl{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Ji=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const i=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let i=0;i<this._defaultViews.length;i++)this._defaultViews[i].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),Zr=(()=>{class n{constructor(e,i,r){this.ngSwitch=r,r._addCase(),this._view=new Tl(e,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(Ji,9))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),gr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Zo="browser";function Pa(n){return"server"===n}let Pu=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new Na((0,o.LFG)(G),window)}),n})();class Na{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function bs(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=Nu(this.window.history)||Nu(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function Nu(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Yo extends class Sl extends class W{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function U(n){B||(B=n)}(new Yo)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function Al(){return dn=dn||document.querySelector("base"),dn?dn.getAttribute("href"):null}();return null==e?null:function So(n){_c=_c||document.createElement("a"),_c.setAttribute("href",n);const t=_c.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){dn=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function Dl(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let _c,dn=null;const Ai=new o.OlP("TRANSITION_ID"),Fn=[{provide:o.ip1,useFactory:function Fu(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=x(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Ai,G,o.zs3],multi:!0}];class ws{static init(){(0,o.VLi)(new ws)}addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?x().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let xi=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ko=new o.OlP("EventManagerPlugins");let zs=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Ko),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class xl{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=x().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Yr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Cs=(()=>{class n extends Yr{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Fa),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Fa))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Fa(n){x().remove(n)}const Ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ao=/%COMP%/g;function La(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?La(n,r,e):(r=r.replace(Ao,n),e.push(r))}return e}function Le(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let Qo=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new kn(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new xr(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new Uu(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=La(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zs),o.LFG(Cs),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class kn{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Ct[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Ct[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Ct[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Le(i)):this.eventManager.addEventListener(t,e,Le(i))}}class xr extends kn{constructor(t,e,i,r){super(t),this.component=i;const s=La(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function vc(n){return"_ngcontent-%COMP%".replace(Ao,n)}(r+"-"+i.id),this.hostAttr=function Vu(n){return"_nghost-%COMP%".replace(Ao,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class Uu extends kn{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=La(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Hu=(()=>{class n extends xl{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const ju=["alt","control","meta","shift"],yg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},zi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mr=(()=>{class n extends xl{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>x().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="";if(ju.forEach(p=>{const y=i.indexOf(p);y>-1&&(i.splice(y,1),c+=p+".")}),c+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=c,d}static getEventFullKey(e){let i="",r=function wc(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&qs.hasOwnProperty(t)&&(t=qs[t]))}return yg[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),ju.forEach(s=>{s!=r&&zi[s](e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ec=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:Zo},{provide:o.g9A,useValue:function xo(){Yo.makeCurrent(),ws.init()},multi:!0},{provide:G,useFactory:function Gu(){return(0,o.RDi)(document),document},deps:[]}]),zu=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function Kr(){return new o.qLn},deps:[]},{provide:Ko,useClass:Hu,multi:!0,deps:[G,o.R0b,o.Lbi]},{provide:Ko,useClass:Mr,multi:!0,deps:[G]},{provide:Qo,useClass:Qo,deps:[zs,Cs,o.AFp]},{provide:o.FYo,useExisting:Qo},{provide:Yr,useExisting:Cs},{provide:Cs,useClass:Cs,deps:[G]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b]},{provide:zs,useClass:zs,deps:[Ko,o.R0b]},{provide:class bn{},useClass:xi,deps:[]}];let Ba=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:Ai,useExisting:o.AFp},Fn]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(n,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:zu,imports:[gr,o.hGG]}),n})();"undefined"!=typeof window&&window;let $u=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):o.LFG(Rl),i},providedIn:"root"}),n})(),Rl=(()=>{class n extends $u{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case o.q3G.NONE:return i;case o.q3G.HTML:return(0,o.qzn)(i,"HTML")?(0,o.z3N)(i):(0,o.EiD)(this._doc,String(i)).toString();case o.q3G.STYLE:return(0,o.qzn)(i,"Style")?(0,o.z3N)(i):i;case o.q3G.SCRIPT:if((0,o.qzn)(i,"Script"))return(0,o.z3N)(i);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.yhl)(i),(0,o.qzn)(i,"URL")?(0,o.z3N)(i):(0,o.mCW)(String(i));case o.q3G.RESOURCE_URL:if((0,o.qzn)(i,"ResourceURL"))return(0,o.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,o.JVY)(e)}bypassSecurityTrustStyle(e){return(0,o.L6k)(e)}bypassSecurityTrustScript(e){return(0,o.eBb)(e)}bypassSecurityTrustUrl(e){return(0,o.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,o.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function Es(n){return new Rl(n.get(G))}(o.LFG(o.zs3)),i},providedIn:"root"}),n})();class rh{}const Jn="*";function Rn(n,t){return{type:7,name:n,definitions:t,options:{}}}function Dn(n,t=null){return{type:4,styles:t,timings:n}}function Qr(n,t=null){return{type:3,steps:n,options:t}}function Ha(n,t=null){return{type:2,steps:n,options:t}}function _t(n){return{type:6,styles:n,offset:null}}function Kt(n,t,e){return{type:0,name:n,styles:t,options:e}}function Rt(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Ws(n=null){return{type:9,options:n}}function Pl(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function Wu(n){Promise.resolve(null).then(n)}class ja{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Wu(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class xc{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?Wu(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const Lt=!1;function Mi(n){return new o.vHH(3e3,Lt)}function ei(){return"undefined"!=typeof window&&void 0!==window.document}function ra(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Xr(n){switch(n.length){case 0:return new ja;case 1:return n[0];default:return new xc(n)}}function Ku(n,t,e,i,r={},s={}){const c=[],d=[];let p=-1,y=null;if(i.forEach(C=>{const D=C.offset,M=D==p,L=M&&y||{};Object.keys(C).forEach(j=>{let le=j,we=C[j];if("offset"!==j)switch(le=t.normalizePropertyName(le,c),we){case"!":we=r[j];break;case Jn:we=s[j];break;default:we=t.normalizeStyleValue(j,le,we,c)}L[le]=we}),M||d.push(L),y=L,p=D}),c.length)throw function Bc(n){return new o.vHH(3502,Lt)}();return d}function Qu(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&vi(e,"start",n)));break;case"done":n.onDone(()=>i(e&&vi(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&vi(e,"destroy",n)))}}function vi(n,t,e){const i=e.totalTime,s=qi(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function qi(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function ki(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function sa(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let Jr=(n,t)=>!1,Ys=(n,t,e)=>[],Is=null;function oa(n){const t=n.parentNode||n.host;return t===Is?null:t}(ra()||"undefined"!=typeof Element)&&(ei()?(Is=(()=>document.documentElement)(),Jr=(n,t)=>{for(;t;){if(t===n)return!0;t=oa(t)}return!1}):Jr=(n,t)=>n.contains(t),Ys=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let aa=null,$i=!1;function Uc(n){aa||(aa=function $a(){return"undefined"!=typeof document?document.body:null}()||{},$i=!!aa.style&&"WebkitAppearance"in aa.style);let t=!0;return aa.style&&!function ch(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in aa.style,!t&&$i&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in aa.style)),t}const sp=Jr,Ss=Ys;let Hc=(()=>{class n{validateStyleProperty(e){return Uc(e)}matchesElement(e,i){return!1}containsElement(e,i){return sp(e,i)}getParentElement(e){return oa(e)}query(e,i,r){return Ss(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],p){return new ja(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Xu=(()=>{class n{}return n.NOOP=new Hc,n})();const Qs="ng-enter",Wa="ng-leave",Gc="ng-trigger",As=".ng-trigger",Za="ng-animating",la=".ng-animating";function I(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:S(parseFloat(t[1]),t[2])}function S(n,t){return"s"===t?1e3*n:n}function N(n,t,e){return n.hasOwnProperty("duration")?n:function K(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(Mi()),{duration:0,delay:0,easing:""};r=S(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=S(parseFloat(p),d[4]));const y=d[5];y&&(c=y)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function Nl(){return new o.vHH(3100,Lt)}()),d=!0),s<0&&(t.push(function Mc(){return new o.vHH(3101,Lt)}()),d=!0),d&&t.splice(p,0,Mi())}return{duration:r,delay:s,easing:c}}(n,t,e)}function ue(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function Ue(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else ue(n,e);return e}function rt(n,t,e){return e?t+":"+e+";":""}function st(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=rt(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=rt(0,Ya(e),n.style[e]));n.setAttribute("style",t)}function dt(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=es(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),ra()&&st(n))}function Vt(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=es(e);n.style[i]=""}),ra()&&st(n))}function Dt(n){return Array.isArray(n)?1==n.length?n[0]:Ha(n):n}const ti=new RegExp("{{\\s*(.+?)\\s*}}","g");function ca(n){let t=[];if("string"==typeof n){let e;for(;e=ti.exec(n);)t.push(e[1]);ti.lastIndex=0}return t}function Xs(n,t,e){const i=n.toString(),r=i.replace(ti,(s,c)=>{let d=t[c];return t.hasOwnProperty(c)||(e.push(function Fl(n){return new o.vHH(3003,Lt)}()),d=""),d.toString()});return r==i?n:r}function yr(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const Rr=/-+([a-z0-9])/g;function es(n){return n.replace(Rr,(...t)=>t[1].toUpperCase())}function Ya(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function tr(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function Zu(n){return new o.vHH(3004,Lt)}()}}function Ju(n,t){return window.getComputedStyle(n)[t]}function xg(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function sE(n,t,e){if(":"==n[0]){const p=function uh(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function Ro(n){return new o.vHH(3016,Lt)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function za(n){return new o.vHH(3015,Lt)}()),t;const r=i[1],s=i[2],c=i[3];t.push(nd(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(nd(c,r))}(i,e,t)):e.push(n),e}const dh=new Set(["true","1"]),hh=new Set(["false","0"]);function nd(n,t){const e=dh.has(n)||hh.has(n),i=dh.has(t)||hh.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?dh.has(n):hh.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?dh.has(t):hh.has(t)),c&&d}}const Wc=new RegExp("s*:selfs*,?","g");function lp(n,t,e,i){return new oE(n).build(t,e,i)}class oE{constructor(t){this._driver=t}build(t,e,i){const r=new kg(e);this._resetContextStyleTimingState(r);const s=tr(this,Dt(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function kc(){return new o.vHH(3006,Lt)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,y=p.name;y.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,s.push(this.visitState(p,e))}),p.name=y}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,c.push(p)}else e.errors.push(function Dg(){return new o.vHH(3007,Lt)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{if(id(d)){const p=d;Object.keys(p).forEach(y=>{ca(p[y]).forEach(C=>{c.hasOwnProperty(C)||s.add(C)})})}}),s.size&&(yr(s.values()),e.errors.push(function Rc(n,t){return new o.vHH(3008,Lt)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=tr(this,Dt(t.animation),e);return{type:1,matchers:xg(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:Ka(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>tr(this,i,e)),options:Ka(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=tr(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:Ka(t.options)}}visitAnimate(t,e){const i=function Vl(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return up(N(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=up(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=N(e,t);return up(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:_t({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const y={};i.easing&&(y.easing=i.easing),c=_t(y)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(c=>{"string"==typeof c?c==Jn?i.push(c):e.errors.push(function Oc(n){return new o.vHH(3002,Lt)}()):i.push(c)}):i.push(t.styles);let r=!1,s=null;return i.forEach(c=>{if(id(c)){const d=c,p=d.easing;if(p&&(s=p,delete d.easing),!r)for(let y in d)if(d[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete c[d],void e.unsupportedCSSPropertiesFound.add(d);const p=e.collectedStyles[e.currentQuerySelector],y=p[d];let C=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(e.errors.push(function Pc(n,t,e,i,r){return new o.vHH(3010,Lt)}()),C=!1),s=y.startTime),C&&(p[d]={startTime:s,endTime:r}),e.options&&function hi(n,t,e){const i=t.params||{},r=ca(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function Ga(n){return new o.vHH(3001,Lt)}())})}(c[d],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function sh(){return new o.vHH(3011,Lt)}()),i;let s=0;const c=[];let d=!1,p=!1,y=0;const C=t.steps.map(Qe=>{const Je=this._makeStyleAst(Qe,e);let Ze=null!=Je.offset?Je.offset:function Rg(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(id(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(id(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(Je.styles),We=0;return null!=Ze&&(s++,We=Je.offset=Ze),p=p||We<0||We>1,d=d||We<y,y=We,c.push(We),Je});p&&e.errors.push(function ko(){return new o.vHH(3012,Lt)}()),d&&e.errors.push(function Nc(){return new o.vHH(3200,Lt)}());const D=t.steps.length;let M=0;s>0&&s<D?e.errors.push(function Bl(){return new o.vHH(3202,Lt)}()):0==s&&(M=1/(D-1));const L=D-1,j=e.currentTime,le=e.currentAnimateTimings,we=le.duration;return C.forEach((Qe,Je)=>{const Ze=M>0?Je==L?1:M*Je:c[Je],We=Ze*we;e.currentTime=j+le.delay+We,le.duration=We,this._validateStyleAst(Qe,e),Qe.offset=Ze,i.styles.push(Qe)}),i}visitReference(t,e){return{type:8,animation:tr(this,Dt(t.animation),e),options:Ka(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Ka(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Ka(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function Zc(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(Wc,"")),n=n.replace(/@\*/g,As).replace(/@\w+/g,e=>As+"-"+e.substr(1)).replace(/:animating/g,la),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,ki(e.collectedStyles,e.currentQuerySelector,{});const d=tr(this,Dt(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:Ka(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Fc(){return new o.vHH(3013,Lt)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:N(t.timings,e.errors,!0);return{type:12,animation:tr(this,Dt(t.animation),e),timings:i,options:null}}}class kg{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function id(n){return!Array.isArray(n)&&"object"==typeof n}function Ka(n){return n?(n=ue(n)).params&&(n.params=function cp(n){return n?ue(n):null}(n.params)):n={},n}function up(n,t,e){return{duration:n,delay:t,easing:e}}function dp(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class ph{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Yc=new RegExp(":enter","g"),Dv=new RegExp(":leave","g");function gh(n,t,e,i,r,s={},c={},d,p,y=[]){return(new Tv).buildKeyframes(n,t,e,i,r,s,c,d,p,y)}class Tv{buildKeyframes(t,e,i,r,s,c,d,p,y,C=[]){y=y||new ph;const D=new hp(t,e,y,r,s,C,[]);D.options=p,D.currentTimeline.setStyles([c],null,D.errors,p),tr(this,i,D);const M=D.timelines.filter(L=>L.containsAnimation());if(Object.keys(d).length){let L;for(let j=M.length-1;j>=0;j--){const le=M[j];if(le.element===e){L=le;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([d],null,D.errors,p)}return M.length?M.map(L=>L.buildKeyframes()):[dp(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?I(i.duration):null,d=null!=i.delay?I(i.delay):null;return 0!==c&&t.forEach(p=>{const y=e.appendInstructionToTimeline(p,c,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),tr(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Kc);const c=I(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>tr(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?I(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),tr(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return N(e.params?Xs(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?I(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Kc);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((y,C)=>{e.currentQueryIndex=C;const D=e.createSubContext(t.options,y);s&&D.delayNextStep(s),y===e.element&&(p=D.currentTimeline),tr(this,t.animation,D),D.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,D.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const C=e.currentTimeline;p&&C.delayNextStep(p);const D=C.currentTime;tr(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-D+(r.startTime-i.currentTimeline.startTime)}}const Kc={};class hp{constructor(t,e,i,r,s,c,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Kc,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Qc(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=I(i.duration)),null!=i.delay&&(r.delay=I(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=Xs(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new hp(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=Kc,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new Og(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(Yc,"."+this._enterClassName)).replace(Dv,"."+this._leaveClassName);let y=this._driver.query(this.element,t,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),d.push(...y)}return!s&&0==d.length&&c.push(function Zs(n){return new o.vHH(3014,Lt)}()),d}}class Qc{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Qc(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Jn,this._currentKeyframe[e]=Jn}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},c=function Iv(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(s=>{e[s]=Jn})):Ue(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(c).forEach(d=>{const p=Xs(c[d],s,i);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Jn),this._updateStyle(d,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const y=Ue(d,!0);Object.keys(y).forEach(C=>{const D=y[C];"!"==D?t.add(C):D==Jn&&e.add(C)}),i||(y.offset=p/this.duration),r.push(y)});const s=t.size?yr(t.values()):[],c=e.size?yr(e.values()):[];if(i){const d=r[0],p=ue(d);d.offset=0,p.offset=1,r=[d,p]}return dp(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class Og extends Qc{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,p=Ue(t[0],!1);p.offset=0,s.push(p);const y=Ue(t[0],!1);y.offset=Pg(d),s.push(y);const C=t.length-1;for(let D=1;D<=C;D++){let M=Ue(t[D],!1);M.offset=Pg((e+M.offset*i)/c),s.push(M)}i=c,e=0,r="",t=s}return dp(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function Pg(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Sv{}class rd extends Sv{normalizePropertyName(t,e){return es(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(Ng[e]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function Mo(n,t){return new o.vHH(3005,Lt)}())}return c+s}}const Ng=(()=>function xs(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Jc(n,t,e,i,r,s,c,d,p,y,C,D,M){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:y,postStyleProps:C,totalTime:D,errors:M}}const eu={};class fp{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function Fg(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],s=this._stateStyles[t],c=r?r.buildStyles(e,i):{};return s?s.buildStyles(e,i):c}build(t,e,i,r,s,c,d,p,y,C){const D=[],M=this.ast.options&&this.ast.options.params||eu,j=this.buildStyles(i,d&&d.params||eu,D),le=p&&p.params||eu,we=this.buildStyles(r,le,D),Qe=new Set,Je=new Map,Ze=new Map,We="void"===r,kt={params:Object.assign(Object.assign({},M),le)},Pt=C?[]:gh(t,e,this.ast.animation,s,c,j,we,kt,y,D);let cn=0;if(Pt.forEach(Aa=>{cn=Math.max(Aa.duration+Aa.delay,cn)}),D.length)return Jc(e,this._triggerName,i,r,We,j,we,[],[],Je,Ze,cn,D);Pt.forEach(Aa=>{const Ld=Aa.element,$z=ki(Je,Ld,{});Aa.preStyleProps.forEach(cg=>$z[cg]=!0);const iE=ki(Ze,Ld,{});Aa.postStyleProps.forEach(cg=>iE[cg]=!0),Ld!==e&&Qe.add(Ld)});const Yi=yr(Qe.values());return Jc(e,this._triggerName,i,r,We,j,we,Pt,Yi,Je,Ze,cn)}}class Lg{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=ue(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!=c&&(r[s]=c)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const c=s;Object.keys(c).forEach(d=>{let p=c[d];p.length>1&&(p=Xs(p,r,e));const y=this.normalizer.normalizePropertyName(d,e);p=this.normalizer.normalizeStyleValue(d,y,p,e),i[y]=p})}}),i}}class cE{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new Lg(r.style,r.options&&r.options.params||{},i)}),_h(this.states,"true","1"),_h(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new fp(t,r,this.states))}),this.fallbackTransition=function sd(n,t,e){return new fp(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function _h(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const pp=new ph;class uE{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],s=lp(this._driver,e,i,[]);if(i.length)throw function oh(n){return new o.vHH(3503,Lt)}();this._animations[t]=s}_buildPlayer(t,e,i){const r=t.element,s=Ku(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations[t];let c;const d=new Map;if(s?(c=gh(this._driver,e,s,Qs,Wa,{},{},i,pp,r),c.forEach(C=>{const D=ki(d,C.element,{});C.postStyleProps.forEach(M=>D[M]=null)})):(r.push(function Bn(){return new o.vHH(3300,Lt)}()),c=[]),r.length)throw function Tg(n){return new o.vHH(3504,Lt)}();d.forEach((C,D)=>{Object.keys(C).forEach(M=>{C[M]=this._driver.computeStyle(D,M,Jn)})});const y=Xr(c.map(C=>{const D=d.get(C.element);return this._buildPlayer(C,{},D)}));return this._playersById[t]=y,y.onDestroy(()=>this.destroy(t)),this.players.push(y),y}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function wv(n){return new o.vHH(3301,Lt)}();return e}listen(t,e,i,r){const s=qi(e,"","","");return Qu(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Av="ng-animate-queued",yh="ng-animate-disabled",vh=[],Ul={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Vg={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Or="__ng_removed";class tu{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function Ov(n){return null!=n?n:null}(i?t.value:t),i){const s=ue(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const On="void",gp=new tu(On);class kv{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,nr(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw function tp(n,t){return new o.vHH(3302,Lt)}();if(null==i||0==i.length)throw function np(n){return new o.vHH(3303,Lt)}();if(!function Eh(n){return"start"==n||"done"==n}(i))throw function ah(n,t){return new o.vHH(3400,Lt)}();const s=ki(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=ki(this._engine.statesByElement,t,{});return d.hasOwnProperty(e)||(nr(t,Gc),nr(t,Gc+"-"+e),d[e]=gp),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers[e]||delete d[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function Ig(n){return new o.vHH(3401,Lt)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new wh(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(nr(t,Gc),nr(t,Gc+"-"+e),this._engine.statesByElement.set(t,d={}));let p=d[e];const y=new tu(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),d[e]=y,p||(p=gp),y.value!==On&&p.value===y.value){if(!function Ri(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,y.params)){const le=[],we=s.matchStyles(p.value,p.params,le),Qe=s.matchStyles(y.value,y.params,le);le.length?this._engine.reportError(le):this._engine.afterFlush(()=>{Vt(t,we),dt(t,Qe)})}return}const M=ki(this._engine.playersByElement,t,[]);M.forEach(le=>{le.namespaceId==this.id&&le.triggerName==e&&le.queued&&le.destroy()});let L=s.matchTransition(p.value,y.value,t,y.params),j=!1;if(!L){if(!r)return;L=s.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:L,fromState:p,toState:y,player:c,isFallbackTransition:j}),j||(nr(t,Av),c.onStart(()=>{fi(t,Av)})),c.onDone(()=>{let le=this.players.indexOf(c);le>=0&&this.players.splice(le,1);const we=this._engine.playersByElement.get(t);if(we){let Qe=we.indexOf(c);Qe>=0&&we.splice(Qe,1)}}),this.players.push(c),M.push(c),c}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,As,!0);i.forEach(r=>{if(r[Or])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(c.set(p,s[p].value),this._triggers[p]){const y=this.trigger(t,p,On,r);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&Xr(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers[c].fallbackTransition,y=i[c]||gp,C=new tu(On),D=new wh(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:y,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Or];(!s||s===Ul)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){nr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=qi(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,Qu(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class bh{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new kv(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let c=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const y=i.indexOf(p);i.splice(y+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,e)){i.splice(d+1,0,t),c=!0;break}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const c=i[r[s]].namespaceId;if(c){const d=this._fetchNamespace(c);d&&e.add(d)}}}return e}trigger(t,e,i,r){if(Ch(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!Ch(e))return;const s=e[Or];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),nr(t,yh)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),fi(t,yh))}removeNode(t,e,i,r){if(Ch(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[Or]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return Ch(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,As,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,la,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Xr(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[Or];if(i&&i.setForRemoval){if(t[Or]=Ul,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(yh))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)nr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?Xr(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function ip(n){return new o.vHH(3402,Lt)}()}_flushAnimations(t,e){const i=new ph,r=[],s=new Map,c=[],d=new Map,p=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(mt=>{C.add(mt);const At=this.driver.query(mt,".ng-animate-queued",!0);for(let Ft=0;Ft<At.length;Ft++)C.add(At[Ft])});const D=this.bodyNode,M=Array.from(this.statesByElement.keys()),L=Pv(M,this.collectedEnterElements),j=new Map;let le=0;L.forEach((mt,At)=>{const Ft=Qs+le++;j.set(At,Ft),mt.forEach(yn=>nr(yn,Ft))});const we=[],Qe=new Set,Je=new Set;for(let mt=0;mt<this.collectedLeaveElements.length;mt++){const At=this.collectedLeaveElements[mt],Ft=At[Or];Ft&&Ft.setForRemoval&&(we.push(At),Qe.add(At),Ft.hasAnimation?this.driver.query(At,".ng-star-inserted",!0).forEach(yn=>Qe.add(yn)):Je.add(At))}const Ze=new Map,We=Pv(M,Array.from(Qe));We.forEach((mt,At)=>{const Ft=Wa+le++;Ze.set(At,Ft),mt.forEach(yn=>nr(yn,Ft))}),t.push(()=>{L.forEach((mt,At)=>{const Ft=j.get(At);mt.forEach(yn=>fi(yn,Ft))}),We.forEach((mt,At)=>{const Ft=Ze.get(At);mt.forEach(yn=>fi(yn,Ft))}),we.forEach(mt=>{this.processLeaveNode(mt)})});const kt=[],Pt=[];for(let mt=this._namespaceList.length-1;mt>=0;mt--)this._namespaceList[mt].drainQueuedTransitions(e).forEach(Ft=>{const yn=Ft.player,$r=Ft.element;if(kt.push(yn),this.collectedEnterElements.length){const vo=$r[Or];if(vo&&vo.setForMove){if(vo.previousTriggersValues&&vo.previousTriggersValues.has(Ft.triggerName)){const ug=vo.previousTriggersValues.get(Ft.triggerName),Yf=this.statesByElement.get(Ft.element);Yf&&Yf[Ft.triggerName]&&(Yf[Ft.triggerName].value=ug)}return void yn.destroy()}}const Mu=!D||!this.driver.containsElement(D,$r),xa=Ze.get($r),Zf=j.get($r),Ii=this._buildInstruction(Ft,i,Zf,xa,Mu);if(Ii.errors&&Ii.errors.length)return void Pt.push(Ii);if(Mu)return yn.onStart(()=>Vt($r,Ii.fromStyles)),yn.onDestroy(()=>dt($r,Ii.toStyles)),void r.push(yn);if(Ft.isFallbackTransition)return yn.onStart(()=>Vt($r,Ii.fromStyles)),yn.onDestroy(()=>dt($r,Ii.toStyles)),void r.push(yn);const Yz=[];Ii.timelines.forEach(vo=>{vo.stretchStartingKeyframe=!0,this.disabledNodes.has(vo.element)||Yz.push(vo)}),Ii.timelines=Yz,i.append($r,Ii.timelines),c.push({instruction:Ii,player:yn,element:$r}),Ii.queriedElements.forEach(vo=>ki(d,vo,[]).push(yn)),Ii.preStyleProps.forEach((vo,ug)=>{const Yf=Object.keys(vo);if(Yf.length){let dg=p.get(ug);dg||p.set(ug,dg=new Set),Yf.forEach(xF=>dg.add(xF))}}),Ii.postStyleProps.forEach((vo,ug)=>{const Yf=Object.keys(vo);let dg=y.get(ug);dg||y.set(ug,dg=new Set),Yf.forEach(xF=>dg.add(xF))})});if(Pt.length){const mt=[];Pt.forEach(At=>{mt.push(function lh(n,t){return new o.vHH(3505,Lt)}())}),kt.forEach(At=>At.destroy()),this.reportError(mt)}const cn=new Map,Yi=new Map;c.forEach(mt=>{const At=mt.element;i.has(At)&&(Yi.set(At,At),this._beforeAnimationBuild(mt.player.namespaceId,mt.instruction,cn))}),r.forEach(mt=>{const At=mt.element;this._getPreviousPlayers(At,!1,mt.namespaceId,mt.triggerName,null).forEach(yn=>{ki(cn,At,[]).push(yn),yn.destroy()})});const Aa=we.filter(mt=>Hl(mt,p,y)),Ld=new Map;Hg(Ld,this.driver,Je,y,Jn).forEach(mt=>{Hl(mt,p,y)&&Aa.push(mt)});const iE=new Map;L.forEach((mt,At)=>{Hg(iE,this.driver,new Set(mt),p,"!")}),Aa.forEach(mt=>{const At=Ld.get(mt),Ft=iE.get(mt);Ld.set(mt,Object.assign(Object.assign({},At),Ft))});const cg=[],Wz=[],Zz={};c.forEach(mt=>{const{element:At,player:Ft,instruction:yn}=mt;if(i.has(At)){if(C.has(At))return Ft.onDestroy(()=>dt(At,yn.toStyles)),Ft.disabled=!0,Ft.overrideTotalTime(yn.totalTime),void r.push(Ft);let $r=Zz;if(Yi.size>1){let xa=At;const Zf=[];for(;xa=xa.parentNode;){const Ii=Yi.get(xa);if(Ii){$r=Ii;break}Zf.push(xa)}Zf.forEach(Ii=>Yi.set(Ii,$r))}const Mu=this._buildAnimation(Ft.namespaceId,yn,cn,s,iE,Ld);if(Ft.setRealPlayer(Mu),$r===Zz)cg.push(Ft);else{const xa=this.playersByElement.get($r);xa&&xa.length&&(Ft.parentPlayer=Xr(xa)),r.push(Ft)}}else Vt(At,yn.fromStyles),Ft.onDestroy(()=>dt(At,yn.toStyles)),Wz.push(Ft),C.has(At)&&r.push(Ft)}),Wz.forEach(mt=>{const At=s.get(mt.element);if(At&&At.length){const Ft=Xr(At);mt.setRealPlayer(Ft)}}),r.forEach(mt=>{mt.parentPlayer?mt.syncPlayerEvents(mt.parentPlayer):mt.destroy()});for(let mt=0;mt<we.length;mt++){const At=we[mt],Ft=At[Or];if(fi(At,Wa),Ft&&Ft.hasAnimation)continue;let yn=[];if(d.size){let Mu=d.get(At);Mu&&Mu.length&&yn.push(...Mu);let xa=this.driver.query(At,la,!0);for(let Zf=0;Zf<xa.length;Zf++){let Ii=d.get(xa[Zf]);Ii&&Ii.length&&yn.push(...Ii)}}const $r=yn.filter(Mu=>!Mu.destroyed);$r.length?_p(this,At,$r):this.processLeaveNode(At)}return we.length=0,cg.forEach(mt=>{this.players.push(mt),mt.onDone(()=>{mt.destroy();const At=this.players.indexOf(mt);this.players.splice(At,1)}),mt.play()}),cg}elementContainsData(t,e){let i=!1;const r=e[Or];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==On;d.forEach(y=>{y.queued||!p&&y.triggerName!=r||c.push(y)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const y=p.element,C=y!==s,D=ki(i,y,[]);this._getPreviousPlayers(y,C,c,d,e.toState).forEach(L=>{const j=L.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),L.destroy(),D.push(L)})}Vt(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,p=e.element,y=[],C=new Set,D=new Set,M=e.timelines.map(j=>{const le=j.element;C.add(le);const we=le[Or];if(we&&we.removedBeforeQueried)return new ja(j.duration,j.delay);const Qe=le!==p,Je=function yp(n){const t=[];return od(n,t),t}((i.get(le)||vh).map(cn=>cn.getRealPlayer())).filter(cn=>!!cn.element&&cn.element===le),Ze=s.get(le),We=c.get(le),kt=Ku(0,this._normalizer,0,j.keyframes,Ze,We),Pt=this._buildPlayer(j,kt,Je);if(j.subTimeline&&r&&D.add(le),Qe){const cn=new wh(t,d,le);cn.setRealPlayer(Pt),y.push(cn)}return Pt});y.forEach(j=>{ki(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function Rv(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,j.element,j))}),C.forEach(j=>nr(j,Za));const L=Xr(M);return L.onDestroy(()=>{C.forEach(j=>fi(j,Za)),dt(p,e.toStyles)}),D.forEach(j=>{ki(r,j,[]).push(L)}),L}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new ja(t.duration,t.delay)}}class wh{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new ja,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>Qu(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){ki(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function Ch(n){return n&&1===n.nodeType}function Ug(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function Hg(n,t,e,i,r){const s=[];e.forEach(p=>s.push(Ug(p)));const c=[];i.forEach((p,y)=>{const C={};p.forEach(D=>{const M=C[D]=t.computeStyle(y,D,r);(!M||0==M.length)&&(y[Or]=Vg,c.push(y))}),n.set(y,C)});let d=0;return e.forEach(p=>Ug(p,s[d++])),c}function Pv(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let p=s.get(d);if(p)return p;const y=d.parentNode;return p=e.has(y)?y:r.has(y)?1:c(y),s.set(d,p),p}return t.forEach(d=>{const p=c(d);1!==p&&e.get(p).push(d)}),e}function nr(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function fi(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function _p(n,t,e){Xr(e).onDone(()=>n.processLeaveNode(t))}function od(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof xc?od(i.players,t):t.push(i)}}function Hl(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class nu{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new bh(t,e,i),this._timelineEngine=new uE(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],C=lp(this._driver,s,p,[]);if(p.length)throw function qa(n,t){return new o.vHH(3404,Lt)}();d=function lE(n,t,e){return new cE(n,t,e)}(r,C,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=sa(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=sa(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Nv=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&dt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(dt(this._element,this._initialStyles),this._endStyles&&(dt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Vt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Vt(this._element,this._endStyles),this._endStyles=null),dt(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function ir(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];ad(r)&&(t=t||{},t[r]=n[r])}return t}function ad(n){return"display"===n||"position"===n}class Dh{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:Ju(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Fv{validateStyleProperty(t){return Uc(t)}matchesElement(t,e){return!1}containsElement(t,e){return sp(t,e)}getParentElement(t){return oa(t)}query(t,e,i){return Ss(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const y={},C=c.filter(M=>M instanceof Dh);(function Sg(n,t){return 0===n||0===t})(i,r)&&C.forEach(M=>{let L=M.currentSnapshot;Object.keys(L).forEach(j=>y[j]=L[j])}),e=function ap(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let s=t[0],c=[];if(i.forEach(d=>{s.hasOwnProperty(d)||c.push(d),s[d]=e[d]}),c.length)for(var r=1;r<t.length;r++){let d=t[r];c.forEach(function(p){d[p]=Ju(n,p)})}}return t}(t,e=e.map(M=>Ue(M,!1)),y);const D=function vp(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=ir(t[0]),t.length>1&&(i=ir(t[t.length-1]))):t&&(e=ir(t)),e||i?new Nv(n,e,i):null}(t,e);return new Dh(t,e,p,D)}}let Th=(()=>{class n extends rh{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?Ha(e):e;return ld(this._renderer,null,i,"register",[r]),new bp(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class bp extends class Eg{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Lv(this._id,t,e||{},this._renderer)}}class Lv{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return ld(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function ld(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const ua="@.disabled";let Sh=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=null==c?void 0:c.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let C=this._rendererCache.get(s);return C||(C=new jg("",s,this.engine),this._rendererCache.set(s,C)),C}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(c,d,e,C.name,C)};return i.data.animation.forEach(p),new Bv(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(nu),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class jg{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==ua?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Bv extends jg{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==ua?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Ah(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),c="";return"@"!=s.charAt(0)&&([s,c]=function Gg(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let Pr=(()=>{class n extends nu{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G),o.LFG(Xu),o.LFG(Sv))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Ms=new o.OlP("AnimationModuleType"),eo=[{provide:rh,useClass:Th},{provide:Sv,useFactory:function wp(){return new rd}},{provide:nu,useClass:Pr},{provide:o.FYo,useFactory:function Cp(n,t,e){return new Sh(n,t,e)},deps:[Qo,nu,o.R0b]}],iu=[{provide:Xu,useFactory:()=>new Fv},{provide:Ms,useValue:"BrowserAnimations"},...eo],zg=[{provide:Xu,useClass:Hc},{provide:Ms,useValue:"NoopAnimations"},...eo];let qg=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?zg:iu}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:iu,imports:[Ba]}),n})();var gn=O(8996),jl=O(3269);function ot(...n){const t=(0,jl.yG)(n);return(0,gn.D)(n,t)}var ht=O(7579);class bi extends ht.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var v=O(8306);const{isArray:m}=Array,{getPrototypeOf:_,prototype:w,keys:k}=Object;function F(n){if(1===n.length){const t=n[0];if(m(t))return{args:t,keys:null};if(function ce(n){return n&&"object"==typeof n&&_(n)===w}(t)){const e=k(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var Ee=O(4671),Ce=O(4004);const{isArray:it}=Array;function pt(n){return(0,Ce.U)(t=>function yt(n,t){return it(t)?n(...t):n(t)}(n,t))}function ni(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var on=O(5403),ru=O(9672);function xh(...n){const t=(0,jl.yG)(n),e=(0,jl.jO)(n),{args:i,keys:r}=F(n);if(0===i.length)return(0,gn.D)([],t);const s=new v.y(function $g(n,t,e=Ee.y){return i=>{Qa(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)Qa(t,()=>{const y=(0,gn.D)(n[p],t);let C=!1;y.subscribe((0,on.x)(i,D=>{s[p]=D,C||(C=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>ni(r,c):Ee.y));return e?s.pipe(pt(e)):s}function Qa(n,t,e){n?(0,ru.f)(e,n,t):t()}var vr=O(576);function Xa(n,t){const e=(0,vr.m)(n)?n:()=>n,i=r=>r.error(e());return new v.y(t?r=>t.schedule(i,0,r):i)}const Gl=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var su=O(8189);function cd(...n){return function Zg(){return(0,su.J)(1)}()((0,gn.D)(n,(0,jl.yG)(n)))}var Po=O(8421);function Mh(n){return new v.y(t=>{(0,Po.Xf)(n()).subscribe(t)})}var ou=O(515),ks=O(727),wi=O(4482);function Vv(){return(0,wi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,on.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class Uv extends v.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,wi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new ks.w0;const e=this.getSubject();t.add(this.source.subscribe((0,on.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=ks.w0.EMPTY)}return t}refCount(){return Vv()(this)}}function ii(n,t){return(0,wi.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,on.x)(i,p=>{null==r||r.unsubscribe();let y=0;const C=s++;(0,Po.Xf)(n(p,C)).subscribe(r=(0,on.x)(i,D=>i.next(t?t(p,D,C,y++):D),()=>{r=null,d()}))},()=>{c=!0,d()}))})}var Vn=O(5698);function Ci(...n){const t=(0,jl.yG)(n);return(0,wi.e)((e,i)=>{(t?cd(n,e,t):cd(n,e)).subscribe(i)})}function hE(n,t,e,i,r){return(s,c)=>{let d=e,p=t,y=0;s.subscribe((0,on.x)(c,C=>{const D=y++;p=d?n(p,C,D):(d=!0,C),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function to(n,t){return(0,wi.e)(hE(n,t,arguments.length>=2,!0))}function _n(n,t){return(0,wi.e)((e,i)=>{let r=0;e.subscribe((0,on.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}function br(n){return(0,wi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,on.x)(e,void 0,void 0,c=>{s=(0,Po.Xf)(n(c,br(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}var rr=O(5577);function zl(n,t){return(0,vr.m)(t)?(0,rr.z)(n,t,1):(0,rr.z)(n,1)}function Hv(n){return n<=0?()=>ou.E:(0,wi.e)((t,e)=>{let i=[];t.subscribe((0,on.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function jv(n=fE){return(0,wi.e)((t,e)=>{let i=!1;t.subscribe((0,on.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function fE(){return new Gl}function Gv(n){return(0,wi.e)((t,e)=>{let i=!1;t.subscribe((0,on.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function au(n,t){const e=arguments.length>=2;return i=>i.pipe(n?_n((r,s)=>n(r,s,i)):Ee.y,(0,Vn.q)(1),e?Gv(t):jv(()=>new Gl))}var Ei=O(8505);function Ep(n){return(0,wi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class Ja{constructor(t,e){this.id=t,this.url=e}}class Dp extends Ja{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kh extends Ja{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yg extends Ja{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Tp extends Ja{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ex extends Ja{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pE extends Ja{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tx extends Ja{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nx extends Ja{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mE extends Ja{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kg{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qv{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class MF{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gE{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ix{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _E{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yE{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qt="primary";class da{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Rh(n){return new da(n)}const $v="ngNavigationCancelingError";function Wv(n){const t=Error("NavigationCancelingError: "+n);return t[$v]=!0,t}function sx(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function ha(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!vE(n[r],t[r]))return!1;return!0}function vE(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function bE(n){return Array.prototype.concat.apply([],n)}function wE(n){return n.length>0?n[n.length-1]:null}function sr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function fa(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,gn.D)(Promise.resolve(n)):ot(n)}const Qg={exact:function Xg(n,t,e){if(!el(n.segments,t.segments)||!Oh(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!Xg(n.children[i],t.children[i],e))return!1;return!0},subset:Jg},No={exact:function ax(n,t){return ha(n,t)},subset:function ql(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>vE(n[e],t[e]))},ignored:()=>!0};function Zv(n,t,e){return Qg[e.paths](n.root,t.root,e.matrixParams)&&No[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function Jg(n,t,e){return Yv(n,t,t.segments,e)}function Yv(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!el(r,e)||t.hasChildren()||!Oh(r,e,i))}if(n.segments.length===e.length){if(!el(n.segments,e)||!Oh(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!Jg(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(el(n.segments,r)&&Oh(n.segments,r,i)&&n.children[Qt])&&Yv(n.children[Qt],t,s,i)}}function Oh(n,t,e){return t.every((i,r)=>No[e](n[r].parameters,i.parameters))}class Ph{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rh(this.queryParams)),this._queryParamMap}toString(){return kF.serialize(this)}}class en{constructor(t,e){this.segments=t,this.children=e,this.parent=null,sr(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return r_(this)}}class e_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Rh(this.parameters)),this._parameterMap}toString(){return Qv(this)}}function el(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class n_{}class i_{parse(t){const e=new FF(t);return new Ph(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Ip(t.root,!0)}`,i=function cx(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${s_(e)}=${s_(r)}`).join("&"):`${s_(e)}=${s_(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function DE(n){return encodeURI(n)}(t.fragment)}`:""}`}}const kF=new i_;function r_(n){return n.segments.map(t=>Qv(t)).join("/")}function Ip(n,t){if(!n.hasChildren())return r_(n);if(t){const e=n.children[Qt]?Ip(n.children[Qt],!1):"",i=[];return sr(n.children,(r,s)=>{s!==Qt&&i.push(`${s}:${Ip(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Kv(n,t){let e=[];return sr(n.children,(i,r)=>{r===Qt&&(e=e.concat(t(i,r)))}),sr(n.children,(i,r)=>{r!==Qt&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===Qt?[Ip(n.children[Qt],!1)]:[`${r}:${Ip(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${r_(n)}/${e[0]}`:`${r_(n)}/(${e.join("//")})`}}function EE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function s_(n){return EE(n).replace(/%3B/gi,";")}function TE(n){return EE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function o_(n){return decodeURIComponent(n)}function lx(n){return o_(n.replace(/\+/g,"%20"))}function Qv(n){return`${TE(n.path)}${function IE(n){return Object.keys(n).map(t=>`;${TE(t)}=${TE(n[t])}`).join("")}(n.parameters)}`}const Xv=/^[^\/()?;=#]+/;function Jv(n){const t=n.match(Xv);return t?t[0]:""}const RF=/^[^=?&#]+/,PF=/^[^&#]+/;class FF{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Qt]=new en(t,e)),i}parseSegment(){const t=Jv(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new e_(o_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Jv(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Jv(this.remaining);r&&(i=r,this.capture(i))}t[o_(e)]=o_(i)}parseQueryParam(t){const e=function OF(n){const t=n.match(RF);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function NF(n){const t=n.match(PF);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=lx(e),s=lx(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Jv(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Qt);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[Qt]:new en([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class ux{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=SE(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=SE(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=AE(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return AE(t,this._root).map(e=>e.value)}}function SE(n,t){if(n===t.value)return t;for(const e of t.children){const i=SE(n,e);if(i)return i}return null}function AE(n,t){if(n===t.value)return[t];for(const e of t.children){const i=AE(n,e);if(i.length)return i.unshift(t),i}return[]}class lu{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function no(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class a_ extends ux{constructor(t,e){super(t),this.snapshot=e,c_(this,t)}toString(){return this.snapshot.toString()}}function xE(n,t){const e=function ME(n,t){const c=new l_([],{},{},"",{},Qt,t,null,n.root,-1,{});return new $l("",new lu(c,[]))}(n,t),i=new bi([new e_("",{})]),r=new bi({}),s=new bi({}),c=new bi({}),d=new bi(""),p=new pa(i,r,c,d,s,Qt,t,e.root);return p.snapshot=e.root,new a_(new lu(p,[]),e)}class pa{constructor(t,e,i,r,s,c,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ce.U)(t=>Rh(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ce.U)(t=>Rh(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function eb(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function tb(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class l_{constructor(t,e,i,r,s,c,d,p,y,C,D){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Rh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Rh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $l extends ux{constructor(t,e){super(e),this.url=t,c_(this,e)}toString(){return kE(this._root)}}function c_(n,t){t.value._routerState=n,t.children.forEach(e=>c_(n,e))}function kE(n){const t=n.children.length>0?` { ${n.children.map(kE).join(", ")} } `:"";return`${n.value}${t}`}function Sp(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,ha(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),ha(t.params,e.params)||n.params.next(e.params),function ox(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!ha(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),ha(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function nb(n,t){const e=ha(n.params,t.params)&&function t_(n,t){return el(n,t)&&n.every((e,i)=>ha(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||nb(n.parent,t.parent))}function Ap(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function dx(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Ap(n,i,r);return Ap(n,i)})}(n,t,e);return new lu(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>Ap(n,d)),c}}const i=function xp(n){return new pa(new bi(n.url),new bi(n.params),new bi(n.queryParams),new bi(n.fragment),new bi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>Ap(n,s));return new lu(i,r)}}function Fh(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function tl(n){return"object"==typeof n&&null!=n&&n.outlets}function ud(n,t,e,i,r){let s={};if(i&&sr(i,(d,p)=>{s[p]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===t)return new Ph(e,s,r);const c=dd(n,t,e);return new Ph(c,s,r)}function dd(n,t,e){const i={};return sr(n.children,(r,s)=>{i[s]=r===t?e:dd(r,t,e)}),new en(n.segments,i)}class OE{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Fh(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(tl);if(r&&r!==wE(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class u_{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Mp(n,t,e){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return d_(n,t,e);const i=function FE(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(tl(d))break;const p=`${d}`,y=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!VE(p,y,c))return s;i+=2}else{if(!VE(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new en(n.segments.slice(0,i.pathIndex),{});return s.children[Qt]=new en(n.segments.slice(i.pathIndex),n.children),d_(s,0,r)}return i.match&&0===r.length?new en(n.segments,{}):i.match&&!n.hasChildren()?LE(n,t,e):i.match?d_(n,0,r):LE(n,t,e)}function d_(n,t,e){if(0===e.length)return new en(n.segments,{});{const i=function NE(n){return tl(n[0])?n[0].outlets:{[Qt]:n}}(e),r={};return sr(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=Mp(n.children[c],t,s))}),sr(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new en(n.segments,r)}}function LE(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(tl(s)){const p=BE(s.outlets);return new en(i,p)}if(0===r&&Fh(e[0])){i.push(new e_(n.segments[t].path,sb(e[0]))),r++;continue}const c=tl(s)?s.outlets[Qt]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&Fh(d)?(i.push(new e_(c,sb(d))),r+=2):(i.push(new e_(c,{})),r++)}return new en(i,{})}function BE(n){const t={};return sr(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=LE(new en([],{}),0,e))}),t}function sb(n){const t={};return sr(n,(e,i)=>t[i]=`${e}`),t}function VE(n,t,e){return n==e.path&&ha(t,e.parameters)}class hx{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Sp(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=no(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),sr(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=no(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=no(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=no(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new _E(s.value.snapshot))}),t.children.length&&this.forwardEvent(new gE(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(Sp(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),Sp(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=function fx(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),p=d?d.module.componentFactoryResolver:null;c.attachRef=null,c.route=r,c.resolver=p,c.outlet&&c.outlet.activateWith(r,p),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class ts{constructor(t,e){this.routes=t,this.module=e}}function cu(n){return"function"==typeof n}function Lh(n){return n instanceof Ph}const hd=Symbol("INITIAL_VALUE");function Bh(){return ii(n=>xh(n.map(t=>t.pipe((0,Vn.q)(1),Ci(hd)))).pipe(to((t,e)=>{let i=!1;return e.reduce((r,s,c)=>r!==hd?r:(s===hd&&(i=!0),i||!1!==s&&c!==e.length-1&&!Lh(s)?r:s),t)},hd),_n(t=>t!==hd),(0,Ce.U)(t=>Lh(t)?t:!0===t),(0,Vn.q)(1)))}class gx{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new kp,this.attachRef=null}}class kp{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new gx,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let ob=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=s||Qt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const c=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new jE(e,d,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(kp),o.Y36(o.s_b),o.Y36(o._Vd),o.$8M("name"),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class jE{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===pa?this.route:t===kp?this.childContexts:this.parent.get(t,e)}}let GE=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},directives:[ob],encapsulation:2}),n})();function ab(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];_x(i,yx(t,i))}}function _x(n,t){n.children&&ab(n.children,t)}function yx(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function h_(n){const t=n.children&&n.children.map(h_),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Qt&&(e.component=GE),e}function io(n){return n.outlet||Qt}function zE(n,t){const e=n.filter(i=>io(i)===t);return e.push(...n.filter(i=>io(i)!==t)),e}const ma={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vh(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},ma):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||sx)(e,n,t);if(!s)return Object.assign({},ma);const c={};sr(s.posParams,(p,y)=>{c[y]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},c),s.consumed[s.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function f_(n,t,e,i,r="corrected"){if(e.length>0&&function qE(n,t,e){return e.some(i=>p_(n,t,i)&&io(i)!==Qt)}(n,e,i)){const c=new en(t,function VF(n,t,e,i){const r={};r[Qt]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&io(s)!==Qt){const c=new en([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[io(s)]=c}return r}(n,t,i,new en(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function bx(n,t,e){return e.some(i=>p_(n,t,i))}(n,e,i)){const c=new en(n.segments,function vx(n,t,e,i,r,s){const c={};for(const d of i)if(p_(n,e,d)&&!r[io(d)]){const p=new en([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[io(d)]=p}return Object.assign(Object.assign({},r),c)}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new en(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function p_(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function $E(n,t,e,i){return!!(io(n)===i||i!==Qt&&p_(t,e,n))&&("**"===n.path||Vh(t,n,e).matched)}function m_(n,t,e){return 0===t.length&&!n.children[e]}class g_{constructor(t){this.segmentGroup=t||null}}class WE{constructor(t){this.urlTree=t}}function uu(n){return Xa(new g_(n))}function __(n){return Xa(new WE(n))}class ZE{constructor(t,e,i,r,s){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(o.h0i)}apply(){const t=f_(this.urlTree.root,[],[],this.config).segmentGroup,e=new en(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Qt).pipe((0,Ce.U)(s=>this.createUrlTree(YE(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(br(s=>{if(s instanceof WE)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof g_?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Qt).pipe((0,Ce.U)(r=>this.createUrlTree(YE(r),t.queryParams,t.fragment))).pipe(br(r=>{throw r instanceof g_?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new en([],{[Qt]:t}):t;return new Ph(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,Ce.U)(s=>new en([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,gn.D)(r).pipe(zl(s=>{const c=i.children[s],d=zE(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,Ce.U)(p=>({segment:p,outlet:s})))}),to((s,c)=>(s[c.outlet]=c.segment,s),{}),function zv(n,t){const e=arguments.length>=2;return i=>i.pipe(n?_n((r,s)=>n(r,s,i)):Ee.y,Hv(1),e?Gv(t):jv(()=>new Gl))}())}expandSegment(t,e,i,r,s,c){return(0,gn.D)(i).pipe(zl(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(br(y=>{if(y instanceof g_)return ot(null);throw y}))),au(d=>!!d),br((d,p)=>{if(d instanceof Gl||"EmptyError"===d.name)return m_(e,r,s)?ot(new en([],{})):uu(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return $E(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):uu(e):uu(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?__(s):this.lineralizeSegments(i,s).pipe((0,rr.z)(c=>{const d=new en(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:p,remainingSegments:y,positionalParamSegments:C}=Vh(e,r,s);if(!d)return uu(e);const D=this.applyRedirectCommands(p,r.redirectTo,C);return r.redirectTo.startsWith("/")?__(D):this.lineralizeSegments(r,D).pipe((0,rr.z)(M=>this.expandSegment(t,e,i,M.concat(y),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?ot(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe((0,Ce.U)(D=>(i._loadedConfig=D,new en(r,{})))):ot(new en(r,{}));const{matched:c,consumedSegments:d,remainingSegments:p}=Vh(e,i,r);return c?this.getChildConfig(t,i,r).pipe((0,rr.z)(C=>{const D=C.module,M=C.routes,{segmentGroup:L,slicedSegments:j}=f_(e,d,p,M),le=new en(L.segments,L.children);if(0===j.length&&le.hasChildren())return this.expandChildren(D,M,le).pipe((0,Ce.U)(Ze=>new en(d,Ze)));if(0===M.length&&0===j.length)return ot(new en(d,{}));const we=io(i)===s;return this.expandSegment(D,le,M,j,we?Qt:s,!0).pipe((0,Ce.U)(Je=>new en(d.concat(Je.segments),Je.children)))})):uu(e)}getChildConfig(t,e,i){return e.children?ot(new ts(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?ot(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe((0,rr.z)(r=>r?this.configLoader.load(t.injector,e).pipe((0,Ce.U)(s=>(e._loadedConfig=s,s))):function lb(n){return Xa(Wv(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):ot(new ts([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;return r&&0!==r.length?ot(r.map(c=>{const d=t.get(c);let p;if(function LF(n){return n&&cu(n.canLoad)}(d))p=d.canLoad(e,i);else{if(!cu(d))throw new Error("Invalid CanLoad guard");p=d(e,i)}return fa(p)})).pipe(Bh(),(0,Ei.b)(c=>{if(!Lh(c))return;const d=Wv(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw d.url=c,d}),(0,Ce.U)(c=>!0===c)):ot(!0)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ot(i);if(r.numberOfChildren>1||!r.children[Qt])return Xa(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[Qt]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Ph(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return sr(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return sr(e.children,(d,p)=>{c[p]=this.createSegmentGroup(t,d,i,r)}),new en(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function YE(n){const t={};for(const i of Object.keys(n.children)){const s=YE(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function UF(n){if(1===n.numberOfChildren&&n.children[Qt]){const t=n.children[Qt];return new en(n.segments.concat(t.segments),t.children)}return n}(new en(n.segments,t))}class Cx{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class y_{constructor(t,e){this.component=t,this.route=e}}function KE(n,t,e){const i=n._root;return Uh(i,t?t._root:null,e,[i.value])}function Rp(n,t,e){const i=function XE(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Uh(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=no(t);return n.children.forEach(c=>{(function Wl(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function v_(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!el(n.url,t.url);case"pathParamsOrQueryParamsChange":return!el(n.url,t.url)||!ha(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nb(n,t)||!ha(n.queryParams,t.queryParams);default:return!nb(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new Cx(i)):(s.data=c.data,s._resolvedData=c._resolvedData),Uh(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new y_(d.outlet.component,c))}else c&&Op(t,d,r),r.canActivateChecks.push(new Cx(i)),Uh(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),sr(s,(c,d)=>Op(c,e.getContext(d),r)),r}function Op(n,t,e){const i=no(n),r=n.value;sr(i,(s,c)=>{Op(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new y_(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class eD{}function pb(n){return new v.y(t=>t.error(n))}class Tx{constructor(t,e,i,r,s,c){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=c}recognize(){const t=f_(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Qt);if(null===e)return null;const i=new l_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new lu(i,e),s=new $l(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,i=eb(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const s of Object.keys(e.children)){const c=e.children[s],d=zE(t,s),p=this.processSegmentGroup(d,c,s);if(null===p)return null;i.push(...p)}const r=gb(i);return function mb(n){n.sort((t,e)=>t.value.outlet===Qt?-1:e.value.outlet===Qt?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,i,r){for(const s of t){const c=this.processSegmentAgainstRoute(s,e,i,r);if(null!==c)return c}return m_(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!$E(t,e,i,r))return null;let s,c=[],d=[];if("**"===t.path){const L=i.length>0?wE(i).parameters:{};s=new l_(i,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,iD(t),io(t),t.component,t,_b(e),nD(e)+i.length,fd(t))}else{const L=Vh(e,t,i);if(!L.matched)return null;c=L.consumedSegments,d=L.remainingSegments,s=new l_(c,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,iD(t),io(t),t.component,t,_b(e),nD(e)+c.length,fd(t))}const p=function Ix(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:y,slicedSegments:C}=f_(e,c,d,p.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren()){const L=this.processChildren(p,y);return null===L?null:[new lu(s,L)]}if(0===p.length&&0===C.length)return[new lu(s,[])];const D=io(t)===r,M=this.processSegment(p,y,C,D?Qt:r);return null===M?null:[new lu(s,M)]}}function Sx(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function gb(n){const t=[],e=new Set;for(const i of n){if(!Sx(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=gb(i.children);t.push(new lu(i.value,r))}return t.filter(i=>!e.has(i))}function _b(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function nD(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function iD(n){return n.data||{}}function fd(n){return n.resolve||{}}function ga(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function b_(n){return ii(t=>{const e=n(t);return e?(0,gn.D)(e).pipe((0,Ce.U)(()=>t)):ot(t)})}class oD extends class sD{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const vb=new o.OlP("ROUTES");class aD{constructor(t,e,i,r){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe((0,Ce.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const c=s.create(t);return new ts(bE(c.injector.get(vb,void 0,o.XFs.Self|o.XFs.Optional)).map(h_),c)}),br(s=>{throw e._loader$=void 0,s}));return e._loader$=new Uv(r,()=>new ht.x).pipe(Vv()),e._loader$}loadModuleFactory(t){return fa(t()).pipe((0,rr.z)(e=>e instanceof o.YKP?ot(e):(0,gn.D)(this.compiler.compileModuleAsync(e))))}}class Ox{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function lD(n){throw n}function jF(n,t,e){return t.parse("/")}function bb(n,t){return ot(null)}const Px={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nx={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nr=(()=>{class n{constructor(e,i,r,s,c,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ht.x,this.errorHandler=lD,this.malformedUriErrorHandler=jF,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:bb,afterPreactivation:bb},this.urlHandlingStrategy=new Ox,this.routeReuseStrategy=new oD,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(o.h0i),this.console=c.get(o.c2e);const D=c.get(o.R0b);this.isNgZoneEnabled=D instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function CE(){return new Ph(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new aD(c,d,M=>this.triggerEvent(new Kg(M)),M=>this.triggerEvent(new qv(M))),this.routerState=xE(this.currentUrlTree,this.rootComponentType),this.transitions=new bi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(_n(r=>0!==r.id),(0,Ce.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ii(r=>{let s=!1,c=!1;return ot(r).pipe((0,Ei.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ii(d=>{const p=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return w_(d.source)&&(this.browserUrlTree=d.extractedUrl),ot(d).pipe(ii(D=>{const M=this.transitions.getValue();return i.next(new Dp(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),M!==this.transitions.getValue()?ou.E:Promise.resolve(D)}),function ub(n,t,e,i){return ii(r=>function cb(n,t,e,i,r){return new ZE(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,Ce.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ei.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function Ax(n,t,e,i,r){return(0,rr.z)(s=>function tD(n,t,e,i,r="emptyOnly",s="legacy"){try{const c=new Tx(n,t,e,i,r,s).recognize();return null===c?pb(new eD):ot(c)}catch(c){return pb(c)}}(n,t,s.urlAfterRedirects,e(s.urlAfterRedirects),i,r).pipe((0,Ce.U)(c=>Object.assign(Object.assign({},s),{targetSnapshot:c}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ei.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(L,D)}this.browserUrlTree=D.urlAfterRedirects}const M=new ex(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);i.next(M)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:M,extractedUrl:L,source:j,restoredState:le,extras:we}=d,Qe=new Dp(M,this.serializeUrl(L),j,le);i.next(Qe);const Je=xE(L,this.rootComponentType).snapshot;return ot(Object.assign(Object.assign({},d),{targetSnapshot:Je,urlAfterRedirects:L,extras:Object.assign(Object.assign({},we),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),ou.E}),b_(d=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:M,replaceUrl:L}}=d;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!M,replaceUrl:!!L})}),(0,Ei.b)(d=>{const p=new pE(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,Ce.U)(d=>Object.assign(Object.assign({},d),{guards:KE(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function Ex(n,t){return(0,rr.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?ot(Object.assign(Object.assign({},e),{guardsResult:!0})):function HF(n,t,e,i){return(0,gn.D)(n).pipe((0,rr.z)(r=>function fb(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ot(s.map(d=>{const p=Rp(d,t,r);let y;if(function mx(n){return n&&cu(n.canDeactivate)}(p))y=fa(p.canDeactivate(n,t,e,i));else{if(!cu(p))throw new Error("Invalid CanDeactivate guard");y=fa(p(n,t,e,i))}return y.pipe(au())})).pipe(Bh()):ot(!0)}(r.component,r.route,e,t,i)),au(r=>!0!==r,!0))}(c,i,r,n).pipe((0,rr.z)(d=>d&&function px(n){return"boolean"==typeof n}(d)?function db(n,t,e,i){return(0,gn.D)(t).pipe(zl(r=>cd(function hb(n,t){return null!==n&&t&&t(new MF(n)),ot(!0)}(r.route.parent,i),function JE(n,t){return null!==n&&t&&t(new ix(n)),ot(!0)}(r.route,i),function Dx(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function QE(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Mh(()=>ot(c.guards.map(p=>{const y=Rp(p,c.node,e);let C;if(function BF(n){return n&&cu(n.canActivateChild)}(y))C=fa(y.canActivateChild(i,n));else{if(!cu(y))throw new Error("Invalid CanActivateChild guard");C=fa(y(i,n))}return C.pipe(au())})).pipe(Bh())));return ot(s).pipe(Bh())}(n,r.path,e),function Pp(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return ot(!0);const r=i.map(s=>Mh(()=>{const c=Rp(s,t,e);let d;if(function HE(n){return n&&cu(n.canActivate)}(c))d=fa(c.canActivate(t,n));else{if(!cu(c))throw new Error("Invalid CanActivate guard");d=fa(c(t,n))}return d.pipe(au())}));return ot(r).pipe(Bh())}(n,r.route,e))),au(r=>!0!==r,!0))}(i,s,n,t):ot(d)),(0,Ce.U)(d=>Object.assign(Object.assign({},e),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,Ei.b)(d=>{if(Lh(d.guardsResult)){const y=Wv(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const p=new tx(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),_n(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),b_(d=>{if(d.guards.canActivateChecks.length)return ot(d).pipe((0,Ei.b)(p=>{const y=new nx(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),ii(p=>{let y=!1;return ot(p).pipe(function xx(n,t){return(0,rr.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return ot(e);let s=0;return(0,gn.D)(r).pipe(zl(c=>function Mx(n,t,e,i){return function kx(n,t,e,i){const r=ga(n);if(0===r.length)return ot({});const s={};return(0,gn.D)(r).pipe((0,rr.z)(c=>function yb(n,t,e,i){const r=Rp(n,t,i);return fa(r.resolve?r.resolve(t,e):r(t,e))}(n[c],t,e,i).pipe((0,Ei.b)(d=>{s[c]=d}))),Hv(1),(0,rr.z)(()=>ga(s).length===r.length?ot(s):ou.E))}(n._resolve,n,t,i).pipe((0,Ce.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),eb(n,e).resolve),null)))}(c.route,i,n,t)),(0,Ei.b)(()=>s++),Hv(1),(0,rr.z)(c=>s===r.length?ot(e):ou.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ei.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Ei.b)(p=>{const y=new mE(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),b_(d=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:M,replaceUrl:L}}=d;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!M,replaceUrl:!!L})}),(0,Ce.U)(d=>{const p=function RE(n,t,e){const i=Ap(n,t._root,e?e._root:void 0);return new a_(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,Ei.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,Ce.U)(i=>(new hx(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,Ei.b)({next(){s=!0},complete(){s=!0}}),Ep(()=>{var d;s||c||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),br(d=>{if(c=!0,function rx(n){return n&&n[$v]}(d)){const p=Lh(d.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const y=new Yg(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(y),p?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||w_(r.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new Tp(r.id,this.serializeUrl(r.extractedUrl),d);i.next(p);try{r.resolve(this.errorHandler(d))}catch(y){r.reject(y)}}return ou.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},c=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(c){const p=Object.assign({},c);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(e.url);this.scheduleNavigation(d,i,c,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){ab(e),this.config=e.map(h_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,y=r||this.routerState.root,C=p?this.currentUrlTree.fragment:c;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function Nh(n,t,e,i,r){if(0===e.length)return ud(t.root,t.root,t.root,i,r);const s=function PE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new OE(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return sr(s.outlets,(p,y)=>{d[y]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new OE(e,t,i)}(e);if(s.toRoot())return ud(t.root,t.root,new en([],{}),i,r);const c=function ib(n,t,e){if(n.isAbsolute)return new u_(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new u_(s,s===t.root,0)}const i=Fh(n.commands[0])?0:1;return function rb(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new u_(i,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,t,n),d=c.processChildren?d_(c.segmentGroup,c.index,s.commands):Mp(c.segmentGroup,c.index,s.commands);return ud(t.root,c.segmentGroup,d,i,r)}(y,this.currentUrlTree,e,D,null!=C?C:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=Lh(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function GF(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},Px):!1===i?Object.assign({},Nx):i,Lh(e))return Zv(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Zv(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new kh(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){var d,p;if(this.disposed)return Promise.resolve(!1);let y,C,D;c?(y=c.resolve,C=c.reject,D=c.promise):D=new Promise((j,le)=>{y=j,C=le});const M=++this.navigationId;let L;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),L=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):L=0,this.setTransition({id:M,targetPageId:L,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:y,reject:C,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(j=>Promise.reject(j))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===c?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===c&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new Yg(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function w_(n){return"imperative"!==n}let Hh=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new ht.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:pd(this.skipLocationChange),replaceUrl:pd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:pd(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Nr),o.Y36(pa),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})();function pd(n){return""===n||!!n}class Fx{}class wb{preload(t,e){return ot(null)}}let Cb=(()=>{class n{constructor(e,i,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new aD(r,i,p=>e.triggerEvent(new Kg(p)),p=>e.triggerEvent(new qv(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(_n(e=>e instanceof kh),zl(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(o.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const c=s._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return(0,gn.D)(r).pipe((0,su.J)(),(0,Ce.U)(s=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?ot(i._loadedConfig):this.loader.load(e.injector,i)).pipe((0,rr.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Nr),o.LFG(o.Sil),o.LFG(o.zs3),o.LFG(Fx))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),E_=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Dp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof kh&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yE&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new yE(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const jh=new o.OlP("ROUTER_CONFIGURATION"),Eb=new o.OlP("ROUTER_FORROOT_GUARD"),Db=[De,{provide:n_,useClass:i_},{provide:Nr,useFactory:function Hx(n,t,e,i,r,s,c={},d,p){const y=new Nr(null,n,t,e,i,r,bE(s));return d&&(y.urlHandlingStrategy=d),p&&(y.routeReuseStrategy=p),function jx(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,y),c.enableTracing&&y.events.subscribe(C=>{var D,M;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(M=console.groupEnd)||void 0===M||M.call(console)}),y},deps:[n_,kp,De,o.zs3,o.Sil,vb,jh,[class Rx{},new o.FiY],[class rD{},new o.FiY]]},kp,{provide:pa,useFactory:function T_(n){return n.routerState.root},deps:[Nr]},Cb,wb,class qF{preload(t,e){return e().pipe(br(()=>ot(null)))}},{provide:jh,useValue:{enableTracing:!1}}];function Lx(){return new o.PXZ("Router",Nr)}let D_=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[Db,cD(e),{provide:Eb,useFactory:Ux,deps:[[Nr,new o.FiY,new o.tp0]]},{provide:jh,useValue:i||{}},{provide:de,useFactory:Vx,deps:[Y,[new o.tBr(Pe),new o.FiY],jh]},{provide:E_,useFactory:Bx,deps:[Nr,Pu,jh]},{provide:Fx,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:wb},{provide:o.PXZ,multi:!0,useFactory:Lx},[du,{provide:o.ip1,multi:!0,useFactory:Gx,deps:[du]},{provide:uD,useFactory:Fp,deps:[du]},{provide:o.tb,multi:!0,useExisting:uD}]]}}static forChild(e){return{ngModule:n,providers:[cD(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Eb,8),o.LFG(Nr,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function Bx(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new E_(n,t,e)}function Vx(n,t,e={}){return e.useHash?new xe(n,t):new Fe(n,t)}function Ux(n){return"guarded"}function cD(n){return[{provide:o.deG,multi:!0,useValue:n},{provide:vb,multi:!0,useValue:n}]}let du=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ht.x}appInitializer(){return this.injector.get(Z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(Nr),c=this.injector.get(jh);return"disabled"===c.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?ot(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(jh),r=this.injector.get(Cb),s=this.injector.get(E_),c=this.injector.get(Nr),d=this.injector.get(o.z2F);e===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&c.initialNavigation(),r.setUpPreloading(),s.init(),c.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Gx(n){return n.appInitializer.bind(n)}function Fp(n){return n.bootstrapListener.bind(n)}const uD=new o.OlP("Router Initializer");function Tt(n){return null!=n&&"false"!=`${n}`}function md(n,t=0){return function Fr(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function nl(n){return Array.isArray(n)?n:[n]}function ri(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Oi(n){return n instanceof o.SBq?n.nativeElement:n}var Gh=O(1144);const zh=["addListener","removeListener"],qh=["addEventListener","removeEventListener"],$h=["on","off"];function Rs(n,t,e,i){if((0,vr.m)(e)&&(i=e,e=void 0),i)return Rs(n,t,e).pipe(pt(i));const[r,s]=function Yh(n){return(0,vr.m)(n.addEventListener)&&(0,vr.m)(n.removeEventListener)}(n)?qh.map(c=>d=>n[c](t,d,e)):function Wh(n){return(0,vr.m)(n.addListener)&&(0,vr.m)(n.removeListener)}(n)?zh.map(gd(n,t)):function Zh(n){return(0,vr.m)(n.on)&&(0,vr.m)(n.off)}(n)?$h.map(gd(n,t)):[];if(!r&&(0,Gh.z)(n))return(0,rr.z)(c=>Rs(c,t,e))((0,Po.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new v.y(c=>{const d=(...p)=>c.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function gd(n,t){return e=>i=>n[e](t,i)}var Ib=O(4408);const Kh={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Kh;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new ks.w0(()=>null==e?void 0:e(r))},requestAnimationFrame(...n){const{delegate:t}=Kh;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Kh;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var Sb=O(7565);new class fD extends Sb.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class hD extends Ib.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Kh.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Kh.cancelAnimationFrame(e),t._scheduled=void 0)}});let I_,mD=1;const S_={};function Ab(n){return n in S_&&(delete S_[n],!0)}const $x={setImmediate(n){const t=mD++;return S_[t]=!0,I_||(I_=Promise.resolve()),I_.then(()=>Ab(t)&&n()),t},clearImmediate(n){Ab(n)}},{setImmediate:gD,clearImmediate:Zx}=$x,A_={setImmediate(...n){const{delegate:t}=A_;return((null==t?void 0:t.setImmediate)||gD)(...n)},clearImmediate(n){const{delegate:t}=A_;return((null==t?void 0:t.clearImmediate)||Zx)(n)},delegate:void 0},x_=new class Yx extends Sb.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class _D extends Ib.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=A_.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(A_.clearImmediate(e),t._scheduled=void 0)}});var Qh=O(4986),Kx=O(3532);function M_(n=0,t,e=Qh.P){let i=-1;return null!=t&&((0,Kx.K)(t)?e=t:i=t),new v.y(r=>{let s=function xb(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function yD(n,t=Qh.z){return function ZF(n){return(0,wi.e)((t,e)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const y=r;r=null,e.next(y)}c&&e.complete()},p=()=>{s=null,c&&e.complete()};t.subscribe((0,on.x)(e,y=>{i=!0,r=y,s||(0,Po.Xf)(n(y)).subscribe(s=(0,on.x)(e,d,p))},()=>{c=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>M_(n,t))}var vD=O(5032);function Pn(n){return(0,wi.e)((t,e)=>{(0,Po.Xf)(n).subscribe((0,on.x)(e,()=>e.complete(),vD.Z)),!e.closed&&t.subscribe(e)})}let bD;try{bD="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){bD=!1}let Lp,Pi=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function Gi(n){return n===Zo}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!bD)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.Lbi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wD=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function _d(){if(Lp)return Lp;if("object"!=typeof document||!document)return Lp=new Set(wD),Lp;let n=document.createElement("input");return Lp=new Set(wD.filter(t=>(n.setAttribute("type",t),n.type===t))),Lp}let Bp,Vp,il,Mb;function Xh(n){return function CD(){if(null==Bp&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Bp=!0}))}finally{Bp=Bp||!1}return Bp}()?n:!!n.capture}function ED(){if(null==il){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return il=!1,il;if("scrollBehavior"in document.documentElement.style)il=!0;else{const n=Element.prototype.scrollTo;il=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return il}function Jh(){if("object"!=typeof document||!document)return 0;if(null==Vp){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),i=e.style;i.width="2px",i.height="1px",n.appendChild(e),document.body.appendChild(n),Vp=0,0===n.scrollLeft&&(n.scrollLeft=1,Vp=0===n.scrollLeft?1:2),n.remove()}return Vp}function kb(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function hu(n){return n.composedPath?n.composedPath()[0]:n.target}function k_(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const eM=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function DD(){return(0,o.f3M)(G)}}),TD=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Zl=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new o.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function Rb(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?TD.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(eM,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Up=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),ef=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new ht.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new v.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(yD(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ot()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(_n(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=Oi(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Rs(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(Pi),o.LFG(G,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Hp=(()=>{class n{constructor(e,i,r,s){this.elementRef=e,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new ht.x,this._elementScrolled=new v.y(c=>this.ngZone.runOutsideAngular(()=>Rs(this.elementRef.nativeElement,"scroll").pipe(Pn(this._destroyed)).subscribe(c)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=i.scrollHeight-i.clientHeight-e.bottom),r&&0!=Jh()?(null!=e.left&&(e.right=i.scrollWidth-i.clientWidth-e.left),2==Jh()?e.left=e.right:1==Jh()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=i.scrollWidth-i.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const i=this.elementRef.nativeElement;ED()?i.scrollTo(e):(null!=e.top&&(i.scrollTop=e.top),null!=e.left&&(i.scrollLeft=e.left))}measureScrollOffset(e){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const c=this.dir&&"rtl"==this.dir.value;return"start"==e?e=c?r:i:"end"==e&&(e=c?i:r),c&&2==Jh()?e==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:c&&1==Jh()?e==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(ef),o.Y36(o.R0b),o.Y36(Zl,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),jp=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new ht.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(yD(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi),o.LFG(o.R0b),o.LFG(G,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),P_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Up,Yl],Up,Yl]}),n})();class N_{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Gp extends N_{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class tf extends N_{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class PD extends N_{constructor(t){super(),this.element=t instanceof o.SBq?t.nativeElement:t}}class zp{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Gp?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof tf?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof PD?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class ND extends zp{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||o.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let qp=(()=>{class n extends zp{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new o.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o._Vd),o.Y36(o.s_b),o.Y36(G))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[o.qOj]}),n})(),$p=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var Lr=O(6451);const FD=ED();class uM{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ri(-this._previousScrollPosition.left),t.style.top=ri(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),FD&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),FD&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class hM{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Ni{enable(){}disable(){}attach(){}}function F_(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function LD(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class fM{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();F_(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let BD=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Ni,this.close=c=>new hM(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new uM(this._viewportRuler,this._document),this.reposition=c=>new fM(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ef),o.LFG(jp),o.LFG(o.R0b),o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Wp{constructor(t){if(this.scrollStrategy=new Ni,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class nf{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class VD{constructor(t,e,i,r,s,c,d,p,y){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new ht.x,this._attachments=new ht.x,this._detachments=new ht.x,this._locationChanges=ks.w0.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._backdropTransitionendHandler=C=>{this._disposeBackdrop(C.target)},this._keydownEvents=new ht.x,this._outsidePointerEvents=new ht.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Vn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=ri(this._config.width),t.height=ri(this._config.height),t.minWidth=ri(this._config.minWidth),t.minHeight=ri(this._config.minHeight),t.maxWidth=ri(this._config.maxWidth),t.maxHeight=ri(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,i){const r=nl(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Pn((0,Lr.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let Fb=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||k_()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),k_()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G),o.LFG(Pi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Lb="cdk-overlay-connected-position-bounding-box",eL=/([A-Za-z%]+)$/;class Bb{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ht.x,this._resizeSubscription=ks.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(Lb),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,r,d),y=this._getOverlayPoint(p,e,d),C=this._getOverlayFit(y,e,i,d);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(C,y,i)?s.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<C.visibleArea)&&(c={overlayFit:C,overlayPoint:y,originPoint:p,position:d,overlayRect:e})}if(s.length){let d=null,p=-1;for(const y of s){const C=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);C>p&&(p=C,d=y)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Kl(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Lb),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=UD(e);let{x:c,y:d}=t,p=this._getOffset(r,"x"),y=this._getOffset(r,"y");p&&(c+=p),y&&(d+=y);let M=0-d,L=d+s.height-i.height,j=this._subtractOverflows(s.width,0-c,c+s.width-i.width),le=this._subtractOverflows(s.height,M,L),we=j*le;return{visibleArea:we,isCompletelyWithinViewport:s.width*s.height===we,fitsInViewportVertically:le===s.height,fitsInViewportHorizontally:j==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,c=ya(this._overlayRef.getConfig().minHeight),d=ya(this._overlayRef.getConfig().minWidth),y=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=c&&c<=r)&&y}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=UD(e),s=this._viewportRect,c=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),p=Math.max(s.top-i.top-t.y,0),y=Math.max(s.left-i.left-t.x,0);let C=0,D=0;return C=r.width<=s.width?y||-c:t.x<this._viewportMargin?s.left-i.left-t.x:0,D=r.height<=s.height?p||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:C,y:D},{x:t.x+C,y:t.y+D}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new nf(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,c,d,C,D,M;if("top"===e.overlayY)c=t.y,s=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const L=Math.min(i.bottom-t.y+i.top,t.y),j=this._lastBoundingBoxSize.height;s=2*L,c=t.y-L,s>j&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-j/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)M=i.width-t.x+this._viewportMargin,C=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)D=t.x,C=i.right-t.x;else{const L=Math.min(i.right-t.x+i.left,t.x),j=this._lastBoundingBoxSize.width;C=2*L,D=t.x-L,C>j&&!this._isInitialRender&&!this._growAfterOpen&&(D=t.x-j/2)}return{top:c,left:D,bottom:d,right:M,width:C,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=ri(i.height),r.top=ri(i.top),r.bottom=ri(i.bottom),r.width=ri(i.width),r.left=ri(i.left),r.right=ri(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ri(s)),c&&(r.maxWidth=ri(c))}this._lastBoundingBoxSize=i,Kl(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Kl(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Kl(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const C=this._viewportRuler.getViewportScrollPosition();Kl(i,this._getExactOverlayY(e,t,C)),Kl(i,this._getExactOverlayX(e,t,C))}else i.position="static";let d="",p=this._getOffset(e,"x"),y=this._getOffset(e,"y");p&&(d+=`translateX(${p}px) `),y&&(d+=`translateY(${y}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=ri(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=ri(c.maxWidth):s&&(i.maxWidth="")),Kl(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ri(s.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ri(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:LD(t,i),isOriginOutsideView:F_(t,i),isOverlayClipped:LD(e,i),isOverlayOutsideView:F_(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&nl(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof o.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function Kl(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function ya(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(eL);return e&&"px"!==e?null:parseFloat(t)}return n||null}function UD(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Vb="cdk-global-overlay-wrapper";class rl{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(Vb),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),y=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);t.position=this._cssPosition,t.marginLeft=p?"0":this._leftOffset,t.marginTop=y?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,p?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(Vb),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let va=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new rl}flexibleConnectedTo(e){return new Bb(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(jp),o.LFG(G),o.LFG(Pi),o.LFG(Fb))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fo=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HD=(()=>{class n extends Fo{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jD=(()=>{class n extends Fo{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=hu(s)},this._clickListener=s=>{const c=hu(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const C=p[y];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(c)||C.overlayElement.contains(d))break;const D=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(G),o.LFG(Pi),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gM=0,Lo=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C,D,M){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=p,this._document=y,this._directionality=C,this._location=D,this._outsideClickDispatcher=M}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new Wp(e);return c.direction=c.direction||this._directionality.value,new VD(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+gM++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(o.z2F)),new ND(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(BD),o.LFG(Fb),o.LFG(o._Vd),o.LFG(va),o.LFG(HD),o.LFG(o.zs3),o.LFG(o.R0b),o.LFG(G),o.LFG(Zl),o.LFG(De),o.LFG(jD))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const zD={provide:new o.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Lo],useFactory:function yM(n){return()=>n.scrollStrategies.reposition()}};let rf=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Lo,zD],imports:[[Up,$p,P_],P_]}),n})();function sl(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function yd(n,t=Qh.z){return(0,wi.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function p(){const y=c+n,C=t.now();if(C<y)return r=this.schedule(void 0,y-C),void i.add(r);d()}e.subscribe((0,on.x)(i,y=>{s=y,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}function tT(n){return _n((t,e)=>n<=e)}function Kp(n,t=Ee.y){return n=null!=n?n:nT,(0,wi.e)((e,i)=>{let r,s=!0;e.subscribe((0,on.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function nT(n,t){return n===t}let iT=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tk=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,i)=>this._cleanupObserver(i))}observe(e){const i=Oi(e);return new v.y(r=>{const c=this._observeElement(i).subscribe(r);return()=>{c.unsubscribe(),this._unobserveElement(i)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const i=new ht.x,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:i,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:i,stream:r}=this._observedElements.get(e);i&&i.disconnect(),r.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(iT))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rT=(()=>{class n{constructor(e,i,r){this._contentObserver=e,this._elementRef=i,this._ngZone=r,this.event=new o.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Tt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=md(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(yd(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(tk),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),Qp=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[iT]}),n})();class Qb{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ht.x,this._typeaheadSubscription=ks.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new ht.x,this.change=new ht.x,t instanceof o.n_E&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Ei.b)(e=>this._pressedLetters.push(e)),yd(t),_n(()=>this._pressedLetters.length>0),(0,Ce.U)(()=>this._pressedLetters.join(""))).subscribe(e=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,c=i[s];if(!this._skipPredicateFn(c)&&0===c.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||sl(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),i="number"==typeof t?t:e.indexOf(t),r=e[i];this._activeItem=null==r?null:r,this._activeItemIndex=i}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let i=1;i<=e.length;i++){const r=(this._activeItemIndex+t*i+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(!i[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof o.n_E?this._items.toArray():this._items}}class ok extends Qb{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class aT extends Qb{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let Xb=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function ck(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function lk(n){try{return n.frameElement}catch(t){return null}}(function hk(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===$_(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=$_(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function dk(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function uT(n){return!function e0(n){return function t0(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function Jb(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function lT(n){return function uk(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||cT(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cT(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function $_(n){if(!cT(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class dT{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,Vn.q)(1)).subscribe(t)}}let hT=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new dT(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Xb),o.LFG(o.R0b),o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vd(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function r0(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const KL=new o.OlP("cdk-input-modality-detector-options"),fT={ignoreKeys:[18,17,224,91,16]},lf=Xh({passive:!0,capture:!0});let pk=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new bi(null),this._lastTouchMs=0,this._onKeydown=c=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(y=>y===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=hu(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(vd(c)?"keyboard":"mouse"),this._mostRecentTarget=hu(c))},this._onTouchstart=c=>{r0(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=hu(c))},this._options=Object.assign(Object.assign({},fT),s),this.modalityDetected=this._modality.pipe(tT(1)),this.modalityChanged=this.modalityDetected.pipe(Kp()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,lf),r.addEventListener("mousedown",this._onMousedown,lf),r.addEventListener("touchstart",this._onTouchstart,lf)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,lf),document.removeEventListener("mousedown",this._onMousedown,lf),document.removeEventListener("touchstart",this._onTouchstart,lf))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi),o.LFG(o.R0b),o.LFG(G),o.LFG(KL,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mk=new o.OlP("liveAnnouncerElement",{providedIn:"root",factory:function mT(){return null}}),gT=new o.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let W_=(()=>{class n{constructor(e,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...i){const r=this._defaultOptions;let s,c;return 1===i.length&&"number"==typeof i[0]?c=i[0]:[s,c]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==c&&r&&(c=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(d=>this._currentResolve=d)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof c&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var e,i;clearTimeout(this._previousTimeout),null===(e=this._liveElement)||void 0===e||e.remove(),this._liveElement=null,null===(i=this._currentResolve)||void 0===i||i.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",i=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(mk,8),o.LFG(o.R0b),o.LFG(G),o.LFG(gT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jp=new o.OlP("cdk-focus-monitor-default-options"),Z_=Xh({passive:!0,capture:!0});let pu=(()=>{class n{constructor(e,i,r,s,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ht.x,this._rootNodeFocusAndBlurListener=d=>{const p=hu(d),y="focus"===d.type?this._onFocus:this._onBlur;for(let C=p;C;C=C.parentElement)y.call(this,d,C)},this._document=s,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(e,i=!1){const r=Oi(e);if(!this._platform.isBrowser||1!==r.nodeType)return ot(null);const s=function Jx(n){if(function Xx(){if(null==Mb){const n="undefined"!=typeof document?document.head:null;Mb=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Mb}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new ht.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=Oi(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=Oi(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=hu(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,Z_),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,Z_)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Pn(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Z_),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Z_),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(Pi),o.LFG(pk),o.LFG(G,8),o.LFG(Jp,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _T="cdk-high-contrast-black-on-white",yT="cdk-high-contrast-white-on-black",em="cdk-high-contrast-active";let vT=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(em),e.remove(_T),e.remove(yT),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(em),e.add(_T)):2===i&&(e.add(em),e.add(yT))}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi),o.LFG(G))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QL=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(vT))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Qp]]}),n})();function cf(n,t){if(1&n&&o._UZ(0,"mat-pseudo-checkbox",4),2&n){const e=o.oxw();o.Q6J("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function bT(n,t){if(1&n&&(o.TgZ(0,"span",5),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij("(",e.group.label,")")}}const uf=["*"],CT=new o.OlP("mat-sanity-checks",{providedIn:"root",factory:function e2(){return!0}});let $t=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!k_()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(vT),o.LFG(CT,8),o.LFG(G))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Up],Up]}),n})();function Y_(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Tt(t)}}}function df(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function hf(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Tt(t)}}}function o0(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?md(e):this.defaultTabIndex}}}function DT(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new ht.x,this.errorState=!1}updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}}}let Q_=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class nm{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const TT={enterDuration:225,exitDuration:150},Bo=Xh({passive:!0}),IT=["mousedown","touchstart"],im=["mouseup","mouseleave","touchend","touchcancel"];class ff{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Oi(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},TT),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function Sk(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,p=e-r.top,y=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=d-c+"px",C.style.top=p-c+"px",C.style.height=2*c+"px",C.style.width=2*c+"px",null!=i.color&&(C.style.backgroundColor=i.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C),function Ik(n){window.getComputedStyle(n).getPropertyValue("opacity")}(C),C.style.transform="scale(1)";const D=new nm(this,C,i);return D.state=0,this._activeRipples.add(D),i.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const M=D===this._mostRecentTransientRipple;D.state=1,!i.persistent&&(!M||!this._isPointerDown)&&D.fadeOut()},y),D}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,r=Object.assign(Object.assign({},TT),t.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Oi(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(IT))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(im),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=vd(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!r0(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,Bo)})})}_removeTriggerEvents(){this._triggerElement&&(IT.forEach(t=>{this._triggerElement.removeEventListener(t,this,Bo)}),this._pointerUpEventsRegistered&&im.forEach(t=>{this._triggerElement.removeEventListener(t,this,Bo)}))}}const ST=new o.OlP("mat-ripple-global-options");let ol=(()=>{class n{constructor(e,i,r,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new ff(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Pi),o.Y36(ST,8),o.Y36(Ms,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),mu=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[$t],$t]}),n})(),Ak=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ms,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,i){2&e&&o.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,i){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),xk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[$t]]}),n})();const l0=new o.OlP("MAT_OPTION_PARENT_COMPONENT"),xT=new o.OlP("MatOptgroup");let h2=0;class X_{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let c0=(()=>{class n{constructor(e,i,r,s){this._element=e,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+h2++,this.onSelectionChange=new o.vpe,this._stateChanges=new ht.x}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Tt(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!sl(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new X_(this,e))}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),pf=(()=>{class n extends c0{constructor(e,i,r,s){super(e,i,r,s)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(l0,8),o.Y36(xT,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&e&&(o.Ikx("id",i.id),o.uIk("tabindex",i._getTabIndex())("aria-selected",i._getAriaSelected())("aria-disabled",i.disabled.toString()),o.ekj("mat-selected",i.selected)("mat-option-multiple",i.multiple)("mat-active",i.active)("mat-option-disabled",i.disabled))},exportAs:["matOption"],features:[o.qOj],ngContentSelectors:uf,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,i){1&e&&(o.F$t(),o.YNc(0,cf,1,2,"mat-pseudo-checkbox",0),o.TgZ(1,"span",1),o.Hsn(2),o.qZA(),o.YNc(3,bT,2,1,"span",2),o._UZ(4,"div",3)),2&e&&(o.Q6J("ngIf",i.multiple),o.xp6(3),o.Q6J("ngIf",i.group&&i.group._inert),o.xp6(1),o.Q6J("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},directives:[Ak,un,ol],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})(),J_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[mu,gr,$t,xk]]}),n})();function Rk(n,t){}class h0{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Ok={dialogContainer:Rn("dialogContainer",[Kt("void, exit",_t({opacity:0,transform:"scale(0.7)"})),Kt("enter",_t({transform:"none"})),Rt("* => enter",Qr([Dn("150ms cubic-bezier(0, 0, 0.2, 1)",_t({transform:"none",opacity:1})),Pl("@*",Ws(),{optional:!0})])),Rt("* => void, * => exit",Qr([Dn("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",_t({opacity:0})),Pl("@*",Ws(),{optional:!0})]))])};let f0=(()=>{class n extends zp{constructor(e,i,r,s,c,d,p,y){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=c,this._interactivityChecker=d,this._ngZone=p,this._focusMonitor=y,this._animationStateChanged=new o.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=C=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(C)),this._ariaLabelledBy=c.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=kb())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=kb(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=kb();return e===i||e.contains(i)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(hT),o.Y36(o.sBO),o.Y36(G,8),o.Y36(h0),o.Y36(Xb),o.Y36(o.R0b),o.Y36(pu))},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&o.Gf(qp,7),2&e){let r;o.iGM(r=o.CRH())&&(i._portalOutlet=r.first)}},features:[o.qOj]}),n})(),MT=(()=>{class n extends f0{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&o.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(o.Ikx("id",i._id),o.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),o.d8E("@dialogContainer",i._state))},features:[o.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&o.YNc(0,Rk,0,0,"ng-template",0)},directives:[qp],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ok.dialogContainer]}}),n})(),kT=0;class al{constructor(t,e,i="mat-dialog-"+kT++){this._overlayRef=t,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new ht.x,this._afterClosed=new ht.x,this._beforeClosed=new ht.x,this._state=0,e._id=i,e._animationStateChanged.pipe(_n(r=>"opened"===r.state),(0,Vn.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(_n(r=>"closed"===r.state),(0,Vn.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(_n(r=>27===r.keyCode&&!this.disableClose&&!sl(r))).subscribe(r=>{r.preventDefault(),p0(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():p0(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(_n(e=>"closing"===e.state),(0,Vn.q)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function p0(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const mf=new o.OlP("MatDialogData"),RT=new o.OlP("mat-dialog-default-options"),m0=new o.OlP("mat-dialog-scroll-strategy"),Nk={provide:m0,deps:[Lo],useFactory:function OT(n){return()=>n.scrollStrategies.block()}};let ns=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C,D){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=c,this._dialogRefConstructor=p,this._dialogContainerType=y,this._dialogDataToken=C,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ht.x,this._afterOpenedAtThisLevel=new ht.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Mh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ci(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){i=function Fk(n,t){return Object.assign(Object.assign({},t),n)}(i,this._defaultOptions||new h0),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),c=this._attachDialogContent(e,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.afterClosed().subscribe(()=>this._removeOpenDialog(c)),this.afterOpened.next(c),s._initializeWithAttachedContent(),c}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new Wp({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const s=o.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:h0,useValue:i}]}),c=new Gp(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return e.attach(c).instance}_attachDialogContent(e,i,r,s){const c=new this._dialogRefConstructor(r,i,s.id);if(e instanceof o.Rgc)i.attachTemplatePortal(new tf(e,null,{$implicit:s.data,dialogRef:c}));else{const d=this._createInjector(s,c,i),p=i.attachComponentPortal(new Gp(e,s.viewContainerRef,d,s.componentFactoryResolver));c.componentInstance=p.instance}return c.updateSize(s.width,s.height).updatePosition(s.position),c}_createInjector(e,i,r){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,c=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!s||!s.get(Zl,null,o.XFs.Optional))&&c.push({provide:Zl,useValue:{value:e.direction,change:ot()}}),o.zs3.create({parent:s||this._injector,providers:c})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n}),n})(),ba=(()=>{class n extends ns{constructor(e,i,r,s,c,d,p,y){super(e,i,s,d,p,c,al,MT,mf,y)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lo),o.LFG(o.zs3),o.LFG(De,8),o.LFG(RT,8),o.LFG(m0),o.LFG(n,12),o.LFG(Fb),o.LFG(Ms,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),rm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"]}),n})(),PT=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[ba,Nk],imports:[[rf,$p,$t],$t]}),n})(),ty=(()=>{class n{constructor(e,i){this.data=e,this.ref=i}ngOnInit(){}close(){this.ref.close()}delete(){this.ref.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(mf),o.Y36(al))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-delete"]],decls:9,vars:1,consts:[[1,"text-center"],[1,"my-4","fs-6"],[1,"btn","btn-danger","me-3",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"h1",0),o._uU(2,"Delete"),o.qZA(),o.TgZ(3,"p",1),o._uU(4),o.qZA(),o.TgZ(5,"button",2),o.NdJ("click",function(){return i.close()}),o._uU(6,"Fechar"),o.qZA(),o.TgZ(7,"button",3),o.NdJ("click",function(){return i.delete()}),o._uU(8,"Deletar"),o.qZA()()),2&e&&(o.xp6(4),o.Oqu(i.data))},styles:[""]}),n})();function NT(...n){const t=(0,jl.jO)(n),{args:e,keys:i}=F(n),r=new v.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let p=c,y=c;for(let C=0;C<c;C++){let D=!1;(0,Po.Xf)(e[C]).subscribe((0,on.x)(s,M=>{D||(D=!0,y--),d[C]=M},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(i?ni(i,d):d),s.complete())}))}});return t?r.pipe(pt(t)):r}let ny=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),gu=(()=>{class n extends ny{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Os=new o.OlP("NgValueAccessor"),_2={provide:Os,useExisting:(0,o.Gpc)(()=>is),multi:!0},Lk=new o.OlP("CompositionEventMode");let is=(()=>{class n extends ny{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function FT(){const n=x()?x().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(Lk,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([_2]),o.qOj]}),n})();function wa(n){return null==n||0===n.length}function g0(n){return null!=n&&"number"==typeof n.length}const wr=new o.OlP("NgValidators"),ll=new o.OlP("NgAsyncValidators"),_0=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qn{static min(t){return function LT(n){return t=>{if(wa(t.value)||wa(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function BT(n){return t=>{if(wa(t.value)||wa(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function y0(n){return wa(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function v0(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function VT(n){return wa(n.value)||_0.test(n.value)?null:{email:!0}}(t)}static minLength(t){return b0(t)}static maxLength(t){return w0(t)}static pattern(t){return function UT(n){if(!n)return sy;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(wa(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return GT(t)}static composeAsync(t){return Bk(t)}}function b0(n){return t=>wa(t.value)||!g0(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function w0(n){return t=>g0(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function sy(n){return null}function C0(n){return null!=n}function HT(n){const t=(0,o.QGY)(n)?(0,gn.D)(n):n;return(0,o.CqO)(t),t}function E0(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function D0(n,t){return t.map(e=>e(n))}function T0(n){return n.map(t=>function jT(n){return!n.validate}(t)?t:e=>t.validate(e))}function GT(n){if(!n)return null;const t=n.filter(C0);return 0==t.length?null:function(e){return E0(D0(e,t))}}function I0(n){return null!=n?GT(T0(n)):null}function Bk(n){if(!n)return null;const t=n.filter(C0);return 0==t.length?null:function(e){return NT(D0(e,t).map(HT)).pipe((0,Ce.U)(E0))}}function oy(n){return null!=n?Bk(T0(n)):null}function Vk(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function Uk(n){return n._rawValidators}function Hk(n){return n._rawAsyncValidators}function S0(n){return n?Array.isArray(n)?n:[n]:[]}function A0(n,t){return Array.isArray(n)?n.includes(t):n===t}function jk(n,t){const e=S0(t);return S0(n).forEach(r=>{A0(e,r)||e.push(r)}),e}function Gk(n,t){return S0(t).filter(e=>!A0(n,e))}class zk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=I0(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=oy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class ro extends zk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ps extends zk{get formDirective(){return null}get path(){return null}}class x0{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}let so=(()=>{class n extends x0{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ro,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[o.qOj]}),n})(),Ql=(()=>{class n extends x0{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ps,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[o.qOj]}),n})();function bd(n,t){am(n,t),t.valueAccessor.writeValue(n.value),function Kk(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&k0(n,t)})}(n,t),function WT(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function M0(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&k0(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function Yk(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function cy(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),uy(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ns(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function am(n,t){const e=Uk(n);null!==t.validator?n.setValidators(Vk(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=Hk(n);null!==t.asyncValidator?n.setAsyncValidators(Vk(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();Ns(t._rawValidators,r),Ns(t._rawAsyncValidators,r)}function uy(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=Uk(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=Hk(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return Ns(t._rawValidators,i),Ns(t._rawAsyncValidators,i),e}function k0(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZT(n,t){am(n,t)}function Xl(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function R0(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function O0(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===is?e=s:function XT(n){return Object.getPrototypeOf(n.constructor)===gu}(s)?i=s:r=s}),r||i||e||null}function JT(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const lm="VALID",cm="INVALID",gf="PENDING",um="DISABLED";function dm(n){return(hm(n)?n.validators:n)||null}function N0(n){return Array.isArray(n)?I0(n):n||null}function F0(n,t){return(hm(t)?t.asyncValidators:n)||null}function eI(n){return Array.isArray(n)?oy(n):n||null}function hm(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const dy=n=>n instanceof wn,fm=n=>n instanceof Vo;function nI(n){return dy(n)?n.value:n.getRawValue()}function L0(n,t){const e=fm(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[t])throw new o.vHH(1001,"")}function B0(n,t){fm(n),n._forEachChild((i,r)=>{if(void 0===t[r])throw new o.vHH(1002,"")})}class V0{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=N0(this._rawValidators),this._composedAsyncValidatorFn=eI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===lm}get invalid(){return this.status===cm}get pending(){return this.status==gf}get disabled(){return this.status===um}get enabled(){return this.status!==um}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=N0(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=eI(t)}addValidators(t){this.setValidators(jk(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(jk(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Gk(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Gk(t,this._rawAsyncValidators))}hasValidator(t){return A0(this._rawValidators,t)}hasAsyncValidator(t){return A0(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=gf,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=um,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=lm,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lm||this.status===gf)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?um:lm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=gf,this._hasOwnPendingAsyncValidator=!0;const e=HT(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function I2(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=fm(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof S2)(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?um:this.errors?cm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gf)?gf:this._anyControlsHaveStatus(cm)?cm:lm}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){hm(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class wn extends V0{constructor(t=null,e,i){super(dm(e),F0(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hm(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){JT(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){JT(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Vo extends V0{constructor(t,e,i){super(dm(e),F0(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){B0(this,t),Object.keys(t).forEach(i=>{L0(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=nI(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class S2 extends V0{constructor(t,e,i){super(dm(e),F0(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){B0(this,t),t.forEach((i,r)=>{L0(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>nI(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const iI={provide:Ps,useExisting:(0,o.Gpc)(()=>mm)},pm=(()=>Promise.resolve(null))();let mm=(()=>{class n extends Ps{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new Vo({},I0(e),oy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){pm.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),bd(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){pm.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){pm.then(()=>{const i=this._findContainer(e.path),r=new Vo({});ZT(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){pm.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){pm.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,R0(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(wr,10),o.Y36(ll,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([iI]),o.qOj]}),n})(),cl=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),cI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const uI=new o.OlP("NgModelWithFormControlWarning"),x2={provide:ro,useExisting:(0,o.Gpc)(()=>my)};let my=(()=>{class n extends ro{constructor(e,i,r,s){super(),this._ngModelWarningConfig=s,this.update=new o.vpe,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(i),this.valueAccessor=O0(0,r)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const i=e.form.previousValue;i&&cy(i,this,!1),bd(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}Xl(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&cy(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(o.Y36(wr,10),o.Y36(ll,10),o.Y36(Os,10),o.Y36(uI,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[o._Bn([x2]),o.qOj,o.TTD]}),n})();const dI={provide:Ps,useExisting:(0,o.Gpc)(()=>Fs)};let Fs=(()=>{class n extends Ps{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(uy(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return bd(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){cy(e.control||null,e,!1),JT(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,R0(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(cy(i||null,e),dy(r)&&(bd(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);ZT(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function YT(n,t){return uy(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){am(this.form,this),this._oldForm&&uy(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(wr,10),o.Y36(ll,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([dI]),o.qOj,o.TTD]}),n})();const hI={provide:ro,useExisting:(0,o.Gpc)(()=>Ca)};let Ca=(()=>{class n extends ro{constructor(e,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=O0(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Xl(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function ly(n,t){return[...t.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(o.Y36(Ps,13),o.Y36(wr,10),o.Y36(ll,10),o.Y36(Os,10),o.Y36(uI,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([hI]),o.qOj,o.TTD]}),n})();function _I(n){return"number"==typeof n?n:parseInt(n,10)}let _f=(()=>{class n{constructor(){this._validator=sy}ngOnChanges(e){if(this.inputName in e){const i=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):sy,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();const h={provide:wr,useExisting:(0,o.Gpc)(()=>f),multi:!0};let f=(()=>{class n extends _f{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>_I(e),this.createValidator=e=>b0(e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[o._Bn([h]),o.qOj]}),n})();const g={provide:wr,useExisting:(0,o.Gpc)(()=>b),multi:!0};let b=(()=>{class n extends _f{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>_I(e),this.createValidator=e=>w0(e)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,i){2&e&&o.uIk("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[o._Bn([g]),o.qOj]}),n})(),te=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[cI]]}),n})(),Oe=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:uI,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[te]}),n})();const Be=["connectionContainer"],bt=["inputContainer"],tn=["label"];function Cn(n,t){1&n&&(o.ynx(0),o.TgZ(1,"div",14),o._UZ(2,"div",15)(3,"div",16)(4,"div",17),o.qZA(),o.TgZ(5,"div",18),o._UZ(6,"div",15)(7,"div",16)(8,"div",17),o.qZA(),o.BQk())}function oo(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",19),o.NdJ("cdkObserveContent",function(){return o.CHM(e),o.oxw().updateOutlineGap()}),o.Hsn(1,1),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)}}function Cd(n,t){if(1&n&&(o.ynx(0),o.Hsn(1,2),o.TgZ(2,"span"),o._uU(3),o.qZA(),o.BQk()),2&n){const e=o.oxw(2);o.xp6(3),o.Oqu(e._control.placeholder)}}function Z0(n,t){1&n&&o.Hsn(0,3,["*ngSwitchCase","true"])}function Y0(n,t){1&n&&(o.TgZ(0,"span",23),o._uU(1," *"),o.qZA())}function K0(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"label",20,21),o.NdJ("cdkObserveContent",function(){return o.CHM(e),o.oxw().updateOutlineGap()}),o.YNc(2,Cd,4,1,"ng-container",12),o.YNc(3,Z0,1,0,"ng-content",12),o.YNc(4,Y0,2,0,"span",22),o.qZA()}if(2&n){const e=o.oxw();o.ekj("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),o.Q6J("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),o.uIk("for",e._control.id)("aria-owns",e._control.id),o.xp6(2),o.Q6J("ngSwitchCase",!1),o.xp6(1),o.Q6J("ngSwitchCase",!0),o.xp6(1),o.Q6J("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Q0(n,t){1&n&&(o.TgZ(0,"div",24),o.Hsn(1,4),o.qZA())}function X0(n,t){if(1&n&&(o.TgZ(0,"div",25),o._UZ(1,"span",26),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.ekj("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function J0(n,t){if(1&n&&(o.TgZ(0,"div"),o.Hsn(1,5),o.qZA()),2&n){const e=o.oxw();o.Q6J("@transitionMessages",e._subscriptAnimationState)}}function ew(n,t){if(1&n&&(o.TgZ(0,"div",30),o._uU(1),o.qZA()),2&n){const e=o.oxw(2);o.Q6J("id",e._hintLabelId),o.xp6(1),o.Oqu(e.hintLabel)}}function tw(n,t){if(1&n&&(o.TgZ(0,"div",27),o.YNc(1,ew,2,2,"div",28),o.Hsn(2,6),o._UZ(3,"div",29),o.Hsn(4,7),o.qZA()),2&n){const e=o.oxw();o.Q6J("@transitionMessages",e._subscriptAnimationState),o.xp6(1),o.Q6J("ngIf",e.hintLabel)}}const nw=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],yq=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],vq=new o.OlP("MatError"),bq={transitionMessages:Rn("transitionMessages",[Kt("enter",_t({opacity:1,transform:"translateY(0%)"})),Rt("void => enter",[_t({opacity:0,transform:"translateY(-5px)"}),Dn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let vI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n}),n})();const wq=new o.OlP("MatHint");let Ea=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-label"]]}),n})(),Cq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const Eq=new o.OlP("MatPrefix"),Dq=new o.OlP("MatSuffix");let P2=0;const Iq=df(class{constructor(n){this._elementRef=n}},"primary"),Sq=new o.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),lR=new o.OlP("MatFormField");let Jl=(()=>{class n extends Iq{constructor(e,i,r,s,c,d,p){super(e),this._changeDetectorRef=i,this._dir=r,this._defaults=s,this._platform=c,this._ngZone=d,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new ht.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+P2++,this._labelId="mat-form-field-label-"+P2++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const i=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&i!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Tt(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(Ci(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Pn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Pn(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Lr.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Ci(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Ci(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Pn(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const i=this._control?this._control.ngControl:null;return i&&i[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Rs(this._label.nativeElement,"transitionend").pipe((0,Vn.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?e.push(i.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,i=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const C=i.querySelectorAll(`${r}, ${s}`);for(let D=0;D<C.length;D++)C[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,d=0;const p=i.querySelectorAll(r),y=i.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=i.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(C),M=e.children,L=this._getStartEnd(M[0].getBoundingClientRect());let j=0;for(let le=0;le<M.length;le++)j+=M[le].offsetWidth;c=Math.abs(L-D)-5,d=j>0?.75*j+10:0}for(let C=0;C<p.length;C++)p[C].style.width=`${c}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${d}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const i=e.getRootNode();return i&&i!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Zl,8),o.Y36(Sq,8),o.Y36(Pi),o.Y36(o.R0b),o.Y36(Ms,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,vI,5),o.Suo(r,vI,7),o.Suo(r,Ea,5),o.Suo(r,Ea,7),o.Suo(r,Cq,5),o.Suo(r,vq,5),o.Suo(r,wq,5),o.Suo(r,Eq,5),o.Suo(r,Dq,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._controlNonStatic=s.first),o.iGM(s=o.CRH())&&(i._controlStatic=s.first),o.iGM(s=o.CRH())&&(i._labelChildNonStatic=s.first),o.iGM(s=o.CRH())&&(i._labelChildStatic=s.first),o.iGM(s=o.CRH())&&(i._placeholderChild=s.first),o.iGM(s=o.CRH())&&(i._errorChildren=s),o.iGM(s=o.CRH())&&(i._hintChildren=s),o.iGM(s=o.CRH())&&(i._prefixChildren=s),o.iGM(s=o.CRH())&&(i._suffixChildren=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(Be,7),o.Gf(bt,5),o.Gf(tn,5)),2&e){let r;o.iGM(r=o.CRH())&&(i._connectionContainerRef=r.first),o.iGM(r=o.CRH())&&(i._inputContainerRef=r.first),o.iGM(r=o.CRH())&&(i._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,i){2&e&&o.ekj("mat-form-field-appearance-standard","standard"==i.appearance)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-appearance-legacy","legacy"==i.appearance)("mat-form-field-invalid",i._control.errorState)("mat-form-field-can-float",i._canLabelFloat())("mat-form-field-should-float",i._shouldLabelFloat())("mat-form-field-has-label",i._hasFloatingLabel())("mat-form-field-hide-placeholder",i._hideControlPlaceholder())("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-focused",i._control.focused)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))("_mat-animation-noopable",!i._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[o._Bn([{provide:lR,useExisting:n}]),o.qOj],ngContentSelectors:yq,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,i){1&e&&(o.F$t(nw),o.TgZ(0,"div",0)(1,"div",1,2),o.NdJ("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),o.YNc(3,Cn,9,0,"ng-container",3),o.YNc(4,oo,2,1,"div",4),o.TgZ(5,"div",5,6),o.Hsn(7),o.TgZ(8,"span",7),o.YNc(9,K0,5,16,"label",8),o.qZA()(),o.YNc(10,Q0,2,0,"div",9),o.qZA(),o.YNc(11,X0,2,4,"div",10),o.TgZ(12,"div",11),o.YNc(13,J0,2,1,"div",12),o.YNc(14,tw,5,2,"div",13),o.qZA()()),2&e&&(o.xp6(3),o.Q6J("ngIf","outline"==i.appearance),o.xp6(1),o.Q6J("ngIf",i._prefixChildren.length),o.xp6(5),o.Q6J("ngIf",i._hasFloatingLabel()),o.xp6(1),o.Q6J("ngIf",i._suffixChildren.length),o.xp6(1),o.Q6J("ngIf","outline"!=i.appearance),o.xp6(1),o.Q6J("ngSwitch",i._getDisplayedMessages()),o.xp6(1),o.Q6J("ngSwitchCase","error"),o.xp6(1),o.Q6J("ngSwitchCase","hint"))},directives:[un,rT,Ji,Zr],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[bq.transitionMessages]},changeDetection:0}),n})(),bI=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[gr,$t,Qp],$t]}),n})();const F2=Xh({passive:!0});let Aq=(()=>{class n{constructor(e,i){this._platform=e,this._ngZone=i,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return ou.E;const i=Oi(e),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new ht.x,c="cdk-text-field-autofilled",d=p=>{"cdk-text-field-autofill-start"!==p.animationName||i.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&i.classList.contains(c)&&(i.classList.remove(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(i.classList.add(c),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",d,F2),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",d,F2)}}),s}stopMonitoring(e){const i=Oi(e),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((e,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const xq=new o.OlP("MAT_INPUT_VALUE_ACCESSOR"),Mq=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let kq=0;const Rq=DT(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i}});let ec=(()=>{class n extends Rq{constructor(e,i,r,s,c,d,p,y,C,D){super(d,s,c,r),this._elementRef=e,this._platform=i,this._autofillMonitor=y,this._formField=D,this._uid="mat-input-"+kq++,this.focused=!1,this.stateChanges=new ht.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(j=>_d().has(j)),this._iOSKeyupListener=j=>{const le=j.target;!le.value&&0===le.selectionStart&&0===le.selectionEnd&&(le.setSelectionRange(1,1),le.setSelectionRange(0,0))};const M=this._elementRef.nativeElement,L=M.nodeName.toLowerCase();this._inputValueAccessor=p||M,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&C.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===L,this._isTextarea="textarea"===L,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=M.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Tt(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){var e,i,r,s;return null!==(s=null!==(e=this._required)&&void 0!==e?e:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(qn.required))&&void 0!==s&&s}set required(e){this._required=Tt(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&_d().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Tt(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,i;const r=(null===(i=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===i?void 0:i.call(e))?null:this.placeholder;if(r!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=r,r?s.setAttribute("placeholder",r):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){Mq.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,i=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pi),o.Y36(ro,10),o.Y36(mm,8),o.Y36(Fs,8),o.Y36(Q_),o.Y36(xq,10),o.Y36(Aq),o.Y36(o.R0b),o.Y36(lR,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,i){1&e&&o.NdJ("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&e&&(o.Ikx("disabled",i.disabled)("required",i.required),o.uIk("id",i.id)("data-placeholder",i.placeholder)("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required),o.ekj("mat-input-server",i._isServer)("mat-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[o._Bn([{provide:vI,useExisting:n}]),o.qOj,o.TTD]}),n})(),Oq=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Q_],imports:[[L2,bI,$t],L2,bI]}),n})(),Pq=(()=>{class n{constructor(e){this.ref=e,this.justi=new wn("",[qn.required])}ngOnInit(){}close(){this.ref.close()}justificar(){this.ref.close(this.justi.value)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(al))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-justificar-faltas"]],decls:10,vars:2,consts:[[1,"h-100"],[1,"w-75"],["matInput","",3,"formControl"],[1,"btn","btn-danger","me-3",3,"click"],[1,"btn","btn-success",3,"disabled","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),o._uU(3,"Justificativa"),o.qZA(),o._UZ(4,"textarea",2),o.qZA(),o.TgZ(5,"div")(6,"button",3),o.NdJ("click",function(){return i.close()}),o._uU(7,"Fechar"),o.qZA(),o.TgZ(8,"button",4),o.NdJ("click",function(){return i.justificar()}),o._uU(9,"Justificar"),o.qZA()()()),2&e&&(o.xp6(4),o.Q6J("formControl",i.justi),o.xp6(4),o.Q6J("disabled",i.justi.invalid))},directives:[Jl,Ea,ec,is,so,my],styles:[""]}),n})();function Nq(n,t){1&n&&(o.TgZ(0,"mat-form-field",2)(1,"mat-label"),o._uU(2,"Justificativa"),o.qZA(),o._UZ(3,"input",9),o.qZA())}let Fq=(()=>{class n{constructor(e,i){this.ref=e,this.data=i,this.justificativa=!1}ngOnInit(){this.createForm()}createForm(){this.form=new Vo({horario:new wn("",[qn.required]),materia:new wn("",[qn.required]),professor:new wn("",[qn.required])}),this.setFormValue()}setFormValue(){null!=this.data.justificativa?(this.form.controls.justi=new wn("",[qn.required]),this.form.controls.justi.setValue(this.data.justificativa),this.justificativa=!0):null!=this.data.justificativa&&(this.justificativa=!1),this.form.controls.horario.setValue(this.data.horario),this.form.controls.materia.setValue(this.data.materia),this.form.controls.professor.setValue(this.data.professor)}close(){this.ref.close()}editar(){const e={materia:this.form.controls.materia.value,horario:this.form.controls.horario.value,professor:this.form.controls.professor.value};null!=this.data.justificativa&&(e.justificativa=this.form.controls.justi.value),this.ref.close(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(al),o.Y36(mf))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-editar-falta"]],decls:19,vars:3,consts:[[1,"h-100"],[3,"formGroup"],[1,"w-75"],["formControlName","horario","matInput",""],["formControlName","materia","matInput",""],["class","w-75",4,"ngIf"],["formControlName","professor","matInput",""],[1,"btn","btn-danger","me-3",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["formControlName","justi","matInput",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),o._uU(4,"Horario"),o.qZA(),o._UZ(5,"input",3),o.qZA(),o.TgZ(6,"mat-form-field",2)(7,"mat-label"),o._uU(8,"Disciplina"),o.qZA(),o._UZ(9,"input",4),o.qZA(),o.YNc(10,Nq,4,0,"mat-form-field",5),o.TgZ(11,"mat-form-field",2)(12,"mat-label"),o._uU(13,"Professor"),o.qZA(),o._UZ(14,"input",6),o.qZA()(),o.TgZ(15,"button",7),o.NdJ("click",function(){return i.close()}),o._uU(16,"Fechar"),o.qZA(),o.TgZ(17,"button",8),o.NdJ("click",function(){return i.editar()}),o._uU(18,"Salvar"),o.qZA()()),2&e&&(o.xp6(1),o.Q6J("formGroup",i.form),o.xp6(9),o.Q6J("ngIf",i.justificativa),o.xp6(7),o.Q6J("disabled",i.form.invalid))},directives:[cl,Ql,Fs,Jl,Ea,is,ec,so,Ca,un],styles:[""]}),n})();var Ie=O(5861),Tn=O(5813);function cR(){return(0,wi.e)((n,t)=>{let e,i=!1;n.subscribe((0,on.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}var lt,Cr=O(2011),uR=(O(7092),O(3942)),ao=O(9681),tc=O(4859),nc=O(1877),H=O(2090),Lq="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ed={},dR=dR||{},Ht=Lq||self;function wI(){}function hR(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function iw(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var fR="closure_uid_"+(1e9*Math.random()>>>0),Vq=0;function Uq(n,t,e){return n.call.apply(n.bind,arguments)}function Hq(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function rs(n,t,e){return(rs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Uq:Hq).apply(null,arguments)}function CI(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function ss(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function yf(){this.s=this.s,this.o=this.o}var Gq={};yf.prototype.s=!1,yf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Bq(n){return Object.prototype.hasOwnProperty.call(n,fR)&&n[fR]||(n[fR]=++Vq)}(this);delete Gq[n]}},yf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const B2=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},V2=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function U2(n){return Array.prototype.concat.apply([],arguments)}function pR(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function EI(n){return/^[\s\xa0]*$/.test(n)}var co,H2=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function lo(n,t){return-1!=n.indexOf(t)}function mR(n,t){return n<t?-1:n>t?1:0}e:{var j2=Ht.navigator;if(j2){var G2=j2.userAgent;if(G2){co=G2;break e}}co=""}function gR(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function z2(n){const t={};for(const e in n)t[e]=n[e];return t}var q2="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $2(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<q2.length;s++)e=q2[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function _R(n){return _R[" "](n),n}_R[" "]=wI;var DI,n,$q=lo(co,"Opera"),_y=lo(co,"Trident")||lo(co,"MSIE"),W2=lo(co,"Edge"),yR=W2||_y,Z2=lo(co,"Gecko")&&!(lo(co.toLowerCase(),"webkit")&&!lo(co,"Edge"))&&!(lo(co,"Trident")||lo(co,"MSIE"))&&!lo(co,"Edge"),Wq=lo(co.toLowerCase(),"webkit")&&!lo(co,"Edge");function Y2(){var n=Ht.document;return n?n.documentMode:void 0}e:{var vR="",bR=(n=co,Z2?/rv:([^\);]+)(\)|;)/.exec(n):W2?/Edge\/([\d\.]+)/.exec(n):_y?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Wq?/WebKit\/(\S+)/.exec(n):$q?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bR&&(vR=bR?bR[1]:""),_y){var wR=Y2();if(null!=wR&&wR>parseFloat(vR)){DI=String(wR);break e}}DI=vR}var Zq={};var Kq=Ht.document&&_y&&(Y2()||parseInt(DI,10))||void 0,Qq=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",wI,t),Ht.removeEventListener("test",wI,t)}catch(e){}return n}();function Ls(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function rw(n,t){if(Ls.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(Z2){e:{try{_R(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Xq[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&rw.Z.h.call(this)}}Ls.prototype.h=function(){this.defaultPrevented=!0},ss(rw,Ls);var Xq={2:"touch",3:"pen",4:"mouse"};rw.prototype.h=function(){rw.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var sw="closure_listenable_"+(1e6*Math.random()|0),Jq=0;function e$(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++Jq,this.ca=this.fa=!1}function TI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function II(n){this.src=n,this.g={},this.h=0}function ER(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=B2(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(TI(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function DR(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}II.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=DR(n,t,i,r);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new e$(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var TR="closure_lm_"+(1e6*Math.random()|0),IR={};function Q2(n,t,e,i,r){if(i&&i.once)return J2(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Q2(n,t[s],e,i,r);return null}return e=MR(e),n&&n[sw]?n.N(t,e,iw(i)?!!i.capture:!!i,r):X2(n,t,e,!1,i,r)}function X2(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=iw(r)?!!r.capture:!!r,d=AR(n);if(d||(n[TR]=d=new II(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function t$(){var t=n$;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)Qq||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(tB(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function J2(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)J2(n,t[s],e,i,r);return null}return e=MR(e),n&&n[sw]?n.O(t,e,iw(i)?!!i.capture:!!i,r):X2(n,t,e,!0,i,r)}function eB(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)eB(n,t[s],e,i,r);else i=iw(i)?!!i.capture:!!i,e=MR(e),n&&n[sw]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=DR(s=n.g[t],e,i,r))&&(TI(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=AR(n))&&(t=n.g[t.toString()],n=-1,t&&(n=DR(t,e,i,r)),(e=-1<n?t[n]:null)&&SR(e))}function SR(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[sw])ER(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(tB(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=AR(t))?(ER(e,n),0==e.h&&(e.src=null,t[TR]=null)):TI(n)}}}function tB(n){return n in IR?IR[n]:IR[n]="on"+n}function n$(n,t){if(n.ca)n=!0;else{t=new rw(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&SR(n),n=e.call(i,t)}return n}function AR(n){return(n=n[TR])instanceof II?n:null}var xR="__closure_events_fn_"+(1e9*Math.random()>>>0);function MR(n){return"function"==typeof n?n:(n[xR]||(n[xR]=function(t){return n.handleEvent(t)}),n[xR])}function Br(){yf.call(this),this.i=new II(this),this.P=this,this.I=null}function os(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new Ls(t,n);else if(t instanceof Ls)t.target=t.target||n;else{var r=t;$2(t=new Ls(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=SI(c,i,!0,t)&&r}if(r=SI(c=t.g=n,i,!0,t)&&r,r=SI(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=SI(c=t.g=e[s],i,!1,t)&&r}function SI(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ca&&c.capture==e){var d=c.listener,p=c.ia||c.src;c.fa&&ER(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}ss(Br,yf),Br.prototype[sw]=!0,Br.prototype.removeEventListener=function(n,t,e,i){eB(this,n,t,e,i)},Br.prototype.M=function(){if(Br.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)TI(e[i]);delete n.g[t],n.h--}}this.I=null},Br.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},Br.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var kR=Ht.JSON.stringify;function i$(){var n=iB;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var OR,nB=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new s$,n=>n.reset());class s${constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function o$(n){Ht.setTimeout(()=>{throw n},0)}function RR(n,t){OR||function a$(){var n=Ht.Promise.resolve(void 0);OR=function(){n.then(l$)}}(),PR||(OR(),PR=!0),iB.add(n,t)}var PR=!1,iB=new class r${constructor(){this.h=this.g=null}add(t,e){const i=nB.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function l$(){for(var n;n=i$();){try{n.h.call(n.g)}catch(e){o$(e)}var t=nB;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}PR=!1}function AI(n,t){Br.call(this),this.h=n||1,this.g=t||Ht,this.j=rs(this.kb,this),this.l=Date.now()}function NR(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function FR(n,t,e){if("function"==typeof n)e&&(n=rs(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=rs(n.handleEvent,n)}return 2147483647<Number(t)?-1:Ht.setTimeout(n,t||0)}function rB(n){n.g=FR(()=>{n.g=null,n.i&&(n.i=!1,rB(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}ss(AI,Br),(lt=AI.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),os(this,"tick"),this.da&&(NR(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){AI.Z.M.call(this),NR(this),delete this.g};class c$ extends yf{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:rB(this)}M(){super.M(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ow(n){yf.call(this),this.h=n,this.g={}}ss(ow,yf);var sB=[];function oB(n,t,e,i){Array.isArray(e)||(e&&(sB[0]=e.toString()),e=sB);for(var r=0;r<e.length;r++){var s=Q2(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function aB(n){gR(n.g,function(t,e){this.g.hasOwnProperty(e)&&SR(t)},n),n.g={}}function xI(){this.g=!0}function yy(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function f$(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return kR(e)}catch(d){return t}}(n,e)+(i?" "+i:"")})}ow.prototype.M=function(){ow.Z.M.call(this),aB(this)},ow.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xI.prototype.Aa=function(){this.g=!1},xI.prototype.info=function(){};var gm={},lB=null;function MI(){return lB=lB||new Br}function cB(n){Ls.call(this,gm.Ma,n)}function aw(n){const t=MI();os(t,new cB(t,n))}function uB(n,t){Ls.call(this,gm.STAT_EVENT,n),this.stat=t}function uo(n){const t=MI();os(t,new uB(t,n))}function dB(n,t){Ls.call(this,gm.Na,n),this.size=t}function lw(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},t)}gm.Ma="serverreachability",ss(cB,Ls),gm.STAT_EVENT="statevent",ss(uB,Ls),gm.Na="timingevent",ss(dB,Ls);var kI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},hB={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function LR(){}function pB(){}LR.prototype.h=null;var UR,cw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function BR(){Ls.call(this,"d")}function VR(){Ls.call(this,"c")}function RI(){}function uw(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new ow(this),this.P=p$,this.W=new AI(n=yR?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mB}function mB(){this.i=null,this.g="",this.h=!1}ss(BR,Ls),ss(VR,Ls),ss(RI,LR),RI.prototype.g=function(){return new XMLHttpRequest},RI.prototype.i=function(){return{}},UR=new RI;var p$=45e3,HR={},OI={};function jR(n,t,e){n.K=1,n.v=BI(Dd(t)),n.s=e,n.U=!0,gB(n,null)}function gB(n,t){n.F=Date.now(),dw(n),n.A=Dd(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),TB(e.h,"t",i),n.C=0,e=n.l.H,n.h=new mB,n.g=ZB(n.l,e?t:null,!n.s),0<n.O&&(n.L=new c$(rs(n.Ia,n,n.g),n.O)),oB(n.V,n.g,"readystatechange",n.gb),t=n.H?z2(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),aw(1),function u$(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),p=0;p<d.length;p++){var y=d[p].split("=");if(1<y.length){var C=y[0];y=y[1];var D=C.split("_");c=2<=D.length&&"type"==D[1]?c+(C+"=")+y+"&":c+(C+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function _B(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function yB(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=m$(n,e),r==OI){4==t&&(n.o=4,uo(14),i=!1),yy(n.j,n.m,null,"[Incomplete Response]");break}if(r==HR){n.o=4,uo(15),yy(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}yy(n.j,n.m,r,null),GR(n,r)}_B(n)&&r!=OI&&r!=HR&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,uo(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),e1(t),t.L=!0,uo(11))):(yy(n.j,n.m,e,"[Invalid Chunked Response]"),_m(n),hw(n))}function m$(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?OI:(e=Number(t.substring(e,i)),isNaN(e)?HR:(i+=1)+e>t.length?OI:(t=t.substr(i,e),n.C=i+e,t))}function dw(n){n.Y=Date.now()+n.P,vB(n,n.P)}function vB(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=lw(rs(n.eb,n),t)}function PI(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function hw(n){0==n.l.G||n.I||zB(n.l,n)}function _m(n){PI(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,NR(n.W),aB(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function GR(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||$R(e.i,n)))if(e.I=n.N,!n.J&&$R(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(e.u)e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=lw(rs(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;zI(e),jI(e)}JR(e),uo(18)}if(1>=AB(e.i)&&e.ka){try{e.ka()}catch(y){}e.ka=void 0}}else bm(e,11)}else if((n.J||e.g==n)&&zI(e),!EI(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let y=r[t];if(e.U=y[0],y=y[1],2==e.G)if("c"==y[0]){e.J=y[1],e.la=y[2];const C=y[3];null!=C&&(e.ma=C,e.h.info("VER="+e.ma));const D=y[4];null!=D&&(e.za=D,e.h.info("SVER="+e.za));const M=y[5];null!=M&&"number"==typeof M&&0<M&&(e.K=i=1.5*M,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const L=n.g;if(L){const j=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var s=i.i;!s.g&&(lo(j,"spdy")||lo(j,"quic")||lo(j,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(WR(s,s.h),s.h=null))}if(i.D){const le=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;le&&(i.sa=le,pi(i.F,i.D,le))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((i=e).oa=WB(i,i.H?i.la:null,i.W),c.J){xB(i.i,c);var d=c,p=i.K;p&&d.setTimeout(p),d.B&&(PI(d),dw(d)),i.g=c}else jB(i);0<e.l.length&&GI(e)}else"stop"!=y[0]&&"close"!=y[0]||bm(e,7);else 3==e.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?bm(e,7):QR(e):"noop"!=y[0]&&e.j&&e.j.wa(y),e.A=0)}aw(4)}catch(y){}}function zR(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(hR(n)||"string"==typeof n)V2(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(hR(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function g$(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(hR(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function vy(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof vy)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function qR(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];ym(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)ym(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function ym(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(lt=uw.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const t=this.L;t&&3==Td(n)?t.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const C=Td(this.g);var t=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||yR||this.g&&(this.h.h||this.g.ga()||LB(this.g)))){this.I||4!=C||7==t||aw(8==t||0>=D?3:2),PI(this);var e=this.g.ba();this.N=e;t:if(_B(this)){var i=LB(this.g);n="";var r=i.length,s=4==Td(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_m(this),hw(this);var c="";break t}this.h.i=new Ht.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function d$(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,C,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!EI(d)){var y=d;break t}}y=null}if(!(e=y)){this.i=!1,this.o=3,uo(12),_m(this),hw(this);break e}yy(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,GR(this,e)}this.U?(yB(this,C,c),yR&&this.i&&3==C&&(oB(this.V,this.W,"tick",this.fb),this.W.start())):(yy(this.j,this.m,c,null),GR(this,c)),4==C&&_m(this),this.i&&!this.I&&(4==C?zB(this.l,this):(this.i=!1,dw(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,uo(12)):(this.o=0,uo(13)),_m(this),hw(this)}}}catch(C){}},lt.fb=function(){if(this.g){var n=Td(this.g),t=this.g.ga();this.C<t.length&&(PI(this),yB(this,n,t),this.i&&4!=n&&dw(this))}},lt.cancel=function(){this.I=!0,_m(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function h$(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(aw(3),uo(17)),_m(this),this.o=2,hw(this)):vB(this,this.Y-n)},(lt=vy.prototype).R=function(){qR(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},lt.T=function(){return qR(this),this.g.concat()},lt.get=function(n,t){return ym(this.h,n)?this.h[n]:t},lt.set=function(n,t){ym(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},lt.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var bB=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function vm(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof vm){this.g=void 0!==t?t:n.g,NI(this,n.j),this.s=n.s,FI(this,n.i),LI(this,n.m),this.l=n.l,t=n.h;var e=new mw;e.i=t.i,t.g&&(e.g=new vy(t.g),e.h=t.h),wB(this,e),this.o=n.o}else n&&(e=String(n).match(bB))?(this.g=!!t,NI(this,e[1]||"",!0),this.s=fw(e[2]||""),FI(this,e[3]||"",!0),LI(this,e[4]),this.l=fw(e[5]||"",!0),wB(this,e[6]||"",!0),this.o=fw(e[7]||"")):(this.g=!!t,this.h=new mw(null,this.g))}function Dd(n){return new vm(n)}function NI(n,t,e){n.j=e?fw(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function FI(n,t,e){n.i=e?fw(t,!0):t}function LI(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function wB(n,t,e){t instanceof mw?(n.h=t,function T$(n,t){t&&!n.j&&(vf(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(EB(this,i),TB(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=pw(t,E$)),n.h=new mw(t,n.g))}function pi(n,t,e){n.h.set(t,e)}function BI(n){return pi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function fw(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function pw(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,b$),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function b$(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}vm.prototype.toString=function(){var n=[],t=this.j;t&&n.push(pw(t,CB,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(pw(t,CB,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(pw(e,"/"==e.charAt(0)?C$:w$,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",pw(e,D$)),n.join("")};var CB=/[#\/\?@]/g,w$=/[#\?:]/g,C$=/[#\?]/g,E$=/[#\?@]/g,D$=/#/g;function mw(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function vf(n){n.g||(n.g=new vy,n.h=0,n.i&&function _$(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function EB(n,t){vf(n),t=by(n,t),ym(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,ym((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&qR(n)))}function DB(n,t){return vf(n),t=by(n,t),ym(n.g.h,t)}function TB(n,t,e){EB(n,t),0<e.length&&(n.i=null,n.g.set(by(n,t),pR(e)),n.h+=e.length)}function by(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function IB(n){this.l=n||S$,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ea&&Ht.g.Ea()&&Ht.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=mw.prototype).add=function(n,t){vf(this),this.i=null,n=by(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},lt.forEach=function(n,t){vf(this),this.g.forEach(function(e,i){V2(e,function(r){n.call(t,r,i,this)},this)},this)},lt.T=function(){vf(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},lt.R=function(n){vf(this);var t=[];if("string"==typeof n)DB(this,n)&&(t=U2(t,this.g.get(by(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=U2(t,n[e])}return t},lt.set=function(n,t){return vf(this),this.i=null,DB(this,n=by(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},lt.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var c=r;""!==i[s]&&(c+="="+encodeURIComponent(String(i[s]))),n.push(c)}}return this.i=n.join("&")};var S$=10;function SB(n){return!!n.h||!!n.g&&n.g.size>=n.j}function AB(n){return n.h?1:n.g?n.g.size:0}function $R(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function WR(n,t){n.g?n.g.add(t):n.h=t}function xB(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function MB(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return pR(n.i)}function ZR(){}function A$(){this.g=new ZR}function x$(n,t,e){const i=e||"";try{zR(n,function(r,s){let c=r;iw(r)&&(c=kR(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function VI(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function gw(n){this.l=n.$b||null,this.j=n.ib||!1}function UI(n,t){Br.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=YR,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}IB.prototype.cancel=function(){if(this.i=MB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ZR.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},ZR.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},ss(gw,LR),gw.prototype.g=function(){return new UI(this.l,this.j)},gw.prototype.i=function(n){return function(){return n}}({}),ss(UI,Br);var YR=0;function kB(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function _w(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yw(n)}function yw(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=UI.prototype).open=function(n,t){if(this.readyState!=YR)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,yw(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||Ht).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,_w(this)),this.readyState=YR},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yw(this)),this.g&&(this.readyState=3,yw(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kB(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?_w(this):yw(this),3==this.readyState&&kB(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,_w(this))},lt.Ta=function(n){this.g&&(this.response=n,_w(this))},lt.ha=function(){this.g&&_w(this)},lt.setRequestHeader=function(n,t){this.v.append(n,t)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(UI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var k$=Ht.JSON.parse;function or(n){Br.call(this),this.headers=new vy,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=RB,this.K=this.L=!1}ss(or,Br);var RB="",R$=/^https?$/i,O$=["POST","PUT"];function N$(n){return"content-type"==n.toLowerCase()}function OB(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,PB(n),HI(n)}function PB(n){n.D||(n.D=!0,os(n,"complete"),os(n,"error"))}function NB(n){if(n.h&&void 0!==dR&&(!n.C[1]||4!=Td(n)||2!=n.ba()))if(n.v&&4==Td(n))FR(n.Fa,0,n);else if(os(n,"readystatechange"),4==Td(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(bB)[1]||null;if(!r&&Ht.self&&Ht.self.location){var s=Ht.self.location.protocol;r=s.substr(0,s.length-1)}i=!R$.test(r?r.toLowerCase():"")}e=i}if(e)os(n,"complete"),os(n,"success");else{n.m=6;try{var c=2<Td(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",PB(n)}}finally{HI(n)}}}function HI(n,t){if(n.g){FB(n);const e=n.g,i=n.C[0]?wI:null;n.g=null,n.C=null,t||os(n,"ready");try{e.onreadystatechange=i}catch(r){}}}function FB(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function Td(n){return n.g?n.g.readyState:0}function LB(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case RB:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function KR(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function F$(n){let t="";return gR(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):pi(n,t,e))}function vw(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function BB(n){this.za=0,this.l=[],this.h=new xI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=vw("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=vw("baseRetryDelayMs",5e3,n),this.$a=vw("retryDelaySeedMs",1e4,n),this.Ya=vw("forwardChannelMaxRetries",2,n),this.ra=vw("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new IB(n&&n.concurrentRequestLimit),this.Ca=new A$,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function QR(n){if(VB(n),3==n.G){var t=n.V++,e=Dd(n.F);pi(e,"SID",n.J),pi(e,"RID",t),pi(e,"TYPE","terminate"),bw(n,e),(t=new uw(n,n.h,t,void 0)).K=2,t.v=BI(Dd(e)),e=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(e=Ht.navigator.sendBeacon(t.v.toString(),"")),!e&&Ht.Image&&((new Image).src=t.v,e=!0),e||(t.g=ZB(t.l,null),t.g.ea(t.v)),t.F=Date.now(),dw(t)}$B(n)}function jI(n){n.g&&(e1(n),n.g.cancel(),n.g=null)}function VB(n){jI(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),zI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function XR(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&GI(n)}function GI(n){SB(n.i)||n.m||(n.m=!0,RR(n.Ha,n),n.C=0)}function UB(n,t){var e;e=t?t.m:n.V++;const i=Dd(n.F);pi(i,"SID",n.J),pi(i,"RID",e),pi(i,"AID",n.U),bw(n,i),n.o&&n.s&&KR(i,n.o,n.s),e=new uw(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=HB(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),WR(n.i,e),jR(e,i,t)}function bw(n,t){n.j&&zR({},function(e,i){pi(t,i,e)})}function HB(n,t,e){e=Math.min(n.l.length,e);var i=n.j?rs(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let y=r[p].h;const C=r[p].g;if(y-=s,0>y)s=Math.max(0,r[p].h-100),d=!1;else try{x$(C,c,"req"+y+"_")}catch(D){i&&i(C)}}if(d){i=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function jB(n){n.g||n.u||(n.Y=1,RR(n.Ga,n),n.A=0)}function JR(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=lw(rs(n.Ga,n),qB(n,n.A)),n.A++,0))}function e1(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function GB(n){n.g=new uw(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=Dd(n.oa);pi(t,"RID","rpc"),pi(t,"SID",n.J),pi(t,"CI",n.N?"0":"1"),pi(t,"AID",n.U),bw(n,t),pi(t,"TYPE","xmlhttp"),n.o&&n.s&&KR(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=BI(Dd(t)),e.s=null,e.U=!0,gB(e,n)}function zI(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function zB(n,t){var e=null;if(n.g==t){zI(n),e1(n),n.g=null;var i=2}else{if(!$R(n.i,t))return;e=t.D,xB(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;os(i=MI(),new dB(i,e,t,r)),GI(n)}else jB(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function L$(n,t){return!(AB(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=lw(rs(n.Ha,n,t),qB(n,n.C)),n.C++,0)))}(n,t)||2==i&&JR(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:bm(n,5);break;case 4:bm(n,10);break;case 3:bm(n,6);break;default:bm(n,2)}}function qB(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function bm(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=rs(n.jb,n);e||(e=new vm("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||NI(e,"https"),BI(e)),function M$(n,t){const e=new xI;if(Ht.Image){const i=new Image;i.onload=CI(VI,e,i,"TestLoadImage: loaded",!0,t),i.onerror=CI(VI,e,i,"TestLoadImage: error",!1,t),i.onabort=CI(VI,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=CI(VI,e,i,"TestLoadImage: timeout",!1,t),Ht.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else uo(2);n.G=0,n.j&&n.j.va(t),$B(n),VB(n)}function $B(n){n.G=0,n.I=-1,n.j&&((0!=MB(n.i).length||0!=n.l.length)&&(n.i.i.length=0,pR(n.l),n.l.length=0),n.j.ua())}function WB(n,t,e){let i=function y$(n){return n instanceof vm?Dd(n):new vm(n,void 0)}(e);if(""!=i.i)t&&FI(i,t+"."+i.i),LI(i,i.m);else{const r=Ht.location;i=function v$(n,t,e,i){var r=new vm(null,void 0);return n&&NI(r,n),t&&FI(r,t),e&&LI(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&gR(n.aa,function(r,s){pi(i,s,r)}),e=n.sa,(t=n.D)&&e&&pi(i,t,e),pi(i,"VER",n.ma),bw(n,i),i}function ZB(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new or(e&&n.Ba&&!n.qa?new gw({ib:!0}):n.qa)).L=n.H,t}function YB(){}function qI(){if(_y&&!(10<=Number(Kq)))throw Error("Environmental error: no available transport.")}function Da(n,t){Br.call(this),this.g=new BB(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!EI(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!EI(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new wy(this)}function KB(n){BR.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function QB(){VR.call(this),this.status=1}function wy(n){this.g=n}(lt=or.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():UR.g(),this.C=function fB(n){return n.h||(n.h=n.i())}(this.u?this.u:UR),this.g.onreadystatechange=rs(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void OB(this,s)}n=e||"";const r=new vy(this.headers);i&&zR(i,function(s,c){r.set(c,s)}),i=function zq(n){e:{var t=N$;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=Ht.FormData&&n instanceof Ht.FormData,!(0<=B2(O$,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{FB(this),0<this.B&&((this.K=function P$(n){return _y&&function Yq(){return function qq(n){var t=Zq;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=H2(String(DI)).split("."),e=H2("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=mR(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||mR(0==r[2].length,0==s[2].length)||mR(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=rs(this.pa,this)):this.A=FR(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){OB(this,s)}},lt.pa=function(){void 0!==dR&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,os(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,os(this,"complete"),os(this,"abort"),HI(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),HI(this,!0)),or.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?NB(this):this.cb())},lt.cb=function(){NB(this)},lt.ba=function(){try{return 2<Td(this)?this.g.status:-1}catch(n){return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},lt.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),k$(t)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=BB.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new uw(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=z2(s),$2(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=HB(this,r,t),pi(e=Dd(this.F),"RID",n),pi(e,"CVER",22),this.D&&pi(e,"X-HTTP-Session-Id",this.D),bw(this,e),this.o&&s&&KR(e,this.o,s),WR(this.i,r),this.Ra&&pi(e,"TYPE","init"),this.ja?(pi(e,"$req",t),pi(e,"SID","null"),r.$=!0,jR(r,e,null)):jR(r,e,t),this.G=2}}else 3==this.G&&(n?UB(this,n):0==this.l.length||SB(this.i)||UB(this))},lt.Ga=function(){if(this.u=null,GB(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=lw(rs(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,uo(10),jI(this),GB(this))},lt.ab=function(){null!=this.v&&(this.v=null,jI(this),JR(this),uo(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),uo(2)):(this.h.info("Failed to ping google.com"),uo(1))},(lt=YB.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},qI.prototype.g=function(n,t){return new Da(n,t)},ss(Da,Br),Da.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),RR(rs(n.hb,n,t))),uo(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=WB(n,null,n.W),GI(n)},Da.prototype.close=function(){QR(this.g)},Da.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,XR(this.g,t)}else this.v?((t={}).__data__=kR(n),XR(this.g,t)):XR(this.g,n)},Da.prototype.M=function(){this.g.j=null,delete this.j,QR(this.g),delete this.g,Da.Z.M.call(this)},ss(KB,BR),ss(QB,VR),ss(wy,YB),wy.prototype.xa=function(){os(this.g,"a")},wy.prototype.wa=function(n){os(this.g,new KB(n))},wy.prototype.va=function(n){os(this.g,new QB(n))},wy.prototype.ua=function(){os(this.g,"b")},qI.prototype.createWebChannel=qI.prototype.g,Da.prototype.send=Da.prototype.u,Da.prototype.open=Da.prototype.m,Da.prototype.close=Da.prototype.close,kI.NO_ERROR=0,kI.TIMEOUT=8,kI.HTTP_ERROR=6,hB.COMPLETE="complete",pB.EventType=cw,cw.OPEN="a",cw.CLOSE="b",cw.ERROR="c",cw.MESSAGE="d",Br.prototype.listen=Br.prototype.N,or.prototype.listenOnce=or.prototype.O,or.prototype.getLastError=or.prototype.La,or.prototype.getLastErrorCode=or.prototype.Da,or.prototype.getStatus=or.prototype.ba,or.prototype.getResponseJson=or.prototype.Qa,or.prototype.getResponseText=or.prototype.ga,or.prototype.send=or.prototype.ea;var B$=Ed.createWebChannelTransport=function(){return new qI},V$=Ed.getStatEventTarget=function(){return MI()},t1=Ed.ErrorCode=kI,U$=Ed.EventType=hB,H$=Ed.Event=gm,XB=Ed.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},j$=Ed.FetchXmlHttpFactory=gw,$I=Ed.WebChannel=pB,G$=Ed.XhrIo=or;const JB="@firebase/firestore";class as{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}as.UNAUTHENTICATED=new as(null),as.GOOGLE_CREDENTIALS=new as("google-credentials-uid"),as.FIRST_PARTY=new as("first-party-uid"),as.MOCK_USER=new as("mock-user");let Cy="9.8.0";const bf=new nc.Yd("@firebase/firestore");function n1(){return bf.logLevel}function $e(n,...t){if(bf.logLevel<=nc.in.DEBUG){const e=t.map(r1);bf.debug(`Firestore (${Cy}): ${n}`,...e)}}function ar(n,...t){if(bf.logLevel<=nc.in.ERROR){const e=t.map(r1);bf.error(`Firestore (${Cy}): ${n}`,...e)}}function ww(n,...t){if(bf.logLevel<=nc.in.WARN){const e=t.map(r1);bf.warn(`Firestore (${Cy}): ${n}`,...e)}}function r1(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function ut(n="Unexpected state"){const t=`FIRESTORE (${Cy}) INTERNAL ASSERTION FAILED: `+n;throw ar(t),new Error(t)}function Bt(n,t){n||ut()}function tt(n,t){return n}const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends H.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class eV{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class $${getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(as.UNAUTHENTICATED))}shutdown(){}}class W${constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Z${constructor(t){this.t=t,this.currentUser=as.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,e(y)):Promise.resolve();let c=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Vr,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=c;t.enqueueRetryable((0,Ie.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},p=y=>{$e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):($e("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Vr)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?($e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Bt("string"==typeof i.accessToken),new eV(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Bt(null===t||"string"==typeof t),new as(t)}}class Y${constructor(t,e,i){this.type="FirstParty",this.user=as.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class K${constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new Y$(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(as.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tV{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q${constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{null!=s.error&&$e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,$e("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{$e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):$e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Bt("string"==typeof e.token),this.p=e.token,new tV(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ta{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.I(i),this.T=i=>e.writeSequenceNumber(i))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function X$(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}Ta.A=-1;class nV{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=X$(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function Wt(n,t){return n<t?-1:n>t?1:0}function Ey(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function iV(n){return n+"\0"}class Wi{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ge(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Wi.fromMillis(Date.now())}static fromDate(t){return Wi.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Wi(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Wt(this.nanoseconds,t.nanoseconds):Wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Ot(t)}static min(){return new Ot(new Wi(0,0))}static max(){return new Ot(new Wi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function rV(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function wm(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function sV(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class Cw{constructor(t,e,i){void 0===e?e=0:e>t.length&&ut(),void 0===i?i=t.length-e:i>t.length-e&&ut(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===Cw.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Cw?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class fn extends Cw{construct(t,e,i){return new fn(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new fn(e)}static emptyPath(){return new fn([])}}const J$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends Cw{construct(t,e,i){return new Er(t,e,i)}static isValidIdentifier(t){return J$.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Er(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ge(Te.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new Ge(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ge(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Ge(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Er(e)}static emptyPath(){return new Er([])}}class Dy{constructor(t){this.fields=t,t.sort(Er.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ey(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Dr{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Dr(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Dr(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Dr.EMPTY_BYTE_STRING=new Dr("");const t4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wf(n){if(Bt(!!n),"string"==typeof n){let t=0;const e=t4.exec(n);if(Bt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Fi(n.seconds),nanos:Fi(n.nanos)}}function Fi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Cm(n){return"string"==typeof n?Dr.fromBase64String(n):Dr.fromUint8Array(n)}function s1(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function oV(n){const t=n.mapValue.fields.__previous_value__;return s1(t)?oV(t):t}function Ew(n){const t=wf(n.mapValue.fields.__local_write_time__.timestampValue);return new Wi(t.seconds,t.nanos)}class n4{constructor(t,e,i,r,s,c,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class Id{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Id("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Id&&t.projectId===this.projectId&&t.database===this.database}}function Dw(n){return null==n}function Tw(n){return 0===n&&1/n==-1/0}function aV(n){return"number"==typeof n&&Number.isInteger(n)&&!Tw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xe{constructor(t){this.path=t}static fromPath(t){return new Xe(fn.fromString(t))}static fromName(t){return new Xe(fn.fromString(t).popFirst(5))}static empty(){return new Xe(fn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===fn.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return fn.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Xe(new fn(t.slice()))}}const Cf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},WI={nullValue:"NULL_VALUE"};function Em(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?s1(n)?4:dV(n)?9007199254740991:10:ut()}function _u(n,t){if(n===t)return!0;const e=Em(n);if(e!==Em(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ew(n).isEqual(Ew(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=wf(i.timestampValue),c=wf(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,Cm(n.bytesValue).isEqual(Cm(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Fi(i.geoPointValue.latitude)===Fi(r.geoPointValue.latitude)&&Fi(i.geoPointValue.longitude)===Fi(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Fi(i.integerValue)===Fi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Fi(i.doubleValue),c=Fi(r.doubleValue);return s===c?Tw(s)===Tw(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return Ey(n.arrayValue.values||[],t.arrayValue.values||[],_u);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(rV(s)!==rV(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!_u(s[d],c[d])))return!1;return!0}(n,t);default:return ut()}var r}function Iw(n,t){return void 0!==(n.values||[]).find(e=>_u(e,t))}function Ef(n,t){if(n===t)return 0;const e=Em(n),i=Em(t);if(e!==i)return Wt(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Wt(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=Fi(r.integerValue||r.doubleValue),d=Fi(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return lV(n.timestampValue,t.timestampValue);case 4:return lV(Ew(n),Ew(t));case 5:return Wt(n.stringValue,t.stringValue);case 6:return function(r,s){const c=Cm(r),d=Cm(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let p=0;p<c.length&&p<d.length;p++){const y=Wt(c[p],d[p]);if(0!==y)return y}return Wt(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=Wt(Fi(r.latitude),Fi(s.latitude));return 0!==c?c:Wt(Fi(r.longitude),Fi(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let p=0;p<c.length&&p<d.length;++p){const y=Ef(c[p],d[p]);if(y)return y}return Wt(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===Cf.mapValue&&s===Cf.mapValue)return 0;if(r===Cf.mapValue)return 1;if(s===Cf.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),p=s.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let C=0;C<d.length&&C<y.length;++C){const D=Wt(d[C],y[C]);if(0!==D)return D;const M=Ef(c[d[C]],p[y[C]]);if(0!==M)return M}return Wt(d.length,y.length)}(n.mapValue,t.mapValue);default:throw ut()}}function lV(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return Wt(n,t);const e=wf(n),i=wf(t),r=Wt(e.seconds,i.seconds);return 0!==r?r:Wt(e.nanos,i.nanos)}function Ty(n){return o1(n)}function o1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=wf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Cm(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=o1(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${o1(i.fields[d])}`;return s+"}"}(n.mapValue):ut();var t}function Dm(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function a1(n){return!!n&&"integerValue"in n}function Sw(n){return!!n&&"arrayValue"in n}function cV(n){return!!n&&"nullValue"in n}function uV(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ZI(n){return!!n&&"mapValue"in n}function Aw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return wm(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Aw(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Aw(n.arrayValue.values[e]);return t}return Object.assign({},n)}function dV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function r4(n){return"nullValue"in n?WI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Dm(Id.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ut()}function s4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Dm(Id.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Cf:ut()}function hV(n,t){const e=Ef(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function fV(n,t){const e=Ef(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Bs{constructor(t){this.value=t}static empty(){return new Bs({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!ZI(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Aw(e)}setAll(t){let e=Er.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=Aw(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());ZI(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return _u(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];ZI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){wm(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Bs(Aw(this.value))}}function pV(n){const t=[];return wm(n.fields,(e,i)=>{const r=new Er([e]);if(ZI(i)){const s=pV(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new Dy(t)}class si{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new si(t,0,Ot.min(),Ot.min(),Bs.empty(),0)}static newFoundDocument(t,e,i){return new si(t,1,e,Ot.min(),i,0)}static newNoDocument(t,e){return new si(t,2,e,Ot.min(),Bs.empty(),0)}static newUnknownDocument(t,e){return new si(t,3,e,Ot.min(),Bs.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bs.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof si&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class YI{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function l1(n){return n.fields.find(t=>2===t.kind)}function Tm(n){return n.fields.filter(t=>2!==t.kind)}YI.UNKNOWN_ID=-1;class KI{constructor(t,e){this.fieldPath=t,this.kind=e}}class xw{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new xw(0,ic.min())}}function mV(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ot.fromTimestamp(1e9===i?new Wi(e+1,0):new Wi(e,i));return new ic(r,Xe.empty(),t)}function o4(n){return new ic(n.readTime,n.key,-1)}class ic{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ic(Ot.min(),Xe.empty(),-1)}static max(){return new ic(Ot.max(),Xe.empty(),-1)}}function gV(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Xe.comparator(n.documentKey,t.documentKey),0!==e?e:Wt(n.largestBatchId,t.largestBatchId))}class Zi{constructor(t,e){this.comparator=t,this.root=e||ls.EMPTY}insert(t,e){return new Zi(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ls.BLACK,null,null))}remove(t){return new Zi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ls.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new QI(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new QI(this.root,t,this.comparator,!1)}getReverseIterator(){return new QI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new QI(this.root,t,this.comparator,!0)}}class QI{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ls{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=null!=i?i:ls.RED,this.left=null!=r?r:ls.EMPTY,this.right=null!=s?s:ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new ls(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ls.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return ls.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ut();const t=this.left.check();if(t!==this.right.check())throw ut();return t+(this.isRed()?0:1)}}ls.EMPTY=null,ls.RED=!0,ls.BLACK=!1,ls.EMPTY=new class{constructor(){this.size=0}get key(){throw ut()}get value(){throw ut()}get color(){throw ut()}get left(){throw ut()}get right(){throw ut()}copy(n,t,e,i,r){return this}insert(n,t,e){return new ls(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class $n{constructor(t){this.comparator=t,this.data=new Zi(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new _V(this.data.getIterator())}getIteratorFrom(t){return new _V(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof $n)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new $n(this.comparator);return e.data=t,e}}class _V{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Iy(n){return n.hasNext()?n.getNext():void 0}class a4{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.P=null}}function yV(n,t=null,e=[],i=[],r=null,s=null,c=null){return new a4(n,t,e,i,r,s,c)}function Im(n){const t=tt(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Ty(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Dw(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Ty(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Ty(i)).join(",")),t.P=e}return t.P}function Mw(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!g4(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!_u(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!EV(n.startAt,t.startAt)&&EV(n.endAt,t.endAt)}function XI(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function JI(n,t){return n.filters.filter(e=>e instanceof cs&&e.field.isEqual(t))}function vV(n,t,e){let i=WI,r=!0;for(const s of JI(n,t)){let c=WI,d=!0;switch(s.op){case"<":case"<=":c=r4(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=WI}hV({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];hV({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function bV(n,t,e){let i=Cf,r=!0;for(const s of JI(n,t)){let c=Cf,d=!0;switch(s.op){case">=":case">":c=s4(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=Cf}fV({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];fV({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class cs extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,i):new c4(t,e,i):"array-contains"===e?new h4(t,i):"in"===e?new f4(t,i):"not-in"===e?new p4(t,i):"array-contains-any"===e?new m4(t,i):new cs(t,e,i)}static V(t,e,i){return"in"===e?new u4(t,i):new d4(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(Ef(e,this.value)):null!==e&&Em(this.value)===Em(e)&&this.v(Ef(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ut()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class c4 extends cs{constructor(t,e,i){super(t,e,i),this.key=Xe.fromName(i.referenceValue)}matches(t){const e=Xe.comparator(t.key,this.key);return this.v(e)}}class u4 extends cs{constructor(t,e){super(t,"in",e),this.keys=wV(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class d4 extends cs{constructor(t,e){super(t,"not-in",e),this.keys=wV(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function wV(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Xe.fromName(i.referenceValue))}class h4 extends cs{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Sw(e)&&Iw(e.arrayValue,this.value)}}class f4 extends cs{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Iw(this.value.arrayValue,e)}}class p4 extends cs{constructor(t,e){super(t,"not-in",e)}matches(t){if(Iw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Iw(this.value.arrayValue,e)}}class m4 extends cs{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Sw(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Iw(this.value.arrayValue,i))}}class Df{constructor(t,e){this.position=t,this.inclusive=e}}class Sy{constructor(t,e="asc"){this.field=t,this.dir=e}}function g4(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function CV(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?Xe.comparator(Xe.fromName(c.referenceValue),e.key):Ef(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function EV(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!_u(n.position[e],t.position[e]))return!1;return!0}class Sd{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=p,this.D=null,this.C=null}}function DV(n,t,e,i,r,s,c,d){return new Sd(n,t,e,i,r,s,c,d)}function Ay(n){return new Sd(n)}function c1(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function u1(n){for(const t of n.filters)if(t.S())return t.field;return null}function d1(n){return null!==n.collectionGroup}function xy(n){const t=tt(n);if(null===t.D){t.D=[];const e=u1(t),i=c1(t);if(null!==e&&null===i)e.isKeyField()||t.D.push(new Sy(e)),t.D.push(new Sy(Er.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.D.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Sy(Er.keyField(),s))}}}return t.D}function ul(n){const t=tt(n);if(!t.C)if("F"===t.limitType)t.C=yV(t.path,t.collectionGroup,xy(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of xy(t))e.push(new Sy(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Df(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Df(t.startAt.position,t.startAt.inclusive):null;t.C=yV(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.C}function TV(n,t,e){return new Sd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function kw(n,t){return Mw(ul(n),ul(t))&&n.limitType===t.limitType}function IV(n){return`${Im(ul(n))}|lt:${n.limitType}`}function h1(n){return`Query(target=${function l4(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${Ty(i.value)}`;var i}).join(", ")}]`),Dw(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Ty(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Ty(e)).join(",")),`Target(${t})`}(ul(n))}; limitType=${n.limitType})`}function f1(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):Xe.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=CV(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,xy(e),i)||e.endAt&&!function(r,s,c){const d=CV(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,xy(e),i)));var e,i}function SV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AV(n){return(t,e)=>{let i=!1;for(const r of xy(n)){const s=y4(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function y4(n,t,e){const i=n.field.isKeyField()?Xe.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),p=c.data.field(r);return null!==d&&null!==p?Ef(d,p):ut()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ut()}}function xV(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tw(t)?"-0":t}}function MV(n){return{integerValue:""+n}}function kV(n,t){return aV(t)?MV(t):xV(n,t)}class eS{constructor(){this._=void 0}}function v4(n,t,e){return n instanceof My?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof Sm?OV(n,t):n instanceof Am?PV(n,t):function(i,r){const s=RV(i,r),c=NV(s)+NV(i.k);return a1(s)&&a1(i.k)?MV(c):xV(i.M,c)}(n,t)}function b4(n,t,e){return n instanceof Sm?OV(n,t):n instanceof Am?PV(n,t):e}function RV(n,t){return n instanceof ky?a1(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class My extends eS{}class Sm extends eS{constructor(t){super(),this.elements=t}}function OV(n,t){const e=FV(t);for(const i of n.elements)e.some(r=>_u(r,i))||e.push(i);return{arrayValue:{values:e}}}class Am extends eS{constructor(t){super(),this.elements=t}}function PV(n,t){let e=FV(t);for(const i of n.elements)e=e.filter(r=>!_u(r,i));return{arrayValue:{values:e}}}class ky extends eS{constructor(t,e){super(),this.M=t,this.k=e}}function NV(n){return Fi(n.integerValue||n.doubleValue)}function FV(n){return Sw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Rw{constructor(t,e){this.field=t,this.transform=e}}class C4{constructor(t,e){this.version=t,this.transformResults=e}}class lr{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new lr}static exists(t){return new lr(void 0,t)}static updateTime(t){return new lr(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function tS(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class nS{}function E4(n,t,e){n instanceof Ow?function(i,r,s){const c=i.value.clone(),d=UV(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof xm?function(i,r,s){if(!tS(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=UV(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(VV(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function p1(n,t,e){var r;n instanceof Ow?function(i,r,s){if(!tS(i.precondition,r))return;const c=i.value.clone(),d=HV(i.fieldTransforms,s,r);c.setAll(d),r.convertToFoundDocument(BV(r),c).setHasLocalMutations()}(n,t,e):n instanceof xm?function(i,r,s){if(!tS(i.precondition,r))return;const c=HV(i.fieldTransforms,s,r),d=r.data;d.setAll(VV(i)),d.setAll(c),r.convertToFoundDocument(BV(r),d).setHasLocalMutations()}(n,t,e):tS(n.precondition,r=t)&&r.convertToNoDocument(Ot.min())}function D4(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=RV(i.transform,r||null);null!=s&&(null==e&&(e=Bs.empty()),e.set(i.field,s))}return e||null}function LV(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&Ey(e,i,(r,s)=>function w4(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof Sm&&i instanceof Sm||e instanceof Am&&i instanceof Am?Ey(e.elements,i.elements,_u):e instanceof ky&&i instanceof ky?_u(e.k,i.k):e instanceof My&&i instanceof My);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}function BV(n){return n.isFoundDocument()?n.version:Ot.min()}class Ow extends nS{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}}class xm extends nS{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function VV(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function UV(n,t,e){const i=new Map;Bt(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,b4(c,d,e[r]))}return i}function HV(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,v4(s,c,t))}return i}class Pw extends nS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class m1 extends nS{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class T4{constructor(t){this.count=t}}var cr,pn;function jV(n){switch(n){default:return ut();case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0}}function GV(n){if(void 0===n)return ar("GRPC error has no .code"),Te.UNKNOWN;switch(n){case cr.OK:return Te.OK;case cr.CANCELLED:return Te.CANCELLED;case cr.UNKNOWN:return Te.UNKNOWN;case cr.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case cr.INTERNAL:return Te.INTERNAL;case cr.UNAVAILABLE:return Te.UNAVAILABLE;case cr.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case cr.NOT_FOUND:return Te.NOT_FOUND;case cr.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case cr.ABORTED:return Te.ABORTED;case cr.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case cr.DATA_LOSS:return Te.DATA_LOSS;default:return ut()}}(pn=cr||(cr={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class Tf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){wm(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return sV(this.inner)}size(){return this.innerSize}}const I4=new Zi(Xe.comparator);function dl(){return I4}const S4=new Zi(Xe.comparator);function g1(...n){let t=S4;for(const e of n)t=t.insert(e.key,e);return t}function Nw(){return new Tf(n=>n.toString(),(n,t)=>n.isEqual(t))}const A4=new Zi(Xe.comparator),x4=new $n(Xe.comparator);function An(...n){let t=x4;for(const e of n)t=t.add(e);return t}const M4=new $n(Wt);function iS(){return M4}class Fw{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,Lw.createSynthesizedTargetChangeForCurrentChange(t,e)),new Fw(Ot.min(),i,iS(),dl(),An())}}class Lw{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Lw(Dr.EMPTY_BYTE_STRING,e,An(),An(),An())}}class rS{constructor(t,e,i,r){this.O=t,this.removedTargetIds=e,this.key=i,this.F=r}}class zV{constructor(t,e){this.targetId=t,this.$=e}}class qV{constructor(t,e,i=Dr.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class $V{constructor(){this.B=0,this.L=ZV(),this.U=Dr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=An(),e=An(),i=An();return this.L.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:ut()}}),new Lw(this.U,this.q,t,e,i)}J(){this.K=!1,this.L=ZV()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class k4{constructor(t){this.nt=t,this.st=new Map,this.it=dl(),this.rt=WV(),this.ot=new $n(Wt)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const i=this.lt(e);switch(t.state){case 0:this.ft(e)&&i.W(t.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(t.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(e);break;case 3:this.ft(e)&&(i.et(),i.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),i.W(t.resumeToken));break;default:ut()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((i,r)=>{this.ft(r)&&e(r)})}_t(t){const e=t.targetId,i=t.$.count,r=this.wt(e);if(r){const s=r.target;if(XI(s))if(0===i){const c=new Xe(s.path);this.ct(e,c,si.newNoDocument(c,Ot.min()))}else Bt(1===i);else this.gt(e)!==i&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((s,c)=>{const d=this.wt(c);if(d){if(s.current&&XI(d.target)){const p=new Xe(d.target.path);null!==this.it.get(p)||this.It(c,p)||this.ct(c,p,si.newNoDocument(p,t))}s.j&&(e.set(c,s.H()),s.J())}});let i=An();this.rt.forEach((s,c)=>{let d=!0;c.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.it.forEach((s,c)=>c.setReadTime(t));const r=new Fw(t,e,this.ot,this.it,i);return this.it=dl(),this.rt=WV(),this.ot=new $n(Wt),r}at(t,e){if(!this.ft(t))return;const i=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,i),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,i){if(!this.ft(t))return;const r=this.lt(t);this.It(t,e)?r.Y(e,1):r.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),i&&(this.it=this.it.insert(e,i))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new $V,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new $n(Wt),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||$e("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new $V),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function WV(){return new Zi(Xe.comparator)}function ZV(){return new Zi(Xe.comparator)}const R4={asc:"ASCENDING",desc:"DESCENDING"},O4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class P4{constructor(t,e){this.databaseId=t,this.N=e}}function Bw(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function YV(n,t){return n.N?t.toBase64():t.toUint8Array()}function N4(n,t){return Bw(n,t.toTimestamp())}function Ur(n){return Bt(!!n),Ot.fromTimestamp(function(t){const e=wf(t);return new Wi(e.seconds,e.nanos)}(n))}function _1(n,t){return(e=n,new fn(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function KV(n){const t=fn.fromString(n);return Bt(sU(t)),t}function Vw(n,t){return _1(n.databaseId,t.path)}function yu(n,t){const e=KV(t);if(e.get(1)!==n.databaseId.projectId)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new Ge(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Xe(XV(e))}function y1(n,t){return _1(n.databaseId,t)}function QV(n){const t=KV(n);return 4===t.length?fn.emptyPath():XV(t)}function Uw(n){return new fn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function XV(n){return Bt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function JV(n,t,e){return{name:Vw(n,t),fields:e.value.mapValue.fields}}function eU(n,t,e){const i=yu(n,t.name),r=Ur(t.updateTime),s=new Bs({mapValue:{fields:t.fields}}),c=si.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function Hw(n,t){let e;if(t instanceof Ow)e={update:JV(n,t.key,t.value)};else if(t instanceof Pw)e={delete:Vw(n,t.key)};else if(t instanceof xm)e={update:JV(n,t.key,t.data),updateMask:z4(t.fieldMask)};else{if(!(t instanceof m1))return ut();e={verify:Vw(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof My)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Sm)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Am)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ky)return{fieldPath:s.field.canonicalString(),increment:c.k};throw ut()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:N4(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:ut()),e;var r}function v1(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?lr.updateTime(Ur(r.updateTime)):void 0!==r.exists?lr.exists(r.exists):lr.none():lr.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(Bt("REQUEST_TIME"===c.setToServerValue),d=new My):"appendMissingElements"in c?d=new Sm(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Am(c.removeAllFromArray.values||[]):"increment"in c?d=new ky(s,c.increment):ut();const p=Er.fromServerFormat(c.fieldPath);return new Rw(p,d)}(n,r)):[];var r;if(t.update){const r=yu(n,t.update.name),s=new Bs({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Dy((t.updateMask.fieldPaths||[]).map(y=>Er.fromServerFormat(y)));return new xm(r,s,c,e,i)}return new Ow(r,s,e,i)}if(t.delete){const r=yu(n,t.delete);return new Pw(r,e)}if(t.verify){const r=yu(n,t.verify);return new m1(r,e)}return ut()}function tU(n,t){return{documents:[y1(n,t.path)]}}function nU(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=y1(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=y1(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const y=p.map(C=>function(D){if("=="===D.op){if(uV(D.value))return{unaryFilter:{field:Ry(D.field),op:"IS_NAN"}};if(cV(D.value))return{unaryFilter:{field:Ry(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(uV(D.value))return{unaryFilter:{field:Ry(D.field),op:"IS_NOT_NAN"}};if(cV(D.value))return{unaryFilter:{field:Ry(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ry(D.field),op:H4(D.op),value:D.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:Ry((C=y).field),direction:U4(C.dir)};var C})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(y=t.limit,n.N||Dw(y)?y:{value:y});var y,d,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function iU(n){let t=QV(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){Bt(1===i);const C=e.from[0];C.allDescendants?r=C.collectionId:t=t.child(C.collectionId)}let s=[];e.where&&(s=rU(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(C=>{return new Sy(Oy((D=C).field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;e.limit&&(d=function(C){let D;return D="object"==typeof C?C.value:C,Dw(D)?null:D}(e.limit));let p=null;var C;e.startAt&&(p=new Df((C=e.startAt).values||[],!!C.before));let y=null;return e.endAt&&(y=function(C){return new Df(C.values||[],!C.before)}(e.endAt)),DV(t,r,c,s,d,"F",p,y)}function rU(n){return n?void 0!==n.unaryFilter?[G4(n)]:void 0!==n.fieldFilter?[j4(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>rU(t)).reduce((t,e)=>t.concat(e)):ut():[]}function U4(n){return R4[n]}function H4(n){return O4[n]}function Ry(n){return{fieldPath:n.canonicalString()}}function Oy(n){return Er.fromServerFormat(n.fieldPath)}function j4(n){return cs.create(Oy(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ut()}}(n.fieldFilter.op),n.fieldFilter.value)}function G4(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Oy(n.unaryFilter.field);return cs.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Oy(n.unaryFilter.field);return cs.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Oy(n.unaryFilter.field);return cs.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Oy(n.unaryFilter.field);return cs.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ut()}}function z4(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function sU(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ho(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=oU(t)),t=q4(n.get(e),t);return oU(t)}function q4(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function oU(n){return n+"\x01\x01"}function vu(n){const t=n.length;if(Bt(t>=2),2===t)return Bt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),fn.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&ut(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:ut()}s=c+2}return new fn(i)}const aU=["userId","batchId"];function sS(n,t){return[n,ho(t)]}function lU(n,t,e){return[n,ho(t),e]}const $4={},W4=["prefixPath","collectionGroup","readTime","documentId"],Z4=["prefixPath","collectionGroup","documentId"],Y4=["collectionGroup","readTime","prefixPath","documentId"],K4=["canonicalId","targetId"],Q4=["targetId","path"],X4=["path","targetId"],J4=["collectionId","parent"],e5=["indexId","uid"],t5=["uid","sequenceNumber"],n5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],r5=["indexId","uid","orderedDocumentKey"],s5=["userId","collectionPath","documentId"],o5=["userId","collectionPath","largestBatchId"],a5=["userId","collectionGroup","largestBatchId"],cU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],l5=[...cU,"documentOverlays"],uU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],c5=[...uU,"indexConfiguration","indexState","indexEntries"],dU="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hU{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class Se{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ut(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Se((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Se?e:Se.resolve(e)}catch(e){return Se.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Se.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Se.reject(e)}static resolve(t){return new Se((e,i)=>{e(t)})}static reject(t){return new Se((e,i)=>{i(t)})}static waitFor(t){return new Se((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},p=>i(p))}),c=!0,s===r&&e()})}static or(t){let e=Se.resolve(!1);for(const i of t)e=e.next(r=>r?Se.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}}class oS{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Vr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new jw(t,e.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=b1(i.target.error);this.At.reject(new jw(t,r))}}static open(t,e,i,r){try{return new oS(e,t.transaction(r,i))}catch(s){throw new jw(e,s)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||($e("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new d5(e)}}class rc{constructor(t,e,i){this.name=t,this.version=e,this.Pt=i,12.2===rc.Vt((0,H.z$)())&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $e("SimpleDb","Removing database:",t),km(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,H.hl)())return!1;if(rc.St())return!0;const t=(0,H.z$)(),e=rc.Vt(t),i=0<e&&e<10,r=rc.Dt(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(t){var e=this;return(0,Ie.Z)(function*(){return e.db||($e("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new jw(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Ge(Te.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ge(Te.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new jw(t,d))},s.onupgradeneeded=c=>{$e("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.Pt.kt(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{$e("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=i=>e.Mt(i)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Ie.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.Nt(t);const p=oS.open(s.db,t,c?"readonly":"readwrite",i),y=r(p).next(C=>(p.bt(),C)).catch(C=>(p.abort(C),Se.reject(C))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&d<3;if($e("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class u5{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return km(this.Ft.delete())}}class jw extends Ge{constructor(t,e){super(Te.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Mm(n){return"IndexedDbTransactionError"===n.name}class d5{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?($e("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):($e("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),km(i)}add(t){return $e("SimpleDb","ADD",this.store.name,t,t),km(this.store.add(t))}get(t){return km(this.store.get(t)).next(e=>(void 0===e&&(e=null),$e("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $e("SimpleDb","DELETE",this.store.name,t),km(this.store.delete(t))}count(){return $e("SimpleDb","COUNT",this.store.name),km(this.store.count())}qt(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.Kt(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new Se((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}Gt(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new Se((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Qt(t,e){$e("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(s,c,d)=>d.delete())}Wt(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.Kt(r,e)}zt(t){const e=this.cursor({});return new Se((i,r)=>{e.onerror=s=>{const c=b1(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}Kt(t,e){const i=[];return new Se((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new u5(d),y=e(d.primaryKey,d.value,p);if(y instanceof Se){const C=y.catch(D=>(p.done(),Se.reject(D)));i.push(C)}p.isDone?r():null===p.Lt?d.continue():d.continue(p.Lt)}}).next(()=>Se.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.jt?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function km(n){return new Se((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=b1(i.target.error);e(r)}})}let fU=!1;function b1(n){const t=rc.Vt((0,H.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fU||(fU=!0,setTimeout(()=>{throw i},0)),i}}return n}class pU extends hU{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function Hr(n,t){const e=tt(n);return rc.xt(e.Ht,t)}class w1{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&E4(s,t,i[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&p1(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&p1(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const i=t.get(e.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(Ot.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),An())}isEqual(t){return this.batchId===t.batchId&&Ey(this.mutations,t.mutations,(e,i)=>LV(e,i))&&Ey(this.baseMutations,t.baseMutations,(e,i)=>LV(e,i))}}class C1{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Bt(t.mutations.length===i.length);let r=A4;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new C1(t,e,i,r)}}class E1{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class If{constructor(t,e,i,r,s=Ot.min(),c=Ot.min(),d=Dr.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new If(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new If(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new If(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class mU{constructor(t){this.Jt=t}}function gU(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:aS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:Vw(r=n.Jt,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:Bw(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Rm(t.version)};else{if(!t.isUnknownDocument())return ut();i.unknownDocument={path:e.path.toArray(),version:Rm(t.version)}}var r,s;return i}function aS(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Rm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Om(n){const t=new Wi(n.seconds,n.nanoseconds);return Ot.fromTimestamp(t)}function Py(n,t){const e=(t.baseMutations||[]).map(s=>v1(n.Jt,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>v1(n.Jt,s)),r=Wi.fromMillis(t.localWriteTimeMs);return new w1(t.batchId,r,e,i)}function Gw(n){const t=Om(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Om(n.lastLimboFreeSnapshotVersion):Ot.min();let i;var r;return void 0!==n.query.documents?(Bt(1===(r=n.query).documents.length),i=ul(Ay(QV(r.documents[0])))):i=ul(iU(n.query)),new If(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Dr.fromBase64String(n.resumeToken))}function _U(n,t){const e=Rm(t.snapshotVersion),i=Rm(t.lastLimboFreeSnapshotVersion);let r;r=XI(t.target)?tU(n.Jt,t.target):nU(n.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Im(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function D1(n){const t=iU({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?TV(t,t.limit,"L"):t}function T1(n,t){return new E1(t.largestBatchId,v1(n.Jt,t.overlayMutation))}function yU(n,t){const e=t.path.lastSegment();return[n,ho(t.path.popLast()),e]}class f5{getBundleMetadata(t,e){return vU(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Om(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return vU(t).put({bundleId:(i=e).id,createTime:Rm(Ur(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return bU(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:D1(r.bundledQuery),readTime:Om(r.readTime)};var r})}saveNamedQuery(t,e){return bU(t).put({name:(i=e).name,readTime:Rm(Ur(i.readTime)),bundledQuery:i.bundledQuery});var i}}function vU(n){return Hr(n,"bundles")}function bU(n){return Hr(n,"namedQueries")}class I1{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new I1(t,e.uid||"")}getOverlay(t,e){return zw(t).get(yU(this.userId,e)).next(i=>i?T1(this.M,i):null)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new E1(e,c);r.push(this.Xt(t,d))}),Se.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(ho(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(zw(t).Qt("collectionPathOverlayIndex",d))}),Se.waitFor(s)}getOverlaysForCollection(t,e,i){const r=Nw(),s=ho(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return zw(t).qt("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const y=T1(this.M,p);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=Nw();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return zw(t).Wt({index:"collectionGroupOverlayIndex",range:d},(p,y,C)=>{const D=T1(this.M,y);s.size()<r||D.largestBatchId===c?(s.set(D.getKey(),D),c=D.largestBatchId):C.done()}).next(()=>s)}Xt(t,e){return zw(t).put(function(i,r,s){const[c,d,p]=yU(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Hw(i.Jt,s.mutation)}}(this.M,this.userId,e))}}function zw(n){return Hr(n,"documentOverlays")}class Pm{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Fi(t.integerValue));else if("doubleValue"in t){const i=Fi(t.doubleValue);isNaN(i)?this.ne(e,13):(this.ne(e,15),Tw(i)?e.se(0):e.se(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ne(e,20),"string"==typeof i?e.ie(i):(e.ie(`${i.seconds||""}`),e.se(i.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(Cm(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ne(e,45),e.se(i.latitude||0),e.se(i.longitude||0)}else"mapValue"in t?dV(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):ut()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const i=t.fields||{};this.ne(e,55);for(const r of Object.keys(i))this.re(r,e),this.te(i[r],e)}he(t,e){const i=t.values||[];this.ne(e,50);for(const r of i)this.te(r,e)}ae(t,e){this.ne(e,37),Xe.fromName(t).path.forEach(i=>{this.ne(e,60),this.le(i,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function p5(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function wU(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=p5(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Pm.fe=new Pm;class m5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this._e(i.value),i=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.ge(i.value),i=e.next();this.ye()}pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(e<"\ud800"||"\udbff"<e)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=e.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=e.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(t){const e=this.Ee(t),i=wU(e);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Re(t){const e=this.Ee(t),i=wU(e);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}_e(t){const e=255&t;0===e?(this.Pe(0),this.Pe(255)):255===e?(this.Pe(255),this.Pe(0)):this.Pe(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class g5{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.be()}}class _5{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class qw{constructor(){this.De=new m5,this.Ce=new g5(this.De),this.xe=new _5(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Nm{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Nm(this.indexId,this.documentKey,this.arrayValue,i)}}function Fm(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=CU(n.arrayValue,t.arrayValue),0!==e?e:(e=CU(n.directionalValue,t.directionalValue),0!==e?e:Xe.comparator(n.documentKey,t.documentKey)))}function CU(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class y5{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const i=e;i.S()?this.Fe=i:this.Oe.push(i)}}$e(t){const e=l1(t);if(void 0!==e&&!this.Be(e))return!1;const i=Tm(t);let r=0,s=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const c=i[r];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Me.length||!this.Ue(this.Me[s++],c))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class v5{constructor(){this.qe=new S1}addToCollectionParentIndex(t,e){return this.qe.add(e),Se.resolve()}getCollectionParents(t,e){return Se.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return Se.resolve()}deleteFieldIndex(t,e){return Se.resolve()}getDocumentsMatchingTarget(t,e){return Se.resolve(null)}getIndexType(t,e){return Se.resolve(0)}getFieldIndexes(t,e){return Se.resolve([])}getNextCollectionGroupToUpdate(t){return Se.resolve(null)}getMinOffset(t,e){return Se.resolve(ic.min())}updateCollectionGroup(t,e,i){return Se.resolve()}updateIndexEntries(t,e){return Se.resolve()}}class S1{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new $n(fn.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new $n(fn.comparator)).toArray()}}const lS=new Uint8Array(0);class b5{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new S1,this.Ge=new Tf(i=>Im(i),(i,r)=>Mw(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const s={collectionId:i,parent:ho(r)};return EU(t).put(s)}return Se.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[iV(e),""],!1,!0);return EU(t).qt(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(vu(c.parent))}return i})}addFieldIndex(t,e){const i=cS(t),r={indexId:(s=e).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var s;return delete r.indexId,i.add(r).next()}deleteFieldIndex(t,e){const i=cS(t),r=uS(t),s=$w(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=$w(t);let r=!0;const s=new Map;return Se.forEach(this.Qe(e),c=>this.je(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=An();const d=[];return Se.forEach(s,(p,y)=>{var C;$e("IndexedDbIndexManager",`Using index ${C=p,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(Ze=>`${Ze.fieldPath}:${Ze.kind}`).join(",")}`} to execute ${Im(e)}`);const D=function(Ze,We){const kt=l1(We);if(void 0===kt)return null;for(const Pt of JI(Ze,kt.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(y,p),M=function(Ze,We){const kt=new Map;for(const Pt of Tm(We))for(const cn of JI(Ze,Pt.fieldPath))switch(cn.op){case"==":case"in":kt.set(Pt.fieldPath.canonicalString(),cn.value);break;case"not-in":case"!=":return kt.set(Pt.fieldPath.canonicalString(),cn.value),Array.from(kt.values())}return null}(y,p),L=function(Ze,We){const kt=[];let Pt=!0;for(const cn of Tm(We)){const Yi=0===cn.kind?vV(Ze,cn.fieldPath,Ze.startAt):bV(Ze,cn.fieldPath,Ze.startAt);kt.push(Yi.value),Pt&&(Pt=Yi.inclusive)}return new Df(kt,Pt)}(y,p),j=function(Ze,We){const kt=[];let Pt=!0;for(const cn of Tm(We)){const Yi=0===cn.kind?bV(Ze,cn.fieldPath,Ze.endAt):vV(Ze,cn.fieldPath,Ze.endAt);kt.push(Yi.value),Pt&&(Pt=Yi.inclusive)}return new Df(kt,Pt)}(y,p),le=this.We(p,y,L),we=this.We(p,y,j),Qe=this.ze(p,y,M),Je=this.He(p.indexId,D,le,L.inclusive,we,j.inclusive,Qe);return Se.forEach(Je,Ze=>i.Gt(Ze,e.limit).next(We=>{We.forEach(kt=>{const Pt=Xe.fromSegments(kt.documentKey);c.has(Pt)||(c=c.add(Pt),d.push(Pt))})}))}).next(()=>d)}return Se.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}He(t,e,i,r,s,c,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),y=p/(null!=e?e.length:1),C=[];for(let D=0;D<p;++D){const M=e?this.Je(e[D/y]):lS,L=this.Ye(t,M,i[D%y],r),j=this.Xe(t,M,s[D%y],c),le=d.map(we=>this.Ye(t,M,we,!0));C.push(...this.createRange(L,j,le))}return C}Ye(t,e,i,r){const s=new Nm(t,Xe.empty(),e,i);return r?s:s.ke()}Xe(t,e,i,r){const s=new Nm(t,Xe.empty(),e,i);return r?s.ke():s}je(t,e){const i=new y5(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.$e(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;return Se.forEach(this.Qe(e),r=>this.je(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new $n(Er.comparator),p=!1;for(const y of c.filters){const C=y;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?p=!0:d=d.add(C.field))}for(const y of c.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}Ze(t,e){const i=new qw;for(const r of Tm(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.Ne(r.kind);Pm.fe.Zt(s,c)}return i.Se()}Je(t){const e=new qw;return Pm.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const i=new qw;return Pm.fe.Zt(Dm(this.databaseId,e),i.Ne(function(r){const s=Tm(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Se()}ze(t,e,i){if(null===i)return[];let r=[];r.push(new qw);let s=0;for(const c of Tm(t)){const d=i[s++];for(const p of r)if(this.en(e,c.fieldPath)&&Sw(d))r=this.nn(r,c,d);else{const y=p.Ne(c.kind);Pm.fe.Zt(d,y)}}return this.sn(r)}We(t,e,i){return this.ze(t,e,i.position)}sn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Se();return e}nn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new qw;p.seed(d.Se()),Pm.fe.Zt(c,p.Ne(e.kind)),s.push(p)}return s}en(t,e){return!!t.filters.find(i=>i instanceof cs&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=cS(t),r=uS(t);return(e?i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.qt()).next(s=>{const c=[];return Se.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(y,C){const D=C?new xw(C.sequenceNumber,new ic(Om(C.readTime),new Xe(vu(C.documentKey)),C.largestBatchId)):xw.empty(),M=y.fields.map(([L,j])=>new KI(Er.fromServerFormat(L),j));return new YI(y.indexId,y.collectionGroup,M,D)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Wt(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=cS(t),s=uS(t);return this.rn(t).next(c=>r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>Se.forEach(d,p=>{return s.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Rm((M=i).readTime),documentKey:ho(M.documentKey.path),largestBatchId:M.largestBatchId});var M})))}updateIndexEntries(t,e){const i=new Map;return Se.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?Se.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),Se.forEach(d,p=>this.on(t,r,p).next(y=>{const C=this.un(s,p);return y.isEqual(C)?Se.resolve():this.an(t,s,p,y,C)}))))})}cn(t,e,i,r){return $w(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(i,e.key),documentKey:e.key.path.toArray()})}hn(t,e,i,r){return $w(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(i,e.key),e.key.path.toArray()])}on(t,e,i){const r=$w(t);let s=new $n(Fm);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,e)])},(c,d)=>{s=s.add(new Nm(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}un(t,e){let i=new $n(Fm);const r=this.Ze(e,t);if(null==r)return i;const s=l1(e);if(null!=s){const c=t.data.field(s.fieldPath);if(Sw(c))for(const d of c.arrayValue.values||[])i=i.add(new Nm(e.indexId,t.key,this.Je(d),r))}else i=i.add(new Nm(e.indexId,t.key,lS,r));return i}an(t,e,i,r,s){$e("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,p,y,C,D){const M=d.getIterator(),L=p.getIterator();let j=Iy(M),le=Iy(L);for(;j||le;){let we=!1,Qe=!1;if(j&&le){const Je=y(j,le);Je<0?Qe=!0:Je>0&&(we=!0)}else null!=j?Qe=!0:we=!0;we?(C(le),le=Iy(L)):Qe?(D(j),j=Iy(M)):(j=Iy(M),le=Iy(L))}}(r,s,Fm,d=>{c.push(this.cn(t,e,i,d))},d=>{c.push(this.hn(t,e,i,d))}),Se.waitFor(c)}rn(t){let e=1;return uS(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>Fm(c,d)).filter((c,d,p)=>!d||0!==Fm(c,p[d-1]));const r=[];r.push(t);for(const c of i){const d=Fm(c,t),p=Fm(c,e);if(0===d)r[0]=t.ke();else if(d>0&&p<0)r.push(c),r.push(c.ke());else if(p>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,lS,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,lS,[]]));return s}getMinOffset(t,e){let i;return Se.forEach(this.Qe(e),r=>this.je(t,r).next(s=>{s?(!i||gV(s.indexState.offset,i)<0)&&(i=s.indexState.offset):i=ic.min()})).next(()=>i)}}function EU(n){return Hr(n,"collectionParents")}function $w(n){return Hr(n,"indexEntries")}function cS(n){return Hr(n,"indexConfiguration")}function uS(n){return Hr(n,"indexState")}const DU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Uo{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new Uo(t,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function TU(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const p=i.Wt({range:c},(C,D,M)=>(d++,M.delete()));s.push(p.next(()=>{Bt(1===d)}));const y=[];for(const C of e.mutations){const D=lU(t,C.key.path,e.batchId);s.push(r.delete(D)),y.push(C.key)}return Se.waitFor(s).next(()=>y)}function dS(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw ut();t=n.noDocument}return JSON.stringify(t).length}Uo.DEFAULT_COLLECTION_PERCENTILE=10,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Uo.DEFAULT=new Uo(41943040,Uo.DEFAULT_COLLECTION_PERCENTILE,Uo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Uo.DISABLED=new Uo(-1,0,0);class A1{constructor(t,e,i,r){this.userId=t,this.M=e,this.indexManager=i,this.referenceDelegate=r,this.ln={}}static Yt(t,e,i,r){Bt(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new A1(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sf(t).Wt({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Ny(t),c=Sf(t);return c.add({}).next(d=>{Bt("number"==typeof d);const p=new w1(d,e,i,r),y=function(M,L,j){const le=j.baseMutations.map(Qe=>Hw(M.Jt,Qe)),we=j.mutations.map(Qe=>Hw(M.Jt,Qe));return{userId:L,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:le,mutations:we}}(this.M,this.userId,p),C=[];let D=new $n((M,L)=>Wt(M.canonicalString(),L.canonicalString()));for(const M of r){const L=lU(this.userId,M.key.path,d);D=D.add(M.key.path.popLast()),C.push(c.put(y)),C.push(s.put(L,$4))}return D.forEach(M=>{C.push(this.indexManager.addToCollectionParentIndex(t,M))}),t.addOnCommittedListener(()=>{this.ln[d]=p.keys()}),Se.waitFor(C).next(()=>p)})}lookupMutationBatch(t,e){return Sf(t).get(e).next(i=>i?(Bt(i.userId===this.userId),Py(this.M,i)):null)}fn(t,e){return this.ln[e]?Se.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.ln[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Sf(t).Wt({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(Bt(d.batchId>=i),s=Py(this.M,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Sf(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sf(t).qt("userMutationsIndex",e).next(i=>i.map(r=>Py(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=sS(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Ny(t).Wt({range:r},(c,d,p)=>{const[y,C,D]=c,M=vu(C);if(y===this.userId&&e.path.isEqual(M))return Sf(t).get(D).next(L=>{if(!L)throw ut();Bt(L.userId===this.userId),s.push(Py(this.M,L))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new $n(Wt);const r=[];return e.forEach(s=>{const c=sS(this.userId,s.path),d=IDBKeyRange.lowerBound(c),p=Ny(t).Wt({range:d},(y,C,D)=>{const[M,L,j]=y,le=vu(L);M===this.userId&&s.path.isEqual(le)?i=i.add(j):D.done()});r.push(p)}),Se.waitFor(r).next(()=>this.dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=sS(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new $n(Wt);return Ny(t).Wt({range:c},(p,y,C)=>{const[D,M,L]=p,j=vu(M);D===this.userId&&i.isPrefixOf(j)?j.length===r&&(d=d.add(L)):C.done()}).next(()=>this.dn(t,d))}dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(Sf(t).get(s).next(c=>{if(null===c)throw ut();Bt(c.userId===this.userId),i.push(Py(this.M,c))}))}),Se.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return TU(t.Ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),Se.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Se.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Ny(t).Wt({range:i},(s,c,d)=>{if(s[0]===this.userId){const p=vu(s[1]);r.push(p)}else d.done()}).next(()=>{Bt(0===r.length)})})}containsKey(t,e){return IU(t,this.userId,e)}wn(t){return SU(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function IU(n,t,e){const i=sS(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return Ny(n).Wt({range:s,jt:!0},(d,p,y)=>{const[C,D,M]=d;C===t&&D===r&&(c=!0),y.done()}).next(()=>c)}function Sf(n){return Hr(n,"mutations")}function Ny(n){return Hr(n,"documentMutations")}function SU(n){return Hr(n,"mutationQueues")}class Lm{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new Lm(0)}static yn(){return new Lm(-1)}}class w5{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const i=new Lm(e.highestTargetId);return e.highestTargetId=i.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>Ot.fromTimestamp(new Wi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.pn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.In(t,r)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(i=>(i.targetCount+=1,this.En(e,i),this.In(t,i))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Fy(t).delete(e.targetId)).next(()=>this.pn(t)).next(i=>(Bt(i.targetCount>0),i.targetCount-=1,this.In(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return Fy(t).Wt((c,d)=>{const p=Gw(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>Se.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Fy(t).Wt((i,r)=>{const s=Gw(r);e(s)})}pn(t){return AU(t).get("targetGlobalKey").next(e=>(Bt(null!==e),e))}In(t,e){return AU(t).put("targetGlobalKey",e)}Tn(t,e){return Fy(t).put(_U(this.M,e))}En(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Im(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Fy(t).Wt({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const y=Gw(d);Mw(e,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Af(t);return e.forEach(c=>{const d=ho(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),Se.waitFor(r)}removeMatchingKeys(t,e,i){const r=Af(t);return Se.forEach(e,s=>{const c=ho(s.path);return Se.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Af(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Af(t);let s=An();return r.Wt({range:i,jt:!0},(c,d,p)=>{const y=vu(c[1]),C=new Xe(y);s=s.add(C)}).next(()=>s)}containsKey(t,e){const i=ho(e.path),r=IDBKeyRange.bound([i],[iV(i)],!1,!0);let s=0;return Af(t).Wt({index:"documentTargetsIndex",jt:!0,range:r},([c,d],p,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}Et(t,e){return Fy(t).get(e).next(i=>i?Gw(i):null)}}function Fy(n){return Hr(n,"targets")}function AU(n){return Hr(n,"targetGlobal")}function Af(n){return Hr(n,"targetDocuments")}function Bm(n){return x1.apply(this,arguments)}function x1(){return x1=(0,Ie.Z)(function*(n){if(n.code!==Te.FAILED_PRECONDITION||n.message!==dU)throw n;$e("LocalStore","Unexpectedly lost primary lease")}),x1.apply(this,arguments)}function xU([n,t],[e,i]){const r=Wt(n,e);return 0===r?Wt(t,i):r}class C5{constructor(t){this.An=t,this.buffer=new $n(xU),this.Rn=0}bn(){return++this.Rn}Pn(t){const e=[t,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();xU(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class E5{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const i=this.Vn?3e5:6e4;$e("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,Ie.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(r){Mm(r)?$e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Bm(r)}yield e.Sn(t)}))}}class D5{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return Se.resolve(Ta.A);const i=new C5(e);return this.Dn.forEachTarget(t,r=>i.Pn(r.sequenceNumber)).next(()=>this.Dn.xn(t,r=>i.Pn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Dn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(DU)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?($e("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),DU):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let i,r,s,c,d,p,y;const C=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?($e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),r=this.params.maximumSequenceNumbersToCollect):r=D,c=Date.now(),this.nthSequenceNumber(t,r))).next(D=>(i=D,d=Date.now(),this.removeTargets(t,i,e))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(D=>(y=Date.now(),n1()<=nc.in.DEBUG&&$e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-C}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-C}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:D})))}}class T5{constructor(t,e){this.db=t,this.garbageCollector=new D5(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}kn(t){let e=0;return this.xn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(i,r)=>e(r))}addReference(t,e,i){return hS(t,i)}removeReference(t,e,i){return hS(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return hS(t,e)}On(t,e){return function(i,r){let s=!1;return SU(i).zt(c=>IU(i,c,r).next(d=>(d&&(s=!0),Se.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Mn(t,(c,d)=>{if(d<=e){const p=this.On(t,c).next(y=>{if(!y)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,Ot.min()),Af(t).delete([0,ho(c.path)])))});r.push(p)}}).next(()=>Se.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return hS(t,e)}Mn(t,e){const i=Af(t);let r,s=Ta.A;return i.Wt({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:y})=>{0===c?(s!==Ta.A&&e(new Xe(vu(r)),s),s=y,r=p):s=Ta.A}).next(()=>{s!==Ta.A&&e(new Xe(vu(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function hS(n,t){return Af(n).put((i=n.currentSequenceNumber,{targetId:0,path:ho(t.path),sequenceNumber:i}));var i}class MU{constructor(){this.changes=new Tf(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,si.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?Se.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class I5{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return Vm(t).put(i)}removeEntry(t,e,i){return Vm(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],aS(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Fn(t,i)))}getEntry(t,e){let i=si.newInvalidDocument(e);return Vm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ww(e))},(r,s)=>{i=this.$n(e,s)}).next(()=>i)}Bn(t,e){let i={size:0,document:si.newInvalidDocument(e)};return Vm(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ww(e))},(r,s)=>{i={document:this.$n(e,s),size:dS(s)}}).next(()=>i)}getEntries(t,e){let i=dl();return this.Ln(t,e,(r,s)=>{const c=this.$n(r,s);i=i.insert(r,c)}).next(()=>i)}Un(t,e){let i=dl(),r=new Zi(Xe.comparator);return this.Ln(t,e,(s,c)=>{const d=this.$n(s,c);i=i.insert(s,d),r=r.insert(s,dS(c))}).next(()=>({documents:i,qn:r}))}Ln(t,e,i){if(e.isEmpty())return Se.resolve();let r=new $n(OU);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(Ww(r.first()),Ww(r.last())),c=r.getIterator();let d=c.getNext();return Vm(t).Wt({index:"documentKeyIndex",range:s},(p,y,C)=>{const D=Xe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&OU(d,D)<0;)i(d,null),d=c.getNext();d&&d.isEqual(D)&&(i(d,y),d=c.hasNext()?c.getNext():null),d?C.Ut(Ww(d)):C.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),aS(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vm(t).qt(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=dl();for(const p of c){const y=this.$n(Xe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=dl();const c=RU(e,i),d=RU(e,ic.max());return Vm(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,y,C)=>{const D=this.$n(Xe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(D.key,D),s.size===r&&C.done()}).next(()=>s)}newChangeBuffer(t){return new S5(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return kU(t).get("remoteDocumentGlobalKey").next(e=>(Bt(!!e),e))}Fn(t,e){return kU(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const i=function h5(n,t){let e;if(t.document)e=eU(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Xe.fromSegments(t.noDocument.path),r=Om(t.noDocument.readTime);e=si.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return ut();{const i=Xe.fromSegments(t.unknownDocument.path),r=Om(t.unknownDocument.version);e=si.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new Wi(i[0],i[1]);return Ot.fromTimestamp(r)}(t.readTime)),e}(this.M,e);if(!i.isNoDocument()||!i.version.isEqual(Ot.min()))return i}return si.newInvalidDocument(t)}}class S5 extends MU{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new Tf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new $n((s,c)=>Wt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Gn.get(s);if(e.push(this.Kn.removeEntry(t,s,d.readTime)),c.isValidDocument()){const p=gU(this.Kn.M,c);r=r.add(s.path.popLast()),i+=dS(p)-d.size,e.push(this.Kn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=gU(this.Kn.M,c.convertToNoDocument(Ot.min()));e.push(this.Kn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Kn.updateMetadata(t,i)),Se.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(i=>(this.Gn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:i,qn:r})=>(r.forEach((s,c)=>{this.Gn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function kU(n){return Hr(n,"remoteDocumentGlobal")}function Vm(n){return Hr(n,"remoteDocumentsV14")}function Ww(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function RU(n,t){const e=t.documentKey.path.toArray();return[n,aS(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function OU(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=Wt(e[s],i[s]),r)return r;return r=Wt(e.length,i.length),r||(r=Wt(e[e.length-2],i[i.length-2]),r||Wt(e[e.length-1],i[i.length-1]))}class A5{constructor(t){this.M=t}kt(t,e,i,r){const s=new oS("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aU,{unique:!0}),d.createObjectStore("documentMutations"),PU(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=Se.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),PU(t)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").qt().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",aU,{unique:!0});const C=p.store("mutations"),D=y.map(M=>C.put(M));return Se.waitFor(D)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Qn(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.jn(s)))),i<7&&r>=7&&(c=c.next(()=>this.Wn(s))),i<8&&r>=8&&(c=c.next(()=>this.zn(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.Hn(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:s5});p.createIndex("collectionPathOverlayIndex",o5,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",a5,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:W4});p.createIndex("documentKeyIndex",Z4),p.createIndex("collectionGroupIndex",Y4)}(t)).next(()=>this.Jn(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:e5}).createIndex("sequenceNumberIndex",t5,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:n5}).createIndex("documentKeyIndex",r5,{unique:!1})}(t)})),c}jn(t){let e=0;return t.store("remoteDocuments").Wt((i,r)=>{e+=dS(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.qt().next(r=>Se.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",c).next(d=>Se.forEach(d,p=>{Bt(p.userId===s.userId);const y=Py(this.M,p);return TU(t,s.userId,y).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Wt((c,d)=>{const p=new fn(c),y=[0,ho(p)];s.push(e.get(y).next(C=>C?Se.resolve():e.put({targetId:0,path:ho(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>Se.waitFor(s))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:J4});const i=e.store("collectionParents"),r=new S1,s=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:ho(p)})}};return e.store("remoteDocuments").Wt({jt:!0},(c,d)=>{const p=new fn(c);return s(p.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([c,d,p],y)=>{const C=vu(d);return s(C.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((i,r)=>{const s=Gw(r),c=_U(this.M,s);return e.put(c)})}Jn(t,e){const i=e.store("remoteDocuments"),r=[];return i.Wt((s,c)=>{const d=e.store("remoteDocumentsV14"),p=(y=c,y.document?new Xe(fn.fromString(y.document.name).popFirst(5)):y.noDocument?Xe.fromSegments(y.noDocument.path):y.unknownDocument?Xe.fromSegments(y.unknownDocument.path):ut()).path.toArray();var y;const C={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(C))}).next(()=>Se.waitFor(r))}}function PU(n){n.createObjectStore("targetDocuments",{keyPath:Q4}).createIndex("documentTargetsIndex",X4,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",K4,{unique:!0}),n.createObjectStore("targetGlobal")}const M1="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class k1{constructor(t,e,i,r,s,c,d,p,y,C,D=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Yn=s,this.window=c,this.document=d,this.Xn=y,this.Zn=C,this.ts=D,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=M=>Promise.resolve(),!k1.vt())throw new Ge(Te.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new T5(this,r),this.hs=e+"main",this.M=new mU(p),this.ls=new rc(this.hs,this.ts,new A5(this.M)),this.fs=new w5(this.referenceDelegate,this.M),this.ds=new I5(this.M),this._s=new f5,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===C&&ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(Te.FAILED_PRECONDITION,M1);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Ta(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var i=(0,Ie.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,Ie.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,Ie.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>fS(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.bs(t).next(()=>!0))).catch(t=>{if(Mm(t))return $e("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return Zw(t).get("owner").next(e=>Se.resolve(this.Ps(e)))}Vs(t){return fS(t).delete(this.clientId)}vs(){var t=this;return(0,Ie.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Hr(i,"clientMetadata");return r.qt().next(s=>{const c=t.Ds(s,18e5),d=s.filter(p=>-1===c.indexOf(p));return Se.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.ws)for(const i of e)t.ws.removeItem(t.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?Se.resolve(!0):Zw(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.Ps(e)&&this.networkEnabled)return!0;if(!this.Ps(e)){if(!e.allowTabSynchronization)throw new Ge(Te.FAILED_PRECONDITION,M1);return!1}}return!(!this.networkEnabled||!this.inForeground)||fS(t).qt().next(i=>void 0===this.Ds(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&$e("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ie.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new pU(e,Ta.A);return t.Rs(i).next(()=>t.Vs(i))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(i=>this.Ss(i.updateTimeMs,e)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>fS(t).qt().next(e=>this.Ds(e,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return A1.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new b5(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return I1.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,i){$e("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=14===(c=this.ts)?c5:13===c?uU:12===c?l5:11===c?cU:void ut();var c;let d;return this.ls.runTransaction(t,r,s,p=>(d=new pU(p,this.es?this.es.next():Ta.A),"readwrite-primary"===e?this.Es(d).next(y=>!!y||this.As(d)).next(y=>{if(!y)throw ar(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ge(Te.FAILED_PRECONDITION,dU);return i(d)}).next(y=>this.bs(d).next(()=>y)):this.$s(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}$s(t){return Zw(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ge(Te.FAILED_PRECONDITION,M1)})}bs(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zw(t).put("owner",e)}static vt(){return rc.vt()}Rs(t){const e=Zw(t);return e.get("owner").next(i=>this.Ps(i)?($e("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Se.resolve())}Ss(t,e){const i=Date.now();return!(t<i-e||t>i&&(ar(`Detected an update time that is in the future: ${t} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,H.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const i=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return $e("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ar("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){ar("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Zw(n){return Hr(n,"owner")}function fS(n){return Hr(n,"clientMetadata")}function R1(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class x5{constructor(t,e,i){this.ds=t,this.Bs=e,this.indexManager=i}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(i=>this.Us(t,e,i))}Us(t,e,i){return this.ds.getEntry(t,e).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}qs(t,e){t.forEach((i,r)=>{for(const s of e)s.applyToLocalView(r)})}Ks(t,e){return this.ds.getEntries(t,e).next(i=>this.Gs(t,i).next(()=>i))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(i=>this.qs(e,i))}Qs(t,e,i){return Xe.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.js(t,e.path):d1(e)?this.Ws(t,e,i):this.zs(t,e,i);var r}js(t,e){return this.Ls(t,new Xe(e)).next(i=>{let r=g1();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ws(t,e,i){const r=e.collectionGroup;let s=g1();return this.indexManager.getCollectionParents(t,r).next(c=>Se.forEach(c,d=>{const p=(y=e,C=d.child(r),new Sd(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.zs(t,p,i).next(y=>{y.forEach((C,D)=>{s=s.insert(C,D)})})}).next(()=>s))}zs(t,e,i){let r;return this.ds.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(s=>{for(const c of s)for(const d of c.mutations){const p=d.key;let y=r.get(p);null==y&&(y=si.newInvalidDocument(p),r=r.insert(p,y)),p1(d,y,c.localWriteTime),y.isFoundDocument()||(r=r.remove(p))}}).next(()=>(r.forEach((s,c)=>{f1(e,c)||(r=r.remove(s))}),r))}}class O1{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Hs=i,this.Js=r}static Ys(t,e){let i=An(),r=An();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new O1(t,e.fromCache,i,r)}}class NU{constructor(){this.Xs=!1}initialize(t,e){this.Zs=t,this.indexManager=e,this.Xs=!0}Qs(t,e,i,r){return this.ti(t,e).next(s=>s||this.ei(t,e,r,i)).next(s=>s||this.ni(t,e))}ti(t,e){return Se.resolve(null)}ei(t,e,i,r){return function _4(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(e)||r.isEqual(Ot.min())?this.ni(t,e):this.Zs.Ks(t,i).next(s=>{const c=this.si(e,s);return this.ii(e,c,i,r)?this.ni(t,e):(n1()<=nc.in.DEBUG&&$e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),h1(e)),this.ri(t,c,e,mV(r,-1)))})}si(t,e){let i=new $n(AV(t));return e.forEach((r,s)=>{f1(t,s)&&(i=i.add(s))}),i}ii(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ni(t,e){return n1()<=nc.in.DEBUG&&$e("QueryEngine","Using full collection scan to execute query:",h1(e)),this.Zs.Qs(t,e,ic.min())}ri(t,e,i,r){return this.Zs.Qs(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class M5{constructor(t,e,i,r){this.persistence=t,this.oi=e,this.M=r,this.ui=new Zi(Wt),this.ai=new Tf(s=>Im(s),Mw),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(i)}li(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.fi=new x5(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ui))}}function FU(n,t,e,i){return new M5(n,t,e,i)}function LU(n,t){return P1.apply(this,arguments)}function P1(){return P1=(0,Ie.Z)(function*(n,t){const e=tt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.Bs.getAllMutationBatches(i).next(s=>(r=s,e.li(t),e.Bs.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let p=An();for(const y of r){c.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}for(const y of s){d.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}return e.fi.Ks(i,p).next(y=>({di:y,removedBatchIds:c,addedBatchIds:d}))})})}),P1.apply(this,arguments)}function k5(n,t){const e=tt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.hi.newChangeBuffer({trackRemovals:!0});return function(c,d,p,y){const C=p.batch,D=C.keys();let M=Se.resolve();return D.forEach(L=>{M=M.next(()=>y.getEntry(d,L)).next(j=>{const le=p.docVersions.get(L);Bt(null!==le),j.version.compareTo(le)<0&&(C.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),y.addEntry(j)))})}),M.next(()=>c.Bs.removeMutationBatch(d,C))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.Bs.performConsistencyCheck(i)).next(()=>e.fi.Ks(i,r))})}function BU(n){const t=tt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function R5(n,t){const e=tt(n),i=t.snapshotVersion;let r=e.ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.hi.newChangeBuffer({trackRemovals:!0});r=e.ui;const d=[];t.targetChanges.forEach((y,C)=>{const D=r.get(C);if(!D)return;d.push(e.fs.removeMatchingKeys(s,y.removedDocuments,C).next(()=>e.fs.addMatchingKeys(s,y.addedDocuments,C)));let M=D.withSequenceNumber(s.currentSequenceNumber);var L,j,le;t.targetMismatches.has(C)?M=M.withResumeToken(Dr.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):y.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(y.resumeToken,i)),r=r.insert(C,M),j=M,le=y,(0===(L=D).resumeToken.approximateByteSize()||j.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||le.addedDocuments.size+le.modifiedDocuments.size+le.removedDocuments.size>0)&&d.push(e.fs.updateTargetData(s,M))});let p=dl();if(t.documentUpdates.forEach(y=>{t.resolvedLimboDocuments.has(y)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,y))}),d.push(VU(s,c,t.documentUpdates).next(y=>{p=y})),!i.isEqual(Ot.min())){const y=e.fs.getLastRemoteSnapshotVersion(s).next(C=>e.fs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(y)}return Se.waitFor(d).next(()=>c.apply(s)).next(()=>e.fi.Gs(s,p)).next(()=>p)}).then(s=>(e.ui=r,s))}function VU(n,t,e){let i=An();return e.forEach(r=>i=i.add(r)),t.getEntries(n,i).next(r=>{let s=dl();return e.forEach((c,d)=>{const p=r.get(c);d.isNoDocument()&&d.version.isEqual(Ot.min())?(t.removeEntry(c,d.readTime),s=s.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||0===d.version.compareTo(p.version)&&p.hasPendingWrites?(t.addEntry(d),s=s.insert(c,d)):$e("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),s})}function O5(n,t){const e=tt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(i,t)))}function Ly(n,t){const e=tt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.fs.getTargetData(i,t).next(s=>s?(r=s,Se.resolve(r)):e.fs.allocateTargetId(i).next(c=>(r=new If(t,c,0,i.currentSequenceNumber),e.fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ui=e.ui.insert(i.targetId,i),e.ai.set(t,i.targetId)),i})}function By(n,t,e){return N1.apply(this,arguments)}function N1(){return N1=(0,Ie.Z)(function*(n,t,e){const i=tt(n),r=i.ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Mm(c))throw c;$e("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.ui=i.ui.remove(t),i.ai.delete(r.target)}),N1.apply(this,arguments)}function pS(n,t,e){const i=tt(n);let r=Ot.min(),s=An();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,y){const C=tt(d),D=C.ai.get(y);return void 0!==D?Se.resolve(C.ui.get(D)):C.fs.getTargetData(p,y)}(i,c,ul(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{s=p})}).next(()=>i.oi.Qs(c,t,e?r:Ot.min(),e?s:An())).next(d=>(jU(i,SV(t),d),{documents:d,_i:s})))}function UU(n,t){const e=tt(n),i=tt(e.fs),r=e.ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.Et(s,t).next(c=>c?c.target:null))}function HU(n,t){const e=tt(n),i=e.ci.get(t)||Ot.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.hi.getAllFromCollectionGroup(r,t,mV(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(jU(e,t,r),r))}function jU(n,t,e){let i=Ot.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ci.set(t,i)}function F1(){return F1=(0,Ie.Z)(function*(n,t,e,i){const r=tt(n);let s=An(),c=dl();for(const y of e){const C=t.wi(y.metadata.name);y.document&&(s=s.add(C));const D=t.mi(y);D.setReadTime(t.gi(y.metadata.readTime)),c=c.insert(C,D)}const d=r.hi.newChangeBuffer({trackRemovals:!0}),p=yield Ly(r,(y=i,ul(Ay(fn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>VU(y,d,c).next(C=>(d.apply(y),C)).next(C=>r.fs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>r.fs.addMatchingKeys(y,s,p.targetId)).next(()=>r.fi.Gs(y,C)).next(()=>C)))}),F1.apply(this,arguments)}function N5(n,t){return L1.apply(this,arguments)}function L1(){return L1=(0,Ie.Z)(function*(n,t,e=An()){const i=yield Ly(n,ul(D1(t.bundledQuery))),r=tt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=Ur(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r._s.saveNamedQuery(s,t);const d=i.withResumeToken(Dr.EMPTY_BYTE_STRING,c);return r.ui=r.ui.insert(d.targetId,d),r.fs.updateTargetData(s,d).next(()=>r.fs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.fs.addMatchingKeys(s,e,i.targetId)).next(()=>r._s.saveNamedQuery(s,t))})}),L1.apply(this,arguments)}class F5{constructor(t){this.M=t,this.yi=new Map,this.pi=new Map}getBundleMetadata(t,e){return Se.resolve(this.yi.get(e))}saveBundleMetadata(t,e){var i;return this.yi.set(e.id,{id:(i=e).id,version:i.version,createTime:Ur(i.createTime)}),Se.resolve()}getNamedQuery(t,e){return Se.resolve(this.pi.get(e))}saveNamedQuery(t,e){return this.pi.set(e.name,{name:(i=e).name,query:D1(i.bundledQuery),readTime:Ur(i.readTime)}),Se.resolve();var i}}class L5{constructor(){this.overlays=new Zi(Xe.comparator),this.Ii=new Map}getOverlay(t,e){return Se.resolve(this.overlays.get(e))}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.Xt(t,e,s)}),Se.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Ii.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(i)),Se.resolve()}getOverlaysForCollection(t,e,i){const r=Nw(),s=e.length+1,c=new Xe(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!e.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return Se.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new Zi((y,C)=>y-C);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===e&&y.largestBatchId>i){let C=s.get(y.largestBatchId);null===C&&(C=Nw(),s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const d=Nw(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,C)=>d.set(y,C)),!(d.size()>=r)););return Se.resolve(d)}Xt(t,e,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const c=this.Ii.get(r.largestBatchId).delete(i.key);this.Ii.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new E1(e,i));let s=this.Ii.get(e);void 0===s&&(s=An(),this.Ii.set(e,s)),this.Ii.set(e,s.add(i.key))}}class B1{constructor(){this.Ti=new $n(jr.Ei),this.Ai=new $n(jr.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(t,e){const i=new jr(t,e);this.Ti=this.Ti.add(i),this.Ai=this.Ai.add(i)}bi(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Pi(new jr(t,e))}Vi(t,e){t.forEach(i=>this.removeReference(i,e))}vi(t){const e=new Xe(new fn([])),i=new jr(e,t),r=new jr(e,t+1),s=[];return this.Ai.forEachInRange([i,r],c=>{this.Pi(c),s.push(c.key)}),s}Si(){this.Ti.forEach(t=>this.Pi(t))}Pi(t){this.Ti=this.Ti.delete(t),this.Ai=this.Ai.delete(t)}Di(t){const e=new Xe(new fn([])),i=new jr(e,t),r=new jr(e,t+1);let s=An();return this.Ai.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new jr(t,0),i=this.Ti.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class jr{constructor(t,e){this.key=t,this.Ci=e}static Ei(t,e){return Xe.comparator(t.key,e.key)||Wt(t.Ci,e.Ci)}static Ri(t,e){return Wt(t.Ci,e.Ci)||Xe.comparator(t.key,e.key)}}class B5{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.xi=1,this.Ni=new $n(jr.Ei)}checkEmpty(t){return Se.resolve(0===this.Bs.length)}addMutationBatch(t,e,i,r){const s=this.xi;this.xi++;const c=new w1(s,e,i,r);this.Bs.push(c);for(const d of r)this.Ni=this.Ni.add(new jr(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return Se.resolve(c)}lookupMutationBatch(t,e){return Se.resolve(this.ki(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.Mi(e+1),s=r<0?0:r;return Se.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(t){return Se.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new jr(e,0),r=new jr(e,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([i,r],c=>{const d=this.ki(c.Ci);s.push(d)}),Se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new $n(Wt);return e.forEach(r=>{const s=new jr(r,0),c=new jr(r,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,c],d=>{i=i.add(d.Ci)})}),Se.resolve(this.Oi(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;Xe.isDocumentKey(s)||(s=s.child(""));const c=new jr(new Xe(s),0);let d=new $n(Wt);return this.Ni.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(d=d.add(p.Ci)),!0)},c),Se.resolve(this.Oi(d))}Oi(t){const e=[];return t.forEach(i=>{const r=this.ki(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){Bt(0===this.Fi(e.batchId,"removed")),this.Bs.shift();let i=this.Ni;return Se.forEach(e.mutations,r=>{const s=new jr(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Ni=i})}_n(t){}containsKey(t,e){const i=new jr(e,0),r=this.Ni.firstAfterOrEqual(i);return Se.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return Se.resolve()}Fi(t,e){return this.Mi(t)}Mi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}ki(t){const e=this.Mi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class V5{constructor(t){this.$i=t,this.docs=new Zi(Xe.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.$i(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return Se.resolve(i?i.document.mutableCopy():si.newInvalidDocument(e))}getEntries(t,e){let i=dl();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():si.newInvalidDocument(r))}),Se.resolve(i)}getAllFromCollection(t,e,i){let r=dl();const s=new Xe(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||gV(o4(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return Se.resolve(r)}getAllFromCollectionGroup(t,e,i,r){ut()}Bi(t,e){return Se.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new U5(this)}getSize(t){return Se.resolve(this.size)}}class U5 extends MU{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Kn.addEntry(t,r)):this.Kn.removeEntry(i)}),Se.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class H5{constructor(t){this.persistence=t,this.Li=new Tf(e=>Im(e),Mw),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Ui=0,this.qi=new B1,this.targetCount=0,this.Ki=Lm.gn()}forEachTarget(t,e){return this.Li.forEach((i,r)=>e(r)),Se.resolve()}getLastRemoteSnapshotVersion(t){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Se.resolve(this.Ui)}allocateTargetId(t){return this.highestTargetId=this.Ki.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ui&&(this.Ui=e),Se.resolve()}Tn(t){this.Li.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ki=new Lm(e),this.highestTargetId=e),t.sequenceNumber>this.Ui&&(this.Ui=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,Se.resolve()}updateTargetData(t,e){return this.Tn(e),Se.resolve()}removeTargetData(t,e){return this.Li.delete(e.target),this.qi.vi(e.targetId),this.targetCount-=1,Se.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Li.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Li.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),Se.waitFor(s).next(()=>r)}getTargetCount(t){return Se.resolve(this.targetCount)}getTargetData(t,e){const i=this.Li.get(e)||null;return Se.resolve(i)}addMatchingKeys(t,e,i){return this.qi.bi(e,i),Se.resolve()}removeMatchingKeys(t,e,i){this.qi.Vi(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),Se.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.qi.vi(e),Se.resolve()}getMatchingKeysForTargetId(t,e){const i=this.qi.Di(e);return Se.resolve(i)}containsKey(t,e){return Se.resolve(this.qi.containsKey(e))}}class j5{constructor(t,e){this.Gi={},this.overlays={},this.es=new Ta(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new H5(this),this.indexManager=new v5,this.ds=new V5(i=>this.referenceDelegate.Qi(i)),this.M=new mU(e),this._s=new F5(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new L5,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Gi[t.toKey()];return i||(i=new B5(e,this.referenceDelegate),this.Gi[t.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,i){$e("MemoryPersistence","Starting transaction:",t);const r=new G5(this.es.next());return this.referenceDelegate.ji(),i(r).next(s=>this.referenceDelegate.Wi(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}zi(t,e){return Se.or(Object.values(this.Gi).map(i=>()=>i.containsKey(t,e)))}}class G5 extends hU{constructor(t){super(),this.currentSequenceNumber=t}}class V1{constructor(t){this.persistence=t,this.Hi=new B1,this.Ji=null}static Yi(t){return new V1(t)}get Xi(){if(this.Ji)return this.Ji;throw ut()}addReference(t,e,i){return this.Hi.addReference(i,e),this.Xi.delete(i.toString()),Se.resolve()}removeReference(t,e,i){return this.Hi.removeReference(i,e),this.Xi.add(i.toString()),Se.resolve()}markPotentiallyOrphaned(t,e){return this.Xi.add(e.toString()),Se.resolve()}removeTarget(t,e){this.Hi.vi(e.targetId).forEach(r=>this.Xi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Xi.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ji(){this.Ji=new Set}Wi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Xi,i=>{const r=Xe.fromPath(i);return this.Zi(t,r).next(s=>{s||e.removeEntry(r,Ot.min())})}).next(()=>(this.Ji=null,e.apply(t)))}updateLimboDocument(t,e){return this.Zi(t,e).next(i=>{i?this.Xi.delete(e.toString()):this.Xi.add(e.toString())})}Qi(t){return 0}Zi(t,e){return Se.or([()=>Se.resolve(this.Hi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zi(t,e)])}}function GU(n,t){return`firestore_clients_${n}_${t}`}function zU(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function U1(n,t){return`firestore_targets_${n}_${t}`}class mS{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static tr(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Ge(r.error.code,r.error.message))),c?new mS(t,e,r.state,s):(ar("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Yw{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static tr(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ge(i.error.code,i.error.message))),s?new Yw(t,i.state,r):(ar("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class gS{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static tr(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=iS();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=aV(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new gS(t,s):(ar("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class H1{constructor(t,e){this.clientId=t,this.onlineState=e}static tr(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new H1(e.clientId,e.onlineState):(ar("SharedClientState",`Failed to parse online state: ${t}`),null)}}class j1{constructor(){this.activeTargetIds=iS()}nr(t){this.activeTargetIds=this.activeTargetIds.add(t)}sr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}er(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class G1{constructor(t,e,i,r,s){this.window=t,this.Yn=e,this.persistenceKey=i,this.ir=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Zi(Wt),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=GU(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new j1),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.syncEngine.Fs();for(const r of e){if(r===t.ir)continue;const s=t.getItem(GU(t.persistenceKey,r));if(s){const c=gS.tr(r,s);c&&(t.ar=t.ar.insert(c.clientId,c))}}t.yr();const i=t.storage.getItem(t.mr);if(i){const r=t.pr(i);r&&t.Ir(r)}for(const r of t.cr)t.ur(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.lr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(t){let e=!1;return this.ar.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Er(t,"pending")}updateMutationState(t,e,i){this.Er(t,e,i),this.Ar(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(U1(this.persistenceKey,t));if(i){const r=Yw.tr(t,i);r&&(e=r.state)}}return this.Rr.nr(t),this.yr(),e}removeLocalQueryTarget(t){this.Rr.sr(t),this.yr()}isLocalQueryTarget(t){return this.Rr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(U1(this.persistenceKey,t))}updateQueryState(t,e,i){this.br(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Ar(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Pr(t)}notifyBundleLoaded(t){this.Vr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $e("SharedClientState","READ",t,e),e}setItem(t,e){$e("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$e("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ur(t){var e=this;const i=t;if(i.storageArea===this.storage){if($e("SharedClientState","EVENT",i.key,i.newValue),i.key===this.hr)return void ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Ie.Z)(function*(){if(e.started){if(null!==i.key)if(e.dr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Sr(r,null)}{const r=e.Dr(i.key,i.newValue);if(r)return e.Sr(r.clientId,r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Cr(i.key,i.newValue);if(r)return e.Nr(r)}}else if(e.wr.test(i.key)){if(null!==i.newValue){const r=e.kr(i.key,i.newValue);if(r)return e.Mr(r)}}else if(i.key===e.mr){if(null!==i.newValue){const r=e.pr(i.newValue);if(r)return e.Ir(r)}}else if(i.key===e.lr){const r=function(s){let c=Ta.A;if(null!=s)try{const d=JSON.parse(s);Bt("number"==typeof d),c=d}catch(d){ar("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==Ta.A&&e.sequenceNumberHandler(r)}else if(i.key===e.gr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Fr(s)))}}else e.cr.push(i)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(t,e,i){const r=new mS(this.currentUser,t,e,i),s=zU(this.persistenceKey,this.currentUser,t);this.setItem(s,r.er())}Ar(t){const e=zU(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Pr(t){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:t}))}br(t,e,i){const r=U1(this.persistenceKey,t),s=new Yw(t,e,i);this.setItem(r,s.er())}Vr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.gr,e)}vr(t){const e=this.dr.exec(t);return e?e[1]:null}Dr(t,e){const i=this.vr(t);return gS.tr(i,e)}Cr(t,e){const i=this._r.exec(t),r=Number(i[1]);return mS.tr(new as(void 0!==i[2]?i[2]:null),r,e)}kr(t,e){const i=this.wr.exec(t),r=Number(i[1]);return Yw.tr(r,e)}pr(t){return H1.tr(t)}Or(t){return JSON.parse(t)}Nr(t){var e=this;return(0,Ie.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.$r(t.batchId,t.state,t.error);$e("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Mr(t){return this.syncEngine.Br(t.targetId,t.state,t.error)}Sr(t,e){const i=e?this.ar.insert(t,e):this.ar.remove(t),r=this.Tr(this.ar),s=this.Tr(i),c=[],d=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Lr(c,d).then(()=>{this.ar=i})}Ir(t){this.ar.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Tr(t){let e=iS();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class qU{constructor(){this.Ur=new j1,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Ur.nr(t),this.qr[t]||"not-current"}updateQueryState(t,e,i){this.qr[t]=e}removeLocalQueryTarget(t){this.Ur.sr(t)}isLocalQueryTarget(t){return this.Ur.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(t){return this.Ur.activeTargetIds.has(t)}start(){return this.Ur=new j1,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class z5{Kr(t){}shutdown(){}}class $U{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(t){this.zr.push(t)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){$e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.zr)t(0)}Wr(){$e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.zr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const q5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class $5{constructor(t){this.Jr=t.Jr,this.Yr=t.Yr}Xr(t){this.Zr=t}eo(t){this.no=t}onMessage(t){this.so=t}close(){this.Yr()}send(t){this.Jr(t)}io(){this.Zr()}ro(t){this.no(t)}oo(t){this.so(t)}}class W5 extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.uo=(t.ssl?"https":"http")+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,i,r,s){const c=this.ho(t,e);$e("RestConnection","Sending: ",c,i);const d={};return this.lo(d,r,s),this.fo(t,c,d,i).then(p=>($e("RestConnection","Received: ",p),p),p=>{throw ww("RestConnection",`${t} failed with error: `,p,"url: ",c,"request:",i),p})}_o(t,e,i,r,s){return this.co(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Cy,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.uo}/v1/${e}:${q5[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,c)=>{const d=new G$;d.listenOnce(U$.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case t1.NO_ERROR:const y=d.getResponseJson();$e("Connection","XHR received:",JSON.stringify(y)),s(y);break;case t1.TIMEOUT:$e("Connection",'RPC "'+t+'" timed out'),c(new Ge(Te.DEADLINE_EXCEEDED,"Request time out"));break;case t1.HTTP_ERROR:const C=d.getStatus();if($e("Connection",'RPC "'+t+'" failed with status:',C,"response text:",d.getResponseText()),C>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const M=function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(j)>=0?j:Te.UNKNOWN}(D.status);c(new Ge(M,D.message))}else c(new Ge(Te.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ge(Te.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{$e("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}wo(t,e,i){const r=[this.uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=B$(),c=V$(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new j$({})),this.lo(d.initMessageHeaders,e,i),(0,H.uI)()||(0,H.b$)()||(0,H.d)()||(0,H.w1)()||(0,H.Mn)()||(0,H.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");$e("Connection","Creating WebChannel: "+p,d);const y=s.createWebChannel(p,d);let C=!1,D=!1;const M=new $5({Jr:j=>{D?$e("Connection","Not sending because WebChannel is closed:",j):(C||($e("Connection","Opening WebChannel transport."),y.open(),C=!0),$e("Connection","WebChannel sending:",j),y.send(j))},Yr:()=>y.close()}),L=(j,le,we)=>{j.listen(le,Qe=>{try{we(Qe)}catch(Je){setTimeout(()=>{throw Je},0)}})};return L(y,$I.EventType.OPEN,()=>{D||$e("Connection","WebChannel transport opened.")}),L(y,$I.EventType.CLOSE,()=>{D||(D=!0,$e("Connection","WebChannel transport closed"),M.ro())}),L(y,$I.EventType.ERROR,j=>{D||(D=!0,ww("Connection","WebChannel transport errored:",j),M.ro(new Ge(Te.UNAVAILABLE,"The operation could not be completed")))}),L(y,$I.EventType.MESSAGE,j=>{var le;if(!D){const we=j.data[0];Bt(!!we);const Qe=we,Je=Qe.error||(null===(le=Qe[0])||void 0===le?void 0:le.error);if(Je){$e("Connection","WebChannel received error:",Je);const Ze=Je.status;let We=function(Pt){const cn=cr[Pt];if(void 0!==cn)return GV(cn)}(Ze),kt=Je.message;void 0===We&&(We=Te.INTERNAL,kt="Unknown error status: "+Ze+" with message "+Je.message),D=!0,M.ro(new Ge(We,kt)),y.close()}else $e("Connection","WebChannel received:",we),M.oo(we)}}),L(c,H$.STAT_EVENT,j=>{j.stat===XB.PROXY?$e("Connection","Detected buffering proxy"):j.stat===XB.NOPROXY&&$e("Connection","Detected no buffering proxy")}),setTimeout(()=>{M.io()},0),M}}function WU(){return"undefined"!=typeof window?window:null}function _S(){return"undefined"!=typeof document?document:null}function Kw(n){return new P4(n,!0)}class z1{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Yn=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&$e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class ZU{constructor(t,e,i,r,s,c,d,p){this.Yn=t,this.Vo=i,this.vo=r,this.So=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new z1(t,e)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Ie.Z)(function*(){t.ko()&&(yield t.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(t){this.Uo(),this.stream.send(t)}Bo(){var t=this;return(0,Ie.Z)(function*(){if(t.Mo())return t.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(t,e){var i=this;return(0,Ie.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==t?i.No.reset():e&&e.code===Te.RESOURCE_EXHAUSTED?(ar(e.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):e&&e.code===Te.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.eo(e)})()}Ko(){}auth(){this.state=1;const t=this.Go(this.Do),e=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Do===e&&this.Qo(i,r)},i=>{t(()=>{const r=new Ge(Te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(r)})})}Qo(t,e){const i=this.Go(this.Do);this.stream=this.Wo(t,e),this.stream.Xr(()=>{i(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(r=>{i(()=>this.jo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.No.Ro((0,Ie.Z)(function*(){t.state=0,t.start()}))}jo(t){return $e("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Go(t){return e=>{this.Yn.enqueueAndForget(()=>this.Do===t?e():($e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z5 extends ZU{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.M=s}Wo(t,e){return this.So.wo("Listen",t,e)}onMessage(t){this.No.reset();const e=function L4(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ut(),r=t.targetChange.targetIds||[],s=function(p,y){return p.N?(Bt(void 0===y||"string"==typeof y),Dr.fromBase64String(y||"")):(Bt(void 0===y||y instanceof Uint8Array),Dr.fromUint8Array(y||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const y=void 0===p.code?Te.UNKNOWN:GV(p.code);return new Ge(y,p.message||"")}(c);e=new qV(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=yu(n,i.document.name),s=Ur(i.document.updateTime),c=new Bs({mapValue:{fields:i.document.fields}}),d=si.newFoundDocument(r,s,c);e=new rS(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=yu(n,i.document),s=i.readTime?Ur(i.readTime):Ot.min(),c=si.newNoDocument(r,s);e=new rS([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=yu(n,i.document);e=new rS([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return ut();{const i=t.filter,s=new T4(i.count||0);e=new zV(i.targetId,s)}}var p;return e}(this.M,t),i=function(r){if(!("targetChange"in r))return Ot.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Ot.min():s.readTime?Ur(s.readTime):Ot.min()}(t);return this.listener.zo(e,i)}Ho(t){const e={};e.database=Uw(this.M),e.addTarget=function(r,s){let c;const d=s.target;return c=XI(d)?{documents:tU(r,d)}:{query:nU(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=YV(r,s.resumeToken):s.snapshotVersion.compareTo(Ot.min())>0&&(c.readTime=Bw(r,s.snapshotVersion.toTimestamp())),c}(this.M,t);const i=function V4(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Lo(e)}Jo(t){const e={};e.database=Uw(this.M),e.removeTarget=t,this.Lo(e)}}class Y5 extends ZU{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(t,e){return this.So.wo("Write",t,e)}onMessage(t){if(Bt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Yo){this.No.reset();const e=function B4(n,t){return n&&n.length>0?(Bt(void 0!==t),n.map(e=>function(i,r){let s=Ur(i.updateTime?i.updateTime:r);return s.isEqual(Ot.min())&&(s=Ur(r)),new C4(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Ur(t.commitTime);return this.listener.tu(i,e)}return Bt(!t.writeResults||0===t.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const t={};t.database=Uw(this.M),this.Lo(t)}Zo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>Hw(this.M,i))};this.Lo(e)}}class K5 extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.So=i,this.M=r,this.su=!1}iu(){if(this.su)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So.co(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ge(Te.UNKNOWN,r.toString())})}_o(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So._o(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ge(Te.UNKNOWN,r.toString())})}terminate(){this.su=!0}}class Q5{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(t){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.fu(),this.ru=0,"Online"===t&&(this.uu=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}hu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ar(e),this.uu=!1):$e("OnlineStateTracker",e)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class X5{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(d=>{i.enqueueAndForget((0,Ie.Z)(function*(){var p;xf(c)&&($e("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ie.Z)(function*(y){const C=tt(y);C.wu.add(4),yield Vy(C),C.yu.set("Unknown"),C.wu.delete(4),yield Qw(C)}),function(y){return p.apply(this,arguments)})(c))}))}),this.yu=new Q5(i,r)}}function Qw(n){return q1.apply(this,arguments)}function q1(){return q1=(0,Ie.Z)(function*(n){if(xf(n))for(const t of n.mu)yield t(!0)}),q1.apply(this,arguments)}function Vy(n){return $1.apply(this,arguments)}function $1(){return $1=(0,Ie.Z)(function*(n){for(const t of n.mu)yield t(!1)}),$1.apply(this,arguments)}function yS(n,t){const e=tt(n);e._u.has(t.targetId)||(e._u.set(t.targetId,t),Y1(e)?Z1(e):Hy(e).Mo()&&W1(e,t))}function Xw(n,t){const e=tt(n),i=Hy(e);e._u.delete(t),i.Mo()&&YU(e,t),0===e._u.size&&(i.Mo()?i.$o():xf(e)&&e.yu.set("Unknown"))}function W1(n,t){n.pu.Z(t.targetId),Hy(n).Ho(t)}function YU(n,t){n.pu.Z(t),Hy(n).Jo(t)}function Z1(n){n.pu=new k4({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n._u.get(t)||null}),Hy(n).start(),n.yu.au()}function Y1(n){return xf(n)&&!Hy(n).ko()&&n._u.size>0}function xf(n){return 0===tt(n).wu.size}function KU(n){n.pu=void 0}function J5(n){return K1.apply(this,arguments)}function K1(){return K1=(0,Ie.Z)(function*(n){n._u.forEach((t,e)=>{W1(n,t)})}),K1.apply(this,arguments)}function e8(n,t){return Q1.apply(this,arguments)}function Q1(){return Q1=(0,Ie.Z)(function*(n,t){KU(n),Y1(n)?(n.yu.lu(t),Z1(n)):n.yu.set("Unknown")}),Q1.apply(this,arguments)}function t8(n,t,e){return X1.apply(this,arguments)}function X1(){return X1=(0,Ie.Z)(function*(n,t,e){if(n.yu.set("Online"),t instanceof qV&&2===t.state&&t.cause)try{yield(i=(0,Ie.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r._u.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r._u.delete(d),r.pu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){$e("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield vS(n,i)}else if(t instanceof rS?n.pu.ut(t):t instanceof zV?n.pu._t(t):n.pu.ht(t),!e.isEqual(Ot.min()))try{const i=yield BU(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.pu.yt(s);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=r._u.get(p);y&&r._u.set(p,y.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const p=r._u.get(d);if(!p)return;r._u.set(d,p.withResumeToken(Dr.EMPTY_BYTE_STRING,p.snapshotVersion)),YU(r,d);const y=new If(p.target,d,1,p.sequenceNumber);W1(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){$e("RemoteStore","Failed to raise snapshot:",i),yield vS(n,i)}var i}),X1.apply(this,arguments)}function vS(n,t,e){return J1.apply(this,arguments)}function J1(){return J1=(0,Ie.Z)(function*(n,t,e){if(!Mm(t))throw t;n.wu.add(1),yield Vy(n),n.yu.set("Offline"),e||(e=()=>BU(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){$e("RemoteStore","Retrying IndexedDB access"),yield e(),n.wu.delete(1),yield Qw(n)}))}),J1.apply(this,arguments)}function QU(n,t){return t().catch(e=>vS(n,e,t))}function Uy(n){return eO.apply(this,arguments)}function eO(){return eO=(0,Ie.Z)(function*(n){const t=tt(n),e=Mf(t);let i=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;n8(t);)try{const r=yield O5(t.localStore,i);if(null===r){0===t.du.length&&e.$o();break}i=r.batchId,r8(t,r)}catch(r){yield vS(t,r)}XU(t)&&JU(t)}),eO.apply(this,arguments)}function n8(n){return xf(n)&&n.du.length<10}function r8(n,t){n.du.push(t);const e=Mf(n);e.Mo()&&e.Xo&&e.Zo(t.mutations)}function XU(n){return xf(n)&&!Mf(n).ko()&&n.du.length>0}function JU(n){Mf(n).start()}function s8(n){return tO.apply(this,arguments)}function tO(){return tO=(0,Ie.Z)(function*(n){Mf(n).nu()}),tO.apply(this,arguments)}function o8(n){return nO.apply(this,arguments)}function nO(){return nO=(0,Ie.Z)(function*(n){const t=Mf(n);for(const e of n.du)t.Zo(e.mutations)}),nO.apply(this,arguments)}function a8(n,t,e){return iO.apply(this,arguments)}function iO(){return iO=(0,Ie.Z)(function*(n,t,e){const i=n.du.shift(),r=C1.from(i,t,e);yield QU(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Uy(n)}),iO.apply(this,arguments)}function l8(n,t){return rO.apply(this,arguments)}function rO(){return rO=(0,Ie.Z)(function*(n,t){var e;t&&Mf(n).Xo&&(yield(e=(0,Ie.Z)(function*(i,r){if(jV(s=r.code)&&s!==Te.ABORTED){const c=i.du.shift();Mf(i).Fo(),yield QU(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield Uy(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),XU(n)&&JU(n)}),rO.apply(this,arguments)}function eH(n,t){return sO.apply(this,arguments)}function sO(){return sO=(0,Ie.Z)(function*(n,t){const e=tt(n);e.asyncQueue.verifyOperationInProgress(),$e("RemoteStore","RemoteStore received new credentials");const i=xf(e);e.wu.add(3),yield Vy(e),i&&e.yu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.wu.delete(3),yield Qw(e)}),sO.apply(this,arguments)}function oO(n,t){return aO.apply(this,arguments)}function aO(){return aO=(0,Ie.Z)(function*(n,t){const e=tt(n);t?(e.wu.delete(2),yield Qw(e)):t||(e.wu.add(2),yield Vy(e),e.yu.set("Unknown"))}),aO.apply(this,arguments)}function Hy(n){return n.Iu||(n.Iu=function(t,e,i){const r=tt(t);return r.iu(),new Z5(e,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:J5.bind(null,n),eo:e8.bind(null,n),zo:t8.bind(null,n)}),n.mu.push(function(){var t=(0,Ie.Z)(function*(e){e?(n.Iu.Fo(),Y1(n)?Z1(n):n.yu.set("Unknown")):(yield n.Iu.stop(),KU(n))});return function(e){return t.apply(this,arguments)}}())),n.Iu}function Mf(n){return n.Tu||(n.Tu=function(t,e,i){const r=tt(t);return r.iu(),new Y5(e,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:s8.bind(null,n),eo:l8.bind(null,n),eu:o8.bind(null,n),tu:a8.bind(null,n)}),n.mu.push(function(){var t=(0,Ie.Z)(function*(e){e?(n.Tu.Fo(),yield Uy(n)):(yield n.Tu.stop(),n.du.length>0&&($e("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(e){return t.apply(this,arguments)}}())),n.Tu}class lO{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new lO(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(Te.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(n,t){if(ar("AsyncQueue",`${t}: ${n}`),Mm(n))return new Ge(Te.UNAVAILABLE,`${t}: ${n}`);throw n}class Gy{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Xe.comparator(e.key,i.key):(e,i)=>Xe.comparator(e.key,i.key),this.keyedMap=g1(),this.sortedSet=new Zi(this.comparator)}static emptySet(t){return new Gy(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Gy)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new Gy;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class tH{constructor(){this.Eu=new Zi(Xe.comparator)}track(t){const e=t.doc.key,i=this.Eu.get(e);i?0!==t.type&&3===i.type?this.Eu=this.Eu.insert(e,t):3===t.type&&1!==i.type?this.Eu=this.Eu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Eu=this.Eu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Eu=this.Eu.remove(e):1===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):ut():this.Eu=this.Eu.insert(e,t)}Au(){const t=[];return this.Eu.inorderTraversal((e,i)=>{t.push(i)}),t}}class zy{constructor(t,e,i,r,s,c,d,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(c=>{s.push({type:0,doc:c})}),new zy(t,e,Gy.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&kw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class c8{constructor(){this.Ru=void 0,this.listeners=[]}}class u8{constructor(){this.queries=new Tf(t=>IV(t),kw),this.onlineState="Unknown",this.bu=new Set}}function cO(n,t){return uO.apply(this,arguments)}function uO(){return uO=(0,Ie.Z)(function*(n,t){const e=tt(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new c8),r)try{s.Ru=yield e.onListen(i)}catch(c){const d=jy(c,`Initialization of query '${h1(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Pu(e.onlineState),s.Ru&&t.Vu(s.Ru)&&fO(e)}),uO.apply(this,arguments)}function dO(n,t){return hO.apply(this,arguments)}function hO(){return hO=(0,Ie.Z)(function*(n,t){const e=tt(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),hO.apply(this,arguments)}function d8(n,t){const e=tt(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.Vu(r)&&(i=!0);c.Ru=r}}i&&fO(e)}function h8(n,t,e){const i=tt(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function fO(n){n.bu.forEach(t=>{t.next()})}class pO{constructor(t,e,i){this.query=t,this.vu=e,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}Vu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new zy(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Su?this.Cu(t)&&(this.vu.next(t),e=!0):this.xu(t,this.onlineState)&&(this.Nu(t),e=!0),this.Du=t,e}onError(t){this.vu.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Du&&!this.Su&&this.xu(this.Du,t)&&(this.Nu(this.Du),e=!0),e}xu(t,e){return!t.fromCache||!(this.options.ku&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}Cu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(t){t=zy.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Su=!0,this.vu.next(t)}}class f8{constructor(t,e){this.payload=t,this.byteLength=e}Mu(){return"metadata"in this.payload}}class nH{constructor(t){this.M=t}wi(t){return yu(this.M,t)}mi(t){return t.metadata.exists?eU(this.M,t.document,!1):si.newNoDocument(this.wi(t.metadata.name),this.gi(t.metadata.readTime))}gi(t){return Ur(t)}}class p8{constructor(t,e,i){this.Ou=t,this.localStore=e,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iH(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=fn.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new nH(this.M);for(const r of t)if(r.metadata.queries){const s=i.wi(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||An()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,Ie.Z)(function*(){const e=yield function P5(n,t,e,i){return F1.apply(this,arguments)}(t.localStore,new nH(t.M),t.documents,t.Ou.id),i=t.$u(t.documents);for(const r of t.queries)yield N5(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function iH(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rH{constructor(t){this.key=t}}class sH{constructor(t){this.key=t}}class oH{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.current=!1,this.Ku=An(),this.mutatedKeys=An(),this.Gu=AV(t),this.Qu=new Gy(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new tH,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((C,D)=>{const M=r.get(C),L=f1(this.query,D)?D:null,j=!!M&&this.mutatedKeys.has(M.key),le=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let we=!1;M&&L?M.data.isEqual(L.data)?j!==le&&(i.track({type:3,doc:L}),we=!0):this.Hu(M,L)||(i.track({type:2,doc:L}),we=!0,(p&&this.Gu(L,p)>0||y&&this.Gu(L,y)<0)&&(d=!0)):!M&&L?(i.track({type:0,doc:L}),we=!0):M&&!L&&(i.track({type:1,doc:M}),we=!0,(p||y)&&(d=!0)),we&&(L?(c=c.add(L),s=le?s.add(C):s.delete(C)):(c=c.delete(C),s=s.delete(C)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const C="F"===this.query.limitType?c.last():c.first();c=c.delete(C.key),s=s.delete(C.key),i.track({type:1,doc:C})}return{Qu:c,zu:i,ii:d,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Au();s.sort((y,C)=>function(D,M){const L=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return L(D)-L(M)}(y.type,C.type)||this.Gu(y.doc,C.doc)),this.Ju(i);const c=e?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new zy(this.query,t.Qu,r,s,t.mutatedKeys,0===d,p,!1),Xu:c}:{Xu:c}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new tH,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=An(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new sH(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new rH(i))}),e}ta(t){this.Uu=t._i,this.Ku=An();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ea(){return zy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class m8{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class g8{constructor(t){this.key=t,this.na=!1}}class _8{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Tf(d=>IV(d),kw),this.ra=new Map,this.oa=new Set,this.ua=new Zi(Xe.comparator),this.aa=new Map,this.ca=new B1,this.ha={},this.la=new Map,this.fa=Lm.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function y8(n,t){return mO.apply(this,arguments)}function mO(){return mO=(0,Ie.Z)(function*(n,t){const e=BO(n);let i,r;const s=e.ia.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ea();else{const c=yield Ly(e.localStore,ul(t));e.isPrimaryClient&&yS(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield gO(e,t,i,"current"===d)}return r}),mO.apply(this,arguments)}function gO(n,t,e,i){return _O.apply(this,arguments)}function _O(){return _O=(0,Ie.Z)(function*(n,t,e,i){n._a=(C,D,M)=>{return(L=(0,Ie.Z)(function*(j,le,we,Qe){let Je=le.view.Wu(we);Je.ii&&(Je=yield pS(j.localStore,le.query,!1).then(({documents:kt})=>le.view.Wu(kt,Je)));const Ze=Qe&&Qe.targetChanges.get(le.targetId),We=le.view.applyChanges(Je,j.isPrimaryClient,Ze);return SO(j,le.targetId,We.Xu),We.snapshot}),function(j,le,we,Qe){return L.apply(this,arguments)})(n,C,D,M);var L};const r=yield pS(n.localStore,t,!0),s=new oH(t,r._i),c=s.Wu(r.documents),d=Lw.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,d);SO(n,e,p.Xu);const y=new m8(t,e,s);return n.ia.set(t,y),n.ra.has(e)?n.ra.get(e).push(t):n.ra.set(e,[t]),p.snapshot}),_O.apply(this,arguments)}function v8(n,t){return yO.apply(this,arguments)}function yO(){return yO=(0,Ie.Z)(function*(n,t){const e=tt(n),i=e.ia.get(t),r=e.ra.get(i.targetId);if(r.length>1)return e.ra.set(i.targetId,r.filter(s=>!kw(s,t))),void e.ia.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield By(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),Xw(e.remoteStore,i.targetId),qy(e,i.targetId)}).catch(Bm))):(qy(e,i.targetId),yield By(e.localStore,i.targetId,!0))}),yO.apply(this,arguments)}function vO(){return vO=(0,Ie.Z)(function*(n,t,e){const i=VO(n);try{const r=yield function(s,c){const d=tt(s),p=Wi.now(),y=c.reduce((D,M)=>D.add(M.key),An());let C;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>d.fi.Ks(D,y).next(M=>{C=M;const L=[];for(const j of c){const le=D4(j,C.get(j.key));null!=le&&L.push(new xm(j.key,le,pV(le.value.mapValue),lr.exists(!0)))}return d.Bs.addMutationBatch(D,p,L,c)})).then(D=>(D.applyToLocalDocumentSet(C),{batchId:D.batchId,changes:C}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let p=s.ha[s.currentUser.toKey()];p||(p=new Zi(Wt)),p=p.insert(c,d),s.ha[s.currentUser.toKey()]=p}(i,r.batchId,e),yield Ad(i,r.changes),yield Uy(i.remoteStore)}catch(r){const s=jy(r,"Failed to persist write");e.reject(s)}}),vO.apply(this,arguments)}function aH(n,t){return bO.apply(this,arguments)}function bO(){return bO=(0,Ie.Z)(function*(n,t){const e=tt(n);try{const i=yield R5(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.aa.get(s);c&&(Bt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.na=!0:r.modifiedDocuments.size>0?Bt(c.na):r.removedDocuments.size>0&&(Bt(c.na),c.na=!1))}),yield Ad(e,i,t)}catch(i){yield Bm(i)}}),bO.apply(this,arguments)}function lH(n,t,e){const i=tt(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ia.forEach((s,c)=>{const d=c.view.Pu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=tt(s);d.onlineState=c;let p=!1;d.queries.forEach((y,C)=>{for(const D of C.listeners)D.Pu(c)&&(p=!0)}),p&&fO(d)}(i.eventManager,t),r.length&&i.sa.zo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function w8(n,t,e){return wO.apply(this,arguments)}function wO(){return wO=(0,Ie.Z)(function*(n,t,e){const i=tt(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.aa.get(t),s=r&&r.key;if(s){let c=new Zi(Xe.comparator);c=c.insert(s,si.newNoDocument(s,Ot.min()));const d=An().add(s),p=new Fw(Ot.min(),new Map,new $n(Wt),c,d);yield aH(i,p),i.ua=i.ua.remove(s),i.aa.delete(t),AO(i)}else yield By(i.localStore,t,!1).then(()=>qy(i,t,e)).catch(Bm)}),wO.apply(this,arguments)}function C8(n,t){return CO.apply(this,arguments)}function CO(){return CO=(0,Ie.Z)(function*(n,t){const e=tt(n),i=t.batch.batchId;try{const r=yield k5(e.localStore,t);IO(e,i,null),TO(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Ad(e,r)}catch(r){yield Bm(r)}}),CO.apply(this,arguments)}function E8(n,t,e){return EO.apply(this,arguments)}function EO(){return EO=(0,Ie.Z)(function*(n,t,e){const i=tt(n);try{const r=yield function(s,c){const d=tt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return d.Bs.lookupMutationBatch(p,c).next(C=>(Bt(null!==C),y=C.keys(),d.Bs.removeMutationBatch(p,C))).next(()=>d.Bs.performConsistencyCheck(p)).next(()=>d.fi.Ks(p,y))})}(i.localStore,t);IO(i,t,e),TO(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Ad(i,r)}catch(r){yield Bm(r)}}),EO.apply(this,arguments)}function DO(){return DO=(0,Ie.Z)(function*(n,t){const e=tt(n);xf(e.remoteStore)||$e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=tt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.Bs.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.la.get(i)||[];r.push(t),e.la.set(i,r)}catch(i){const r=jy(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),DO.apply(this,arguments)}function TO(n,t){(n.la.get(t)||[]).forEach(e=>{e.resolve()}),n.la.delete(t)}function IO(n,t,e){const i=tt(n);let r=i.ha[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.ha[i.currentUser.toKey()]=r}}function qy(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ra.get(t))n.ia.delete(i),e&&n.sa.wa(i,e);n.ra.delete(t),n.isPrimaryClient&&n.ca.vi(t).forEach(i=>{n.ca.containsKey(i)||cH(n,i)})}function cH(n,t){n.oa.delete(t.path.canonicalString());const e=n.ua.get(t);null!==e&&(Xw(n.remoteStore,e),n.ua=n.ua.remove(t),n.aa.delete(e),AO(n))}function SO(n,t,e){for(const i of e)i instanceof rH?(n.ca.addReference(i.key,t),T8(n,i)):i instanceof sH?($e("SyncEngine","Document no longer in limbo: "+i.key),n.ca.removeReference(i.key,t),n.ca.containsKey(i.key)||cH(n,i.key)):ut()}function T8(n,t){const e=t.key,i=e.path.canonicalString();n.ua.get(e)||n.oa.has(i)||($e("SyncEngine","New document in limbo: "+e),n.oa.add(i),AO(n))}function AO(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const t=n.oa.values().next().value;n.oa.delete(t);const e=new Xe(fn.fromString(t)),i=n.fa.next();n.aa.set(i,new g8(e)),n.ua=n.ua.insert(e,i),yS(n.remoteStore,new If(ul(Ay(e.path)),i,2,Ta.A))}}function Ad(n,t,e){return xO.apply(this,arguments)}function xO(){return xO=(0,Ie.Z)(function*(n,t,e){const i=tt(n),r=[],s=[],c=[];var d;i.ia.isEmpty()||(i.ia.forEach((d,p)=>{c.push(i._a(p,t,e).then(y=>{if(y){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),r.push(y);const C=O1.Ys(p.targetId,y);s.push(C)}}))}),yield Promise.all(c),i.sa.zo(r),yield(d=(0,Ie.Z)(function*(p,y){const C=tt(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Se.forEach(y,M=>Se.forEach(M.Hs,L=>C.persistence.referenceDelegate.addReference(D,M.targetId,L)).next(()=>Se.forEach(M.Js,L=>C.persistence.referenceDelegate.removeReference(D,M.targetId,L)))))}catch(D){if(!Mm(D))throw D;$e("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const M=D.targetId;if(!D.fromCache){const L=C.ui.get(M),le=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);C.ui=C.ui.insert(M,le)}}}),function(p,y){return d.apply(this,arguments)})(i.localStore,s))}),xO.apply(this,arguments)}function I8(n,t){return MO.apply(this,arguments)}function MO(){return MO=(0,Ie.Z)(function*(n,t){const e=tt(n);if(!e.currentUser.isEqual(t)){$e("SyncEngine","User change. New user:",t.toKey());const i=yield LU(e.localStore,t);e.currentUser=t,(r=e).la.forEach(c=>{c.forEach(d=>{d.reject(new Ge(Te.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.la.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Ad(e,i.di)}var r}),MO.apply(this,arguments)}function S8(n,t){const e=tt(n),i=e.aa.get(t);if(i&&i.na)return An().add(i.key);{let r=An();const s=e.ra.get(t);if(!s)return r;for(const c of s){const d=e.ia.get(c);r=r.unionWith(d.view.ju)}return r}}function A8(n,t){return kO.apply(this,arguments)}function kO(){return kO=(0,Ie.Z)(function*(n,t){const e=tt(n),i=yield pS(e.localStore,t.query,!0),r=t.view.ta(i);return e.isPrimaryClient&&SO(e,t.targetId,r.Xu),r}),kO.apply(this,arguments)}function x8(n,t){return RO.apply(this,arguments)}function RO(){return RO=(0,Ie.Z)(function*(n,t){const e=tt(n);return HU(e.localStore,t).then(i=>Ad(e,i))}),RO.apply(this,arguments)}function M8(n,t,e,i){return OO.apply(this,arguments)}function OO(){return OO=(0,Ie.Z)(function*(n,t,e,i){const r=tt(n),s=yield function(c,d){const p=tt(c),y=tt(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.fn(C,d).next(D=>D?p.fi.Ks(C,D):Se.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield Uy(r.remoteStore):"acknowledged"===e||"rejected"===e?(IO(r,t,i||null),TO(r,t),d=t,tt(tt(r.localStore).Bs)._n(d)):ut(),yield Ad(r,s)):$e("SyncEngine","Cannot apply mutation batch with id: "+t)}),OO.apply(this,arguments)}function PO(){return PO=(0,Ie.Z)(function*(n,t){const e=tt(n);if(BO(e),VO(e),!0===t&&!0!==e.da){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield uH(e,i.toArray());e.da=!0,yield oO(e.remoteStore,!0);for(const s of r)yS(e.remoteStore,s)}else if(!1===t&&!1!==e.da){const i=[];let r=Promise.resolve();e.ra.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(qy(e,c),By(e.localStore,c,!0))),Xw(e.remoteStore,c)}),yield r,yield uH(e,i),function(s){const c=tt(s);c.aa.forEach((d,p)=>{Xw(c.remoteStore,p)}),c.ca.Si(),c.aa=new Map,c.ua=new Zi(Xe.comparator)}(e),e.da=!1,yield oO(e.remoteStore,!1)}}),PO.apply(this,arguments)}function uH(n,t,e){return NO.apply(this,arguments)}function NO(){return NO=(0,Ie.Z)(function*(n,t,e){const i=tt(n),r=[],s=[];for(const c of t){let d;const p=i.ra.get(c);if(p&&0!==p.length){d=yield Ly(i.localStore,ul(p[0]));for(const y of p){const C=i.ia.get(y),D=yield A8(i,C);D.snapshot&&s.push(D.snapshot)}}else{const y=yield UU(i.localStore,c);d=yield Ly(i.localStore,y),yield gO(i,dH(y),c,!1)}r.push(d)}return i.sa.zo(s),r}),NO.apply(this,arguments)}function dH(n){return DV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function R8(n){const t=tt(n);return tt(tt(t.localStore).persistence).Fs()}function O8(n,t,e,i){return FO.apply(this,arguments)}function FO(){return FO=(0,Ie.Z)(function*(n,t,e,i){const r=tt(n);if(r.da)return void $e("SyncEngine","Ignoring unexpected query state notification.");const s=r.ra.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield HU(r.localStore,SV(s[0])),d=Fw.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield Ad(r,c,d);break}case"rejected":yield By(r.localStore,t,!0),qy(r,t,i);break;default:ut()}}),FO.apply(this,arguments)}function P8(n,t,e){return LO.apply(this,arguments)}function LO(){return LO=(0,Ie.Z)(function*(n,t,e){const i=BO(n);if(i.da){for(const r of t){if(i.ra.has(r)){$e("SyncEngine","Adding an already active target "+r);continue}const s=yield UU(i.localStore,r),c=yield Ly(i.localStore,s);yield gO(i,dH(s),c.targetId,!1),yS(i.remoteStore,c)}for(const r of e)i.ra.has(r)&&(yield By(i.localStore,r,!1).then(()=>{Xw(i.remoteStore,r),qy(i,r)}).catch(Bm))}}),LO.apply(this,arguments)}function BO(n){const t=tt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=aH.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=S8.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=w8.bind(null,t),t.sa.zo=d8.bind(null,t.eventManager),t.sa.wa=h8.bind(null,t.eventManager),t}function VO(n){const t=tt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=C8.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=E8.bind(null,t),t}class hH{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ie.Z)(function*(){e.M=Kw(t.databaseInfo.databaseId),e.sharedClientState=e.ga(t),e.persistence=e.ya(t),yield e.persistence.start(),e.gcScheduler=e.pa(t),e.localStore=e.Ia(t)})()}pa(t){return null}Ia(t){return FU(this.persistence,new NU,t.initialUser,this.M)}ya(t){return new j5(V1.Yi,this.M)}ga(t){return new qU}terminate(){var t=this;return(0,Ie.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class fH extends hH{constructor(t,e,i){super(),this.Ta=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield e().call(i,t),yield i.Ta.initialize(i,t),yield VO(i.Ta.syncEngine),yield Uy(i.Ta.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Ia(t){return FU(this.persistence,new NU,t.initialUser,this.M)}pa(t){return new E5(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}ya(t){const e=R1(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Uo.withCacheSize(this.cacheSizeBytes):Uo.DEFAULT;return new k1(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,WU(),_S(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(t){return new qU}}class F8 extends fH{constructor(t,e){super(t,e,!1),this.Ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ie.Z)(function*(){yield e().call(i,t);const r=i.Ta.syncEngine;i.sharedClientState instanceof G1&&(i.sharedClientState.syncEngine={$r:M8.bind(null,r),Br:O8.bind(null,r),Lr:P8.bind(null,r),Fs:R8.bind(null,r),Fr:x8.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var s=(0,Ie.Z)(function*(c){yield function k8(n,t){return PO.apply(this,arguments)}(i.Ta.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):c||i.gcScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}ga(t){const e=WU();if(!G1.vt(e))throw new Ge(Te.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=R1(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new G1(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class UO{initialize(t,e){var i=this;return(0,Ie.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>lH(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=I8.bind(null,i.syncEngine),yield oO(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new u8}createDatastore(t){const e=Kw(t.databaseInfo.databaseId),i=new W5(t.databaseInfo);return new K5(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>lH(this.syncEngine,d,0),c=$U.vt()?new $U:new z5,new X5(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,p,y){const C=new _8(i,r,s,c,d,p);return y&&(C.da=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Ie.Z)(function*(e){const i=tt(e);$e("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield Vy(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function pH(n,t=10240){let e=0;return{read:()=>(0,Ie.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class bS{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ea(this.observer.next,t)}error(t){this.observer.error?this.Ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Aa(){this.muted=!0}Ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class L8{constructor(t,e){this.Ra=t,this.M=e,this.metadata=new Vr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(i=>{i&&i.Mu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ra.cancel()}getMetadata(){var t=this;return(0,Ie.Z)(function*(){return t.metadata.promise})()}ma(){var t=this;return(0,Ie.Z)(function*(){return yield t.getMetadata(),t.Pa()})()}Pa(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.Va();if(null===e)return null;const i=t.ba.decode(e),r=Number(i);isNaN(r)&&t.va(`length string (${i}) is not valid number`);const s=yield t.Sa(r);return new f8(JSON.parse(s),e.length+r)})()}Da(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Va(){var t=this;return(0,Ie.Z)(function*(){for(;t.Da()<0&&!(yield t.Ca()););if(0===t.buffer.length)return null;const e=t.Da();e<0&&t.va("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Sa(t){var e=this;return(0,Ie.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ca())&&e.va("Reached the end of bundle when more is expected.");const i=e.ba.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}va(t){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${t}`)}Ca(){var t=this;return(0,Ie.Z)(function*(){const e=yield t.Ra.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class B8{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ge(Te.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ie.Z)(function*(s,c){const d=tt(s),p=Uw(d.M)+"/documents",y={documents:c.map(L=>Vw(d.M,L))},C=yield d._o("BatchGetDocuments",p,y),D=new Map;C.forEach(L=>{const j=function F4(n,t){return"found"in t?function(e,i){Bt(!!i.found);const r=yu(e,i.found.name),s=Ur(i.found.updateTime),c=new Bs({mapValue:{fields:i.found.fields}});return si.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){Bt(!!i.missing),Bt(!!i.readTime);const r=yu(e,i.missing),s=Ur(i.readTime);return si.newNoDocument(r,s)}(n,t):ut()}(d.M,L);D.set(j.key.toString(),j)});const M=[];return c.forEach(L=>{const j=D.get(L.toString());Bt(!!j),M.push(j)}),M}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Pw(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=Xe.fromPath(r);t.mutations.push(new m1(s,t.precondition(s)))}),yield(i=(0,Ie.Z)(function*(r,s){const c=tt(r),d=Uw(c.M)+"/documents",p={writes:s.map(y=>Hw(c.M,y))};yield c.co("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ut();e=Ot.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ge(Te.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?lr.updateTime(e):lr.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ot.min()))throw new Ge(Te.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lr.updateTime(e)}return lr.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class V8{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.xa=i.maxAttempts,this.No=new z1(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var t=this;this.No.Ro((0,Ie.Z)(function*(){const e=new B8(t.datastore),i=t.ka(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Ma(s)}))}).catch(r=>{t.Ma(r)})}))}ka(t){try{const e=this.updateFunction(t);return!Dw(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(t){this.xa>0&&this.Oa(t)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(t)}Oa(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!jV(e)}return!1}}class U8{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=as.UNAUTHENTICATED,this.clientId=nV.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Ie.Z)(function*(d){$e("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>($e("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Ie.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(Te.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=jy(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function mH(n,t){return HO.apply(this,arguments)}function HO(){return HO=(0,Ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),$e("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ie.Z)(function*(s){i.isEqual(s)||(yield LU(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),HO.apply(this,arguments)}function gH(n,t){return jO.apply(this,arguments)}function jO(){return jO=(0,Ie.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield GO(n);$e("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>eH(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>eH(t.remoteStore,s)),n.onlineComponents=t}),jO.apply(this,arguments)}function GO(n){return zO.apply(this,arguments)}function zO(){return zO=(0,Ie.Z)(function*(n){return n.offlineComponents||($e("FirestoreClient","Using default OfflineComponentProvider"),yield mH(n,new hH)),n.offlineComponents}),zO.apply(this,arguments)}function wS(n){return qO.apply(this,arguments)}function qO(){return qO=(0,Ie.Z)(function*(n){return n.onlineComponents||($e("FirestoreClient","Using default OnlineComponentProvider"),yield gH(n,new UO)),n.onlineComponents}),qO.apply(this,arguments)}function _H(n){return GO(n).then(t=>t.persistence)}function $O(n){return GO(n).then(t=>t.localStore)}function yH(n){return wS(n).then(t=>t.remoteStore)}function WO(n){return wS(n).then(t=>t.syncEngine)}function $y(n){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,Ie.Z)(function*(n){const t=yield wS(n),e=t.eventManager;return e.onListen=y8.bind(null,t.syncEngine),e.onUnlisten=v8.bind(null,t.syncEngine),e}),ZO.apply(this,arguments)}function vH(n,t,e={}){const i=new Vr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,s,c,d,p){const y=new bS({next:D=>{s.enqueueAndForget(()=>dO(r,C));const M=D.docs.has(c);!M&&D.fromCache?p.reject(new Ge(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&D.fromCache&&d&&"server"===d.source?p.reject(new Ge(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),C=new pO(Ay(c.path),y,{includeMetadataChanges:!0,ku:!0});return cO(r,C)}(yield $y(n),n.asyncQueue,t,e,i)})),i.promise}function bH(n,t,e={}){const i=new Vr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(r,s,c,d,p){const y=new bS({next:D=>{s.enqueueAndForget(()=>dO(r,C)),D.fromCache&&"server"===d.source?p.reject(new Ge(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),C=new pO(c,y,{includeMetadataChanges:!0,ku:!0});return cO(r,C)}(yield $y(n),n.asyncQueue,t,e,i)})),i.promise}const wH=new Map;function YO(n,t,e){if(!e)throw new Ge(Te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function CH(n,t,e,i){if(!0===t&&!0===i)throw new Ge(Te.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function EH(n){if(!Xe.isDocumentKey(n))throw new Ge(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function DH(n){if(Xe.isDocumentKey(n))throw new Ge(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":ut()}function hn(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new Ge(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=CS(n);throw new Ge(Te.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function TH(n,t){if(t<=0)throw new Ge(Te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class IH{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ge(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ge(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,CH("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Jw{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IH({}),this._settingsFrozen=!1,t instanceof Id?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Ge(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Id(r.options.projectId)}(t))}get app(){if(!this._app)throw new Ge(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ge(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IH(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new $$;switch(e.type){case"gapi":const i=e.client;return Bt(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new K$(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Ge(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=wH.get(t);e&&($e("ComponentProvider","Removing Datastore"),wH.delete(t),e.terminate())}(this),Promise.resolve()}}class oi{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new oi(this.firestore,t,this._key)}}class Vs{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Vs(this.firestore,t,this._query)}}class bu extends Vs{constructor(t,e,i){super(t,e,Ay(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new oi(this.firestore,null,new Xe(t))}withConverter(t){return new bu(this.firestore,t,this._path)}}function SH(n,t,...e){if(n=(0,H.m9)(n),YO("collection","path",t),n instanceof Jw){const i=fn.fromString(t,...e);return DH(i),new bu(n,null,i)}{if(!(n instanceof oi||n instanceof bu))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(fn.fromString(t,...e));return DH(i),new bu(n.firestore,null,i)}}function ES(n,t,...e){if(n=(0,H.m9)(n),1===arguments.length&&(t=nV.R()),YO("doc","path",t),n instanceof Jw){const i=fn.fromString(t,...e);return EH(i),new oi(n,null,new Xe(i))}{if(!(n instanceof oi||n instanceof bu))throw new Ge(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(fn.fromString(t,...e));return EH(i),new oi(n.firestore,n instanceof bu?n.converter:null,new Xe(i))}}function AH(n,t){return n=(0,H.m9)(n),t=(0,H.m9)(t),(n instanceof oi||n instanceof bu)&&(t instanceof oi||t instanceof bu)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function xH(n,t){return n=(0,H.m9)(n),t=(0,H.m9)(t),n instanceof Vs&&t instanceof Vs&&n.firestore===t.firestore&&kw(n._query,t._query)&&n.converter===t.converter}class Q8{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new z1(this,"async_queue_retry"),this.Qa=()=>{const e=_S();e&&$e("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const t=_S();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ja(),this.Wa(t)}enterRestrictedMode(t){if(!this.Ba){this.Ba=!0,this.Ka=t||!1;const e=_S();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Qa)}}enqueue(t){if(this.ja(),this.Ba)return new Promise(()=>{});const e=new Vr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.$a.push(t),this.za()))}za(){var t=this;return(0,Ie.Z)(function*(){if(0!==t.$a.length){try{yield t.$a[0](),t.$a.shift(),t.No.reset()}catch(e){if(!Mm(e))throw e;$e("AsyncQueue","Operation failed with retryable error: "+e)}t.$a.length>0&&t.No.Ro(()=>t.za())}})()}Wa(t){const e=this.Fa.then(()=>(this.qa=!0,t().catch(i=>{throw this.Ua=i,this.qa=!1,ar("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.qa=!1,i))));return this.Fa=e,e}enqueueAfterDelay(t,e,i){this.ja(),this.Ga.indexOf(t)>-1&&(e=0);const r=lO.createAndSchedule(this,t,e,i,s=>this.Ha(s));return this.La.push(r),r}ja(){this.Ua&&ut()}verifyOperationInProgress(){}Ja(){var t=this;return(0,Ie.Z)(function*(){let e;do{e=t.Fa,yield e}while(e!==t.Fa)})()}Ya(t){for(const e of this.La)if(e.timerId===t)return!0;return!1}Xa(t){return this.Ja().then(()=>{this.La.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.La)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Ja()})}Za(t){this.Ga.push(t)}Ha(t){const e=this.La.indexOf(t);this.La.splice(e,1)}}function KO(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class X8{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class mi extends Jw{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new Q8,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||MH(this),this._firestoreClient.terminate()}}function ur(n){return n._firestoreClient||MH(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function MH(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new n4(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new U8(n._authCredentials,n._appCheckCredentials,n._queue,i)}function kH(n,t,e){const i=new Vr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield mH(n,e),yield gH(n,t),i.resolve()}catch(r){if(!("FirebaseError"===(s=r).name?s.code===Te.FAILED_PRECONDITION||s.code===Te.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var s})).then(()=>i.promise)}function RH(n){if(n._initialized||n._terminated)throw new Ge(Te.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xd{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ge(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class wu{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wu(Dr.fromBase64String(t))}catch(e){throw new Ge(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new wu(Dr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class Um{constructor(t){this._methodName=t}}class DS{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ge(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ge(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Wt(this._lat,t._lat)||Wt(this._long,t._long)}}const lW=/^__.*__$/;class cW{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new xm(t,this.data,this.fieldMask,e,this.fieldTransforms):new Ow(t,this.data,e,this.fieldTransforms)}}class OH{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new xm(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function PH(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}class TS{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.M=i,this.ignoreUndefinedProperties=r,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(t){return new TS(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.nc({path:i,ic:!1});return r.rc(t),r}oc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.nc({path:i,ic:!1});return r.tc(),r}uc(t){return this.nc({path:void 0,ic:!0})}ac(t){return AS(t,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}tc(){if(this.path)for(let t=0;t<this.path.length;t++)this.rc(this.path.get(t))}rc(t){if(0===t.length)throw this.ac("Document fields must not be empty");if(PH(this.ec)&&lW.test(t))throw this.ac('Document fields cannot begin and end with "__"')}}class uW{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=i||Kw(t)}lc(t,e,i,r=!1){return new TS({ec:t,methodName:e,hc:i,path:Er.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Hm(n){const t=n._freezeSettings(),e=Kw(n._databaseId);return new uW(n._databaseId,!!t.ignoreUndefinedProperties,e)}function IS(n,t,e,i,r,s={}){const c=n.lc(s.merge||s.mergeFields?2:0,t,e,r);eP("Data must be an object, but it was:",c,i);const d=LH(i,c);let p,y;if(s.merge)p=new Dy(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const C=[];for(const D of s.mergeFields){const M=tP(t,D,e);if(!c.contains(M))throw new Ge(Te.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);VH(C,M)||C.push(M)}p=new Dy(C),y=c.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=c.fieldTransforms;return new cW(new Bs(d),p,y)}class eC extends Um{_toFieldTransform(t){if(2!==t.ec)throw t.ac(1===t.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof eC}}function NH(n,t,e){return new TS({ec:3,hc:t.settings.hc,methodName:n._methodName,ic:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class QO extends Um{_toFieldTransform(t){return new Rw(t.path,new My)}isEqual(t){return t instanceof QO}}class dW extends Um{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=NH(this,t,!0),i=this.fc.map(s=>jm(s,e)),r=new Sm(i);return new Rw(t.path,r)}isEqual(t){return this===t}}class hW extends Um{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=NH(this,t,!0),i=this.fc.map(s=>jm(s,e)),r=new Am(i);return new Rw(t.path,r)}isEqual(t){return this===t}}class fW extends Um{constructor(t,e){super(t),this.dc=e}_toFieldTransform(t){const e=new ky(t.M,kV(t.M,this.dc));return new Rw(t.path,e)}isEqual(t){return this===t}}function XO(n,t,e,i){const r=n.lc(1,t,e);eP("Data must be an object, but it was:",r,i);const s=[],c=Bs.empty();wm(i,(p,y)=>{const C=SS(t,p,e);y=(0,H.m9)(y);const D=r.oc(C);if(y instanceof eC)s.push(C);else{const M=jm(y,D);null!=M&&(s.push(C),c.set(C,M))}});const d=new Dy(s);return new OH(c,d,r.fieldTransforms)}function JO(n,t,e,i,r,s){const c=n.lc(1,t,e),d=[tP(t,i,e)],p=[r];if(s.length%2!=0)throw new Ge(Te.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let M=0;M<s.length;M+=2)d.push(tP(t,s[M])),p.push(s[M+1]);const y=[],C=Bs.empty();for(let M=d.length-1;M>=0;--M)if(!VH(y,d[M])){const L=d[M];let j=p[M];j=(0,H.m9)(j);const le=c.oc(L);if(j instanceof eC)y.push(L);else{const we=jm(j,le);null!=we&&(y.push(L),C.set(L,we))}}const D=new Dy(y);return new OH(C,D,c.fieldTransforms)}function FH(n,t,e,i=!1){return jm(e,n.lc(i?4:3,t))}function jm(n,t){if(BH(n=(0,H.m9)(n)))return eP("Unsupported field value:",t,n),LH(n,t);if(n instanceof Um)return function(e,i){if(!PH(i.ec))throw i.ac(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ac(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=jm(c,i.uc(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,H.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kV(i.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=Wi.fromDate(e);return{timestampValue:Bw(i.M,r)}}if(e instanceof Wi){const r=new Wi(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Bw(i.M,r)}}if(e instanceof DS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wu)return{bytesValue:YV(i.M,e._byteString)};if(e instanceof oi){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:_1(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ac(`Unsupported field value: ${CS(e)}`)}(n,t)}function LH(n,t){const e={};return sV(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wm(n,(i,r)=>{const s=jm(r,t.sc(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function BH(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wi||n instanceof DS||n instanceof wu||n instanceof oi||n instanceof Um)}function eP(n,t,e){if(!BH(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=CS(e);throw t.ac("an object"===i?n+" a custom object":n+" "+i)}var i}function tP(n,t,e){if((t=(0,H.m9)(t))instanceof xd)return t._internalPath;if("string"==typeof t)return SS(n,t);throw AS("Field path arguments must be of type string or ",n,!1,void 0,e)}const pW=new RegExp("[~\\*/\\[\\]]");function SS(n,t,e){if(t.search(pW)>=0)throw AS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new xd(...t.split("."))._internalPath}catch(i){throw AS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function AS(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new Ge(Te.INVALID_ARGUMENT,d+n+p)}function VH(n,t){return n.some(e=>e.isEqual(t))}class tC{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new oi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new mW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(xS("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class mW extends tC{data(){return super.data()}}function xS(n,t){return"string"==typeof t?SS(n,t):t instanceof xd?t._internalPath:t._delegate._internalPath}class Gm{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Md extends tC{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new nC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(xS("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class nC extends Md{data(t={}){return super.data(t)}}class kf{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Gm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new nC(this._firestore,this._userDataWriter,i.key,i,new Gm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ge(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new nC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Gm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new nC(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Gm(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:gW(c.type),doc:d,oldIndex:p,newIndex:y}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function gW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function UH(n,t){return n instanceof Md&&t instanceof Md?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof kf&&t instanceof kf&&n._firestore===t._firestore&&xH(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function HH(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ge(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iC{}function Rf(n,...t){for(const e of t)n=e._apply(n);return n}class _W extends iC{constructor(t,e,i){super(),this._c=t,this.wc=e,this.mc=i,this.type="where"}_apply(t){const e=Hm(t.firestore),i=function(r,s,c,d,p,y,C){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){WH(C,y);const L=[];for(const j of C)L.push($H(d,r,j));D={arrayValue:{values:L}}}else D=$H(d,r,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||WH(C,y),D=FH(c,"where",C,"in"===y||"not-in"===y);const M=cs.create(p,y,D);return function(L,j){if(j.S()){const we=u1(L);if(null!==we&&!we.isEqual(j.field))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${j.field.toString()}'`);const Qe=c1(L);null!==Qe&&ZH(0,j.field,Qe)}const le=function(we,Qe){for(const Je of we.filters)if(Qe.indexOf(Je.op)>=0)return Je.op;return null}(L,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==le)throw new Ge(Te.INVALID_ARGUMENT,le===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${le.toString()}' filters.`)}(r,M),M}(t._query,0,e,t.firestore._databaseId,this._c,this.wc,this.mc);return new Vs(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new Sd(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class vW extends iC{constructor(t,e){super(),this._c=t,this.gc=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Sy(r,s);return function(d,p){if(null===c1(d)){const y=u1(d);null!==y&&ZH(0,y,p.field)}}(i,c),c}(t._query,this._c,this.gc);return new Vs(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Sd(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class jH extends iC{constructor(t,e,i){super(),this.type=t,this.yc=e,this.Ic=i}_apply(t){return new Vs(t.firestore,t.converter,TV(t._query,this.yc,this.Ic))}}class GH extends iC{constructor(t,e,i){super(),this.type=t,this.Tc=e,this.Ec=i}_apply(t){const e=qH(t,this.type,this.Tc,this.Ec);return new Vs(t.firestore,t.converter,(r=e,new Sd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class zH extends iC{constructor(t,e,i){super(),this.type=t,this.Tc=e,this.Ec=i}_apply(t){const e=qH(t,this.type,this.Tc,this.Ec);return new Vs(t.firestore,t.converter,(r=e,new Sd((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function qH(n,t,e,i){if(e[0]=(0,H.m9)(e[0]),e[0]instanceof tC)return function(r,s,c,d,p){if(!d)throw new Ge(Te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const C of xy(r))if(C.field.isKeyField())y.push(Dm(s,d.key));else{const D=d.data.field(C.field);if(s1(D))throw new Ge(Te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const M=C.field.canonicalString();throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${M}' (used as the orderBy) does not exist.`)}y.push(D)}return new Df(y,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Hm(n.firestore);return function(s,c,d,p,y,C){const D=s.explicitOrderBy;if(y.length>D.length)throw new Ge(Te.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const M=[];for(let L=0;L<y.length;L++){const j=y[L];if(D[L].field.isKeyField()){if("string"!=typeof j)throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof j}`);if(!d1(s)&&-1!==j.indexOf("/"))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${j}' contains a slash.`);const le=s.path.child(fn.fromString(j));if(!Xe.isDocumentKey(le))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${le}' is not because it contains an odd number of segments.`);const we=new Xe(le);M.push(Dm(c,we))}else{const le=FH(d,p,j);M.push(le)}}return new Df(M,C)}(n._query,n.firestore._databaseId,r,t,e,i)}}function $H(n,t,e){if("string"==typeof(e=(0,H.m9)(e))){if(""===e)throw new Ge(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d1(t)&&-1!==e.indexOf("/"))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(fn.fromString(e));if(!Xe.isDocumentKey(i))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Dm(n,new Xe(i))}if(e instanceof oi)return Dm(n,e._key);throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${CS(e)}.`)}function WH(n,t){if(!Array.isArray(n)||0===n.length)throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new Ge(Te.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function ZH(n,t,e){if(!e.isEqual(t))throw new Ge(Te.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const SW={maxAttempts:5};class nP{convertValue(t,e="none"){switch(Em(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fi(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Cm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ut()}}convertObject(t,e){const i={};return wm(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new DS(Fi(t.latitude),Fi(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=oV(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Ew(t));default:return null}}convertTimestamp(t){const e=wf(t);return new Wi(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=fn.fromString(t);Bt(sU(i));const r=new Id(i.get(1),i.get(3)),s=new Xe(i.popFirst(5));return r.isEqual(e)||ar(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function MS(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class AW extends nP{constructor(t){super(),this.firestore=t}convertBytes(t){return new wu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new oi(this.firestore,null,e)}}class YH{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Hm(t)}set(t,e,i){this._verifyNotCommitted();const r=Of(t,this._firestore),s=MS(r.converter,e,i),c=IS(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,lr.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=Of(t,this._firestore);let c;return c="string"==typeof(e=(0,H.m9)(e))||e instanceof xd?JO(this._dataReader,"WriteBatch.update",s._key,e,i,r):XO(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,lr.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=Of(t,this._firestore);return this._mutations=this._mutations.concat(new Pw(e._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(Te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Of(n,t){if((n=(0,H.m9)(n)).firestore!==t)throw new Ge(Te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class zm extends nP{constructor(t){super(),this.firestore=t}convertBytes(t){return new wu(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new oi(this.firestore,null,e)}}function KH(n,t,e){n=hn(n,oi);const i=hn(n.firestore,mi),r=MS(n.converter,t,e);return Wy(i,[IS(Hm(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,lr.none())])}function QH(n,t,e,...i){n=hn(n,oi);const r=hn(n.firestore,mi),s=Hm(r);let c;return c="string"==typeof(t=(0,H.m9)(t))||t instanceof xd?JO(s,"updateDoc",n._key,t,e,i):XO(s,"updateDoc",n._key,t),Wy(r,[c.toMutation(n._key,lr.exists(!0))])}function XH(n,...t){var e,i,r;n=(0,H.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||KO(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(KO(t[c])){const D=t[c];t[c]=null===(e=D.next)||void 0===e?void 0:e.bind(D),t[c+1]=null===(i=D.error)||void 0===i?void 0:i.bind(D),t[c+2]=null===(r=D.complete)||void 0===r?void 0:r.bind(D)}let p,y,C;if(n instanceof oi)y=hn(n.firestore,mi),C=Ay(n._key.path),p={next:D=>{t[c]&&t[c](iP(y,n,D))},error:t[c+1],complete:t[c+2]};else{const D=hn(n,Vs);y=hn(D.firestore,mi),C=D._query;const M=new zm(y);p={next:L=>{t[c]&&t[c](new kf(y,M,D,L))},error:t[c+1],complete:t[c+2]},HH(n._query)}return function(D,M,L,j){const le=new bS(j),we=new pO(M,le,L);return D.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return cO(yield $y(D),we)})),()=>{le.Aa(),D.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return dO(yield $y(D),we)}))}}(ur(y),C,d,p)}function Wy(n,t){return function(e,i){const r=new Vr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function b8(n,t,e){return vO.apply(this,arguments)}(yield WO(e),i,r)})),r.promise}(ur(n),t)}function iP(n,t,e){const i=e.docs.get(t._key),r=new zm(n);return new Md(n,r,t._key,i,new Gm(e.hasPendingWrites,e.fromCache),t.converter)}class BW extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Hm(t)}get(t){const e=Of(t,this._firestore),i=new AW(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return ut();const s=r[0];if(s.isFoundDocument())return new tC(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new tC(this._firestore,i,e._key,null,e.converter);throw ut()})}set(t,e,i){const r=Of(t,this._firestore),s=MS(r.converter,e,i),c=IS(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=Of(t,this._firestore);let c;return c="string"==typeof(e=(0,H.m9)(e))||e instanceof xd?JO(this._dataReader,"Transaction.update",s._key,e,i,r):XO(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=Of(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=Of(t,this._firestore),i=new zm(this._firestore);return super.get(t).then(r=>new Md(this._firestore,i,e._key,r._document,new Gm(!1,!1),e.converter))}}function rP(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function e3(){if("undefined"==typeof Uint8Array)throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function t3(){if(!function e4(){return"undefined"!=typeof atob}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){Cy=ao.SDK_VERSION,(0,ao._registerComponent)(new tc.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new mi(r,new Z$(e.getProvider("auth-internal")),new Q$(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),(0,ao.registerVersion)(JB,"3.4.9",n),(0,ao.registerVersion)(JB,"3.4.9","esm2017")}();class rC{constructor(t){this._delegate=t}static fromBase64String(t){return t3(),new rC(wu.fromBase64String(t))}static fromUint8Array(t){return e3(),new rC(wu.fromUint8Array(t))}toBase64(){return t3(),this._delegate.toBase64()}toUint8Array(){return e3(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function sP(n){return function WW(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class ZW{enableIndexedDbPersistence(t,e){return function eW(n,t){RH(n=hn(n,mi));const e=ur(n),i=n._freezeSettings(),r=new UO;return kH(e,r,new fH(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function tW(n){RH(n=hn(n,mi));const t=ur(n),e=n._freezeSettings(),i=new UO;return kH(t,i,new F8(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function nW(n){if(n._initialized&&!n._terminated)throw new Ge(Te.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(e=(0,Ie.Z)(function*(i){if(!rc.vt())return Promise.resolve();const r=i+"main";yield rc.delete(r)}),function(i){return e.apply(this,arguments)})(R1(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class n3{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Id||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&ww("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function Y8(n,t,e,i={}){var r;const s=(n=hn(n,Jw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&ww("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=as.MOCK_USER;else{c=(0,H.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new Ge(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new as(p)}n._authCredentials=new W$(new eV(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function rW(n){return function H8(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const t=yield _H(n),e=yield yH(n);return t.setNetworkEnabled(!0),function(i){const r=tt(i);return r.wu.delete(0),Qw(r)}(e)}))}(ur(n=hn(n,mi)))}(this._delegate)}disableNetwork(){return function sW(n){return function j8(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const t=yield _H(n),e=yield yH(n);return t.setNetworkEnabled(!1),(i=(0,Ie.Z)(function*(r){const s=tt(r);s.wu.add(0),yield Vy(s),s.yu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(ur(n=hn(n,mi)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,CH("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iW(n){return function(t){const e=new Vr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function D8(n,t){return DO.apply(this,arguments)}(yield WO(t),e)})),e.promise}(ur(n=hn(n,mi)))}(this._delegate)}onSnapshotsInSync(t){return function LW(n,t){return function q8(n,t){const e=new bS(t);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield $y(n),r=e,tt(i).bu.add(r),void r.next();var i,r})),()=>{e.Aa(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return i=yield $y(n),r=e,void tt(i).bu.delete(r);var i,r}))}}(ur(n=hn(n,mi)),KO(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Zy(this,SH(this._delegate,t))}catch(e){throw fo(e,"collection()","Firestore.collection()")}}doc(t){try{return new hl(this,ES(this._delegate,t))}catch(e){throw fo(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new po(this,function K8(n,t){if(n=hn(n,Jw),YO("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ge(Te.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vs(n,null,(e=t,new Sd(fn.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw fo(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function VW(n,t,e){n=hn(n,mi);const i=Object.assign(Object.assign({},SW),e);return function(r){if(r.maxAttempts<1)throw new Ge(Te.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function $8(n,t,e){const i=new Vr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const r=yield(s=n,wS(s).then(c=>c.datastore));var s;new V8(n.asyncQueue,r,e,t,i).run()})),i.promise}(ur(n),r=>t(new BW(n,r)),i)}(this._delegate,e=>t(new r3(this,e)))}batch(){return ur(this._delegate),new s3(new YH(this._delegate,t=>Wy(this._delegate,t)))}loadBundle(t){return function oW(n,t){const e=ur(n=hn(n,mi)),i=new X8;return function W8(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return pH(p,y);if(p instanceof ArrayBuffer)return pH(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new L8(p,c);var p}(e,Kw(t));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function N8(n,t,e){const i=tt(n);var r;(r=(0,Ie.Z)(function*(s,c,d){try{const p=yield c.getMetadata();if(yield function(M,L){const j=tt(M),le=Ur(L.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",we=>j._s.getBundleMetadata(we,L.id)).then(we=>!!we&&we.createTime.compareTo(le)>=0)}(s.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(M=p).totalDocuments,bytesLoaded:M.totalBytes,totalDocuments:M.totalDocuments,totalBytes:M.totalBytes}),Promise.resolve(new Set);d._updateProgress(iH(p));const y=new p8(p,s.localStore,c.M);let C=yield c.ma();for(;C;){const M=yield y.Fu(C);M&&d._updateProgress(M),C=yield c.ma()}const D=yield y.complete();return yield Ad(s,D.Lu,void 0),yield function(M,L){const j=tt(M);return j.persistence.runTransaction("Save bundle","readwrite",le=>j._s.saveBundleMetadata(le,L))}(s.localStore,p),d._completeWith(D.progress),Promise.resolve(D.Bu)}catch(p){return ww("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var M}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield WO(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function aW(n,t){return function Z8(n,t){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(e,i){const r=tt(e);return r.persistence.runTransaction("Get named query","readonly",s=>r._s.getNamedQuery(s,i))}(yield $O(n),t)}))}(ur(n=hn(n,mi)),t).then(e=>e?new Vs(n,null,e.query):null)}(this._delegate,t).then(e=>e?new po(this,e):null)}}class kS extends nP{constructor(t){super(),this.firestore=t}convertBytes(t){return new rC(new wu(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return hl.forKey(e,this.firestore,null)}}class r3{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new kS(t)}get(t){const e=$m(t);return this._delegate.get(e).then(i=>new sC(this._firestore,new Md(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=$m(t);return i?(rP("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=$m(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=$m(t);return this._delegate.delete(e),this}}class s3{constructor(t){this._delegate=t}set(t,e,i){const r=$m(t);return i?(rP("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=$m(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=$m(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class qm{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new nC(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new oC(this._firestore,i),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=qm.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new qm(t,new kS(t),e),r.set(e,s)),s}}qm.INSTANCES=new WeakMap;class hl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kS(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new hl(e,new oi(e._delegate,i,new Xe(t)))}static forKey(t,e,i){return new hl(e,new oi(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Zy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Zy(this.firestore,SH(this._delegate,t))}catch(e){throw fo(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,H.m9)(t))instanceof oi&&AH(this._delegate,t)}set(t,e){e=rP("DocumentReference.set",e);try{return e?KH(this._delegate,t,e):KH(this._delegate,t)}catch(i){throw fo(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?QH(this._delegate,t):QH(this._delegate,t,e,...i)}catch(r){throw fo(r,"updateDoc()","DocumentReference.update()")}}delete(){return function NW(n){return Wy(hn(n.firestore,mi),[new Pw(n._key,lr.none())])}(this._delegate)}onSnapshot(...t){const e=o3(t),i=a3(t,r=>new sC(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return XH(this._delegate,e,i)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function MW(n){n=hn(n,oi);const t=hn(n.firestore,mi),e=ur(t),i=new zm(t);return function G8(n,t){const e=new Vr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,s,c){try{const d=yield function(p,y){const C=tt(p);return C.persistence.runTransaction("read document","readonly",D=>C.fi.Ls(D,y))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Ge(Te.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=jy(d,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield $O(n),t,e);var i})),e.promise}(e,n._key).then(r=>new Md(t,i,n._key,r,new Gm(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function kW(n){n=hn(n,oi);const t=hn(n.firestore,mi);return vH(ur(t),n._key,{source:"server"}).then(e=>iP(t,n,e))}(this._delegate):function xW(n){n=hn(n,oi);const t=hn(n.firestore,mi);return vH(ur(t),n._key).then(e=>iP(t,n,e))}(this._delegate),e.then(i=>new sC(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new hl(this.firestore,this._delegate.withConverter(t?qm.getInstance(this.firestore,t):null))}}function fo(n,t,e){return n.message=n.message.replace(t,e),n}function o3(n){for(const t of n)if("object"==typeof t&&!sP(t))return t;return{}}function a3(n,t){var e,i;let r;return r=sP(n[0])?n[0]:sP(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class sC{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new hl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return UH(this._delegate,t._delegate)}}class oC extends sC{data(t){const e=this._delegate.data(t);return function q$(n,t){n||ut()}(void 0!==e),e}}class po{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new kS(t)}where(t,e,i){try{return new po(this.firestore,Rf(this._delegate,function yW(n,t,e){const i=t,r=xS("where",n);return new _W(r,i,e)}(t,e,i)))}catch(r){throw fo(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new po(this.firestore,Rf(this._delegate,function bW(n,t="asc"){const e=t,i=xS("orderBy",n);return new vW(i,e)}(t,e)))}catch(i){throw fo(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new po(this.firestore,Rf(this._delegate,function wW(n){return TH("limit",n),new jH("limit",n,"F")}(t)))}catch(e){throw fo(e,"limit()","Query.limit()")}}limitToLast(t){try{return new po(this.firestore,Rf(this._delegate,function CW(n){return TH("limitToLast",n),new jH("limitToLast",n,"L")}(t)))}catch(e){throw fo(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new po(this.firestore,Rf(this._delegate,function EW(...n){return new GH("startAt",n,!0)}(...t)))}catch(e){throw fo(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new po(this.firestore,Rf(this._delegate,function DW(...n){return new GH("startAfter",n,!1)}(...t)))}catch(e){throw fo(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new po(this.firestore,Rf(this._delegate,function TW(...n){return new zH("endBefore",n,!1)}(...t)))}catch(e){throw fo(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new po(this.firestore,Rf(this._delegate,function IW(...n){return new zH("endAt",n,!0)}(...t)))}catch(e){throw fo(e,"endAt()","Query.endAt()")}}isEqual(t){return xH(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function OW(n){n=hn(n,Vs);const t=hn(n.firestore,mi),e=ur(t),i=new zm(t);return function z8(n,t){const e=new Vr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(i=(0,Ie.Z)(function*(r,s,c){try{const d=yield pS(r,s,!0),p=new oH(s,d._i),y=p.Wu(d.documents),C=p.applyChanges(y,!1);c.resolve(C.snapshot)}catch(d){const p=jy(d,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield $O(n),t,e);var i})),e.promise}(e,n._query).then(r=>new kf(t,i,n,r))}(this._delegate):"server"===(null==t?void 0:t.source)?function PW(n){n=hn(n,Vs);const t=hn(n.firestore,mi),e=ur(t),i=new zm(t);return bH(e,n._query,{source:"server"}).then(r=>new kf(t,i,n,r))}(this._delegate):function RW(n){n=hn(n,Vs);const t=hn(n.firestore,mi),e=ur(t),i=new zm(t);return HH(n._query),bH(e,n._query).then(r=>new kf(t,i,n,r))}(this._delegate),e.then(i=>new oP(this.firestore,new kf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=o3(t),i=a3(t,r=>new oP(this.firestore,new kf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return XH(this._delegate,e,i)}withConverter(t){return new po(this.firestore,this._delegate.withConverter(t?qm.getInstance(this.firestore,t):null))}}class KW{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new oC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class oP{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new oC(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new KW(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new oC(this._firestore,i))})}isEqual(t){return UH(this._delegate,t._delegate)}}class Zy extends po{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new hl(this.firestore,t):null}doc(t){try{return new hl(this.firestore,void 0===t?ES(this._delegate):ES(this._delegate,t))}catch(e){throw fo(e,"doc()","CollectionReference.doc()")}}add(t){return function FW(n,t){const e=hn(n.firestore,mi),i=ES(n),r=MS(n.converter,t);return Wy(e,[IS(Hm(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,lr.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new hl(this.firestore,e))}isEqual(t){return AH(this._delegate,t._delegate)}withConverter(t){return new Zy(this.firestore,this._delegate.withConverter(t?qm.getInstance(this.firestore,t):null))}}function $m(n){return hn(n,oi)}class aP{constructor(...t){this._delegate=new xd(...t)}static documentId(){return new aP(Er.keyField().canonicalString())}isEqual(t){return(t=(0,H.m9)(t))instanceof xd&&this._delegate._internalPath.isEqual(t._internalPath)}}class Wm{constructor(t){this._delegate=t}static serverTimestamp(){const t=function HW(){return new QO("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new Wm(t)}static delete(){const t=function UW(){return new eC("deleteField")}();return t._methodName="FieldValue.delete",new Wm(t)}static arrayUnion(...t){const e=function jW(...n){return new dW("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new Wm(e)}static arrayRemove(...t){const e=function GW(...n){return new hW("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new Wm(e)}static increment(t){const e=function zW(n){return new fW("increment",n)}(t);return e._methodName="FieldValue.increment",new Wm(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const QW={Firestore:n3,GeoPoint:DS,Timestamp:Wi,Blob:rC,Transaction:r3,WriteBatch:s3,DocumentReference:hl,DocumentSnapshot:sC,Query:po,QueryDocumentSnapshot:oC,QuerySnapshot:oP,CollectionReference:Zy,FieldPath:aP,FieldValue:Wm,setLogLevel:function YW(n){!function z$(n){bf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function JW(n){(function XW(n,t){n.INTERNAL.registerComponent(new tc.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},QW)))})(n,(t,e)=>new n3(t,e,new ZW)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(uR.Z);var RS=O(5363),eZ=O(6063);class tZ extends ht.x{constructor(t=1/0,e=1/0,i=eZ.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}var lP=O(3099);function l3(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=null!=n?n:1/0,(0,lP.B)({connector:()=>new tZ(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function c3(n,t){return(0,vr.m)(t)?ii(()=>n,t):ii(()=>n)}var cP=O(9468);O(5867);const d3=new Map,oZ={activated:!1,tokenObservers:[]},aZ={initialized:!1,enabled:!1};function Gr(n){return d3.get(n)||oZ}function sc(n,t){d3.set(n,t)}function PS(){return aZ}class hZ{constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ie.Z)(function*(){e.stop();try{e.pending=new H.BH,yield function fZ(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new H.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const mo=new H.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function f3(n){if(!Gr(n).activated)throw mo.create("use-before-activation",{appName:n.name})}function fP(n,t){return pP.apply(this,arguments)}function pP(){return pP=(0,Ie.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const D=yield r.getHeartbeatsHeader();D&&(i["X-Firebase-Client"]=D)}const s={method:"POST",body:JSON.stringify(t),headers:i};let c,d;try{c=yield fetch(n,s)}catch(D){throw mo.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==c.status)throw mo.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(D){throw mo.create("fetch-parse-error",{originalErrorMessage:D.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw mo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(p[1]),C=Date.now();return{token:d.token,expireTimeMillis:C+y,issuedAtTimeMillis:C}}),pP.apply(this,arguments)}function yZ(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const aC="firebase-app-check-store";let LS=null;function m3(){return LS||(LS=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(mo.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(aC,{keyPath:"compositeKey"})}}catch(e){t(mo.create("storage-open",{originalErrorMessage:e.message}))}}),LS)}function mP(){return mP=(0,Ie.Z)(function*(n,t){const i=(yield m3()).transaction(aC,"readwrite"),s=i.objectStore(aC).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var y;d(mo.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),mP.apply(this,arguments)}const lC=new nc.Yd("@firebase/app-check");function v3(n,t){return(0,H.hl)()?function CZ(n,t){return function g3(n,t){return mP.apply(this,arguments)}(function y3(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{lC.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function b3(){return PS().enabled}function w3(){return vP.apply(this,arguments)}function vP(){return vP=(0,Ie.Z)(function*(){const n=PS();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),vP.apply(this,arguments)}const AZ={error:"UNKNOWN_ERROR"};function xZ(n){return H.US.encodeString(JSON.stringify(n),!1)}function BS(n){return bP.apply(this,arguments)}function bP(){return bP=(0,Ie.Z)(function*(n,t=!1){const e=n.app;f3(e);const i=Gr(e);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&VS(p)&&(r=p)}if(!t&&r&&VS(r))return{token:r.token};let d,c=!1;if(b3()){i.exchangeTokenPromise||(i.exchangeTokenPromise=fP(yZ(e,yield w3()),n.heartbeatServiceProvider).then(y=>(i.exchangeTokenPromise=void 0,y)),c=!0);const p=yield i.exchangeTokenPromise;return yield v3(e,p),sc(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),c=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?lC.warn(p.message):lC.error(p),s=p}return r?(d={token:r.token},sc(e,Object.assign(Object.assign({},i),{token:r})),yield v3(e,r)):d=kZ(s),c&&E3(e,d),d}),bP.apply(this,arguments)}function CP(n,t){const e=Gr(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),sc(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function C3(n){const{app:t}=n,e=Gr(t);let i=e.tokenRefresher;i||(i=function MZ(n){const{app:t}=n;return new hZ((0,Ie.Z)(function*(){let i;if(i=Gr(t).token?yield BS(n,!0):yield BS(n),i.error)throw i.error}),()=>!0,()=>{const e=Gr(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),sc(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function E3(n,t){const e=Gr(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function VS(n){return n.expireTimeMillis-Date.now()>0}function kZ(n){return{token:xZ(AZ),error:n}}class RZ{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=Gr(this.app);for(const e of t)CP(this.app,e.next);return Promise.resolve()}}const k3="app-check-internal";!function $Z(){(0,ao._registerComponent)(new tc.wA("app-check",n=>function OZ(n,t){return new RZ(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(k3).initialize()})),(0,ao._registerComponent)(new tc.wA(k3,n=>function PZ(n){return{getToken:t=>BS(n,t),addTokenListener:t=>function wP(n,t,e,i){const{app:r}=n,s=Gr(r),c={next:e,error:i,type:t};if(sc(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&VS(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),C3(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>C3(n))}(n,"INTERNAL",t),removeTokenListener:t=>CP(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ao.registerVersion)("@firebase/app-check","0.5.8")}();class cC{constructor(){return(0,Tn.vb)("app-check")}}"undefined"!=typeof window&&window;var SP=O(127);const AP=new o.OlP("angularfire2.auth.use-emulator"),xP=new o.OlP("angularfire2.auth.settings"),MP=new o.OlP("angularfire2.auth.tenant-id"),kP=new o.OlP("angularfire2.auth.langugage-code"),RP=new o.OlP("angularfire2.auth.use-device-language"),OP=new o.OlP("angularfire.auth.persistence"),PP=(n,t,e,i,r,s,c,d)=>(0,Cr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[y,C]of Object.entries(c))p.settings[y]=C;return d&&p.setPersistence(d),p},[e,i,r,s,c,d]);let HS=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C,D,M,L){const j=new ht.x,le=ot(void 0).pipe((0,RS.Q)(c.outsideAngular),ii(()=>s.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,7092)))),(0,Ce.U)(()=>(0,Cr.on)(e,s,i)),(0,Ce.U)(we=>PP(we,s,d,y,C,D,p,M)),l3({bufferSize:1,refCount:!1}));if(Pa(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ot(null);else{le.pipe(au()).subscribe();const Qe=le.pipe(ii(We=>We.getRedirectResult().then(kt=>kt,()=>null)),Tn.iC,l3({bufferSize:1,refCount:!1})),Je=le.pipe(ii(We=>new v.y(kt=>({unsubscribe:s.runOutsideAngular(()=>We.onAuthStateChanged(Pt=>kt.next(Pt),Pt=>kt.error(Pt),()=>kt.complete()))})))),Ze=le.pipe(ii(We=>new v.y(kt=>({unsubscribe:s.runOutsideAngular(()=>We.onIdTokenChanged(Pt=>kt.next(Pt),Pt=>kt.error(Pt),()=>kt.complete()))}))));this.authState=Qe.pipe(c3(Je),(0,cP.R)(c.outsideAngular),(0,RS.Q)(c.insideAngular)),this.user=Qe.pipe(c3(Ze),(0,cP.R)(c.outsideAngular),(0,RS.Q)(c.insideAngular)),this.idToken=this.user.pipe(ii(We=>We?(0,gn.D)(We.getIdToken()):ot(null))),this.idTokenResult=this.user.pipe(ii(We=>We?(0,gn.D)(We.getIdTokenResult()):ot(null))),this.credential=(0,Lr.T)(Qe,j,this.authState.pipe(_n(We=>!We))).pipe((0,Ce.U)(We=>(null==We?void 0:We.user)?We:null),(0,cP.R)(c.outsideAngular),(0,RS.Q)(c.insideAngular))}return(0,Cr.pX)(this,le,s,{spy:{apply:(we,Qe,Je)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&Je.then(Ze=>j.next(Ze))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Cr.Dh),o.LFG(Cr.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Tn.HU),o.LFG(AP,8),o.LFG(xP,8),o.LFG(MP,8),o.LFG(kP,8),o.LFG(RP,8),o.LFG(OP,8),o.LFG(cC,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function O3(n,t){return function XZ(n,t=Qh.z){return new v.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=i&&i()}})}(n,t)}function NP(n,t){return O3(n,t).pipe((0,Ce.U)(e=>({payload:e,type:"query"})))}function jS(n,t){return NP(n,t).pipe(Ci(void 0),cR(),(0,Ce.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(C=>C.doc.ref.isEqual(c.ref)),y=null==e?void 0:e.payload.docs.find(C=>C.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function P3(n,t,e){return jS(n,e).pipe(to((i,r)=>function eY(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function tY(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return FP(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return FP(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return FP(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),Kp(),(0,Ce.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function FP(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function N3(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class F3{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=jS(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Ce.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Ci(void 0),cR(),_n(([i,r])=>r.length>0||!i),(0,Ce.U)(([i,r])=>r),Tn.iC)}auditTrail(t){return this.stateChanges(t).pipe(to((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=N3(t);return P3(this.query,e,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return NP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),Tn.iC)}get(t){return(0,gn.D)(this.query.get(t)).pipe(Tn.iC)}add(t){return this.ref.add(t)}doc(t){return new L3(this.ref.doc(t),this.afs)}}class L3{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=U3(i,e);return new F3(r,s,this.afs)}snapshotChanges(){return function JZ(n,t){return O3(n,t).pipe(Ci(void 0),cR(),(0,Ce.U)(([e,i])=>i.exists?(null==e?void 0:e.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Ce.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,gn.D)(this.ref.get(t)).pipe(Tn.iC)}}class nY{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?jS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),_n(e=>e.length>0),Tn.iC):jS(this.query,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}auditTrail(t){return this.stateChanges(t).pipe(to((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=N3(t);return P3(this.query,e,this.afs.schedulers.outsideAngular).pipe(Tn.iC)}valueChanges(t={}){return NP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ce.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),Tn.iC)}get(t){return(0,gn.D)(this.query.get(t)).pipe(Tn.iC)}}const B3=new o.OlP("angularfire2.enableFirestorePersistence"),V3=new o.OlP("angularfire2.firestore.persistenceSettings"),iY=new o.OlP("angularfire2.firestore.settings"),rY=new o.OlP("angularfire2.firestore.use-emulator");function U3(n,t=(e=>e)){return{query:t(n),ref:n}}let LP=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C,D,M,L,j,le,we,Qe,Je){this.schedulers=p;const Ze=(0,Cr.on)(e,d,i),We=C;D&&PP(Ze,d,M,j,le,we,L,Qe),[this.firestore,this.persistenceEnabled$]=(0,Cr.cc)(`${Ze.name}.firestore`,"AngularFirestore",Ze.name,()=>{const kt=d.runOutsideAngular(()=>Ze.firestore());if(s&&kt.settings(s),We&&kt.useEmulator(...We),r&&!Pa(c)){const Pt=()=>{try{return(0,gn.D)(kt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(cn){return"undefined"!=typeof console&&console.warn(cn),ot(!1)}};return[kt,d.runOutsideAngular(Pt)]}return[kt,ot(!1)]},[s,We,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=U3(r,i),d=this.schedulers.ngZone.run(()=>s);return new F3(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new nY(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new L3(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Cr.Dh),o.LFG(Cr.xv,8),o.LFG(B3,8),o.LFG(iY,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Tn.HU),o.LFG(V3,8),o.LFG(rY,8),o.LFG(HS,8),o.LFG(AP,8),o.LFG(xP,8),o.LFG(MP,8),o.LFG(kP,8),o.LFG(RP,8),o.LFG(OP,8),o.LFG(cC,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sY=(()=>{class n{constructor(){SP.Z.registerVersion("angularfire",Tn.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:B3,useValue:!0},{provide:V3,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[LP]}),n})();const oY=["mat-button",""],aY=["*"],cY=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],uY=df(Y_(hf(class{constructor(n){this._elementRef=n}})));let dY=(()=>{class n extends uY{constructor(e,i,r){super(e),this._focusMonitor=i,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of cY)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,i){e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(i=>this._getHostElement().hasAttribute(i))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(pu),o.Y36(Ms,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,i){if(1&e&&o.Gf(ol,5),2&e){let r;o.iGM(r=o.CRH())&&(i.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,i){2&e&&(o.uIk("disabled",i.disabled||null),o.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-button-disabled",i.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[o.qOj],attrs:oY,ngContentSelectors:aY,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"span",0),o.Hsn(1),o.qZA(),o._UZ(2,"span",1)(3,"span",2)),2&e&&(o.xp6(2),o.ekj("mat-button-ripple-round",i.isRoundButton||i.isIconButton),o.Q6J("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",i.isIconButton)("matRippleTrigger",i._getHostElement()))},directives:[ol],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),H3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[mu,$t],$t]}),n})();const j3=new Set;let Yy,hY=(()=>{class n{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):pY}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function fY(n){if(!j3.has(n))try{Yy||(Yy=document.createElement("style"),Yy.setAttribute("type","text/css"),document.head.appendChild(Yy)),Yy.sheet&&(Yy.sheet.insertRule(`@media ${n} {body{ }}`,0),j3.add(n))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Pi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pY(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let G3=(()=>{class n{constructor(e,i){this._mediaMatcher=e,this._zone=i,this._queries=new Map,this._destroySubject=new ht.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return z3(nl(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=xh(z3(nl(e)).map(c=>this._registerQuery(c).observable));return s=cd(s.pipe((0,Vn.q)(1)),s.pipe(tT(1),yd(0))),s.pipe((0,Ce.U)(c=>{const d={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:y})=>{d.matches=d.matches||p,d.breakpoints[y]=p}),d}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const i=this._mediaMatcher.matchMedia(e),s={observable:new v.y(c=>{const d=p=>this._zone.run(()=>c.next(p));return i.addListener(d),()=>{i.removeListener(d)}}).pipe(Ci(i),(0,Ce.U)(({matches:c})=>({query:e,matches:c})),Pn(this._destroySubject)),mql:i};return this._queries.set(e,s),s}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(hY),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function z3(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function gY(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2)(1,"button",3),o.NdJ("click",function(){return o.CHM(e),o.oxw().action()}),o._uU(2),o.qZA()()}if(2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.data.action)}}function _Y(n,t){}const q3=new o.OlP("MatSnackBarData");class GS{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const yY=Math.pow(2,31)-1;class BP{constructor(t,e){this._overlayRef=e,this._afterDismissed=new ht.x,this._afterOpened=new ht.x,this._onAction=new ht.x,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,yY))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let vY=(()=>{class n{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(BP),o.Y36(q3))},n.\u0275cmp=o.Xpm({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"span",0),o._uU(1),o.qZA(),o.YNc(2,gY,3,1,"div",1)),2&e&&(o.xp6(1),o.Oqu(i.data.message),o.xp6(1),o.Q6J("ngIf",i.hasAction))},directives:[dY,un],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),n})();const bY={snackBarState:Rn("state",[Kt("void, hidden",_t({transform:"scale(0.8)",opacity:0})),Kt("visible",_t({transform:"scale(1)",opacity:1})),Rt("* => visible",Dn("150ms cubic-bezier(0, 0, 0.2, 1)")),Rt("* => void, * => hidden",Dn("75ms cubic-bezier(0.4, 0.0, 1, 1)",_t({opacity:0})))])};let wY=(()=>{class n extends zp{constructor(e,i,r,s,c){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=c,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new ht.x,this._onExit=new ht.x,this._onEnter=new ht.x,this._animationState="void",this.attachDomPortal=d=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(d)),this._live="assertive"!==c.politeness||c.announcementMessage?"off"===c.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:i,toState:r}=e;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,Vn.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>e.classList.add(r)):e.classList.add(i)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),null==r||r.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Pi),o.Y36(GS))},n.\u0275cmp=o.Xpm({type:n,selectors:[["snack-bar-container"]],viewQuery:function(e,i){if(1&e&&o.Gf(qp,7),2&e){let r;o.iGM(r=o.CRH())&&(i._portalOutlet=r.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,i){1&e&&o.WFA("@state.done",function(s){return i.onAnimationEnd(s)}),2&e&&o.d8E("@state",i._animationState)},features:[o.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,_Y,0,0,"ng-template",1),o.qZA(),o._UZ(2,"div")),2&e&&(o.xp6(2),o.uIk("aria-live",i._live)("role",i._role))},directives:[qp],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[bY.snackBarState]}}),n})(),$3=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[rf,$p,gr,H3,$t],$t]}),n})();const W3=new o.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function CY(){return new GS}});let EY=(()=>{class n{constructor(e,i,r,s,c,d){this._overlay=e,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=c,this._defaultConfig=d,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",r){const s=Object.assign(Object.assign({},this._defaultConfig),r);return s.data={message:e,action:i},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const s=o.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:GS,useValue:i}]}),c=new Gp(this.snackBarContainerComponent,i.viewContainerRef,s),d=e.attach(c);return d.instance.snackBarConfig=i,d.instance}_attach(e,i){const r=Object.assign(Object.assign(Object.assign({},new GS),this._defaultConfig),i),s=this._createOverlay(r),c=this._attachSnackBarContainer(s,r),d=new BP(c,s);if(e instanceof o.Rgc){const p=new tf(e,null,{$implicit:r.data,snackBarRef:d});d.instance=c.attachTemplatePortal(p)}else{const p=this._createInjector(r,d),y=new Gp(e,void 0,p),C=c.attachComponentPortal(y);d.instance=C.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Pn(s.detachments())).subscribe(p=>{s.overlayElement.classList.toggle(this.handsetCssClass,p.matches)}),r.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(d,r),this._openedSnackBarRef=d,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new Wp;i.direction=e.direction;let r=this._overlay.position().global();const s="rtl"===e.direction,c="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,d=!c&&"center"!==e.horizontalPosition;return c?r.left("0"):d?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(e,i){return o.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:BP,useValue:i},{provide:q3,useValue:e.data}]})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lo),o.LFG(W_),o.LFG(o.zs3),o.LFG(G3),o.LFG(n,12),o.LFG(W3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Z3=(()=>{class n extends EY{constructor(e,i,r,s,c,d){super(e,i,r,s,c,d),this.simpleSnackBarComponent=vY,this.snackBarContainerComponent=wY,this.handsetCssClass="mat-snack-bar-handset"}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Lo),o.LFG(W_),o.LFG(o.zs3),o.LFG(G3),o.LFG(n,12),o.LFG(W3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:$3}),n})(),oc=(()=>{class n{constructor(e,i){this.db=e,this.snackBar=i,this.headInfos=new bi({title:""}),this.load=!0}get titleInfos(){return this.headInfos.value}set titleInfos(e){this.headInfos.next(e)}getTurmas(){return this.db.collection("/turmas").get().pipe(br(e=>this.handleError(e)))}getTurma(e){return this.db.collection("/turmas").doc(e).get().pipe(br(i=>this.handleError(i)))}addTurma(e){var i=this;return(0,Ie.Z)(function*(){return i.db.collection("turmas").add(e).then(()=>{window.location.reload()}).catch(r=>i.handleError(r))})()}updateTurma(e,i){var r=this;return(0,Ie.Z)(function*(){return r.db.collection("turmas").doc(e).update(i).then(()=>{window.location.reload()}).catch(s=>r.handleError(s))})()}deleteTurma(e){var i=this;return(0,Ie.Z)(function*(){return i.db.collection("/turmas").doc(e).delete().then(()=>window.location.reload()).catch(r=>i.handleError(r))})()}readAlunos(e){return this.db.collection(`/turmas/${e}/alunos`).get().pipe(br(i=>this.handleError(i)))}readAluno(e,i){return this.db.collection("/turmas").doc(e).collection("/alunos").doc(i).get().pipe(br(r=>this.handleError(r)))}updateAluno(e,i,r){var s=this;return(0,Ie.Z)(function*(){return s.db.collection("turmas").doc(e).collection("alunos").doc(i).update(r).then(()=>{window.location.reload()}).catch(c=>s.handleError(c))})()}addAluno(e,i){var r=this;return(0,Ie.Z)(function*(){return r.db.collection(`/turmas/${i}/alunos`).add(e).then(()=>{window.location.reload()}).catch(s=>r.handleError(s))})()}removeAlunos(e,i){var r=this;return(0,Ie.Z)(function*(){return r.db.collection(`/turmas/${e}/alunos`).doc(i).delete().then(()=>{window.location.reload()}).catch(s=>r.handleError(s))})()}getPresenca(e,i){return this.db.collection("/turmas").doc(e).collection("/alunos").doc(i).collection("/presenca").get().pipe(br(r=>this.handleError(r)))}addPresenca(e,i,r){var s=this;return(0,Ie.Z)(function*(){return s.db.collection("/turmas").doc(e).collection("/alunos").doc(i).collection("/presenca").add(r).catch(c=>s.handleError(c))})()}justificarFalta(e,i,r,s){var c=this;return(0,Ie.Z)(function*(){return c.db.collection("turmas").doc(e).collection("alunos").doc(i).collection("presenca").doc(r).set(s).then(()=>window.location.reload()).catch(d=>c.handleError(d))})()}getUsers(){return this.db.collection("users").get().pipe(br(e=>this.handleError(e)))}getUser(e){return this.db.collection("users").doc(e).get().pipe(br(i=>this.handleError(i)))}deleteProfTurma(e,i){this.db.collection("users").doc(e).update(i).then(()=>{window.location.reload()}).catch(r=>this.handleError(r))}updateUser(e,i){var r=this;return(0,Ie.Z)(function*(){return r.db.collection("users").doc(e).update(i).then(()=>window.location.reload()).catch(s=>r.handleError(s))})()}deleteUser(e){var i=this;return(0,Ie.Z)(function*(){return i.db.collection("users").doc(e).delete().then(()=>window.location.reload()).catch(r=>i.handleError(r))})()}handleError(e){return this.openSnackbar("ocorre um error"),ou.E}openSnackbar(e){this.snackBar.open(e,"X",{duration:1500,panelClass:"snackbar",verticalPosition:"top"})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(LP),o.LFG(Z3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fl=(()=>{class n{constructor(e,i,r,s){this.dbAuth=e,this.db=i,this.snackBar=r,this.router=s,this.notAdmin=!0}canActivate(){return null!=sessionStorage.tipo}signin(e,i){const r=[];this.db.collection("users").get().subscribe(s=>{s.docs.forEach(d=>{r.push(d.data())});const c=r.filter(d=>{if(d.email==e)return d});null==c[0]||c[0].password!=i||c[0].email!=e?this.openSnackbar("Email ou senha incorretos"):c[0].email===e&&c[0].password==i?(sessionStorage.setItem("tipo",c[0].type),sessionStorage.setItem("id",c[0].id),window.location.reload()):this.openSnackbar("Ocorreu um erro")})}signup(e,i,r,s,c){const d=Math.random().toString(12).substring(1);if("admin"==c){const p={nome:e,password:r,email:i,type:c,id:d};this.db.collection("users").add(p).then(()=>window.location.reload()).catch(y=>this.openSnackbar("teste"))}else if("professor"==c){const p={nome:e,turma:s,email:i,password:r,type:c,id:d};this.db.collection("users").add(p).then(()=>window.location.reload()).catch(y=>this.openSnackbar("teste1"))}}alunoInfos(e,i){this.db.collection("turmas").get().subscribe(r=>{const s=r.docs,d=r.docs.map(p=>p.data().nome).indexOf(e);console.log(e),-1==d?(this.openSnackbar("Turma ou aluno incorreto"),this.isLogged=!1):d>=0&&(this.turma=s[d].id,this.isLogged=!0),null!=this.turma&&this.getAluno(this.turma,i)})}getAluno(e,i){this.db.collection("turmas").doc(e).collection("alunos").get().subscribe(r=>{const s=r.docs,d=r.docs.map(p=>p.data().nome).indexOf(i);-1==d?(this.openSnackbar("Turma ou aluno incorreto"),this.isLogged=!1):d>=0&&(this.aluno=s[d].id,this.isLogged=!0),null==this.aluno?this.turma=void 0:(this.router.navigate([`/turma/${e}/aluno/${this.aluno}`]),sessionStorage.setItem("tipo","user"),setTimeout(()=>{window.location.reload()},500))})}logOut(){this.dbAuth.signOut().then(()=>{sessionStorage.removeItem("tipo"),sessionStorage.removeItem("id")}).then(()=>{window.location.reload()})}openSnackbar(e){this.snackBar.open(e,"X",{duration:1500,panelClass:"snackbar",verticalPosition:"top"})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(HS),o.LFG(LP),o.LFG(Z3),o.LFG(Nr))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function VP(n){return n&&"function"==typeof n.connect}class Y3{applyChanges(t,e,i,r,s){t.forEachOperation((c,d,p)=>{let y,C;if(null==c.previousIndex){const D=i(c,d,p);y=e.createEmbeddedView(D.templateRef,D.context,D.index),C=1}else null==p?(e.remove(d),C=3):(y=e.get(d),e.move(y,p),C=2);s&&s({context:null==y?void 0:y.context,operation:C,record:c})})}detach(){}}class DY{constructor(t=!1,e,i=!0){this._multiple=t,this._emitChanges=i,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ht.x,e&&e.length&&(t?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let TY=(()=>{class n{constructor(){this._listeners=[]}notify(e,i){for(let r of this._listeners)r(e,i)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(i=>e!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uC=new o.OlP("_ViewRepeater"),SY=[[["caption"]],[["colgroup"],["col"]]],AY=["caption","colgroup, col"];function UP(n){return class extends n{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=Tt(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const Ky=new o.OlP("CDK_TABLE");let Qy=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),Xy=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),zS=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class RY{}const OY=UP(RY);let kd=(()=>{class n extends OY{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const i=this._stickyEnd;this._stickyEnd=Tt(e),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ky,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,Qy,5),o.Suo(r,Xy,5),o.Suo(r,zS,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.cell=s.first),o.iGM(s=o.CRH())&&(i.headerCell=s.first),o.iGM(s=o.CRH())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[o._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),o.qOj]}),n})();class HP{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}}let jP=(()=>{class n extends HP{constructor(e,i){super(e,i)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(kd),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[o.qOj]}),n})(),GP=(()=>{class n extends HP{constructor(e,i){var r;if(super(e,i),1===(null===(r=e._table)||void 0===r?void 0:r._elementRef.nativeElement.nodeType)){const s=e._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(kd),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[o.qOj]}),n})();class X3{constructor(){this.tasks=[],this.endTasks=[]}}const zP=new o.OlP("_COALESCED_STYLE_SCHEDULER");let J3=(()=>{class n{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new ht.x}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new X3,this._getScheduleObservable().pipe(Pn(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new X3;for(const i of e.tasks)i();for(const i of e.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,gn.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,Vn.q)(1))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),qP=(()=>{class n{constructor(e,i){this.template=e,this._differs=i}ngOnChanges(e){if(!this._columnsDiffer){const i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof dC?e.headerCell.template:this instanceof hC?e.footerCell.template:e.cell.template}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();class PY extends qP{}const NY=UP(PY);let dC=(()=>{class n extends NY{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(Ky,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[o.qOj,o.TTD]}),n})();class FY extends qP{}const LY=UP(FY);let hC=(()=>{class n extends LY{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(Ky,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[o.qOj,o.TTD]}),n})(),qS=(()=>{class n extends qP{constructor(e,i,r){super(e,i),this._table=r}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(Ky,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[o.qOj]}),n})(),Rd=(()=>{class n{constructor(e){this._viewContainer=e,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),$P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},directives:[Rd],encapsulation:2}),n})(),ZP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},directives:[Rd],encapsulation:2}),n})(),$S=(()=>{class n{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const ej=["top","bottom","left","right"];class BY{constructor(t,e,i,r,s=!0,c=!0,d){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=c,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const i=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,i,r=!0){if(!t.length||!this._isBrowser||!e.some(M=>M)&&!i.some(M=>M))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=t[0],c=s.children.length,d=this._getCellWidths(s,r),p=this._getStickyStartColumnPositions(d,e),y=this._getStickyEndColumnPositions(d,i),C=e.lastIndexOf(!0),D=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const M="rtl"===this.direction,L=M?"right":"left",j=M?"left":"right";for(const le of t)for(let we=0;we<c;we++){const Qe=le.children[we];e[we]&&this._addStickyStyle(Qe,L,p[we],we===C),i[we]&&this._addStickyStyle(Qe,j,y[we],we===D)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===C?[]:d.slice(0,C+1).map((le,we)=>e[we]?le:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===D?[]:d.slice(D).map((le,we)=>i[we+D]?le:null).reverse()}))})}stickRows(t,e,i){if(!this._isBrowser)return;const r="bottom"===i?t.slice().reverse():t,s="bottom"===i?e.slice().reverse():e,c=[],d=[],p=[];for(let C=0,D=0;C<r.length;C++){if(!s[C])continue;c[C]=D;const M=r[C];p[C]=this._isNativeHtmlTable?Array.from(M.children):[M];const L=M.getBoundingClientRect().height;D+=L,d[C]=L}const y=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var C,D;for(let M=0;M<r.length;M++){if(!s[M])continue;const L=c[M],j=M===y;for(const le of p[M])this._addStickyStyle(le,i,L,j)}"top"===i?null===(C=this._positionListener)||void 0===C||C.stickyHeaderRowsUpdated({sizes:d,offsets:c,elements:p}):null===(D=this._positionListener)||void 0===D||D.stickyFooterRowsUpdated({sizes:d,offsets:c,elements:p})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const i=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);ej.some(r=>-1===e.indexOf(r)&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,i,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${i}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let i=0;for(const r of ej)t.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=t.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(t,e){const i=[];let r=0;for(let s=0;s<t.length;s++)e[s]&&(i[s]=r,r+=t[s]);return i}_getStickyEndColumnPositions(t,e){const i=[];let r=0;for(let s=t.length;s>0;s--)e[s]&&(i[s]=r,r+=t[s]);return i}}const YP=new o.OlP("CDK_SPL");let WS=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),ZS=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),YS=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),KS=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),QS=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C,D,M,L){this._differs=e,this._changeDetectorRef=i,this._elementRef=r,this._dir=c,this._platform=p,this._viewRepeater=y,this._coalescedStyleScheduler=C,this._viewportRuler=D,this._stickyPositioningListener=M,this._ngZone=L,this._onDestroy=new ht.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new o.vpe,this.viewChange=new bi({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=Tt(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=Tt(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(Pn(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),VP(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,s,c)=>this._getEmbeddedViewArgs(r.item,c),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&o.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,Vn.q)(1),Pn(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,c)=>{this._addStickyColumnStyles([s],this._headerRowDefs[c])}),this._rowDefs.forEach(s=>{const c=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&c.push(i[d]);this._addStickyColumnStyles(c,s)}),r.forEach((s,c)=>{this._addStickyColumnStyles([s],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const c=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<c.length;d++){let p=c[d];const y=this._cachedRenderRowsMap.get(p.data);y.has(p.rowDef)?y.get(p.rowDef).push(p):y.set(p.rowDef,[p]),e.push(p)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(c=>{const d=r&&r.has(c)?r.get(c):[];if(d.length){const p=d.shift();return p.dataIndex=i,p}return{data:e,rowDef:c,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),XS(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=XS(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=XS(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=XS(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(c,d)=>c||!!d.getColumnsDiff(),i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(e){this._data=[],VP(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;VP(this.dataSource)?e=this.dataSource.connect(this):function IY(n){return!!n&&(n instanceof v.y||(0,vr.m)(n.lift)&&(0,vr.m)(n.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=ot(this.dataSource)),this._renderChangeSubscription=e.pipe(Pn(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){const r=Array.from(i.columns||[]).map(d=>this._columnDefsByName.get(d)),s=r.map(d=>d.sticky),c=r.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const i=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(e,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,e));else{let s=this._rowDefs.find(c=>c.when&&c.when(i,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,i){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:i}}_renderRow(e,i,r,s={}){const c=e.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),c}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))Rd.mostRecentCellOutlet&&Rd.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){const c=e.get(i).context;c.count=r,c.first=0===i,c.last=i===r-1,c.even=i%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[i].dataIndex,c.renderIndex=i):c.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,i=>{const r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const c of r.outlets)s.appendChild(c.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new BY(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:ot()).pipe(Pn(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(e.templateRef),c=s.rootNodes[0];1===s.rootNodes.length&&(null==c?void 0:c.nodeType)===this._document.ELEMENT_NODE&&(c.setAttribute("role","row"),c.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.sBO),o.Y36(o.SBq),o.$8M("role"),o.Y36(Zl,8),o.Y36(G),o.Y36(Pi),o.Y36(uC),o.Y36(zP),o.Y36(jp),o.Y36(YP,12),o.Y36(o.R0b,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,$S,5),o.Suo(r,kd,5),o.Suo(r,qS,5),o.Suo(r,dC,5),o.Suo(r,hC,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._noDataRow=s.first),o.iGM(s=o.CRH())&&(i._contentColumnDefs=s),o.iGM(s=o.CRH())&&(i._contentRowDefs=s),o.iGM(s=o.CRH())&&(i._contentHeaderRowDefs=s),o.iGM(s=o.CRH())&&(i._contentFooterRowDefs=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(WS,7),o.Gf(ZS,7),o.Gf(YS,7),o.Gf(KS,7)),2&e){let r;o.iGM(r=o.CRH())&&(i._rowOutlet=r.first),o.iGM(r=o.CRH())&&(i._headerRowOutlet=r.first),o.iGM(r=o.CRH())&&(i._footerRowOutlet=r.first),o.iGM(r=o.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[o._Bn([{provide:Ky,useExisting:n},{provide:uC,useClass:Y3},{provide:zP,useClass:J3},{provide:YP,useValue:null}])],ngContentSelectors:AY,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(o.F$t(SY),o.Hsn(0),o.Hsn(1,1),o.GkF(2,0)(3,1)(4,2)(5,3))},directives:[ZS,WS,KS,YS],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function XS(n,t){return n.concat(Array.from(t))}let UY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[P_]]}),n})();const HY=[[["caption"]],[["colgroup"],["col"]]],jY=["caption","colgroup, col"];let fC=(()=>{class n extends QS{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[o._Bn([{provide:uC,useClass:Y3},{provide:QS,useExisting:n},{provide:Ky,useExisting:n},{provide:zP,useClass:J3},{provide:YP,useValue:null}]),o.qOj],ngContentSelectors:jY,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(o.F$t(HY),o.Hsn(0),o.Hsn(1,1),o.GkF(2,0)(3,1)(4,2)(5,3))},directives:[ZS,WS,KS,YS],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),Jy=(()=>{class n extends Qy{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matCellDef",""]],features:[o._Bn([{provide:Qy,useExisting:n}]),o.qOj]}),n})(),ev=(()=>{class n extends Xy{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[o._Bn([{provide:Xy,useExisting:n}]),o.qOj]}),n})(),tv=(()=>{class n extends kd{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[o._Bn([{provide:kd,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),o.qOj]}),n})(),nv=(()=>{class n extends jP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[o.qOj]}),n})(),iv=(()=>{class n extends GP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[o.qOj]}),n})(),pC=(()=>{class n extends dC{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[o._Bn([{provide:dC,useExisting:n}]),o.qOj]}),n})(),mC=(()=>{class n extends qS{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[o._Bn([{provide:qS,useExisting:n}]),o.qOj]}),n})(),gC=(()=>{class n extends $P{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[o._Bn([{provide:$P,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},directives:[Rd],encapsulation:2}),n})(),_C=(()=>{class n extends ZP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[o._Bn([{provide:ZP,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},directives:[Rd],encapsulation:2}),n})(),XY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[UY,$t],$t]}),n})();function KP(n){return(0,Ce.U)(()=>n)}function nj(n,t){return t?e=>cd(t.pipe((0,Vn.q)(1),function eK(){return(0,wi.e)((n,t)=>{n.subscribe((0,on.x)(t,vD.Z))})}()),e.pipe(nj(n))):(0,rr.z)((e,i)=>n(e,i).pipe((0,Vn.q)(1),KP(e)))}function QP(n,t=Qh.z){const e=M_(n,t);return nj(()=>e)}const tK=["mat-menu-item",""];function nK(n,t){1&n&&(o.O4$(),o.TgZ(0,"svg",2),o._UZ(1,"polygon",3),o.qZA())}const ij=["*"];function iK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",0),o.NdJ("keydown",function(r){return o.CHM(e),o.oxw()._handleKeydown(r)})("click",function(){return o.CHM(e),o.oxw().closed.emit("click")})("@transformMenu.start",function(r){return o.CHM(e),o.oxw()._onAnimationStart(r)})("@transformMenu.done",function(r){return o.CHM(e),o.oxw()._onAnimationDone(r)}),o.TgZ(1,"div",1),o.Hsn(2),o.qZA()()}if(2&n){const e=o.oxw();o.Q6J("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),o.uIk("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const JS={transformMenu:Rn("transformMenu",[Kt("void",_t({opacity:0,transform:"scale(0.8)"})),Rt("void => enter",Dn("120ms cubic-bezier(0, 0, 0.2, 1)",_t({opacity:1,transform:"scale(1)"}))),Rt("* => void",Dn("100ms 25ms linear",_t({opacity:0})))]),fadeInItems:Rn("fadeInItems",[Kt("showing",_t({opacity:1})),Rt("void => *",[_t({opacity:0}),Dn("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},rK=new o.OlP("MatMenuContent"),XP=new o.OlP("MAT_MENU_PANEL"),sK=hf(Y_(class{}));let Zm=(()=>{class n extends sK{constructor(e,i,r,s,c){var d;super(),this._elementRef=e,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=c,this.role="menuitem",this._hovered=new ht.x,this._focused=new ht.x,this._highlighted=!1,this._triggersSubmenu=!1,null===(d=null==s?void 0:s.addItem)||void 0===d||d.call(s,this)}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e;const i=this._elementRef.nativeElement.cloneNode(!0),r=i.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<r.length;s++)r[s].remove();return(null===(e=i.textContent)||void 0===e?void 0:e.trim())||""}_setHighlighted(e){var i;this._highlighted=e,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(G),o.Y36(pu),o.Y36(XP,8),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&e&&(o.uIk("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled.toString())("disabled",i.disabled||null),o.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",i._highlighted)("mat-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[o.qOj],attrs:tK,ngContentSelectors:ij,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,i){1&e&&(o.F$t(),o.Hsn(0),o._UZ(1,"div",0),o.YNc(2,nK,2,0,"svg",1)),2&e&&(o.xp6(1),o.Q6J("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),o.xp6(1),o.Q6J("ngIf",i._triggersSubmenu))},directives:[ol,un],encapsulation:2,changeDetection:0}),n})();const rj=new o.OlP("mat-menu-default-options",{providedIn:"root",factory:function oK(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let aK=0,yC=(()=>{class n{constructor(e,i,r,s){this._elementRef=e,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new o.n_E,this._tabSubscription=ks.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new ht.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new o.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+aK++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Tt(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Tt(e)}set panelClass(e){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new aT(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Ci(this._directDescendantItems),ii(e=>(0,Lr.T)(...e.map(i=>i._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{var i;const r=this._keyManager;if("enter"===this._panelAnimationState&&(null===(i=r.activeItem)||void 0===i?void 0:i._hasFocus())){const s=e.toArray(),c=Math.max(0,Math.min(s.length-1,r.activeItemIndex||0));s[c]&&!s[c].disabled?r.setActiveItem(c):r.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Ci(this._directDescendantItems),ii(i=>(0,Lr.T)(...i.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const i=e.keyCode,r=this._keyManager;switch(i){case 27:sl(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._ngZone.onStable.pipe((0,Vn.q)(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const i=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(c=>c.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,i=this.yPosition){var r;const s=this._classList;s["mat-menu-before"]="before"===e,s["mat-menu-after"]="after"===e,s["mat-menu-above"]="above"===i,s["mat-menu-below"]="below"===i,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Ci(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(rj),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,rK,5),o.Suo(r,Zm,5),o.Suo(r,Zm,4)),2&e){let s;o.iGM(s=o.CRH())&&(i.lazyContent=s.first),o.iGM(s=o.CRH())&&(i._allItems=s),o.iGM(s=o.CRH())&&(i.items=s)}},viewQuery:function(e,i){if(1&e&&o.Gf(o.Rgc,5),2&e){let r;o.iGM(r=o.CRH())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),eA=(()=>{class n extends yC{constructor(e,i,r,s){super(e,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(rj),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,i){2&e&&o.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[o._Bn([{provide:XP,useExisting:n}]),o.qOj],ngContentSelectors:ij,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,i){1&e&&(o.F$t(),o.YNc(0,iK,3,6,"ng-template"))},directives:[gs],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[JS.transformMenu,JS.fadeInItems]},changeDetection:0}),n})();const sj=new o.OlP("mat-menu-scroll-strategy"),cK={provide:sj,deps:[Lo],useFactory:function lK(n){return()=>n.scrollStrategies.reposition()}},aj=Xh({passive:!0});let uK=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C){this._overlay=e,this._element=i,this._viewContainerRef=r,this._menuItemInstance=d,this._dir=p,this._focusMonitor=y,this._ngZone=C,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=ks.w0.EMPTY,this._hoverSubscription=ks.w0.EMPTY,this._menuCloseSubscription=ks.w0.EMPTY,this._handleTouchStart=D=>{r0(D)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new o.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new o.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=c instanceof yC?c:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,aj),d&&(d._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,aj),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),i=e.getConfig(),r=i.positionStrategy;this._setPosition(r),i.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof yC&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Pn(this.menu.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(e,i){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,i):this._element.nativeElement.focus(i)}updatePosition(){var e;null===(e=this._overlayRef)||void 0===e||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof yC?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(_n(r=>"void"===r.toState),(0,Vn.q)(1),Pn(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i.lazyContent&&i.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,i=this.menu.parentMenu;for(;i;)e++,i=i.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Wp({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(i=>{const r="start"===i.connectionPair.overlayX?"after":"before",s="top"===i.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(r,s)):this.menu.setPositionClasses(r,s)})}_setPosition(e){let[i,r]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,c]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[d,p]=[s,c],[y,C]=[i,r],D=0;this.triggersSubmenu()?(C=i="before"===this.menu.xPosition?"start":"end",r=y="end"===i?"start":"end",D="bottom"===s?8:-8):this.menu.overlapTrigger||(d="top"===s?"bottom":"top",p="top"===c?"bottom":"top"),e.withPositions([{originX:i,originY:d,overlayX:y,overlayY:s,offsetY:D},{originX:r,originY:d,overlayX:C,overlayY:s,offsetY:D},{originX:i,originY:p,overlayX:y,overlayY:c,offsetY:-D},{originX:r,originY:p,overlayX:C,overlayY:c,offsetY:-D}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),i=this._overlayRef.detachments(),r=this._parentMaterialMenu?this._parentMaterialMenu.closed:ot(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(_n(c=>c!==this._menuItemInstance),_n(()=>this._menuOpen)):ot();return(0,Lr.T)(e,r,s,i)}_handleMousedown(e){vd(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const i=e.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(_n(e=>e===this._menuItemInstance&&!e.disabled),QP(0,x_)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof yC&&this.menu._isAnimating?this.menu._animationDone.pipe((0,Vn.q)(1),QP(0,x_),Pn(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new tf(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Lo),o.Y36(o.SBq),o.Y36(o.s_b),o.Y36(sj),o.Y36(XP,8),o.Y36(Zm,10),o.Y36(Zl,8),o.Y36(pu),o.Y36(o.R0b))},n.\u0275dir=o.lG2({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&e&&o.uIk("aria-expanded",i.menuOpen||null)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),tA=(()=>{class n extends uK{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[o.qOj]}),n})(),dK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[cK],imports:[[gr,$t,mu,rf],Yl,$t]}),n})();class hK{}class Pf{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Pf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Pf;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Pf?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class fK{encodeKey(t){return lj(t)}encodeValue(t){return lj(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const mK=/%(\d[a-f0-9])/gi,gK={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function lj(n){return encodeURIComponent(n).replace(mK,(t,e)=>{var i;return null!==(i=gK[e])&&void 0!==i?i:t})}function cj(n){return`${n}`}class Nf{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new fK,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function pK(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],p=e.get(c)||[];p.push(d),e.set(c,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Nf({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(cj(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(cj(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class _K{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function uj(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function dj(n){return"undefined"!=typeof Blob&&n instanceof Blob}function hj(n){return"undefined"!=typeof FormData&&n instanceof FormData}class vC{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function yK(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Pf),this.context||(this.context=new _K),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new Nf,this.urlWithParams=e}serializeBody(){return null===this.body?null:uj(this.body)||dj(this.body)||hj(this.body)||function vK(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Nf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||hj(this.body)?null:dj(this.body)?this.body.type||null:uj(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Nf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const i=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,c=void 0!==t.body?t.body:this.body,d=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,p=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let y=t.headers||this.headers,C=t.params||this.params;const D=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(y=Object.keys(t.setHeaders).reduce((M,L)=>M.set(L,t.setHeaders[L]),y)),t.setParams&&(C=Object.keys(t.setParams).reduce((M,L)=>M.set(L,t.setParams[L]),C)),new vC(i,r,c,{params:C,headers:y,context:D,reportProgress:p,responseType:s,withCredentials:d})}}var us=(()=>((us=us||{})[us.Sent=0]="Sent",us[us.UploadProgress=1]="UploadProgress",us[us.ResponseHeader=2]="ResponseHeader",us[us.DownloadProgress=3]="DownloadProgress",us[us.Response=4]="Response",us[us.User=5]="User",us))();class JP extends class bK{constructor(t,e=200,i="OK"){this.headers=t.headers||new Pf,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(t={}){super(t),this.type=us.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new JP({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function eN(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let pj=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof vC)s=e;else{let p,y;p=r.headers instanceof Pf?r.headers:new Pf(r.headers),r.params&&(y=r.params instanceof Nf?r.params:new Nf({fromObject:r.params})),s=new vC(e,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=ot(s).pipe(zl(p=>this.handler.handle(p)));if(e instanceof vC||"events"===r.observe)return c;const d=c.pipe(_n(p=>p instanceof JP));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,Ce.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,Ce.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,Ce.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,Ce.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new Nf).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,eN(r,i))}post(e,i,r={}){return this.request("POST",e,eN(r,i))}put(e,i,r={}){return this.request("PUT",e,eN(r,i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(hK))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const CK=["*"];let nA;function bC(n){var t;return(null===(t=function EK(){if(void 0===nA&&(nA=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(nA=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return nA}())||void 0===t?void 0:t.createHTML(n))||n}function mj(n){return Error(`Unable to find icon with the name "${n}"`)}function gj(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function _j(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ym{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let iA=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new Ym(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const c=this._sanitizer.sanitize(o.q3G.HTML,r);if(!c)throw _j(r);const d=bC(c);return this._addSvgIconConfig(e,i,new Ym("",d,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new Ym(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(o.q3G.HTML,i);if(!s)throw _j(i);const c=bC(s);return this._addSvgIconSetConfig(e,new Ym("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,e);if(!i)throw gj(e);const r=this._cachedIconsByUrl.get(i);return r?ot(rA(r)):this._loadSvgIconFromConfig(new Ym(e,null)).pipe((0,Ei.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,Ce.U)(s=>rA(s)))}getNamedSvgIcon(e,i=""){const r=yj(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):Xa(mj(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ot(rA(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,Ce.U)(i=>rA(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?ot(r):NT(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(br(d=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(o.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(y)),ot(null)})))).pipe((0,Ce.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw mj(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,e,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,Ei.b)(i=>e.svgText=i),(0,Ce.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ot(null):this._fetchIcon(e).pipe((0,Ei.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(bC("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(bC("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){var i;const{url:r,options:s}=e,c=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function DK(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,r);if(!d)throw gj(r);const p=this._inProgressUrlFetches.get(d);if(p)return p;const y=this._httpClient.get(d,{responseType:"text",withCredentials:c}).pipe((0,Ce.U)(C=>bC(C)),Ep(()=>this._inProgressUrlFetches.delete(d)),(0,lP.B)());return this._inProgressUrlFetches.set(d,y),y}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(yj(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return IK(s)?new Ym(s.url,null,s.options):new Ym(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(pj,8),o.LFG($u),o.LFG(G,8),o.LFG(o.qLn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function rA(n){return n.cloneNode(!0)}function yj(n,t){return n+":"+t}function IK(n){return!(!n.url||!n.options)}const SK=df(class{constructor(n){this._elementRef=n}}),AK=new o.OlP("mat-icon-location",{providedIn:"root",factory:function xK(){const n=(0,o.f3M)(G),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),vj=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],MK=vj.map(n=>`[${n}]`).join(", "),kK=/^url\(['"]?#(.*?)['"]?\)$/;let Km=(()=>{class n extends SK{constructor(e,i,r,s,c){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._currentIconFetch=ks.w0.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Tt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),i&&e.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(MK),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)vj.forEach(c=>{const d=i[s],p=d.getAttribute(c),y=p?p.match(kK):null;if(y){let C=r.get(d);C||(C=[],r.set(d,C)),C.push({name:c,value:y[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,Vn.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(iA),o.$8M("aria-hidden"),o.Y36(AK),o.Y36(o.qLn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),o.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[o.qOj],ngContentSelectors:CK,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),RK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[$t],$t]}),n})();function OK(n,t){1&n&&(o.TgZ(0,"th",15),o._uU(1,"Dia"),o.qZA())}function PK(n,t){if(1&n&&(o.TgZ(0,"td",16),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e.date)}}function NK(n,t){1&n&&(o.TgZ(0,"th",17),o._uU(1,"Materia"),o.qZA())}function FK(n,t){if(1&n&&(o.TgZ(0,"td",16)(1,"p",18),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij(" ",e.materia," ")}}function LK(n,t){1&n&&(o.TgZ(0,"th",19),o._uU(1,"Professor"),o.qZA())}function BK(n,t){if(1&n&&(o.TgZ(0,"td",20)(1,"p",21),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij(" ",e.professor," ")}}function VK(n,t){1&n&&(o.TgZ(0,"th",15),o._uU(1,"Horario"),o.qZA())}function UK(n,t){if(1&n&&(o.TgZ(0,"td",22),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e.horario)}}function HK(n,t){1&n&&(o.TgZ(0,"th",15),o._uU(1,"Status"),o.qZA())}function jK(n,t){if(1&n&&(o.TgZ(0,"td",16)(1,"p",23),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij(" ",e.status," ")}}function GK(n,t){1&n&&(o.TgZ(0,"th",27),o._uU(1,"Jusificar"),o.qZA())}function zK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",32),o.NdJ("click",function(){return o.CHM(e),o.oxw(3).openJustificarFaltas()}),o._uU(1,"Justificar Falta"),o.qZA()}}function qK(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",28)(1,"div",29)(2,"button",30),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw(2).findId(s)}),o.TgZ(3,"mat-icon"),o._uU(4,"more_horizontal"),o.qZA(),o.TgZ(5,"mat-menu",null,31)(7,"button",32),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).openEditarFalta()}),o._uU(8,"Editar"),o.qZA(),o.TgZ(9,"button",32),o.NdJ("click",function(){return o.CHM(e),o.oxw(2).deleteFalta()}),o._uU(10,"Excluir"),o.qZA(),o.YNc(11,zK,2,0,"button",33),o.qZA()()()()}if(2&n){const e=t.$implicit,i=o.MAs(6);o.xp6(2),o.Q6J("matMenuTriggerFor",i),o.xp6(9),o.Q6J("ngIf","N\xe3o justificada"==e.status)}}function $K(n,t){1&n&&(o.ynx(0,24),o.YNc(1,GK,2,0,"th",25),o.YNc(2,qK,12,2,"td",26),o.BQk())}function WK(n,t){1&n&&o._UZ(0,"tr",34)}function ZK(n,t){1&n&&o._UZ(0,"tr",35)}let YK=(()=>{class n{constructor(e,i,r,s){this.dialog=e,this.db=i,this.dbAuth=r,this.route=s,this.alunoInfos=[],this.falta=[],this.displayedColumns=[]}ngOnInit(){this.route.params.subscribe(e=>{this.pathIds=e,this.getAluno(e),this.faltas(e),this.getTurmaName(e.turmaId)}),this.columns()}columns(){1==this.dbAuth.user?(this.normal=this.dbAuth.user,this.displayedColumns=["dia","materia","horario","professor","status"]):this.displayedColumns=["dia","materia","horario","professor","status","acoes"]}getTurmaName(e){this.db.getTurma(e).subscribe(i=>{this.db.titleInfos={title:i.data().nome}})}getAluno(e){this.db.readAluno(e.turmaId,e.alunoId).subscribe(i=>{this.alunoInfos=[i.data()]})}faltas(e){const i=[];this.db.getPresenca(e.turmaId,e.alunoId).subscribe(r=>{r.docs.forEach(s=>{i.push(s.data())}),this.falta=i.filter(s=>{if("F"===s.presenca)return s}),this.falta=this.falta.sort((s,c)=>s.date<c.date?-1:s.date>c.date?1:0)})}findId(e){this.selectedFalta=e,this.db.getPresenca(this.pathIds.turmaId,this.pathIds.alunoId).subscribe(i=>{const r=i.docs,s=i.docs.map(c=>c.data().id);try{const c=s.indexOf(e.id);this.id=r[c].id}catch(c){this.db.handleError(c)}})}openJustificarFaltas(){setTimeout(()=>{this.dialog.open(Pq,{width:"500px",data:this.selectedFalta}).afterClosed().subscribe(i=>{if(null!=i){const r=Object.assign(Object.assign({},this.selectedFalta),{justificativa:i});r.status="Justificado",this.db.justificarFalta(this.pathIds.turmaId,this.pathIds.alunoId,this.id,r)}})},500)}openEditarFalta(){setTimeout(()=>{this.dialog.open(Fq,{width:"500px",data:this.selectedFalta}).afterClosed().subscribe(i=>{if(null!=i){const r=Object.assign({},this.selectedFalta);r.horario=i.horario,r.materia=i.materia,r.professor=i.professor,null!=i.justificativa&&(r.justificativa=i.justificativa),this.db.justificarFalta(this.pathIds.turmaId,this.pathIds.alunoId,this.id,r)}})},500)}deleteFalta(){this.dialog.open(ty,{width:"500px",data:"Ao clicar em deletar essa falta ser\xe1 convertida em presen\xe7a"}).afterClosed().subscribe(i=>{1==i&&(this.selectedFalta.presenca="P",delete this.selectedFalta.status,delete this.selectedFalta.justificativa,this.db.justificarFalta(this.pathIds.turmaId,this.pathIds.alunoId,this.id,this.selectedFalta))})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ba),o.Y36(oc),o.Y36(fl),o.Y36(pa))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-aluno"]],decls:23,vars:5,consts:[["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","dia"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","materia"],["mat-header-cell","","class","padding",4,"matHeaderCellDef"],["matColumnDef","professor"],["mat-header-cell","","class","w-25 padding",4,"matHeaderCellDef"],["mat-cell","","class","",4,"matCellDef"],["matColumnDef","horario"],["mat-cell","","class","align",4,"matCellDef"],["matColumnDef","status"],["matColumnDef","acoes",4,"ngIf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","align-middle",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"padding"],[1,"materia","mb-0"],["mat-header-cell","",1,"w-25","padding"],["mat-cell","",1,""],[1,"professor","mb-0","text-truncate"],["mat-cell","",1,"align"],[1,"justi","mb-0"],["matColumnDef","acoes"],["mat-header-cell","","class","text-center wx",4,"matHeaderCellDef"],["mat-cell","","class","ps2 wx",4,"matCellDef"],["mat-header-cell","",1,"text-center","wx"],["mat-cell","",1,"ps2","wx"],[1,"ps-2","text-center"],[1,"btn",3,"matMenuTriggerFor","click"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-header-row",""],["mat-row","",1,"align-middle"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"h1"),o._uU(2),o.qZA(),o.TgZ(3,"div")(4,"table",0),o.ynx(5,1),o.YNc(6,OK,2,0,"th",2),o.YNc(7,PK,2,1,"td",3),o.BQk(),o.ynx(8,4),o.YNc(9,NK,2,0,"th",5),o.YNc(10,FK,3,1,"td",3),o.BQk(),o.ynx(11,6),o.YNc(12,LK,2,0,"th",7),o.YNc(13,BK,3,1,"td",8),o.BQk(),o.ynx(14,9),o.YNc(15,VK,2,0,"th",2),o.YNc(16,UK,2,1,"td",10),o.BQk(),o.ynx(17,11),o.YNc(18,HK,2,0,"th",2),o.YNc(19,jK,3,1,"td",3),o.BQk(),o.YNc(20,$K,3,0,"ng-container",12),o.YNc(21,WK,1,0,"tr",13),o.YNc(22,ZK,1,0,"tr",14),o.qZA()()()),2&e&&(o.xp6(2),o.Oqu(null==i.alunoInfos[0]?null:i.alunoInfos[0].nome),o.xp6(2),o.Q6J("dataSource",i.falta),o.xp6(16),o.Q6J("ngIf",!i.normal),o.xp6(1),o.Q6J("matHeaderRowDef",i.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",i.displayedColumns))},directives:[fC,tv,ev,nv,Jy,iv,un,tA,Km,eA,Zm,pC,gC,mC,_C],styles:[".wx[_ngcontent-%COMP%]{width:100px}@media (max-width:576px){.padding[_ngcontent-%COMP%]{padding:0 15px}.materia[_ngcontent-%COMP%]{width:100px!important;margin-bottom:0;padding:0 15px}.professor[_ngcontent-%COMP%]{width:150px!important;margin-bottom:0;padding:0 15px}.justi[_ngcontent-%COMP%]{margin-bottom:0}.align[_ngcontent-%COMP%]{text-align:center}}"]}),n})();const KK=["*"],bj=new o.OlP("MatChipRemove"),wj=new o.OlP("MatChipAvatar"),Cj=new o.OlP("MatChipTrailingIcon");class QK{constructor(t){this._elementRef=t}}const XK=o0(df(hf(QK),"primary"),-1);let wC=(()=>{class n extends XK{constructor(e,i,r,s,c,d,p,y){super(e),this._ngZone=i,this._changeDetectorRef=c,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new ht.x,this._onBlur=new ht.x,this.selectionChange=new o.vpe,this.destroyed=new o.vpe,this.removed=new o.vpe,this._addHostClassName(),this._chipRippleTarget=d.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new ff(this,i,this._chipRippleTarget,r),this._chipRipple.setupTriggerEvents(e),this.rippleConfig=s||{},this._animationsDisabled="NoopAnimations"===p,this.tabIndex=null!=y&&parseInt(y)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(e){const i=Tt(e);i!==this._selected&&(this._selected=i,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(e){this._value=e}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(e){this._selectable=Tt(e)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(e){this._disabled=Tt(e)}get removable(){return this._removable}set removable(e){this._removable=Tt(e)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const e="mat-basic-chip",i=this._elementRef.nativeElement;i.hasAttribute(e)||i.tagName.toLowerCase()===e?i.classList.add(e):i.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(e=!1){return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(e){this.disabled&&e.preventDefault()}_handleKeydown(e){if(!this.disabled)switch(e.keyCode){case 46:case 8:this.remove(),e.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,Vn.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(e=!1){this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(Pi),o.Y36(ST,8),o.Y36(o.sBO),o.Y36(G),o.Y36(Ms,8),o.$8M("tabindex"))},n.\u0275dir=o.lG2({type:n,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,wj,5),o.Suo(r,Cj,5),o.Suo(r,bj,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.avatar=s.first),o.iGM(s=o.CRH())&&(i.trailingIcon=s.first),o.iGM(s=o.CRH())&&(i.removeIcon=s.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i._handleClick(s)})("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i.focus()})("blur",function(){return i._blur()}),2&e&&(o.uIk("tabindex",i.disabled?null:i.tabIndex)("disabled",i.disabled||null)("aria-disabled",i.disabled.toString())("aria-selected",i.ariaSelected),o.ekj("mat-chip-selected",i.selected)("mat-chip-with-avatar",i.avatar)("mat-chip-with-trailing-icon",i.trailingIcon||i.removeIcon)("mat-chip-disabled",i.disabled)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[o.qOj]}),n})(),tN=(()=>{class n{constructor(e,i){this._parentChip=e,"BUTTON"===i.nativeElement.nodeName&&i.nativeElement.setAttribute("type","button")}_handleClick(e){const i=this._parentChip;i.removable&&!i.disabled&&i.remove(),e.stopPropagation(),e.preventDefault()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(wC),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(e,i){1&e&&o.NdJ("click",function(s){return i._handleClick(s)})},features:[o._Bn([{provide:bj,useExisting:n}])]}),n})();const Ej=new o.OlP("mat-chips-default-options");let t7=0,nN=(()=>{class n{constructor(e,i){this._elementRef=e,this._defaultOptions=i,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new o.vpe,this.placeholder="",this.id="mat-chip-list-input-"+t7++,this._disabled=!1,this.inputElement=this._elementRef.nativeElement}set chipList(e){e&&(this._chipList=e,this._chipList.registerInput(this))}get addOnBlur(){return this._addOnBlur}set addOnBlur(e){this._addOnBlur=Tt(e)}get disabled(){return this._disabled||this._chipList&&this._chipList.disabled}set disabled(e){this._disabled=Tt(e)}get empty(){return!this.inputElement.value}ngOnChanges(){this._chipList.stateChanges.next()}ngOnDestroy(){this.chipEnd.complete()}ngAfterContentInit(){this._focusLastChipOnBackspace=this.empty}_keydown(e){if(e){if(9===e.keyCode&&!sl(e,"shiftKey")&&this._chipList._allowFocusEscape(),8===e.keyCode&&this._focusLastChipOnBackspace)return this._chipList._keyManager.setLastItemActive(),void e.preventDefault();this._focusLastChipOnBackspace=!1}this._emitChipEnd(e)}_keyup(e){!this._focusLastChipOnBackspace&&8===e.keyCode&&this.empty&&(this._focusLastChipOnBackspace=!0,e.preventDefault())}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}_focus(){this.focused=!0,this._focusLastChipOnBackspace=this.empty,this._chipList.stateChanges.next()}_emitChipEnd(e){!this.inputElement.value&&!!e&&this._chipList._keydown(e),(!e||this._isSeparatorKey(e))&&(this.chipEnd.emit({input:this.inputElement,value:this.inputElement.value,chipInput:this}),null==e||e.preventDefault())}_onInput(){this._chipList.stateChanges.next()}focus(e){this.inputElement.focus(e)}clear(){this.inputElement.value="",this._focusLastChipOnBackspace=!0}_isSeparatorKey(e){return!sl(e)&&new Set(this.separatorKeyCodes).has(e.keyCode)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Ej))},n.\u0275dir=o.lG2({type:n,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(e,i){1&e&&o.NdJ("keydown",function(s){return i._keydown(s)})("keyup",function(s){return i._keyup(s)})("blur",function(){return i._blur()})("focus",function(){return i._focus()})("input",function(){return i._onInput()}),2&e&&(o.Ikx("id",i.id),o.uIk("disabled",i.disabled||null)("placeholder",i.placeholder||null)("aria-invalid",i._chipList&&i._chipList.ngControl?i._chipList.ngControl.invalid:null)("aria-required",i._chipList&&i._chipList.required||null))},inputs:{chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[o.TTD]}),n})();const n7=DT(class{constructor(n,t,e,i){this._defaultErrorStateMatcher=n,this._parentForm=t,this._parentFormGroup=e,this.ngControl=i}});let r7=0;class s7{constructor(t,e){this.source=t,this.value=e}}let iN=(()=>{class n extends n7{constructor(e,i,r,s,c,d,p){super(d,s,c,p),this._elementRef=e,this._changeDetectorRef=i,this._dir=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new ht.x,this._uid="mat-chip-list-"+r7++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(y,C)=>y===C,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new o.vpe,this.valueChange=new o.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var e,i;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(i=this._selectionModel)||void 0===i?void 0:i.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(e){this._multiple=Tt(e),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this.writeValue(e),this._value=e}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){var e,i,r,s;return null!==(s=null!==(e=this._required)&&void 0!==e?e:null===(r=null===(i=this.ngControl)||void 0===i?void 0:i.control)||void 0===r?void 0:r.hasValidator(qn.required))&&void 0!==s&&s}set required(e){this._required=Tt(e),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Tt(e),this._syncChipsState()}get selectable(){return this._selectable}set selectable(e){this._selectable=Tt(e),this.chips&&this.chips.forEach(i=>i.chipListSelectable=this._selectable)}set tabIndex(e){this._userTabIndex=e,this._tabIndex=e}get chipSelectionChanges(){return(0,Lr.T)(...this.chips.map(e=>e.selectionChange))}get chipFocusChanges(){return(0,Lr.T)(...this.chips.map(e=>e._onFocus))}get chipBlurChanges(){return(0,Lr.T)(...this.chips.map(e=>e._onBlur))}get chipRemoveChanges(){return(0,Lr.T)(...this.chips.map(e=>e.destroyed))}ngAfterContentInit(){this._keyManager=new aT(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Pn(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.tabOut.pipe(Pn(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(Ci(null),Pn(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new DY(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}writeValue(e){this.chips&&this._setSelectionByValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}onContainerClick(e){this._originatesFromChip(e)||this.focus()}focus(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}_focusInput(e){this._chipInput&&this._chipInput.focus(e)}_keydown(e){const i=e.target;i&&i.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(e){return e>=0&&e<this.chips.length}_setSelectionByValue(e,i=!0){if(this._clearSelection(),this.chips.forEach(r=>r.deselect()),Array.isArray(e))e.forEach(r=>this._selectValue(r,i)),this._sortValues();else{const r=this._selectValue(e,i);r&&i&&this._keyManager.setActiveItem(r)}}_selectValue(e,i=!0){const r=this.chips.find(s=>null!=s.value&&this._compareWith(s.value,e));return r&&(i?r.selectViaInteraction():r.select(),this._selectionModel.select(r)),r}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(e){this._selectionModel.clear(),this.chips.forEach(i=>{i!==e&&i.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(e=>{e.selected&&this._selectionModel.select(e)}),this.stateChanges.next())}_propagateChanges(e){let i=null;i=Array.isArray(this.selected)?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=i,this.change.emit(new s7(this,i)),this.valueChange.emit(i),this._onChange(i),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(e=>{e.source.selected?this._selectionModel.select(e.source):this._selectionModel.deselect(e.source),this.multiple||this.chips.forEach(i=>{!this._selectionModel.isSelected(i)&&i.selected&&i.deselect()}),e.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(e=>{let i=this.chips.toArray().indexOf(e.chip);this._isValidIndex(i)&&this._keyManager.updateActiveItem(i),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(e=>{const i=e.chip,r=this.chips.toArray().indexOf(e.chip);this._isValidIndex(r)&&i._hasFocus&&(this._lastDestroyedChipIndex=r)})}_originatesFromChip(e){let i=e.target;for(;i&&i!==this._elementRef.nativeElement;){if(i.classList.contains("mat-chip"))return!0;i=i.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(e=>e._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(e=>{e._chipListDisabled=this._disabled,e._chipListMultiple=this.multiple})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(Zl,8),o.Y36(mm,8),o.Y36(Fs,8),o.Y36(Q_),o.Y36(ro,10))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-chip-list"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,wC,5),2&e){let s;o.iGM(s=o.CRH())&&(i.chips=s)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(e,i){1&e&&o.NdJ("focus",function(){return i.focus()})("blur",function(){return i._blur()})("keydown",function(s){return i._keydown(s)}),2&e&&(o.Ikx("id",i._uid),o.uIk("tabindex",i.disabled?null:i._tabIndex)("aria-describedby",i._ariaDescribedby||null)("aria-required",i.role?i.required:null)("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-multiselectable",i.multiple)("role",i.role)("aria-orientation",i.ariaOrientation),o.ekj("mat-chip-list-disabled",i.disabled)("mat-chip-list-invalid",i.errorState)("mat-chip-list-required",i.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[o._Bn([{provide:vI,useExisting:n}]),o.qOj],ngContentSelectors:KK,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0),o.Hsn(1),o.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),n})(),o7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Q_,{provide:Ej,useValue:{separatorKeyCodes:[13]}}],imports:[[$t]]}),n})();const a7=["panel"];function l7(n,t){if(1&n&&(o.TgZ(0,"div",0,1),o.Hsn(2),o.qZA()),2&n){const e=t.id,i=o.oxw();o.Q6J("id",i.id)("ngClass",i._classList),o.uIk("aria-label",i.ariaLabel||null)("aria-labelledby",i._getPanelAriaLabelledby(e))}}const c7=["*"];let u7=0;class d7{constructor(t,e){this.source=t,this.option=e}}const h7=hf(class{}),Dj=new o.OlP("mat-autocomplete-default-options",{providedIn:"root",factory:function f7(){return{autoActiveFirstOption:!1}}});let p7=(()=>{class n extends h7{constructor(e,i,r,s){super(),this._changeDetectorRef=e,this._elementRef=i,this._activeOptionChanges=ks.w0.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new o.vpe,this.opened=new o.vpe,this.closed=new o.vpe,this.optionActivated=new o.vpe,this._classList={},this.id="mat-autocomplete-"+u7++,this.inertGroups=(null==s?void 0:s.SAFARI)||!1,this._autoActiveFirstOption=!!r.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=Tt(e)}set classList(e){this._classList=e&&e.length?function Tb(n,t=/\s+/){const e=[];if(null!=n){const i=Array.isArray(n)?n:`${n}`.split(t);for(const r of i){const s=`${r}`.trim();s&&e.push(s)}}return e}(e).reduce((i,r)=>(i[r]=!0,i),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new ok(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const i=new d7(this,e);this.optionSelected.emit(i)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(Dj),o.Y36(Pi))},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&(o.Gf(o.Rgc,7),o.Gf(a7,5)),2&e){let r;o.iGM(r=o.CRH())&&(i.template=r.first),o.iGM(r=o.CRH())&&(i.panel=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[o.qOj]}),n})(),sA=(()=>{class n extends p7{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,xT,5),o.Suo(r,pf,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.optionGroups=s),o.iGM(s=o.CRH())&&(i.options=s)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[o._Bn([{provide:l0,useExisting:n}]),o.qOj],ngContentSelectors:c7,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,i){1&e&&(o.F$t(),o.YNc(0,l7,3,4,"ng-template"))},directives:[gs],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),n})();const Tj=new o.OlP("mat-autocomplete-scroll-strategy"),g7={provide:Tj,deps:[Lo],useFactory:function m7(n){return()=>n.scrollStrategies.reposition()}},_7={provide:Os,useExisting:(0,o.Gpc)(()=>CC),multi:!0};let y7=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C,D,M){this._element=e,this._overlay=i,this._viewContainerRef=r,this._zone=s,this._changeDetectorRef=c,this._dir=p,this._formField=y,this._document=C,this._viewportRuler=D,this._defaults=M,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=ks.w0.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new ht.x,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=Mh(()=>{const L=this.autocomplete?this.autocomplete.options:null;return L?L.changes.pipe(Ci(L),ii(()=>(0,Lr.T)(...L.map(j=>j.onSelectionChange)))):this._zone.onStable.pipe((0,Vn.q)(1),ii(()=>this.optionSelections))}),this._scrollStrategy=d}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=Tt(e)}ngAfterViewInit(){const e=this._getWindow();void 0!==e&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return(0,Lr.T)(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(_n(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(_n(()=>this._overlayAttached)):ot()).pipe((0,Ce.U)(e=>e instanceof X_?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return(0,Lr.T)(Rs(this._document,"click"),Rs(this._document,"auxclick"),Rs(this._document,"touchend")).pipe(_n(e=>{const i=hu(e),r=this._formField?this._formField._elementRef.nativeElement:null,s=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&i!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(i))&&(!s||!s.contains(i))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(i)}))}writeValue(e){Promise.resolve().then(()=>this._setTriggerValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const i=e.keyCode,r=sl(e);if(27===i&&!r&&e.preventDefault(),this.activeOption&&13===i&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const s=this.autocomplete._keyManager.activeItem,c=38===i||40===i;9===i||c&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):c&&this._canOpen()&&this.openPanel(),(c||this.autocomplete._keyManager.activeItem!==s)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(e){let i=e.target,r=i.value;"number"===i.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r&&(this._previousValue=r,this._onChange(r),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){const e=this._zone.onStable.pipe((0,Vn.q)(1)),i=this.autocomplete.options.changes.pipe((0,Ei.b)(()=>this._positionStrategy.reapplyLastPosition()),QP(0));return(0,Lr.T)(e,i).pipe(ii(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&(this._overlayRef.updatePosition(),r!==this.panelOpen&&this.autocomplete.opened.emit())}),this.panelClosingActions)),(0,Vn.q)(1)).subscribe(r=>this._setValueAndClose(r))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(e){const i=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e,r=null!=i?i:"";this._formField?this._formField._control.value=r:this._element.nativeElement.value=r,this._previousValue=r}_setValueAndClose(e){const i=e&&e.source;i&&(this._clearPreviousSelectedOption(i),this._setTriggerValue(i.value),this._onChange(i.value),this.autocomplete._emitSelectEvent(i),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(i=>{i!==e&&i.selected&&i.deselect()})}_attachOverlay(){var e;let i=this._overlayRef;i?(this._positionStrategy.setOrigin(this._getConnectedElement()),i.updateSize({width:this._getPanelWidth()})):(this._portal=new tf(this.autocomplete.template,this._viewContainerRef,{id:null===(e=this._formField)||void 0===e?void 0:e.getLabelId()}),i=this._overlay.create(this._getOverlayConfig()),this._overlayRef=i,i.keydownEvents().subscribe(s=>{(27===s.keyCode&&!sl(s)||38===s.keyCode&&sl(s,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),s.stopPropagation(),s.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&i&&i.updateSize({width:this._getPanelWidth()})})),i&&!i.hasAttached()&&(i.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const r=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&r!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var e;return new Wp({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(e=this._defaults)||void 0===e?void 0:e.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const i=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,s=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let c;c="above"===this.position?s:"below"===this.position?i:[...i,...s],e.withPositions(c)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}_scrollToOption(e){const i=this.autocomplete,r=function u0(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),s=0;for(let c=0;c<n+1;c++)i[c].group&&i[c].group===r[s]&&s++;return s}return 0}(e,i.options,i.optionGroups);if(0===e&&1===r)i._setScrollTop(0);else if(i.panel){const s=i.options.toArray()[e];if(s){const c=s._getHostElement(),d=function d0(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}(c.offsetTop,c.offsetHeight,i._getScrollTop(),i.panel.nativeElement.offsetHeight);i._setScrollTop(d)}}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Lo),o.Y36(o.s_b),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(Tj),o.Y36(Zl,8),o.Y36(lR,9),o.Y36(G,8),o.Y36(jp),o.Y36(Dj,8))},n.\u0275dir=o.lG2({type:n,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[o.TTD]}),n})(),CC=(()=>{class n extends y7{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,i){1&e&&o.NdJ("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(s){return i._handleInput(s)})("keydown",function(s){return i._handleKeydown(s)})("click",function(){return i._handleClick()}),2&e&&o.uIk("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-owns",i.autocompleteDisabled||!i.panelOpen||null==i.autocomplete?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[o._Bn([_7]),o.qOj]}),n})(),v7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[g7],imports:[[rf,J_,$t,gr],Yl,J_,$t]}),n})();const b7=["input"],w7=function(n){return{enterDuration:n}},C7=["*"],E7=new o.OlP("mat-radio-default-options",{providedIn:"root",factory:function D7(){return{color:"accent"}}});let Ij=0;const T7={provide:Os,useExisting:(0,o.Gpc)(()=>EC),multi:!0};class Sj{constructor(t,e){this.source=t,this.value=e}}const Aj=new o.OlP("MatRadioGroup");let I7=(()=>{class n{constructor(e){this._changeDetector=e,this._value=null,this._name="mat-radio-group-"+Ij++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new o.vpe}get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=Tt(e),this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=Tt(e),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Sj(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),n})(),EC=(()=>{class n extends I7{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-radio-group"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,DC,5),2&e){let s;o.iGM(s=o.CRH())&&(i._radios=s)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[o._Bn([T7,{provide:Aj,useExisting:n}]),o.qOj]}),n})();class S7{constructor(t){this._elementRef=t}}const A7=hf(o0(S7));let x7=(()=>{class n extends A7{constructor(e,i,r,s,c,d,p,y){super(i),this._changeDetector=r,this._focusMonitor=s,this._radioDispatcher=c,this._providerOverride=p,this._uniqueId="mat-radio-"+ ++Ij,this.id=this._uniqueId,this.change=new o.vpe,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=e,this._noopAnimations="NoopAnimations"===d,y&&(this.tabIndex=md(y,0)),this._removeUniqueSelectionListener=c.listen((C,D)=>{C!==this.id&&D===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(e){const i=Tt(e);this._checked!==i&&(this._checked=i,i&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!i&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),i&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){this._setDisabled(Tt(e))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=Tt(e)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(e){this._color=e}get inputId(){return`${this.id||this._uniqueId}-input`}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Sj(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(e){e.stopPropagation()}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){const i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_updateTabIndex(){var e;const i=this.radioGroup;let r;if(r=i&&i.selected&&!this.disabled?i.selected===this?this.tabIndex:-1:this.tabIndex,r!==this._previousTabIndex){const s=null===(e=this._inputElement)||void 0===e?void 0:e.nativeElement;s&&(s.setAttribute("tabindex",r+""),this._previousTabIndex=r)}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&o.Gf(b7,5),2&e){let r;o.iGM(r=o.CRH())&&(i._inputElement=r.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[o.qOj]}),n})(),DC=(()=>{class n extends x7{constructor(e,i,r,s,c,d,p,y){super(e,i,r,s,c,d,p,y)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Aj,8),o.Y36(o.SBq),o.Y36(o.sBO),o.Y36(pu),o.Y36(TY),o.Y36(Ms,8),o.Y36(E7,8),o.$8M("tabindex"))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(e,i){1&e&&o.NdJ("focus",function(){return i._inputElement.nativeElement.focus()}),2&e&&(o.uIk("tabindex",null)("id",i.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),o.ekj("mat-radio-checked",i.checked)("mat-radio-disabled",i.disabled)("_mat-animation-noopable",i._noopAnimations)("mat-primary","primary"===i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[o.qOj],ngContentSelectors:C7,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(e,i){if(1&e&&(o.F$t(),o.TgZ(0,"label",0,1)(2,"span",2),o._UZ(3,"span",3)(4,"span",4),o.TgZ(5,"input",5,6),o.NdJ("change",function(s){return i._onInputInteraction(s)})("click",function(s){return i._onInputClick(s)}),o.qZA(),o.TgZ(7,"span",7),o._UZ(8,"span",8),o.qZA()(),o.TgZ(9,"span",9)(10,"span",10),o._uU(11,"\xa0"),o.qZA(),o.Hsn(12),o.qZA()()),2&e){const r=o.MAs(1);o.uIk("for",i.inputId),o.xp6(5),o.Q6J("id",i.inputId)("checked",i.checked)("disabled",i.disabled)("required",i.required),o.uIk("name",i.name)("value",i.value)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby),o.xp6(2),o.Q6J("matRippleTrigger",r)("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",o.VKq(17,w7,i._noopAnimations?0:150)),o.xp6(2),o.ekj("mat-radio-label-before","before"==i.labelPosition)}},directives:[ol],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),M7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[mu,$t],$t]}),n})();function k7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-chip",16),o.NdJ("removed",function(){const s=o.CHM(e).$implicit;return o.oxw(2).removedTurmas(s)}),o._uU(1),o.TgZ(2,"button",17)(3,"mat-icon"),o._uU(4,"cancel"),o.qZA()()()}if(2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e," ")}}function R7(n,t){if(1&n&&(o.TgZ(0,"mat-option",18),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e.nome," ")}}function O7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-form-field",9)(1,"mat-label"),o._uU(2,"Turmas"),o.qZA(),o.TgZ(3,"mat-chip-list",null,10),o.YNc(5,k7,5,1,"mat-chip",11),o.TgZ(6,"input",12),o.NdJ("matChipInputTokenEnd",function(r){return o.CHM(e),o.oxw().add(r)}),o.qZA()(),o.TgZ(7,"mat-autocomplete",13,14),o.NdJ("optionSelected",function(r){return o.CHM(e),o.oxw().selected(r)}),o.YNc(9,R7,2,2,"mat-option",15),o.qZA()()}if(2&n){const e=o.MAs(4),i=o.MAs(8),r=o.oxw();o.xp6(5),o.Q6J("ngForOf",r.addTurmas),o.xp6(1),o.Q6J("matAutocomplete",i)("matChipInputFor",e)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes),o.xp6(3),o.Q6J("ngForOf",r.autoComplete)}}let P7=(()=>{class n{constructor(e,i,r){this.ref=e,this.data=i,this.db=r,this.autoComplete=[],this.separatorKeysCodes=[13,188],this.addTurmas=[],this.input=new wn,this.filterValue=this.input.valueChanges.pipe(Ci(null),(0,Ce.U)(s=>s?this._filter(s):this.data.turma.slice()))}ngOnInit(){this.userType=this.data.type,this.createForm(),this.getTurmas()}createForm(){this.form=new Vo({nome:new wn,turma:new wn}),this.setFormValues()}setFormValues(){if(this.form.controls.nome.setValue(this.data.nome),"professor"==this.data.type)for(let e=0;e<this.data.turma.length;e++)this.addTurmas.push(this.data.turma[e])}getTurmas(){this.db.getTurmas().subscribe(e=>{e.docs.forEach(i=>{this.autoComplete.push(i.data())})})}selected(e){const i=this.form.controls.turma;this.addTurmas.push(e.option.viewValue),i.setValue(null)}add(e){const i=this.form.controls.turma,r=(e.value||"").trim();r&&this.addTurmas.push(r),e.chipInput.clear(),i.setValue(null)}removedTurmas(e){const i=this.addTurmas.indexOf(e);i>=0&&this.addTurmas.splice(i,1)}_filter(e){const i=e.toLowerCase();return this.turmas.filter(r=>{r.toLowerCase().includes(i)})}typeOfUser(e){this.userType=e.value}close(){this.ref.close()}edit(){const e=Object.assign(Object.assign({},this.form.value),{type:this.userType});e.turma=this.addTurmas,this.ref.close(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(al),o.Y36(mf),o.Y36(oc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-user-edit"]],decls:18,vars:3,consts:[[1,"d-flex","flex-column","mb-3",3,"formGroup"],[1,"text-center"],["type","text","matInput","","formControlName","nome"],["class","mt-3",4,"ngIf"],["color","primary",3,"value","change"],["value","admin",1,"me-3"],["value","professor"],[1,"btn","btn-danger","me-3",3,"click"],[1,"btn","btn-success",3,"click"],[1,"mt-3"],["chiplist",""],[3,"removed",4,"ngFor","ngForOf"],["type","text","placeholder","Adicionar turma","matInput","","formControlName","turma",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"form",0)(2,"h1",1),o._uU(3,"Editar Usu\xe1rio"),o.qZA(),o.TgZ(4,"mat-form-field")(5,"mat-label"),o._uU(6,"Nome"),o.qZA(),o._UZ(7,"input",2),o.qZA(),o.YNc(8,O7,10,5,"mat-form-field",3),o.TgZ(9,"mat-radio-group",4),o.NdJ("change",function(s){return i.typeOfUser(s)}),o.TgZ(10,"mat-radio-button",5),o._uU(11,"Admin"),o.qZA(),o.TgZ(12,"mat-radio-button",6),o._uU(13,"Professor"),o.qZA()()(),o.TgZ(14,"button",7),o.NdJ("click",function(){return i.close()}),o._uU(15,"Fechar"),o.qZA(),o.TgZ(16,"button",8),o.NdJ("click",function(){return i.edit()}),o._uU(17,"Salvar"),o.qZA()()),2&e&&(o.xp6(1),o.Q6J("formGroup",i.form),o.xp6(7),o.Q6J("ngIf","professor"==i.userType),o.xp6(1),o.Q6J("value",i.userType))},directives:[cl,Ql,Fs,Jl,Ea,ec,is,so,Ca,un,iN,Nn,wC,tN,Km,CC,nN,sA,pf,EC,DC],styles:[""]}),n})();function N7(n,t){1&n&&(o.TgZ(0,"th",15),o._uU(1," No. "),o.qZA())}function F7(n,t){if(1&n&&(o.TgZ(0,"td",16),o._uU(1),o.qZA()),2&n){const e=t.index;o.xp6(1),o.Oqu(e+1)}}function L7(n,t){1&n&&(o.TgZ(0,"th",17),o._uU(1," Nome "),o.qZA())}function B7(n,t){if(1&n&&(o.TgZ(0,"td",18)(1,"p",19),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij(" ",e.nome," ")}}function V7(n,t){1&n&&(o.TgZ(0,"th",20),o._uU(1," Email "),o.qZA())}function U7(n,t){if(1&n&&(o.TgZ(0,"td",18)(1,"p",21),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij(" ",e.email," ")}}function H7(n,t){1&n&&(o.TgZ(0,"th",17),o._uU(1," Type "),o.qZA())}function j7(n,t){if(1&n&&(o.TgZ(0,"td",18),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e.type," ")}}function G7(n,t){1&n&&(o.TgZ(0,"th",17),o._uU(1," Op\xe7\xf5es "),o.qZA())}function z7(n,t){if(1&n&&(o.TgZ(0,"td",18)(1,"div")(2,"button",22)(3,"mat-icon"),o._uU(4,"more_horizontal"),o.qZA()()()()),2&n){o.oxw();const e=o.MAs(20);o.xp6(2),o.Q6J("matMenuTriggerFor",e)}}function q7(n,t){1&n&&o._UZ(0,"tr",23)}function $7(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr",24),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw().findId(s.email)}),o.qZA()}}let W7=(()=>{class n{constructor(e,i){this.db=e,this.dialog=i,this.dataSource=[],this.displayedColumns=["position","nome","email","type","actions"],this.db.titleInfos={title:"Perfis"}}ngOnInit(){const e=[];this.db.getUsers().subscribe(i=>{i.docs.forEach(r=>{e.push(r.data()),this.dataSource=e})})}findId(e){this.db.getUsers().subscribe(i=>{const r=i.docs,s=i.docs.map(c=>c.data().email);try{const c=s.indexOf(e);this.id=r[c].id,this.user()}catch(c){this.db.handleError(c)}})}user(){this.db.getUser(this.id).subscribe(e=>{this.data=e.data()})}openUser(){setTimeout(()=>{this.dialog.open(P7,{width:"500px",data:this.data}).afterClosed().subscribe(i=>{if(void 0!==i){const r=Object.assign(Object.assign({},this.data),i);"admin"==r.type&&delete r.turma,this.db.updateUser(this.id,r)}})},300)}deleteUser(){this.dialog.open(ty,{width:"500px",data:"Voc\xea deseja remover esse usu\xe1rio ?"}).afterClosed().subscribe(i=>{null!=i&&this.db.deleteUser(this.id)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(oc),o.Y36(ba))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-gerenciador-de-perfis"]],decls:25,vars:3,consts:[["mat-table","",1,"w-100","mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","class","index",4,"matHeaderCellDef"],["mat-cell","","class","index",4,"matCellDef"],["matColumnDef","nome"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["mat-header-cell","","class","email",4,"matHeaderCellDef"],["matColumnDef","type"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-cell","",1,"index"],["mat-cell","",1,"index"],["mat-header-cell",""],["mat-cell",""],[1,"nome","text-truncate"],["mat-header-cell","",1,"email"],[1,"email","text-truncate"],[1,"btn",3,"matMenuTriggerFor"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"table",0),o.ynx(1,1),o.YNc(2,N7,2,0,"th",2),o.YNc(3,F7,2,1,"td",3),o.BQk(),o.ynx(4,4),o.YNc(5,L7,2,0,"th",5),o.YNc(6,B7,3,1,"td",6),o.BQk(),o.ynx(7,7),o.YNc(8,V7,2,0,"th",8),o.YNc(9,U7,3,1,"td",6),o.BQk(),o.ynx(10,9),o.YNc(11,H7,2,0,"th",5),o.YNc(12,j7,2,1,"td",6),o.BQk(),o.ynx(13,10),o.YNc(14,G7,2,0,"th",5),o.YNc(15,z7,5,1,"td",6),o.BQk(),o.YNc(16,q7,1,0,"tr",11),o.YNc(17,$7,1,0,"tr",12),o.qZA(),o.TgZ(18,"div")(19,"mat-menu",null,13)(21,"button",14),o.NdJ("click",function(){return i.openUser()}),o._uU(22,"Editar"),o.qZA(),o.TgZ(23,"button",14),o.NdJ("click",function(){return i.deleteUser()}),o._uU(24,"Excluir"),o.qZA()()()),2&e&&(o.Q6J("dataSource",i.dataSource),o.xp6(16),o.Q6J("matHeaderRowDef",i.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",i.displayedColumns))},directives:[fC,tv,ev,nv,Jy,iv,tA,Km,pC,gC,mC,_C,eA,Zm],styles:["@media (max-width:576px){.index[_ngcontent-%COMP%]{padding:0 20px!important}.nome[_ngcontent-%COMP%]{width:200px!important;margin-bottom:0}.email[_ngcontent-%COMP%]{padding:0 10px;width:200px!important;margin-bottom:0}}"]}),n})(),Z7=(()=>{class n{constructor(e,i){this.ref=e,this.data=i,this.name=new wn("",[qn.required])}ngOnInit(){this.name.setValue(this.data.nome)}close(){this.ref.close()}updateTurma(){this.ref.close(this.name.value)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(al),o.Y36(mf))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-update-turma"]],decls:12,vars:2,consts:[[1,"text-center"],[1,"w-100"],["type","text","matInput","",3,"formControl"],["mat-dialog-actions",""],[1,"btn","btn-danger","me-3",3,"click"],[1,"btn","btn-success",3,"disabled","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"h1",0),o._uU(2,"Editar Turma"),o.qZA(),o.TgZ(3,"mat-form-field",1)(4,"mat-label"),o._uU(5,"Nome da turma"),o.qZA(),o._UZ(6,"input",2),o.qZA(),o.TgZ(7,"div",3)(8,"button",4),o.NdJ("click",function(){return i.close()}),o._uU(9,"Fechar"),o.qZA(),o.TgZ(10,"button",5),o.NdJ("click",function(){return i.updateTurma()}),o._uU(11,"Salvar"),o.qZA()()()),2&e&&(o.xp6(6),o.Q6J("formControl",i.name),o.xp6(4),o.Q6J("disabled",i.name.invalid))},directives:[Jl,Ea,ec,is,so,my,rm],styles:[""]}),n})();const Y7=["*",[["mat-card-footer"]]],K7=["*","mat-card-footer"];let Q7=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Ms,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:K7,decls:2,vars:0,template:function(e,i){1&e&&(o.F$t(Y7),o.Hsn(0),o.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),X7=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[$t],$t]}),n})();function J7(n,t){if(1&n&&(o.TgZ(0,"button",12)(1,"mat-icon"),o._uU(2,"more_horizontal"),o.qZA()()),2&n){o.oxw(3);const e=o.MAs(4);o.Q6J("matMenuTriggerFor",e)}}function e9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",8)(1,"mat-card",9),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw(2).findId(s.nome)}),o.YNc(2,J7,3,1,"button",10),o.TgZ(3,"h1",11),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw(2).selectedTurma(s.nome)}),o._uU(4),o.qZA()()()}if(2&n){const e=t.$implicit,i=o.oxw(2);o.xp6(2),o.Q6J("ngIf",!i.notAdmin),o.xp6(2),o.Oqu(e.nome)}}function t9(n,t){if(1&n&&(o.TgZ(0,"div",6),o.YNc(1,e9,5,2,"div",7),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.turmas)}}let n9=(()=>{class n{constructor(e,i,r,s){this.db=e,this.dbAuth=i,this.router=r,this.dialog=s,this.turmas=[],this.db.titleInfos={title:"Turmas"}}ngOnInit(){this.notAdmin=this.dbAuth.notAdmin,"professor"==sessionStorage.tipo?this.getProfTurmas():"admin"==sessionStorage.tipo&&this.getTurmas()}getTurmas(){this.db.getTurmas().subscribe(e=>{e.docs.forEach(i=>{this.turmas.push(i.data()),this.turmas=this.turmas.sort((r,s)=>r.nome<s.nome?-1:r.nome>s.nome?1:0)})})}getTurma(){this.db.getTurma(this.id).subscribe(e=>{this.turma=e.data()})}getProfTurmas(){const e=[];this.db.getUsers().subscribe(i=>{i.docs.forEach(r=>{e.push(r.data())});try{const r=e.filter(c=>{if(c.id==sessionStorage.id)return c}),s=[];for(let c=0;c<r[0].turma.length;c++)s.push({nome:r[0].turma[c]});this.turmas=s,this.turmas=this.turmas.sort((c,d)=>c.nome<d.nome?-1:c.nome>d.nome?1:0)}catch(r){this.db.handleError(r)}})}selectedTurma(e){this.db.getTurmas().subscribe(i=>{const r=i.docs,s=i.docs.map(c=>c.data().nome);try{const c=s.indexOf(e);this.router.navigate([`turma/${r[c].id}`])}catch(c){this.dbAuth.openSnackbar("Turma n\xe3o encontrada")}})}findId(e){this.db.getTurmas().subscribe(i=>{const r=i.docs,s=i.docs.map(c=>c.data().nome);try{const c=s.indexOf(e);this.id=r[c].id,this.getTurma()}catch(c){this.dbAuth.openSnackbar("Turma n\xe3o encontrada")}})}removeTurma(){this.dialog.open(ty,{width:"500px",data:"Voc\xea deseja excluir essa turma ?"}).afterClosed().subscribe(i=>{1==i&&this.db.deleteTurma(this.id)})}openUpdateTurma(){setTimeout(()=>{this.dialog.open(Z7,{width:"500px",data:this.turma}).afterClosed().subscribe(i=>{null!=i&&this.db.updateTurma(this.id,i)})},500)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(oc),o.Y36(fl),o.Y36(Nr),o.Y36(ba))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-home"]],decls:9,vars:1,consts:[[1,"container","m-0"],["class","row gx-4 teste",4,"ngIf"],[1,"px-2","pt-0"],["menu","matMenu"],["mat-menu-item","",1,"border-bottom",3,"click"],["mat-menu-item","",3,"click"],[1,"row","gx-4","teste"],["class","col-3 px-2 pb-3 teste2",4,"ngFor","ngForOf"],[1,"col-3","px-2","pb-3","teste2"],[3,"click"],["class","btn float-end",3,"matMenuTriggerFor",4,"ngIf"],[1,"pb-2","mb-0",3,"click"],[1,"btn","float-end",3,"matMenuTriggerFor"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,t9,2,1,"div",1),o.qZA(),o.TgZ(2,"div")(3,"mat-menu",2,3)(5,"button",4),o.NdJ("click",function(){return i.openUpdateTurma()}),o._uU(6,"Editar Turma"),o.qZA(),o.TgZ(7,"button",5),o.NdJ("click",function(){return i.removeTurma()}),o._uU(8,"Remover Turma"),o.qZA()()()),2&e&&(o.xp6(1),o.Q6J("ngIf",i.turmas))},directives:[un,Nn,Q7,tA,Km,eA,Zm],styles:["@media (max-width:576px){.teste[_ngcontent-%COMP%]{flex-direction:column}.teste2[_ngcontent-%COMP%]{width:100%}}@media (min-width: 577px) and (max-width:991px){.teste2[_ngcontent-%COMP%]{width:100%}}"]}),n})();function i9(n,t){if(1&n&&(o.TgZ(0,"mat-option",8),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}function r9(n,t){1&n&&(o.TgZ(0,"th",29),o._uU(1,"No."),o.qZA())}function s9(n,t){if(1&n&&(o.TgZ(0,"td",30),o._uU(1),o.qZA()),2&n){const e=t.index;o.xp6(1),o.Oqu(e+1)}}function o9(n,t){1&n&&(o.TgZ(0,"th",31),o._uU(1,"Nome"),o.qZA())}function a9(n,t){if(1&n&&(o.TgZ(0,"td",32),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e.nome)}}function l9(n,t){1&n&&(o.TgZ(0,"th",33),o._uU(1,"1"),o.qZA())}function c9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",34)(1,"div",35)(2,"mat-radio-group",36),o.NdJ("change",function(){const s=o.CHM(e).$implicit;return o.oxw(2).findAlunoId(s.nome)})("change",function(r){const c=o.CHM(e).$implicit;return o.oxw(2).presenca(c.nome,r)}),o.TgZ(3,"mat-radio-button",37),o._uU(4,"P"),o.qZA(),o.TgZ(5,"mat-radio-button",38),o._uU(6,"F"),o.qZA()()()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("disabled",1!=e.horario)}}function u9(n,t){1&n&&(o.TgZ(0,"th",33),o._uU(1,"2"),o.qZA())}function d9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",34)(1,"div",35)(2,"mat-radio-group",36),o.NdJ("change",function(){const s=o.CHM(e).$implicit;return o.oxw(2).findAlunoId(s.nome)})("change",function(r){const c=o.CHM(e).$implicit;return o.oxw(2).presenca(c.nome,r)}),o.TgZ(3,"mat-radio-button",37),o._uU(4,"P"),o.qZA(),o.TgZ(5,"mat-radio-button",38),o._uU(6,"F"),o.qZA()()()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("disabled",2!=e.horario)}}function h9(n,t){1&n&&(o.TgZ(0,"th",33),o._uU(1,"3"),o.qZA())}function f9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",34)(1,"div",35)(2,"mat-radio-group",36),o.NdJ("change",function(){const s=o.CHM(e).$implicit;return o.oxw(2).findAlunoId(s.nome)})("change",function(r){const c=o.CHM(e).$implicit;return o.oxw(2).presenca(c.nome,r)}),o.TgZ(3,"mat-radio-button",37),o._uU(4,"P"),o.qZA(),o.TgZ(5,"mat-radio-button",38),o._uU(6,"F"),o.qZA()()()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("disabled",3!=e.horario)}}function p9(n,t){1&n&&(o.TgZ(0,"th",33),o._uU(1,"4"),o.qZA())}function m9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",34)(1,"div",35)(2,"mat-radio-group",36),o.NdJ("change",function(){const s=o.CHM(e).$implicit;return o.oxw(2).findAlunoId(s.nome)})("change",function(r){const c=o.CHM(e).$implicit;return o.oxw(2).presenca(c.nome,r)}),o.TgZ(3,"mat-radio-button",37),o._uU(4,"P"),o.qZA(),o.TgZ(5,"mat-radio-button",38),o._uU(6,"F"),o.qZA()()()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("disabled",4!=e.horario)}}function g9(n,t){1&n&&(o.TgZ(0,"th",33),o._uU(1,"5"),o.qZA())}function _9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",34)(1,"div",39)(2,"mat-radio-group",36),o.NdJ("change",function(){const s=o.CHM(e).$implicit;return o.oxw(2).findAlunoId(s.nome)})("change",function(r){const c=o.CHM(e).$implicit;return o.oxw(2).presenca(c.nome,r)}),o.TgZ(3,"mat-radio-button",37),o._uU(4,"P"),o.qZA(),o.TgZ(5,"mat-radio-button",38),o._uU(6,"F"),o.qZA()()()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("disabled",5!=e.horario)}}function y9(n,t){1&n&&(o.TgZ(0,"th",33),o._uU(1,"6"),o.qZA())}function v9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",34)(1,"div",40)(2,"mat-radio-group",36),o.NdJ("change",function(){const s=o.CHM(e).$implicit;return o.oxw(2).findAlunoId(s.nome)})("change",function(r){const c=o.CHM(e).$implicit;return o.oxw(2).presenca(c.nome,r)}),o.TgZ(3,"mat-radio-button",41),o._uU(4,"P"),o.qZA(),o.TgZ(5,"mat-radio-button",38),o._uU(6,"F"),o.qZA()()()()}if(2&n){const e=o.oxw(2);o.xp6(2),o.Q6J("disabled",6!=e.horario)}}function b9(n,t){1&n&&o._UZ(0,"tr",42)}function w9(n,t){1&n&&o._UZ(0,"tr",43)}function C9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",9)(1,"table",10),o.ynx(2,11),o.YNc(3,r9,2,0,"th",12),o.YNc(4,s9,2,1,"td",13),o.BQk(),o.ynx(5,14),o.YNc(6,o9,2,0,"th",15),o.YNc(7,a9,2,1,"td",16),o.BQk(),o.ynx(8,17),o.YNc(9,l9,2,0,"th",18),o.YNc(10,c9,7,1,"td",19),o.BQk(),o.ynx(11,20),o.YNc(12,u9,2,0,"th",18),o.YNc(13,d9,7,1,"td",19),o.BQk(),o.ynx(14,21),o.YNc(15,h9,2,0,"th",18),o.YNc(16,f9,7,1,"td",19),o.BQk(),o.ynx(17,22),o.YNc(18,p9,2,0,"th",18),o.YNc(19,m9,7,1,"td",19),o.BQk(),o.ynx(20,23),o.YNc(21,g9,2,0,"th",18),o.YNc(22,_9,7,1,"td",19),o.BQk(),o.ynx(23,24),o.YNc(24,y9,2,0,"th",18),o.YNc(25,v9,7,1,"td",19),o.BQk(),o.YNc(26,b9,1,0,"tr",25),o.YNc(27,w9,1,0,"tr",26),o.qZA(),o.TgZ(28,"div",0)(29,"button",27),o._uU(30,"Fechar"),o.qZA(),o.TgZ(31,"button",28),o.NdJ("click",function(){return o.CHM(e),o.oxw().addPresenca()}),o._uU(32,"Salvar"),o.qZA()()()}if(2&n){const e=o.oxw();o.xp6(1),o.Q6J("dataSource",e.alunos),o.xp6(25),o.Q6J("matHeaderRowDef",e.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",e.displayedColumns),o.xp6(2),o.MGl("routerLink","/turma/",e.pathId,""),o.xp6(2),o.MGl("routerLink","/turma/",e.pathId,""),o.Q6J("disabled",e.form.invalid)}}let E9=(()=>{class n{constructor(e,i){this.db=e,this.turmaId=i,this.id=[],this.alunos=[],this.displayedColumns=["numeroDoAluno","nomes","1","2","3","4","5","6"],this.frequencia=[],this.frequencias=[],this.input=new wn("",[qn.required]),this.materias=["Portugues","Matematica","Historia","Ingles","Geografia"],this.filterValue=this.input.valueChanges.pipe(Ci(null),(0,Ce.U)(r=>r?this._filter(r):this.materias.slice()))}ngOnInit(){this.createForm(),this.turmaId.params.subscribe(e=>{this.pathId=e.turmaId,this.getAlunos(e),this.getTurmaName(this.pathId)}),this.horarios()}createForm(){this.form=new Vo({nomeDoProfessor:new wn("",[qn.required]),materia:this.input})}getTurmaName(e){this.db.getTurma(e).subscribe(i=>{this.db.titleInfos={title:i.data().nome}})}getAlunos(e){const i=[];this.db.readAlunos(e.turmaId).subscribe(r=>{r.forEach(s=>{i.push(s.data()),this.alunos=i}),this.alunos=this.alunos.sort((s,c)=>s.nome<c.nome?-1:s.nome>c.nome?1:0)})}findAlunoId(e){this.db.readAlunos(this.pathId).subscribe(i=>{const r=i.docs,s=i.docs.map(c=>c.data().nome);try{const c=s.indexOf(e);this.id.push(r[c].id);const d=this.id.filter((p,y)=>this.id.indexOf(p)==y);this.id=d}catch(c){this.db.handleError(c)}})}presenca(e,i){const r=new Date,s=r.getDate(),c=r.getMonth()+1,d=r.getFullYear();this.db.readAlunos(this.pathId).subscribe(p=>{const M={id:p.docs[p.docs.map(j=>j.data().nome).indexOf(e)].id,date:`${s}/${c}/${d}`,horario:1,presenca:i.value,materia:this.form.value.materia,professor:this.form.value.nomeDoProfessor,status:"N\xe3o justificada"},L=this.frequencias.findIndex(j=>j.id==M.id);if(-1==L)this.frequencias.push(M);else{if(!(L>=0))return;this.frequencias[L]=M}})}addPresenca(){for(let e=0;e<this.id.length;e++)this.db.addPresenca(this.pathId,this.id[e],this.frequencias[e])}horarios(){const e=new Date,i=e.getHours(),r=e.getMinutes();11==i&&r>=0&&r<=59?this.horario=1:23==i&&r>=0&&r<59?this.horario=2:3==i&&r>=0&&r<59?this.horario=3:4==i&&r>=0&&r<10?this.horario=4:4==i&&r>=0&&r<10?this.horario=5:4==i&&r>=0&&r<10&&(this.horario=6)}_filter(e){const i=e.toLowerCase();return this.materias.filter(r=>{r.toLowerCase().includes(i)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(oc),o.Y36(pa))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-lista-de-frequencia"]],decls:14,vars:5,consts:[[1,"mt-4"],[1,"d-flex","flex-column",3,"formGroup"],[1,"w-50"],["type","text","matInput","","formControlName","nomeDoProfessor"],["type","text","placeholder","Adicionar materia","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","w-100",4,"ngIf"],[3,"value"],[1,"w-100"],["mat-table","",1,"mat-elevation-z8","teste","w-100",3,"dataSource"],["matColumnDef","numeroDoAluno"],["mat-header-cell","","class","px-2 border-end text-center",4,"matHeaderCellDef"],["mat-cell","","class","px-2 border-end text-center",4,"matCellDef"],["matColumnDef","nomes"],["mat-header-cell","","class","px-2 border-end",4,"matHeaderCellDef"],["mat-cell","","class","px-2 border-end",4,"matCellDef"],["matColumnDef","1"],["mat-header-cell","","class","border-end text-center",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","2"],["matColumnDef","3"],["matColumnDef","4"],["matColumnDef","5"],["matColumnDef","6"],["mat-header-row","","class","align-middle",4,"matHeaderRowDef"],["mat-row","","class","align-middle",4,"matRowDef","matRowDefColumns"],[1,"btn","btn-danger","me-3",3,"routerLink"],[1,"btn","btn-success",3,"disabled","routerLink","click"],["mat-header-cell","",1,"px-2","border-end","text-center"],["mat-cell","",1,"px-2","border-end","text-center"],["mat-header-cell","",1,"px-2","border-end"],["mat-cell","",1,"px-2","border-end"],["mat-header-cell","",1,"border-end","text-center"],["mat-cell",""],[1,"border-end","py-3"],["aria-label","presenca","color","primary",1,"d-flex","px-3",3,"disabled","change"],["value","P",1,"pe-3"],["value","F"],[1,"py-3"],[1,"border-start","py-3"],["value","P",1,"pe-2"],["mat-header-row","",1,"align-middle"],["mat-row","",1,"align-middle"]],template:function(e,i){if(1&e&&(o.TgZ(0,"div",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),o._uU(4,"Nome do Professor"),o.qZA(),o._UZ(5,"input",3),o.qZA(),o.TgZ(6,"mat-form-field",2)(7,"mat-label"),o._uU(8,"Materia"),o.qZA(),o._UZ(9,"input",4),o.TgZ(10,"mat-autocomplete",null,5),o.YNc(12,i9,2,2,"mat-option",6),o.qZA()()()(),o.YNc(13,C9,33,6,"div",7)),2&e){const r=o.MAs(11);o.xp6(1),o.Q6J("formGroup",i.form),o.xp6(8),o.Q6J("formControl",i.input)("matAutocomplete",r),o.xp6(3),o.Q6J("ngForOf",i.materias),o.xp6(1),o.Q6J("ngIf",!i.form.invalid)}},directives:[cl,Ql,Fs,Jl,Ea,ec,is,so,Ca,CC,my,sA,Nn,pf,un,fC,tv,ev,nv,Jy,iv,EC,DC,pC,gC,mC,_C,Hh],styles:["@media (max-width:576px){.teste[_ngcontent-%COMP%]{width:100%}}@media (min-width: 577px) and (max-width:991px){.teste[_ngcontent-%COMP%]{height:23rem}}"]}),n})();function D9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-chip",19),o.NdJ("removed",function(){const s=o.CHM(e).$implicit;return o.oxw(2).removedTurmas(s)}),o._uU(1),o.TgZ(2,"button",20)(3,"mat-icon"),o._uU(4,"cancel"),o.qZA()()()}if(2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e," ")}}function T9(n,t){if(1&n&&(o.TgZ(0,"mat-option",21),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e.nome," ")}}function I9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"mat-form-field",3)(1,"mat-label"),o._uU(2,"Turmas"),o.qZA(),o.TgZ(3,"mat-chip-list",null,12),o.YNc(5,D9,5,1,"mat-chip",13),o.TgZ(6,"input",14,15),o.NdJ("matChipInputTokenEnd",function(r){return o.CHM(e),o.oxw().add(r)}),o.qZA()(),o.TgZ(8,"mat-autocomplete",16,17),o.NdJ("optionSelected",function(r){return o.CHM(e),o.oxw().selected(r)}),o.YNc(10,T9,2,2,"mat-option",18),o.qZA()()}if(2&n){const e=o.MAs(4),i=o.MAs(9),r=o.oxw();o.xp6(5),o.Q6J("ngForOf",r.addTurmas),o.xp6(1),o.Q6J("matAutocomplete",i)("matChipInputFor",e)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes),o.xp6(4),o.Q6J("ngForOf",r.turmas)}}function S9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(){return o.CHM(e),o.oxw().onSignup()}),o._uU(1,"Salvar"),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("disabled",!("VALID"==e.formSignup.controls.nome.status&&"VALID"==e.formSignup.controls.email.status&&"VALID"==e.formSignup.controls.password.status))}}function A9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",22),o.NdJ("click",function(){return o.CHM(e),o.oxw().onSignup()}),o._uU(1,"Salvar"),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("disabled",e.formSignup.invalid)}}let x9=(()=>{class n{constructor(e,i){this.db=e,this.dbAuth=i,this.separatorKeysCodes=[13,188],this.addTurmas=[],this.turmas=[],this.userType="professor",this.input=new wn("",[qn.required]),this.db.titleInfos={title:"Cadastro"},this.filterInput=this.input.valueChanges.pipe(Ci(null),(0,Ce.U)(r=>r?this._filter(r):this.turmas.slice()))}ngOnInit(){this.getTurmas(),this.createForm()}getTurmas(){this.db.getTurmas().subscribe(e=>{e.forEach(i=>{this.turmas.push(i.data())})})}createForm(){this.formSignup=new Vo({nome:new wn("",[qn.required]),email:new wn("",[qn.required]),password:new wn("",[qn.required]),turma:new wn})}onSignup(){this.dbAuth.signup(this.formSignup.value.nome,this.formSignup.value.email,this.formSignup.value.password,this.addTurmas,this.userType)}type(e){this.userType=e.value}selected(e){const i=this.formSignup.controls.turma;this.addTurmas.push(e.option.viewValue),i.setValue(null)}add(e){const i=this.formSignup.controls.turma,r=(e.value||"").trim();r&&this.addTurmas.push(r),e.chipInput.clear(),i.setValue(null)}removedTurmas(e){const i=this.addTurmas.indexOf(e);i>=0&&this.addTurmas.splice(i,1)}_filter(e){const i=e.toLowerCase();return this.turmas.filter(r=>{r.toLowerCase().includes(i)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(oc),o.Y36(fl))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-signup"]],decls:24,vars:5,consts:[[1,"d-flex","align-items-center","justify-content-center","h-100","w-100"],[1,"border","rounded","d-flex","flex-column","p-4","shadow","teste",3,"formGroup"],[1,"text-center"],[1,"mt-3"],["formControlName","nome","type","text","matInput",""],["formControlName","email","type","text","matInput",""],["formControlName","password","type","text","matInput",""],["class","mt-3",4,"ngIf"],["aria-label","teste","color","primary",1,"mt-3",3,"value","change"],["value","admin",1,"pe-3"],["value","professor"],["class","btn btn-primary mt-4",3,"disabled","click",4,"ngIf"],["chiplist",""],[3,"removed",4,"ngFor","ngForOf"],["type","text","placeholder","Adicionar turma","matInput","","formControlName","turma",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["teste",""],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],[3,"value"],[1,"btn","btn-primary","mt-4",3,"disabled","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"form",1)(2,"h1",2),o._uU(3,"Cadastro"),o.qZA(),o.TgZ(4,"mat-form-field",3)(5,"mat-label"),o._uU(6,"Nome"),o.qZA(),o._UZ(7,"input",4),o.qZA(),o.TgZ(8,"mat-form-field",3)(9,"mat-label"),o._uU(10,"Email"),o.qZA(),o._UZ(11,"input",5),o.qZA(),o.TgZ(12,"mat-form-field",3)(13,"mat-label"),o._uU(14,"Senha"),o.qZA(),o._UZ(15,"input",6),o.qZA(),o.YNc(16,I9,11,5,"mat-form-field",7),o.TgZ(17,"mat-radio-group",8),o.NdJ("change",function(s){return i.type(s)}),o.TgZ(18,"mat-radio-button",9),o._uU(19,"Admin"),o.qZA(),o.TgZ(20,"mat-radio-button",10),o._uU(21,"Professor"),o.qZA()(),o.YNc(22,S9,2,1,"button",11),o.YNc(23,A9,2,1,"button",11),o.qZA()()),2&e&&(o.xp6(1),o.Q6J("formGroup",i.formSignup),o.xp6(15),o.Q6J("ngIf","professor"==i.userType),o.xp6(1),o.Q6J("value",i.userType),o.xp6(5),o.Q6J("ngIf","admin"==i.userType),o.xp6(1),o.Q6J("ngIf","professor"==i.userType))},directives:[cl,Ql,Fs,Jl,Ea,is,ec,so,Ca,un,iN,Nn,wC,tN,Km,CC,nN,sA,pf,EC,DC],styles:["@media (max-width: 280px){.teste[_ngcontent-%COMP%]{width:15rem}}@media (min-width: 281px) and (max-width:576px){.teste[_ngcontent-%COMP%]{width:20rem}}@media (min-width: 577px) and (max-width:1400px){.teste[_ngcontent-%COMP%]{width:30rem}}"]}),n})(),M9=(()=>{class n{constructor(e){this.ref=e}ngOnInit(){this.createForm()}createForm(){this.form=new Vo({nome:new wn("",[qn.required]),numeroDoResponsavel:new wn("",[qn.required,qn.minLength(11)])})}teste(e){return 1==e.required?"Voc\xea tem que digitar algo":e.minlength?"Voc\xea tem que digitar 11 digitos":void 0}close(){this.ref.close()}addAluno(){this.ref.close(this.form.value)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(al))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-add-aluno"]],decls:17,vars:2,consts:[[1,"text-center"],[1,"d-flex","flex-column",3,"formGroup"],["type","text","matInput","","formControlName","nome"],["type","text","matInput","","formControlName","numeroDoResponsavel","minlength","11","maxlength","11"],[1,"btn","btn-danger","me-3",3,"click"],[1,"btn","btn-success",3,"disabled","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"h1",0),o._uU(2,"Aluno"),o.qZA(),o.TgZ(3,"form",1)(4,"mat-form-field")(5,"mat-label"),o._uU(6,"Nome do Aluno"),o.qZA(),o._UZ(7,"input",2),o.qZA(),o.TgZ(8,"mat-form-field")(9,"mat-label"),o._uU(10,"N\xfamero dos responsaveis"),o.qZA(),o._UZ(11,"input",3),o.qZA()(),o.TgZ(12,"div")(13,"button",4),o.NdJ("click",function(){return i.close()}),o._uU(14,"Fechar"),o.qZA(),o.TgZ(15,"button",5),o.NdJ("click",function(){return i.addAluno()}),o._uU(16,"Adicionar"),o.qZA()()()),2&e&&(o.xp6(3),o.Q6J("formGroup",i.form),o.xp6(12),o.Q6J("disabled",i.form.invalid))},directives:[cl,Ql,Fs,Jl,Ea,ec,is,so,Ca,f,b],styles:[""]}),n})(),k9=(()=>{class n{constructor(e,i){this.ref=e,this.data=i}ngOnInit(){this.createForm()}createForm(){this.form=new Vo({nome:new wn("",[qn.required]),numeroDoResponsavel:new wn("",[qn.required])}),this.setFormValues()}setFormValues(){this.form.controls.nome.setValue(this.data.nome),this.form.controls.numeroDoResponsavel.setValue(this.data.numeroDoResponsavel)}close(){this.ref.close()}updateTurma(){this.ref.close(this.form.value)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(al),o.Y36(mf))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-update-aluno"]],decls:17,vars:2,consts:[[1,"text-center"],[3,"formGroup"],[1,"w-100"],["type","text","matInput","","formControlName","nome"],["type","text","matInput","","formControlName","numeroDoResponsavel","maxlength","11"],["mat-dialog-actions",""],[1,"btn","btn-danger","me-3",3,"click"],[1,"btn","btn-success",3,"disabled","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"h1",0),o._uU(2,"Editar Aluno"),o.qZA(),o.TgZ(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),o._uU(6,"Nome do Aluno"),o.qZA(),o._UZ(7,"input",3),o.qZA(),o.TgZ(8,"mat-form-field",2)(9,"mat-label"),o._uU(10,"N\xfamero dos responsaveis"),o.qZA(),o._UZ(11,"input",4),o.qZA()(),o.TgZ(12,"div",5)(13,"button",6),o.NdJ("click",function(){return i.close()}),o._uU(14,"Fechar"),o.qZA(),o.TgZ(15,"button",7),o.NdJ("click",function(){return i.updateTurma()}),o._uU(16,"Salvar"),o.qZA()()()),2&e&&(o.xp6(3),o.Q6J("formGroup",i.form),o.xp6(12),o.Q6J("disabled",i.form.controls.nome.invalid))},directives:[cl,Ql,Fs,Jl,Ea,ec,is,so,Ca,b,rm],styles:[""]}),n})();function R9(n,t){1&n&&(o.TgZ(0,"th",17),o._uU(1,"No."),o.qZA())}function O9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",18),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw().selectedAluno(s.nome)}),o._uU(1),o.qZA()}if(2&n){const e=t.index;o.xp6(1),o.Oqu(e+1)}}function P9(n,t){1&n&&(o.TgZ(0,"th",19),o._uU(1,"Nome"),o.qZA())}function N9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",20),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw().selectedAluno(s.nome)}),o._uU(1),o.qZA()}if(2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e.nome)}}function F9(n,t){1&n&&(o.TgZ(0,"th",21),o._uU(1,"Op\xe7\xf5es"),o.qZA())}function L9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"td",22)(1,"button",23),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw().findId(s.nome)}),o.TgZ(2,"mat-icon"),o._uU(3,"more_vert"),o.qZA()()()}if(2&n){o.oxw();const e=o.MAs(20);o.xp6(1),o.Q6J("matMenuTriggerFor",e)}}function B9(n,t){1&n&&o._UZ(0,"tr",24)}function V9(n,t){1&n&&o._UZ(0,"tr",25)}const U9=[{path:"",canActivate:[fl],component:n9},{path:"turma/:turmaId",canActivate:[fl],component:(()=>{class n{constructor(e,i,r,s,c){this.db=e,this.dbAuth=i,this.dialog=r,this.route=s,this.router=c,this.alunos=[],this.aluno=[],this.columns=["numero","nome","options"]}ngOnInit(){this.route.params.subscribe(e=>{this.pathId=e.turmaId,this.getAlunos(this.pathId),this.getTurmaName(this.pathId)})}getAlunos(e){const i=[];this.alunos=[],this.db.readAlunos(e).subscribe(r=>{r.forEach(s=>{i.push(s.data()),this.alunos=i}),this.alunos=this.alunos.sort((s,c)=>s.nome<c.nome?-1:s.nome>c.nome?1:0)})}getAluno(){this.db.readAluno(this.pathId,this.id).subscribe(e=>{this.aluno=e.data()})}getTurmaName(e){this.db.getTurma(e).subscribe(i=>{this.db.titleInfos={title:i.data().nome}})}selectedAluno(e){this.db.readAlunos(this.pathId).subscribe(i=>{const r=i.docs,s=i.docs.map(c=>c.data().nome);try{const c=s.indexOf(e);this.id=r[c].id,this.router.navigate([`turma/${this.pathId}/aluno/${this.id}`])}catch(c){this.dbAuth.openSnackbar("Aluno n\xe3o encontrado")}})}findId(e){this.db.readAlunos(this.pathId).subscribe(i=>{const r=i.docs,s=i.docs.map(c=>c.data().nome);try{const c=s.indexOf(e);this.id=r[c].id,this.getAluno()}catch(c){this.db.handleError(c)}})}openAddAluno(){this.dialog.open(M9,{width:"500px"}).afterClosed().subscribe(i=>{void 0!==i&&this.addAluno(i)})}addAluno(e){this.db.addAluno(e,this.pathId)}openUpdateAluno(){setTimeout(()=>{this.dialog.open(k9,{width:"500px",data:this.aluno}).afterClosed().subscribe(i=>{void 0!==i&&this.db.updateAluno(this.pathId,this.id,i)})},500)}deleteAluno(){this.dialog.open(ty,{width:"500px",data:"Voc\xea deseja remover esse aluno ?"}).afterClosed().subscribe(i=>{1==i&&this.db.removeAlunos(this.pathId,this.id)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(oc),o.Y36(fl),o.Y36(ba),o.Y36(pa),o.Y36(Nr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-turma"]],decls:25,vars:3,consts:[[1,"border","shadow","h-100","teste",3,"dataSource"],["matColumnDef","numero"],["mat-header-cell","","class","px-3 border-end",4,"matHeaderCellDef"],["mat-cell","","class","border-end",3,"click",4,"matCellDef"],["matColumnDef","nome"],["mat-header-cell","","class","w-100 px-3 border-end",4,"matHeaderCellDef"],["mat-cell","","class","px-3 border-end",3,"click",4,"matCellDef"],["matColumnDef","options"],["mat-header-cell","","class","px-2 border-end",4,"matHeaderCellDef"],["mat-cell","","class","w-25 px-2 border-end",4,"matCellDef"],["mat-header-row","","class","align-middle",4,"matHeaderRowDef"],["mat-row","","class","align-middle",4,"matRowDef","matRowDefColumns"],[1,"mt-4","teste2"],["routerLink","frequencia",1,"btn","btn-primary","me-3"],[1,"btn","btn-warning",3,"click"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-cell","",1,"px-3","border-end"],["mat-cell","",1,"border-end",3,"click"],["mat-header-cell","",1,"w-100","px-3","border-end"],["mat-cell","",1,"px-3","border-end",3,"click"],["mat-header-cell","",1,"px-2","border-end"],["mat-cell","",1,"w-25","px-2","border-end"],[1,"btn",3,"matMenuTriggerFor","click"],["mat-header-row","",1,"align-middle"],["mat-row","",1,"align-middle"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"mat-table",0),o.ynx(2,1),o.YNc(3,R9,2,0,"th",2),o.YNc(4,O9,2,1,"td",3),o.BQk(),o.ynx(5,4),o.YNc(6,P9,2,0,"th",5),o.YNc(7,N9,2,1,"td",6),o.BQk(),o.ynx(8,7),o.YNc(9,F9,2,0,"th",8),o.YNc(10,L9,4,1,"td",9),o.BQk(),o.YNc(11,B9,1,0,"tr",10),o.YNc(12,V9,1,0,"tr",11),o.qZA(),o.TgZ(13,"div",12)(14,"button",13),o._uU(15,"Adicionar Frequencia"),o.qZA(),o.TgZ(16,"button",14),o.NdJ("click",function(){return i.openAddAluno()}),o._uU(17,"Adicionar Aluno"),o.qZA()(),o.TgZ(18,"div")(19,"mat-menu",null,15)(21,"button",16),o.NdJ("click",function(){return i.openUpdateAluno()}),o._uU(22,"Editar aluno"),o.qZA(),o.TgZ(23,"button",16),o.NdJ("click",function(){return i.deleteAluno()}),o._uU(24,"Remover aluno"),o.qZA()()()()),2&e&&(o.xp6(1),o.Q6J("dataSource",i.alunos),o.xp6(10),o.Q6J("matHeaderRowDef",i.columns),o.xp6(1),o.Q6J("matRowDefColumns",i.columns))},directives:[fC,tv,ev,nv,Jy,iv,tA,Km,pC,gC,mC,_C,Hh,eA,Zm],styles:[".mat-row[_ngcontent-%COMP%]:hover{background-color:#f5f4f4}@media (max-width:576px){.teste[_ngcontent-%COMP%]{width:100%}.teste2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:15px}}"]}),n})()},{path:"turma/:turmaId/aluno/:alunoId",component:YK},{path:"turma/:turmaId/frequencia",canActivate:[fl],component:E9},{path:"signup",canActivate:[fl],component:x9},{path:"perfis",canActivate:[fl],component:W7}];let H9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[D_.forRoot(U9)],D_]}),n})();function j9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"form",2)(1,"h1",3),o._uU(2,"Login"),o.qZA(),o.TgZ(3,"mat-form-field")(4,"mat-label"),o._uU(5,"Email"),o.qZA(),o._UZ(6,"input",4),o.qZA(),o.TgZ(7,"mat-form-field")(8,"mat-label"),o._uU(9,"Senha"),o.qZA(),o._UZ(10,"input",5),o.qZA(),o.TgZ(11,"button",6),o.NdJ("click",function(){return o.CHM(e),o.oxw().onSignin()}),o._uU(12,"Entrar"),o.qZA(),o.TgZ(13,"a",7),o.NdJ("click",function(){return o.CHM(e),o.oxw().login=!0}),o._uU(14,"N\xe3o sou funcionario"),o.qZA()()}if(2&n){const e=o.oxw();o.Q6J("formGroup",e.formSignin),o.xp6(11),o.Q6J("disabled",e.formSignin.invalid)}}function G9(n,t){if(1&n&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}function z9(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"form",2)(1,"h1",3),o._uU(2,"Login do Aluno"),o.qZA(),o.TgZ(3,"mat-form-field")(4,"mat-label"),o._uU(5,"Nome completo do aluno"),o.qZA(),o._UZ(6,"input",8),o.qZA(),o.TgZ(7,"mat-form-field",9)(8,"mat-label"),o._uU(9,"Turma do aluno"),o.qZA(),o._UZ(10,"input",10),o.TgZ(11,"mat-autocomplete",null,11),o.YNc(13,G9,2,2,"mat-option",12),o.qZA()(),o.TgZ(14,"button",13),o.NdJ("click",function(){return o.CHM(e),o.oxw().enter()}),o._uU(15,"Entrar"),o.qZA(),o.TgZ(16,"a",7),o.NdJ("click",function(){return o.CHM(e),o.oxw().login=!1}),o._uU(17,"Sou um funcionario"),o.qZA()()}if(2&n){const e=o.MAs(12),i=o.oxw();o.Q6J("formGroup",i.notAdmin),o.xp6(10),o.Q6J("matAutocomplete",e),o.xp6(3),o.Q6J("ngForOf",i.turmas),o.xp6(1),o.Q6J("disabled",i.notAdmin.invalid)}}let q9=(()=>{class n{constructor(e,i){this.dbAuth=e,this.db=i,this.turmas=[],this.input=new wn("",[qn.required]),this.login=!1,this.isLogged=new o.vpe,this.filterValue=this.input.valueChanges.pipe(Ci(null),(0,Ce.U)(r=>r?this._filter(r):this.turmas.slice()))}ngOnInit(){this.getTurmas(),this.createForm()}getTurmas(){this.db.getTurmas().subscribe(e=>{e.docs.forEach(i=>{this.turmas.push(i.data().nome)})})}createForm(){this.formSignin=new Vo({email:new wn("",[qn.required]),password:new wn("",[qn.required])}),this.notAdmin=new Vo({turmas:new wn,nome:new wn("",[qn.required])})}onSignin(){this.dbAuth.signin(this.formSignin.value.email,this.formSignin.value.password)}enter(){console.log(this.notAdmin),this.dbAuth.alunoInfos(this.notAdmin.controls.turmas.value,this.notAdmin.value.nome)}_filter(e){const i=e.toLowerCase();return this.turmas.filter(r=>{r.toLowerCase().includes(i)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(fl),o.Y36(oc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-login"]],outputs:{isLogged:"isLogged"},decls:3,vars:2,consts:[[1,"d-flex","align-items-center","justify-content-center","h-100","w-100"],["class","border rounded col-3 d-flex flex-column p-4 shadow form teste",3,"formGroup",4,"ngIf"],[1,"border","rounded","col-3","d-flex","flex-column","p-4","shadow","form","teste",3,"formGroup"],[1,"text-center"],["formControlName","email","type","text","matInput",""],["formControlName","password","type","text","matInput",""],[1,"btn","btn-primary","mt-3",3,"disabled","click"],[1,"mt-3",3,"click"],["type","text","matInput","","formControlName","nome"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","Escolha um","aria-label","Number","matInput","","formControlName","turmas",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o.YNc(1,j9,15,2,"form",1),o.YNc(2,z9,18,4,"form",1),o.qZA()),2&e&&(o.xp6(1),o.Q6J("ngIf",!i.login),o.xp6(1),o.Q6J("ngIf",i.login))},directives:[un,cl,Ql,Fs,Jl,Ea,is,ec,so,Ca,CC,sA,Nn,pf],styles:["@media (max-width: 280px){.teste[_ngcontent-%COMP%]{width:15rem}}@media (min-width: 281px) and (max-width:576px){.teste[_ngcontent-%COMP%]{width:20rem}}@media (min-width: 577px) and (max-width:991px){.teste[_ngcontent-%COMP%]{width:22rem}}"]}),n})();const $9=["*",[["mat-toolbar-row"]]],W9=["*","mat-toolbar-row"],Z9=df(class{constructor(n){this._elementRef=n}});let Y9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),K9=(()=>{class n extends Z9{constructor(e,i,r){super(e),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Pi),o.Y36(G))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,Y9,5),2&e){let s;o.iGM(s=o.CRH())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,i){2&e&&o.ekj("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[o.qOj],ngContentSelectors:W9,decls:2,vars:0,template:function(e,i){1&e&&(o.F$t($9),o.Hsn(0),o.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),Q9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[$t],$t]}),n})(),X9=(()=>{class n{constructor(e){this.db=e,this.sidebar=new o.vpe}ngOnInit(){}get title(){return this.db.titleInfos.title}sidebarToggle(){this.sidebar.emit(!this.sidebarStatus)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(oc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-head"]],inputs:{sidebarStatus:"sidebarStatus"},outputs:{sidebar:"sidebar"},decls:6,vars:1,consts:[[1,"border-bottom","px-4"],[1,"btn","btn-outline-dark","border-0","d-flex","me-3",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"mat-toolbar",0)(1,"button",1),o.NdJ("click",function(){return i.sidebarToggle()}),o.TgZ(2,"mat-icon"),o._uU(3,"menu"),o.qZA()(),o.TgZ(4,"h1"),o._uU(5),o.qZA()()),2&e&&(o.xp6(5),o.Oqu(i.title))},directives:[K9,Km],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#fff}"]}),n})();const xj=["*"],J9=["content"];function eQ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",2),o.NdJ("click",function(){return o.CHM(e),o.oxw()._onBackdropClicked()}),o.qZA()}if(2&n){const e=o.oxw();o.ekj("mat-drawer-shown",e._isShowingBackdrop())}}function tQ(n,t){1&n&&(o.TgZ(0,"mat-drawer-content"),o.Hsn(1,2),o.qZA())}const nQ=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],iQ=["mat-drawer","mat-drawer-content","*"],rQ={transformDrawer:Rn("transform",[Kt("open, open-instant",_t({transform:"none",visibility:"visible"})),Kt("void",_t({"box-shadow":"none",visibility:"hidden"})),Rt("void => open-instant",Dn("0ms")),Rt("void <=> open, open-instant => void",Dn("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},sQ=new o.OlP("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function oQ(){return!1}}),Mj=new o.OlP("MAT_DRAWER_CONTAINER");let oA=(()=>{class n extends Hp{constructor(e,i,r,s,c){super(r,s,c),this._changeDetectorRef=e,this._container=i}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.sBO),o.Y36((0,o.Gpc)(()=>Rj)),o.Y36(o.SBq),o.Y36(ef),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,i){2&e&&o.Udp("margin-left",i._container._contentMargins.left,"px")("margin-right",i._container._contentMargins.right,"px")},features:[o._Bn([{provide:Hp,useExisting:n}]),o.qOj],ngContentSelectors:xj,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),kj=(()=>{class n{constructor(e,i,r,s,c,d,p,y){this._elementRef=e,this._focusTrapFactory=i,this._focusMonitor=r,this._platform=s,this._ngZone=c,this._interactivityChecker=d,this._doc=p,this._container=y,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new ht.x,this._animationEnd=new ht.x,this._animationState="void",this.openedChange=new o.vpe(!0),this._openedStream=this.openedChange.pipe(_n(C=>C),(0,Ce.U)(()=>{})),this.openedStart=this._animationStarted.pipe(_n(C=>C.fromState!==C.toState&&0===C.toState.indexOf("open")),KP(void 0)),this._closedStream=this.openedChange.pipe(_n(C=>!C),(0,Ce.U)(()=>{})),this.closedStart=this._animationStarted.pipe(_n(C=>C.fromState!==C.toState&&"void"===C.toState),KP(void 0)),this._destroyed=new ht.x,this.onPositionChanged=new o.vpe,this._modeChanged=new ht.x,this.openedChange.subscribe(C=>{C?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus(this._openedVia||"program")}),this._ngZone.runOutsideAngular(()=>{Rs(this._elementRef.nativeElement,"keydown").pipe(_n(C=>27===C.keyCode&&!this.disableClose&&!sl(C)),Pn(this._destroyed)).subscribe(C=>this._ngZone.run(()=>{this.close(),C.stopPropagation(),C.preventDefault()}))}),this._animationEnd.pipe(Kp((C,D)=>C.fromState===D.fromState&&C.toState===D.toState)).subscribe(C=>{const{fromState:D,toState:M}=C;(0===M.indexOf("open")&&"void"===D||"void"===M&&0===D.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!==this._position&&(this._isAttached&&this._updatePositionInParent(e),this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=Tt(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"===this.mode?"dialog":"first-tabbable":e}set autoFocus(e){("true"===e||"false"===e||null==e)&&(e=Tt(e)),this._autoFocus=e}get opened(){return this._opened}set opened(e){this.toggle(Tt(e))}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_takeFocus(){if(!this._focusTrap)return;const e=this._elementRef.nativeElement;switch(this.autoFocus){case!1:case"dialog":return;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{!i&&"function"==typeof this._elementRef.nativeElement.focus&&e.focus()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this.autoFocus)}}_restoreFocus(e){"dialog"!==this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,e):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null)}_isFocusWithinDrawer(){const e=this._doc.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterViewInit(){this._isAttached=!0,this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState(),"end"===this._position&&this._updatePositionInParent("end")}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){var e;this._focusTrap&&this._focusTrap.destroy(),null===(e=this._anchor)||void 0===e||e.remove(),this._anchor=null,this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0,"mouse")}toggle(e=!this.opened,i){e&&i&&(this._openedVia=i);const r=this._setOpen(e,!e&&this._isFocusWithinDrawer(),this._openedVia||"program");return e||(this._openedVia=null),r}_setOpen(e,i,r){return this._opened=e,e?this._animationState=this._enableAnimations?"open":"open-instant":(this._animationState="void",i&&this._restoreFocus(r)),this._updateFocusTrapState(),new Promise(s=>{this.openedChange.pipe((0,Vn.q)(1)).subscribe(c=>s(c?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_updatePositionInParent(e){const i=this._elementRef.nativeElement,r=i.parentNode;"end"===e?(this._anchor||(this._anchor=this._doc.createComment("mat-drawer-anchor"),r.insertBefore(this._anchor,i)),r.appendChild(i)):this._anchor&&this._anchor.parentNode.insertBefore(i,this._anchor)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(hT),o.Y36(pu),o.Y36(Pi),o.Y36(o.R0b),o.Y36(Xb),o.Y36(G,8),o.Y36(Mj,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-drawer"]],viewQuery:function(e,i){if(1&e&&o.Gf(J9,5),2&e){let r;o.iGM(r=o.CRH())&&(i._content=r.first)}},hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,i){1&e&&o.WFA("@transform.start",function(s){return i._animationStarted.next(s)})("@transform.done",function(s){return i._animationEnd.next(s)}),2&e&&(o.uIk("align",null),o.d8E("@transform",i._animationState),o.ekj("mat-drawer-end","end"===i.position)("mat-drawer-over","over"===i.mode)("mat-drawer-push","push"===i.mode)("mat-drawer-side","side"===i.mode)("mat-drawer-opened",i.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:xj,decls:3,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"],["content",""]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0,1),o.Hsn(2),o.qZA())},directives:[Hp],encapsulation:2,data:{animation:[rQ.transformDrawer]},changeDetection:0}),n})(),Rj=(()=>{class n{constructor(e,i,r,s,c,d=!1,p){this._dir=e,this._element=i,this._ngZone=r,this._changeDetectorRef=s,this._animationMode=p,this._drawers=new o.n_E,this.backdropClick=new o.vpe,this._destroyed=new ht.x,this._doCheckSubject=new ht.x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new ht.x,e&&e.change.pipe(Pn(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),c.change().pipe(Pn(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=d}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=Tt(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:Tt(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Ci(this._allDrawers),Pn(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(i=>!i._container||i._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Ci(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(yd(10),Pn(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,i=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const r=this._left._getWidth();e+=r,i-=r}if(this._right&&this._right.opened)if("side"==this._right.mode)i+=this._right._getWidth();else if("push"==this._right.mode){const r=this._right._getWidth();i+=r,e-=r}e=e||null,i=i||null,(e!==this._contentMargins.left||i!==this._contentMargins.right)&&(this._contentMargins={left:e,right:i},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(_n(i=>i.fromState!==i.toState),Pn(this._drawers.changes)).subscribe(i=>{"open-instant"!==i.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(Pn(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(Pn(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe((0,Vn.q)(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(Pn((0,Lr.T)(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const i=this._element.nativeElement.classList,r="mat-drawer-container-has-open";e?i.add(r):i.remove(r)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Zl,8),o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(o.sBO),o.Y36(jp),o.Y36(sQ),o.Y36(Ms,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,oA,5),o.Suo(r,kj,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._content=s.first),o.iGM(s=o.CRH())&&(i._allDrawers=s)}},viewQuery:function(e,i){if(1&e&&o.Gf(oA,5),2&e){let r;o.iGM(r=o.CRH())&&(i._userContent=r.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-drawer-container-explicit-backdrop",i._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[o._Bn([{provide:Mj,useExisting:n}])],ngContentSelectors:iQ,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,i){1&e&&(o.F$t(nQ),o.YNc(0,eQ,1,2,"div",0),o.Hsn(1),o.Hsn(2,1),o.YNc(3,tQ,2,0,"mat-drawer-content",1)),2&e&&(o.Q6J("ngIf",i.hasBackdrop),o.xp6(3),o.Q6J("ngIf",!i._content))},directives:[oA,un],styles:['.mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer[style*="visibility: hidden"]{display:none}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n'],encapsulation:2,changeDetection:0}),n})(),aQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[gr,$t,Yl],Yl,$t]}),n})(),lQ=(()=>{class n{constructor(e,i){this.ref=e,this.db=i}ngOnInit(){this.createForm()}createForm(){this.form=new Vo({nome:new wn("",[qn.required]),teste:new wn("",[qn.required])})}turnos(e){this.turno=e}close(){this.ref.close()}addTurma(){this.ref.close({nome:this.form.value.nome,turno:this.turno.value})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(al),o.Y36(oc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-add-turma"]],decls:20,vars:2,consts:[[1,"text-center"],[3,"formGroup"],[1,"w-100","mb-3"],["type","text","matInput","","formControlName","nome"],["color","primary",3,"change"],["value","Matutino",1,"me-2"],["value","Verspetino",1,"me-2"],["value","Noturno"],["mat-dialog-actions","",1,"mt-2"],[1,"btn","btn-danger","me-3",3,"click"],[1,"btn","btn-success",3,"disabled","click"]],template:function(e,i){1&e&&(o.TgZ(0,"div")(1,"h1",0),o._uU(2,"Adicionar Turma"),o.qZA(),o.TgZ(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),o._uU(6,"Nome da turma"),o.qZA(),o._UZ(7,"input",3),o.qZA(),o.TgZ(8,"mat-radio-group",4),o.NdJ("change",function(s){return i.turnos(s)}),o.TgZ(9,"mat-radio-button",5),o._uU(10,"Matutino"),o.qZA(),o.TgZ(11,"mat-radio-button",6),o._uU(12,"Verspetino"),o.qZA(),o.TgZ(13,"mat-radio-button",7),o._uU(14,"Noturno"),o.qZA()()(),o.TgZ(15,"div",8)(16,"button",9),o.NdJ("click",function(){return i.close()}),o._uU(17,"Fechar"),o.qZA(),o.TgZ(18,"button",10),o.NdJ("click",function(){return i.addTurma()}),o._uU(19,"Adicionar"),o.qZA()()()),2&e&&(o.xp6(3),o.Q6J("formGroup",i.form),o.xp6(15),o.Q6J("disabled",i.form.controls.nome.invalid))},directives:[cl,Ql,Fs,Jl,Ea,ec,is,so,Ca,EC,DC,rm],styles:[""]}),n})(),cQ=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=Tt(e)}get inset(){return this._inset}set inset(e){this._inset=Tt(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("aria-orientation",i.vertical?"vertical":"horizontal"),o.ekj("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),uQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[$t],$t]}),n})();function dQ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li",11),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw().selectedTurma(s.nome)}),o.TgZ(1,"button",12)(2,"a",13),o._uU(3),o.qZA()()()}if(2&n){const e=t.$implicit;o.xp6(3),o.Oqu(e.nome)}}function hQ(n,t){1&n&&o._UZ(0,"mat-divider")}function fQ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",14)(1,"button",15),o.NdJ("click",function(){return o.CHM(e),o.oxw().openAddTurma()}),o._uU(2,"Adicionar turma"),o.qZA(),o._UZ(3,"mat-divider"),o.TgZ(4,"button",16),o._uU(5,"Adicionar Usuarios"),o.qZA(),o._UZ(6,"mat-divider"),o.TgZ(7,"button",17),o._uU(8," Editar "),o.qZA()()}}let pQ=(()=>{class n{constructor(e,i,r,s){this.dialog=e,this.db=i,this.dbAuth=r,this.router=s,this.turmas=[],this.newTurmas=[]}ngOnInit(){this.notAdmin=this.dbAuth.notAdmin,this.createForm(),"admin"==sessionStorage.tipo?this.getTurmas():"professor"==sessionStorage.tipo&&this.getProfTurmas()}getTurmas(){this.db.getTurmas().subscribe(e=>{e.docs.forEach(i=>{this.turmas.push(i.data())}),this.turmas=this.turmas.sort((i,r)=>i.nome<r.nome?-1:i.nome>r.nome?1:0),this.newTurmas=this.turmas})}getProfTurmas(){const e=[];this.db.getUsers().subscribe(i=>{var r,s;i.docs.forEach(c=>{e.push(c.data())});try{const c=e.filter(p=>{if(p.id==sessionStorage.id)return p}),d=[];for(let p=0;p<(null===(r=c[0])||void 0===r?void 0:r.turma.length);p++)d.push({nome:null===(s=c[0])||void 0===s?void 0:s.turma[p]});this.turmas=d,this.turmas=this.turmas.sort((p,y)=>p.nome<y.nome?-1:p.nome>y.nome?1:0),this.newTurmas=this.turmas}catch(c){this.db.handleError(c)}})}createForm(){this.search=new Vo({search:new wn})}searchs(){try{const e=this.turmas.filter(i=>{if(i.nome.toLowerCase().includes(this.search.value.search)||i.nome.toUpperCase().includes(this.search.value.search)||i.nome.includes(this.search.value.search))return i});this.newTurmas=0===e.length?this.turmas:e}catch(e){this.db.handleError(e)}}openAddTurma(){this.dialog.open(lQ,{width:"500px"}).afterClosed().subscribe(i=>{void 0!==i&&this.addTurma(i)})}addTurma(e){this.db.addTurma(e)}selectedTurma(e){this.db.getTurmas().subscribe(i=>{const r=i.docs,s=i.docs.map(c=>c.data().nome);try{const c=s.indexOf(e);this.router.navigate([`turma/${r[c].id}`])}catch(c){this.dbAuth.openSnackbar("Turma n\xe3o encontrada")}})}logout(){this.dbAuth.logOut()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ba),o.Y36(oc),o.Y36(fl),o.Y36(Nr))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sidebar"]],decls:18,vars:4,consts:[[1,"p-4"],[1,"btn","w-100","text-start","ps-0"],["routerLink","",1,"mb-1","fs-5","pointer"],[1,"d-flex","justify-content-between"],[3,"formGroup"],["type","text","matInput","","formControlName","search",3,"keyup"],[1,"navbar-nav","mb-2","px-0"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[4,"ngIf"],["class","d-flex flex-column",4,"ngIf"],["routerLink","",1,"navBtn","border-0","px-4","py-3","w-100","text-start",3,"click"],[1,"nav-item",3,"click"],[1,"navBtn","border-0","w-100","text-start","rounded-0","p-2"],[1,"nav-link","link-dark","fs-6","pointer"],[1,"d-flex","flex-column"],[1,"navBtn","border-0","px-4","py-3","text-start",3,"click"],["routerLink","signup",1,"navBtn","border-0","px-4","py-3","text-start"],["routerLink","perfis",1,"navBtn","border-0","px-4","py-3","text-start"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"button",1)(2,"h2",2),o._uU(3,"Turmas"),o.qZA()(),o.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o._uU(7,"Pesquisar turma"),o.qZA(),o.TgZ(8,"input",5),o.NdJ("keyup",function(){return i.searchs()}),o.qZA()()(),o.TgZ(9,"ul",6),o.YNc(10,dQ,4,1,"li",7),o.qZA()(),o.YNc(11,hQ,1,0,"mat-divider",8),o.YNc(12,fQ,9,0,"div",9),o.TgZ(13,"div"),o._UZ(14,"mat-divider"),o.TgZ(15,"button",10),o.NdJ("click",function(){return i.logout()}),o._uU(16,"Sair"),o.qZA(),o._UZ(17,"mat-divider"),o.qZA()),2&e&&(o.xp6(5),o.Q6J("formGroup",i.search),o.xp6(5),o.Q6J("ngForOf",i.newTurmas),o.xp6(1),o.Q6J("ngIf",!i.notAdmin),o.xp6(1),o.Q6J("ngIf",!i.notAdmin))},directives:[Hh,Jl,Ql,Fs,Ea,ec,is,so,Ca,Nn,un,cQ],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}.navBtn[_ngcontent-%COMP%]{background-color:transparent}.navBtn[_ngcontent-%COMP%]:hover{background-color:#ececec}"]}),n})();function mQ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-login",2),o.NdJ("isLogged",function(r){return o.CHM(e),o.oxw().recive(r)}),o.qZA()}}function gQ(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-head",7),o.NdJ("sidebar",function(r){return o.CHM(e),o.oxw(2).sidebarToggle(r)}),o.qZA()}if(2&n){const e=o.oxw(2);o.Q6J("sidebarStatus",e.sidebar)}}function _Q(n,t){if(1&n&&(o.TgZ(0,"mat-drawer",8),o._UZ(1,"app-sidebar"),o.qZA()),2&n){const e=o.oxw(2);o.Q6J("mode",e.sidebarMode)("opened",e.sidebar)}}function yQ(n,t){if(1&n&&(o.TgZ(0,"div"),o.YNc(1,gQ,1,1,"app-head",3),o.TgZ(2,"mat-drawer-container",4),o.YNc(3,_Q,2,2,"mat-drawer",5),o.TgZ(4,"mat-drawer-content",6),o._UZ(5,"router-outlet"),o.qZA()()()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",!e.user),o.xp6(2),o.Q6J("ngIf",!e.user)}}let vQ=(()=>{class n{constructor(e){this.dbAuth=e,this.title="GerenciadorDePresenca",this.sidebar=!1,this.login=!1,this.user=!1}ngOnInit(){this.typeOfUser(),this.sidebarModes()}typeOfUser(){"admin"==sessionStorage.tipo?(this.login=!0,this.dbAuth.notAdmin=!1):"professor"==sessionStorage.tipo?(this.login=!0,this.dbAuth.notAdmin=!0):"user"==sessionStorage.tipo?(this.login=!0,this.user=!0,this.dbAuth.user=!0):null==sessionStorage.tipo&&(this.login=!1)}sidebarModes(){window.screen.width<700?(this.sidebarMode="over",this.sidebar=!1):(this.sidebarMode="side",this.sidebar=!0)}sidebarToggle(e){this.sidebar=e}recive(e){this.login=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(fl))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:2,consts:[[3,"isLogged",4,"ngIf"],[4,"ngIf"],[3,"isLogged"],[3,"sidebarStatus","sidebar",4,"ngIf"],[1,"height"],["class"," h-100 shadow sidebar",3,"mode","opened",4,"ngIf"],[1,"p-4","view"],[3,"sidebarStatus","sidebar"],[1,"h-100","shadow","sidebar",3,"mode","opened"]],template:function(e,i){1&e&&(o.YNc(0,mQ,1,0,"app-login",0),o.YNc(1,yQ,6,2,"div",1)),2&e&&(o.Q6J("ngIf",0==i.login),o.xp6(1),o.Q6J("ngIf",1==i.login))},directives:[un,q9,X9,Rj,kj,pQ,oA,ob],styles:[".height[_ngcontent-%COMP%]{height:817px}mat-drawer-content[_ngcontent-%COMP%]{background-color:#fff}"]}),n})();const Oj_firebase={apiKey:"AIzaSyAyCfW-GM9ebbYj-VPEIA9ZGDhxidjttuI",authDomain:"gerenciadordepresenca-9f4a4.firebaseapp.com",projectId:"gerenciadordepresenca-9f4a4",storageBucket:"gerenciadordepresenca-9f4a4.appspot.com",messagingSenderId:"570789717517",appId:"1:570789717517:web:aed02ab646a1bc23471744",measurementId:"G-J7GX261L93"};let bQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),wQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[gr,$t,bQ,$p]]}),n})();const IQ={provide:new o.OlP("mat-select-scroll-strategy"),deps:[Lo],useFactory:function TQ(n){return()=>n.scrollStrategies.reposition()}};let SQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[IQ],imports:[[gr,rf,J_,$t],Yl,bI,J_,$t]}),n})();const kQ={provide:new o.OlP("mat-tooltip-scroll-strategy"),deps:[Lo],useFactory:function MQ(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let OQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[kQ],imports:[[QL,gr,rf,$t],$t,Yl]}),n})(),rN=(()=>{class n{constructor(){this.changes=new ht.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=e*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BQ={provide:rN,deps:[[new o.FiY,new o.tp0,rN]],useFactory:function LQ(n){return n||new rN}};let VQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[BQ],imports:[[gr,H3,SQ,OQ,$t]]}),n})(),sN=(()=>{class n{constructor(){this.changes=new ht.x}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const HQ={provide:sN,deps:[[new o.FiY,new o.tp0,sN]],useFactory:function UQ(n){return n||new sN}};let jQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[HQ],imports:[[gr,$t]]}),n})(),Bj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),eX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[mu,$t,Qp,Bj],$t,Bj]}),n})();O(3259);let iX=(()=>{let n=class{};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const jj="@firebase/database";let aN="";function zj(n){aN=n}class oX{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,H.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,H.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class aX{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,H.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const qj=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new oX(t)}}catch(t){}return new aX},Qm=qj("localStorage"),lN=qj("sessionStorage"),rv=new nc.Yd("@firebase/database"),$j=function(){let n=1;return function(){return n++}}(),Wj=function(n){const t=(0,H.dS)(n),e=new H.gQ;e.update(t);const i=e.digest();return H.US.encodeByteArray(i)},IC=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=IC.apply(null,i):t+="object"==typeof i?(0,H.Pz)(i):i,t+=" "}return t};let Xm=null,Zj=!0;const Yj=function(n,t){(0,H.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(rv.logLevel=nc.in.VERBOSE,Xm=rv.log.bind(rv),t&&lN.set("logging_enabled",!0)):"function"==typeof n?Xm=n:(Xm=null,lN.remove("logging_enabled"))},zr=function(...n){if(!0===Zj&&(Zj=!1,null===Xm&&!0===lN.get("logging_enabled")&&Yj(!0)),Xm){const t=IC.apply(null,n);Xm(t)}},SC=function(n){return function(...t){zr(n,...t)}},cN=function(...n){const t="FIREBASE INTERNAL ERROR: "+IC(...n);rv.error(t)},Eu=function(...n){const t=`FIREBASE FATAL ERROR: ${IC(...n)}`;throw rv.error(t),new Error(t)},Us=function(...n){const t="FIREBASE WARNING: "+IC(...n);rv.warn(t)},cA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Od="[MIN_NAME]",Du="[MAX_NAME]",Jm=function(n,t){if(n===t)return 0;if(n===Od||t===Du)return-1;if(t===Od||n===Du)return 1;{const e=uA(n),i=uA(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},uX=function(n,t){return n===t?0:n<t?-1:1},AC=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,H.Pz)(t))},uN=function(n){if("object"!=typeof n||null===n)return(0,H.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,H.Pz)(t[i]),e+=":",e+=uN(n[t[i]]);return e+="}",e},Kj=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function qr(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const Qj=function(n){(0,H.hu)(!cA(n),"Invalid JSON number");const i=1023;let r,s,c,d,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const C=y.join("");let D="";for(p=0;p<64;p+=8){let M=parseInt(C.substr(p,8),2).toString(16);1===M.length&&(M="0"+M),D+=M}return D.toLowerCase()},pX=new RegExp("^-?(0*)\\d{1,10}$"),Xj=-2147483648,dN=2147483647,uA=function(n){if(pX.test(n)){const t=Number(n);if(t>=Xj&&t<=dN)return t}return null},sv=function(n){try{n()}catch(t){setTimeout(()=>{throw Us("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},xC=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class gX{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Us(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class _X{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(zr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Us(t)}}let MC=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const iG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,oG="websocket",aG="long_polling";class fN{constructor(t,e,i,r,s=!1,c="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qm.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Qm.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function lG(n,t,e){let i;if((0,H.hu)("string"==typeof t,"typeof type must == string"),(0,H.hu)("object"==typeof e,"typeof params must == object"),t===oG)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==aG)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function yX(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return qr(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class vX{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,H.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,H.p$)(this.counters_)}}const pN={},mN={};function gN(n){const t=n.toString();return pN[t]||(pN[t]=new vX),pN[t]}class wX{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&sv(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Lf{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=SC(t),this.stats_=gN(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),lG(e,aG,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new wX(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,H.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _N((...s)=>{const[c,d,p,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&iG.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Lf.forceAllow_=!0}static forceDisallow(){Lf.forceDisallow_=!0}static isAvailable(){return!((0,H.Yr)()||!Lf.forceAllow_&&(Lf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,H.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,H.h$)(e),r=Kj(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,H.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,H.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class _N{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,H.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=$j(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=_N.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){zr("frame writing exception"),d.stack&&zr(d.stack),zr(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||zr("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,H.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{zr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let hA=null;"undefined"!=typeof MozWebSocket?hA=MozWebSocket:"undefined"!=typeof WebSocket&&(hA=WebSocket);let ov=(()=>{class n{constructor(e,i,r,s,c,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=SC(this.connId),this.stats_=gN(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,H.Yr)()&&"undefined"!=typeof location&&location.hostname&&iG.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),lG(e,oG,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qm.set("previous_websocket_failure",!0);try{let r;if((0,H.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${aN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,p=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;p&&(c.proxy={origin:p})}this.mySock=new hA(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==hA&&!n.forceDisallow_}static previouslyFailed(){return Qm.isInMemoryStorage||!0===Qm.get("previous_websocket_failure")}markConnectionHealthy(){Qm.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,H.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,H.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,H.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=Kj(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),mG=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Lf,ov]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=ov&&ov.isAvailable();let r=i&&!ov.previouslyFailed();if(e.webSocketOnly&&(i||Us("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ov];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class CG{constructor(t,e,i,r,s,c,d,p,y,C){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=SC("c:"+this.id+":"),this.transportManager_=new mG(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=xC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=AC("t",t),i=AC("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=AC("t",t),i=AC("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=AC("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?cN("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):cN("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Us("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),xC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class EG{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class DG{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,H.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,H.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class fA extends DG{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,H.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new fA}getInitialEvent(t){return(0,H.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class xn{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function En(){return new xn("")}function nn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Bf(n){return n.pieces_.length-n.pieceNum_}function Un(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new xn(n.pieces_,t)}function vN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function kC(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function SG(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new xn(t,0)}function gi(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof xn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new xn(e,0)}function rn(n){return n.pieceNum_>=n.pieces_.length}function go(n,t){const e=nn(n),i=nn(t);if(null===e)return t;if(e===i)return go(Un(n),Un(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function GX(n,t){const e=kC(n,0),i=kC(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Jm(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function bN(n,t){if(Bf(n)!==Bf(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function ml(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(Bf(n)>Bf(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class zX{constructor(t,e){this.errorPrefix_=e,this.parts_=kC(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,H.ug)(this.parts_[i]);AG(this)}}function AG(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+eg(n))}function eg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class wN extends DG{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new wN}getInitialEvent(t){return(0,H.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const RC=1e3;let mA,tg=(()=>{class n extends EG{constructor(e,i,r,s,c,d,p,y){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=SC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,H.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");wN.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&fA.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,H.Pz)(c)),(0,H.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new H.BH,r={p:e._path.toString(),q:e._queryObject},s={action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?(this.onDataUpdate_(r.p,p,!1,null),i.resolve(p)):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[c];void 0===d||s!==d||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,H.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,H.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,C=p.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(r,s),e.onComplete&&e.onComplete(C,y))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,H.r3)(e,"w")){const r=(0,H.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Us(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,H.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,H.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,H.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,H.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):cN("Unrecognized action received from server: "+(0,H.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,H.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RC,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=RC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=RC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ie.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,y=null;const C=function(){y?y.close():(p=!0,s())};e.realtime_={close:C,sendRequest:function(L){(0,H.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const M=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[L,j]=yield Promise.all([e.authTokenProvider_.getToken(M),e.appCheckTokenProvider_.getToken(M)]);p?zr("getToken() completed but was canceled"):(zr("getToken() completed. Creating connection."),e.authToken_=L&&L.accessToken,e.appCheckToken_=j&&j.token,y=new CG(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,le=>{Us(le+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(L){e.log_("Failed to get token: "+L),p||(e.repoInfo_.nodeAdmin&&Us(L),C())}}})()}interrupt(e){zr("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){zr("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,H.xb)(this.interruptReasons_)&&(this.reconnectDelay_=RC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>uN(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new xn(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){zr("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){zr("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,H.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+aN.replace(/\./g,"-")]=1,(0,H.uI)()?e["framework.cordova"]=1:(0,H.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=fA.getInstance().currentlyOnline();return(0,H.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new an(t,e)}}class pA{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new an(Od,t),r=new an(Od,e);return 0!==this.compare(i,r)}minPost(){return an.MIN}}class kG extends pA{static get __EMPTY_NODE(){return mA}static set __EMPTY_NODE(t){mA=t}compare(t,e){return Jm(t.name,e.name)}isDefinedOn(t){throw(0,H.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return an.MIN}maxPost(){return new an(Du,mA)}makePost(t,e){return(0,H.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new an(t,mA)}toString(){return".key"}}const Tu=new kG;class gA{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let EN,ac=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Ho.EMPTY_NODE,this.right=null!=c?c:Ho.EMPTY_NODE}copy(e,i,r,s,c){return new n(null!=e?e:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ho.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Ho.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Ho{constructor(t,e=Ho.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Ho(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ac.BLACK,null,null))}remove(t){return new Ho(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ac.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new gA(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new gA(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new gA(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new gA(this.root_,null,this.comparator_,!0,t)}}function JX(n,t){return Jm(n.name,t.name)}function CN(n,t){return Jm(n,t)}Ho.EMPTY_NODE=new class XX{copy(t,e,i,r,s){return this}insert(t,e,i){return new ac(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const RG=function(n){return"number"==typeof n?"number:"+Qj(n):"string:"+n},OG=function(n){if(n.isLeafNode()){const t=n.val();(0,H.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,H.r3)(t,".sv"),"Priority must be a string or number.")}else(0,H.hu)(n===EN||n.isEmpty(),"priority of unexpected type.");(0,H.hu)(n===EN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let PG,NG,FG,av=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,H.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),OG(this.priorityNode_)}static set __childrenNodeConstructor(e){PG=e}static get __childrenNodeConstructor(){return PG}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return rn(e)?this:".priority"===nn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=nn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,H.hu)(".priority"!==r||1===Bf(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+RG(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?Qj(this.value_):this.value_,this.lazyHash_=Wj(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,H.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,H.hu)(s>=0,"Unknown leaf type: "+i),(0,H.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Wn=new class iJ extends pA{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Jm(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return an.MIN}maxPost(){return new an(Du,new av("[PRIORITY-POST]",FG))}makePost(t,e){const i=NG(t);return new an(e,new av("[PRIORITY-POST]",i))}toString(){return".priority"}},rJ=Math.log(2);class sJ{constructor(t){this.count=parseInt(Math.log(t+1)/rJ,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const _A=function(n,t,e,i){n.sort(t);const r=function(p,y){const C=y-p;let D,M;if(0===C)return null;if(1===C)return D=n[p],M=e?e(D):D,new ac(M,D.node,ac.BLACK,null,null);{const L=parseInt(C/2,10)+p,j=r(p,L),le=r(L+1,y);return D=n[L],M=e?e(D):D,new ac(M,D.node,ac.BLACK,j,le)}},d=function(p){let y=null,C=null,D=n.length;const M=function(j,le){const we=D-j,Qe=D;D-=j;const Je=r(we+1,Qe),Ze=n[we],We=e?e(Ze):Ze;L(new ac(We,Ze.node,le,null,Je))},L=function(j){y?(y.left=j,y=j):(C=j,y=j)};for(let j=0;j<p.count;++j){const le=p.nextBitIsOne(),we=Math.pow(2,p.count-(j+1));le?M(we,ac.BLACK):(M(we,ac.BLACK),M(we,ac.RED))}return C}(new sJ(n.length));return new Ho(i||t,d)};let DN;const lv={};class Pd{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,H.hu)(lv&&Wn,"ChildrenNode.ts has not been loaded"),DN=DN||new Pd({".priority":lv},{".priority":Wn}),DN}get(t){const e=(0,H.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ho?e:null}hasIndex(t){return(0,H.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,H.hu)(t!==Tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(an.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?_A(i,t.getCompare()):lv;const p=t.toString(),y=Object.assign({},this.indexSet_);y[p]=t;const C=Object.assign({},this.indexes_);return C[p]=d,new Pd(C,y)}addToIndexes(t,e){const i=(0,H.UI)(this.indexes_,(r,s)=>{const c=(0,H.DV)(this.indexSet_,s);if((0,H.hu)(c,"Missing index implementation for "+s),r===lv){if(c.isDefinedOn(t.node)){const d=[],p=e.getIterator(an.Wrap);let y=p.getNext();for(;y;)y.name!==t.name&&d.push(y),y=p.getNext();return d.push(t),_A(d,c.getCompare())}return lv}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new an(t.name,d))),p.insert(t,t.node)}});return new Pd(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,H.UI)(this.indexes_,r=>{if(r===lv)return r;{const s=e.get(t.name);return s?r.remove(new an(t.name,s)):r}});return new Pd(i,this.indexSet_)}}let OC,Gt=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&OG(this.priorityNode_),this.children_.isEmpty()&&(0,H.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return OC||(OC=new n(new Ho(CN),null,Pd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||OC}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?OC:i}}getChild(e){const i=nn(e);return null===i?this:this.getImmediateChild(i).getChild(Un(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,H.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new an(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?OC:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=nn(e);if(null===r)return i;{(0,H.hu)(".priority"!==nn(e)||1===Bf(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Un(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(Wn,(d,p)=>{i[d]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+RG(this.getPriority().val())+":"),this.forEachChild(Wn,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":Wj(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new an(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new an(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new an(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,an.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,an.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===PC?-1:0}withIndex(e){if(e===Tu||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Tu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Wn),s=i.getIterator(Wn);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Tu?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const PC=new class oJ extends Gt{constructor(){super(new Ho(CN),Gt.EMPTY_NODE,Pd.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Gt.EMPTY_NODE}isEmpty(){return!1}};function Ti(n,t=null){if(null===n)return Gt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,H.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new av(n,Ti(t));if(n instanceof Array){let e=Gt.EMPTY_NODE;return qr(n,(i,r)=>{if((0,H.r3)(n,i)&&"."!==i.substring(0,1)){const s=Ti(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(Ti(t))}{const e=[];let i=!1;if(qr(n,(c,d)=>{if("."!==c.substring(0,1)){const p=Ti(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new an(c,p)))}}),0===e.length)return Gt.EMPTY_NODE;const s=_A(e,JX,c=>c.name,CN);if(i){const c=_A(e,Wn.getCompare());return new Gt(s,Ti(t),new Pd({".priority":c},{".priority":Wn}))}return new Gt(s,Ti(t),Pd.Default)}}Object.defineProperties(an,{MIN:{value:new an(Od,Gt.EMPTY_NODE)},MAX:{value:new an(Du,PC)}}),kG.__EMPTY_NODE=Gt.EMPTY_NODE,av.__childrenNodeConstructor=Gt,function eJ(n){EN=n}(PC),function nJ(n){FG=n}(PC),function tJ(n){NG=n}(Ti);class TN extends pA{constructor(t){super(),this.indexPath_=t,(0,H.hu)(!rn(t)&&".priority"!==nn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Jm(t.name,e.name):s}makePost(t,e){const i=Ti(t),r=Gt.EMPTY_NODE.updateChild(this.indexPath_,i);return new an(e,r)}maxPost(){const t=Gt.EMPTY_NODE.updateChild(this.indexPath_,PC);return new an(Du,t)}toString(){return kC(this.indexPath_,0).join("/")}}const IN=new class lJ extends pA{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Jm(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(t,e){const i=Ti(t);return new an(e,i)}toString(){return".value"}},cv="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cJ=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=cv.charAt(e%64),e=Math.floor(e/64);(0,H.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=cv.charAt(t[r]);return(0,H.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),VG=function(n){if(n===""+dN)return"-";const t=uA(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Du;const s=cv.charAt(cv.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},UG=function(n){if(n===""+Xj)return Od;const t=uA(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+dN:(delete e[e.length-1],e.join("")):(e[e.length-1]=cv.charAt(cv.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function HG(n){return{type:"value",snapshotNode:n}}function uv(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function NC(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function FC(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class AN{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,H.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(NC(e,d)):(0,H.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(uv(e,i)):c.trackChildChange(FC(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Wn,(r,s)=>{e.hasChild(r)||i.trackChildChange(NC(r,s))}),e.isLeafNode()||e.forEachChild(Wn,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(FC(r,s,c))}else i.trackChildChange(uv(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Gt.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class LC{constructor(t){this.indexedFilter_=new AN(t.getIndex()),this.index_=t.getIndex(),this.startPost_=LC.getStartPost_(t),this.endPost_=LC.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,c){return this.matches(new an(e,i))||(i=Gt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Gt.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Gt.EMPTY_NODE);const s=this;return e.forEachChild(Wn,(c,d)=>{s.matches(new an(c,d))||(r=r.updateImmediateChild(c,Gt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class dJ{constructor(t){this.rangedFilter_=new LC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new an(e,i))||(i=Gt.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Gt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Gt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,p;if(r=e.withIndex(this.index_),r=r.updatePriority(Gt.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(M,L)=>D(L,M)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,C=!1;for(;p.hasNext();){const D=p.getNext();!C&&d(s,D)<=0&&(C=!0),C&&y<this.limit_&&d(D,c)<=0?y++:r=r.updateImmediateChild(D.name,Gt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const D=this.index_.getCompare();c=(M,L)=>D(L,M)}else c=this.index_.getCompare();const d=t;(0,H.hu)(d.numChildren()===this.limit_,"");const p=new an(e,i),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),C=this.rangedFilter_.matches(p);if(d.hasChild(e)){const D=d.getImmediateChild(e);let M=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=M&&(M.name===e||d.hasChild(M.name));)M=r.getChildAfterChild(this.index_,M,this.reverse_);const L=null==M?1:c(M,p);if(C&&!i.isEmpty()&&L>=0)return null!=s&&s.trackChildChange(FC(e,i,D)),d.updateImmediateChild(e,i);{null!=s&&s.trackChildChange(NC(e,D));const le=d.updateImmediateChild(e,Gt.EMPTY_NODE);return null!=M&&this.rangedFilter_.matches(M)?(null!=s&&s.trackChildChange(uv(M.name,M.node)),le.updateImmediateChild(M.name,M.node)):le}}return i.isEmpty()?t:C&&c(y,p)>=0?(null!=s&&(s.trackChildChange(NC(y.name,y.node)),s.trackChildChange(uv(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(y.name,Gt.EMPTY_NODE)):t}}class yA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,H.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Od}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,H.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Du}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,H.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wn}copy(){const t=new yA;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function xN(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function MN(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function vA(n,t){const e=n.copy();return e.index_=t,e}function jG(n){const t={};if(n.isDefault())return t;let e;return n.index_===Wn?e="$priority":n.index_===IN?e="$value":n.index_===Tu?e="$key":((0,H.hu)(n.index_ instanceof TN,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,H.Pz)(e),n.startSet_&&(t.startAt=(0,H.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,H.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,H.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,H.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function GG(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Wn&&(t.i=n.index_.toString()),t}class bA extends EG{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=SC("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,H.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=bA.getListenId_(t,i),d={};this.listens_[c]=d;const p=jG(t._queryParams);this.restRequest_(s+".json",p,(y,C)=>{let D=C;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,i),(0,H.DV)(this.listens_,c)===d){let M;M=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(M,null)}})}unlisten(t,e){const i=bA.getListenId_(t,e);delete this.listens_[i]}get(t){const e=jG(t._queryParams),i=t._path.toString(),r=new H.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,H.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,H.cI)(d.responseText)}catch(y){Us("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&Us("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class _J{constructor(){this.rootNode_=Gt.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function wA(){return{value:null,children:new Map}}function dv(n,t,e){if(rn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=nn(t);n.children.has(i)||n.children.set(i,wA()),dv(n.children.get(i),t=Un(t),e)}}function kN(n,t){if(rn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Wn,(i,r)=>{dv(n,new xn(i),r)}),kN(n,t)}}if(n.children.size>0){const e=nn(t);return t=Un(t),n.children.has(e)&&kN(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function RN(n,t,e){null!==n.value?e(t,n.value):function yJ(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{RN(r,new xn(t.toString()+"/"+i),e)})}class vJ{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&qr(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class CJ{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new vJ(t);const i=1e4+2e4*Math.random();xC(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;qr(t,(r,s)=>{s>0&&(0,H.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),xC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var gl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(gl||(gl={})),gl))();function NN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class CA{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=gl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(rn(this.path)){if(null!=this.affectedTree.value)return(0,H.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new xn(t));return new CA(En(),e,this.revert)}}return(0,H.hu)(nn(this.path)===t,"operationForChild called for unrelated child."),new CA(Un(this.path),this.affectedTree,this.revert)}}class BC{constructor(t,e){this.source=t,this.path=e,this.type=gl.LISTEN_COMPLETE}operationForChild(t){return rn(this.path)?new BC(this.source,En()):new BC(this.source,Un(this.path))}}class ng{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=gl.OVERWRITE}operationForChild(t){return rn(this.path)?new ng(this.source,En(),this.snap.getImmediateChild(t)):new ng(this.source,Un(this.path),this.snap)}}class hv{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=gl.MERGE}operationForChild(t){if(rn(this.path)){const e=this.children.subtree(new xn(t));return e.isEmpty()?null:e.value?new ng(this.source,En(),e.value):new hv(this.source,En(),e)}return(0,H.hu)(nn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new hv(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Vf{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(rn(t))return this.isFullyInitialized()&&!this.filtered_;const e=nn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class EJ{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function VC(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,p)=>function IJ(n,t,e){if(null==t.childName||null==e.childName)throw(0,H.g5)("Should only compare child_ events.");const i=new an(t.childName,t.snapshotNode),r=new an(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function TJ(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(y=>{y.respondsTo(d.type)&&t.push(y.createEvent(p,n.query_))})})}function EA(n,t){return{eventCache:n,serverCache:t}}function UC(n,t,e,i){return EA(new Vf(t,e,i),n.serverCache)}function qG(n,t,e,i){return EA(n.eventCache,new Vf(t,e,i))}function DA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ig(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let FN;class Zn{constructor(t,e=(()=>(FN||(FN=new Ho(uX)),FN))()){this.value=t,this.children=e}static fromObject(t){let e=new Zn(null);return qr(t,(i,r)=>{e=e.set(new xn(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:En(),value:this.value};if(rn(t))return null;{const i=nn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Un(t),e);return null!=s?{path:gi(new xn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(rn(t))return this;{const e=nn(t),i=this.children.get(e);return null!==i?i.subtree(Un(t)):new Zn(null)}}set(t,e){if(rn(t))return new Zn(e,this.children);{const i=nn(t),s=(this.children.get(i)||new Zn(null)).set(Un(t),e),c=this.children.insert(i,s);return new Zn(this.value,c)}}remove(t){if(rn(t))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const e=nn(t),i=this.children.get(e);if(i){const r=i.remove(Un(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Zn(null):new Zn(this.value,s)}return this}}get(t){if(rn(t))return this.value;{const e=nn(t),i=this.children.get(e);return i?i.get(Un(t)):null}}setTree(t,e){if(rn(t))return e;{const i=nn(t),s=(this.children.get(i)||new Zn(null)).setTree(Un(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Zn(this.value,c)}}fold(t){return this.fold_(En(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(gi(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,En(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(rn(t))return null;{const s=nn(t),c=this.children.get(s);return c?c.findOnPath_(Un(t),gi(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,En(),e)}foreachOnPath_(t,e,i){if(rn(t))return this;{this.value&&i(e,this.value);const r=nn(t),s=this.children.get(r);return s?s.foreachOnPath_(Un(t),gi(e,r),i):new Zn(null)}}foreach(t){this.foreach_(En(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(gi(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class lc{constructor(t){this.writeTree_=t}static empty(){return new lc(new Zn(null))}}function HC(n,t,e){if(rn(t))return new lc(new Zn(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=go(r,t);return s=s.updateChild(c,e),new lc(n.writeTree_.set(r,s))}{const r=new Zn(e),s=n.writeTree_.setTree(t,r);return new lc(s)}}}function LN(n,t,e){let i=n;return qr(e,(r,s)=>{i=HC(i,gi(t,r),s)}),i}function $G(n,t){if(rn(t))return lc.empty();{const e=n.writeTree_.setTree(t,new Zn(null));return new lc(e)}}function BN(n,t){return null!=rg(n,t)}function rg(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(go(e.path,t)):null}function WG(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Wn,(i,r)=>{t.push(new an(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new an(i,r.value))}),t}function Uf(n,t){if(rn(t))return n;{const e=rg(n,t);return new lc(null!=e?new Zn(e):n.writeTree_.subtree(t))}}function VN(n){return n.writeTree_.isEmpty()}function fv(n,t){return ZG(En(),n.writeTree_,t)}function ZG(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,H.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=ZG(gi(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(gi(n,".priority"),i)),e}}function TA(n,t){return JG(t,n)}function RJ(n,t){if(n.snap)return ml(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&ml(gi(n.path,e),t))return!0;return!1}function PJ(n){return n.visible}function YG(n,t,e){let i=lc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)ml(e,c)?(d=go(e,c),i=HC(i,d,s.snap)):ml(c,e)&&(d=go(c,e),i=HC(i,En(),s.snap.getChild(d)));else{if(!s.children)throw(0,H.g5)("WriteRecord should have .snap or .children");if(ml(e,c))d=go(e,c),i=LN(i,d,s.children);else if(ml(c,e))if(d=go(c,e),rn(d))i=LN(i,En(),s.children);else{const p=(0,H.DV)(s.children,nn(d));if(p){const y=p.getChild(Un(d));i=HC(i,En(),y)}}}}}return i}function KG(n,t,e,i,r){if(i||r){const s=Uf(n.visibleWrites,t);return!r&&VN(s)?e:r||null!=e||BN(s,En())?fv(YG(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(ml(y.path,t)||ml(t,y.path))},t),e||Gt.EMPTY_NODE):null}{const s=rg(n.visibleWrites,t);if(null!=s)return s;{const c=Uf(n.visibleWrites,t);return VN(c)?e:null!=e||BN(c,En())?fv(c,e||Gt.EMPTY_NODE):null}}}function IA(n,t,e,i){return KG(n.writeTree,n.treePath,t,e,i)}function UN(n,t){return function NJ(n,t,e){let i=Gt.EMPTY_NODE;const r=rg(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Wn,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=Uf(n.visibleWrites,t);return e.forEachChild(Wn,(c,d)=>{const p=fv(Uf(s,new xn(c)),d);i=i.updateImmediateChild(c,p)}),WG(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return WG(Uf(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function QG(n,t,e,i){return function FJ(n,t,e,i,r){(0,H.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=gi(t,e);if(BN(n.visibleWrites,s))return null;{const c=Uf(n.visibleWrites,s);return VN(c)?r.getChild(e):fv(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function SA(n,t){return function BJ(n,t){return rg(n.visibleWrites,t)}(n.writeTree,gi(n.treePath,t))}function HN(n,t,e){return function LJ(n,t,e,i){const r=gi(t,e),s=rg(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?fv(Uf(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function XG(n,t){return JG(gi(n.treePath,t),n.writeTree)}function JG(n,t){return{treePath:n,writeTree:t}}class jJ{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,H.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,H.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,FC(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,NC(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,uv(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,H.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,FC(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const e6=new class GJ{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class jN{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return HN(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ig(this.viewCache_),s=function HJ(n,t,e,i,r,s){return function VJ(n,t,e,i,r,s,c){let d;const p=Uf(n.visibleWrites,t),y=rg(p,En());if(null!=y)d=y;else{if(null==e)return[];d=fv(p,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const C=[],D=c.getCompare(),M=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let L=M.getNext();for(;L&&C.length<r;)0!==D(L,i)&&C.push(L),L=M.getNext();return C}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function t6(n,t,e,i,r,s){const c=t.eventCache;if(null!=SA(i,e))return t;{let d,p;if(rn(e))if((0,H.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const y=ig(t),D=UN(i,y instanceof Gt?y:Gt.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),D,s)}else{const y=IA(i,ig(t));d=n.filter.updateFullNode(t.eventCache.getNode(),y,s)}else{const y=nn(e);if(".priority"===y){(0,H.hu)(1===Bf(e),"Can't have a priority with additional path components");const C=c.getNode();p=t.serverCache.getNode();const D=QG(i,e,C,p);d=null!=D?n.filter.updatePriority(C,D):c.getNode()}else{const C=Un(e);let D;if(c.isCompleteForChild(y)){p=t.serverCache.getNode();const M=QG(i,e,c.getNode(),p);D=null!=M?c.getNode().getImmediateChild(y).updateChild(C,M):c.getNode().getImmediateChild(y)}else D=HN(i,y,t.serverCache);d=null!=D?n.filter.updateChild(c.getNode(),y,D,C,r,s):c.getNode()}}return UC(t,d,c.isFullyInitialized()||rn(e),n.filter.filtersNodes())}}function AA(n,t,e,i,r,s,c,d){const p=t.serverCache;let y;const C=c?n.filter:n.filter.getIndexedFilter();if(rn(e))y=C.updateFullNode(p.getNode(),i,null);else if(C.filtersNodes()&&!p.isFiltered()){const L=p.getNode().updateChild(e,i);y=C.updateFullNode(p.getNode(),L,null)}else{const L=nn(e);if(!p.isCompleteForPath(e)&&Bf(e)>1)return t;const j=Un(e),we=p.getNode().getImmediateChild(L).updateChild(j,i);y=".priority"===L?C.updatePriority(p.getNode(),we):C.updateChild(p.getNode(),L,we,j,e6,null)}const D=qG(t,y,p.isFullyInitialized()||rn(e),C.filtersNodes());return t6(n,D,e,r,new jN(r,D,s),d)}function GN(n,t,e,i,r,s,c){const d=t.eventCache;let p,y;const C=new jN(r,t,s);if(rn(e))y=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=UC(t,y,!0,n.filter.filtersNodes());else{const D=nn(e);if(".priority"===D)y=n.filter.updatePriority(t.eventCache.getNode(),i),p=UC(t,y,d.isFullyInitialized(),d.isFiltered());else{const M=Un(e),L=d.getNode().getImmediateChild(D);let j;if(rn(M))j=i;else{const le=C.getCompleteChild(D);j=null!=le?".priority"===vN(M)&&le.getChild(SG(M)).isEmpty()?le:le.updateChild(M,i):Gt.EMPTY_NODE}p=L.equals(j)?t:UC(t,n.filter.updateChild(d.getNode(),D,j,M,C,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function n6(n,t){return n.eventCache.isCompleteForChild(t)}function r6(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function zN(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let y,p=t;y=rn(e)?i:new Zn(null).setTree(e,i);const C=t.serverCache.getNode();return y.children.inorderTraversal((D,M)=>{if(C.hasChild(D)){const j=r6(0,t.serverCache.getNode().getImmediateChild(D),M);p=AA(n,p,new xn(D),j,r,s,c,d)}}),y.children.inorderTraversal((D,M)=>{const L=!t.serverCache.isCompleteForChild(D)&&void 0===M.value;if(!C.hasChild(D)&&!L){const le=r6(0,t.serverCache.getNode().getImmediateChild(D),M);p=AA(n,p,new xn(D),le,r,s,c,d)}}),p}class XJ{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new AN(i.getIndex()),s=function hJ(n){return n.loadsAllData()?new AN(n.getIndex()):n.hasLimit()?new dJ(n):new LC(n)}(i);this.processor_=function zJ(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,p=r.updateFullNode(Gt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Gt.EMPTY_NODE,d.getNode(),null),C=new Vf(p,c.isFullyInitialized(),r.filtersNodes()),D=new Vf(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=EA(D,C),this.eventGenerator_=new EJ(this.query_)}get query(){return this.query_}}function tee(n,t){const e=ig(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!rn(t)&&!e.getImmediateChild(nn(t)).isEmpty())?e.getChild(t):null}function s6(n){return 0===n.eventRegistrations_.length}function o6(n,t,e){const i=[];if(e){(0,H.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function a6(n,t,e,i){t.type===gl.MERGE&&null!==t.source.queryId&&((0,H.hu)(ig(n.viewCache_),"We should always have a full cache before handling merges"),(0,H.hu)(DA(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function $J(n,t,e,i,r){const s=new jJ;let c,d;if(e.type===gl.OVERWRITE){const y=e;y.source.fromUser?c=GN(n,t,y.path,y.snap,i,r,s):((0,H.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered()&&!rn(y.path),c=AA(n,t,y.path,y.snap,i,r,d,s))}else if(e.type===gl.MERGE){const y=e;y.source.fromUser?c=function ZJ(n,t,e,i,r,s,c){let d=t;return i.foreach((p,y)=>{const C=gi(e,p);n6(t,nn(C))&&(d=GN(n,d,C,y,r,s,c))}),i.foreach((p,y)=>{const C=gi(e,p);n6(t,nn(C))||(d=GN(n,d,C,y,r,s,c))}),d}(n,t,y.path,y.children,i,r,s):((0,H.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||t.serverCache.isFiltered(),c=zN(n,t,y.path,y.children,i,r,d,s))}else if(e.type===gl.ACK_USER_WRITE){const y=e;c=y.revert?function QJ(n,t,e,i,r,s){let c;if(null!=SA(i,e))return t;{const d=new jN(i,t,r),p=t.eventCache.getNode();let y;if(rn(e)||".priority"===nn(e)){let C;if(t.serverCache.isFullyInitialized())C=IA(i,ig(t));else{const D=t.serverCache.getNode();(0,H.hu)(D instanceof Gt,"serverChildren would be complete if leaf node"),C=UN(i,D)}C=C,y=n.filter.updateFullNode(p,C,s)}else{const C=nn(e);let D=HN(i,C,t.serverCache);null==D&&t.serverCache.isCompleteForChild(C)&&(D=p.getImmediateChild(C)),y=null!=D?n.filter.updateChild(p,C,D,Un(e),d,s):t.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,Gt.EMPTY_NODE,Un(e),d,s):p,y.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=IA(i,ig(t)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=SA(i,En()),UC(t,y,c,n.filter.filtersNodes())}}(n,t,y.path,i,r,s):function YJ(n,t,e,i,r,s,c){if(null!=SA(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(rn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return AA(n,t,e,p.getNode().getChild(e),r,s,d,c);if(rn(e)){let y=new Zn(null);return p.getNode().forEachChild(Tu,(C,D)=>{y=y.set(new xn(C),D)}),zN(n,t,e,y,r,s,d,c)}return t}{let y=new Zn(null);return i.foreach((C,D)=>{const M=gi(e,C);p.isCompleteForPath(M)&&(y=y.set(C,p.getNode().getChild(M)))}),zN(n,t,e,y,r,s,d,c)}}(n,t,y.path,y.affectedTree,i,r,s)}else{if(e.type!==gl.LISTEN_COMPLETE)throw(0,H.g5)("Unknown operation type: "+e.type);c=function KJ(n,t,e,i,r){const s=t.serverCache;return t6(n,qG(t,s.getNode(),s.isFullyInitialized()||rn(e),s.isFiltered()),e,i,e6,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function WJ(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=DA(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(HG(DA(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function qJ(n,t){(0,H.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,H.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,H.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,l6(n,s.changes,s.viewCache.eventCache.getNode(),null)}function l6(n,t,e,i){return function DJ(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function uJ(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),VC(n,r,"child_removed",t,i,e),VC(n,r,"child_added",t,i,e),VC(n,r,"child_moved",s,i,e),VC(n,r,"child_changed",t,i,e),VC(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let xA,kA;class c6{constructor(){this.views=new Map}}function qN(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,H.hu)(null!=s,"SyncTree gave us an op for an invalid query."),a6(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(a6(c,t,e,i));return s}}function u6(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=IA(e,r?i:null),p=!1;d?p=!0:i instanceof Gt?(d=UN(e,i),p=!1):(d=Gt.EMPTY_NODE,p=!1);const y=EA(new Vf(d,p,!1),new Vf(i,r,!1));return new XJ(t,y)}return c}function d6(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Hf(n,t){let e=null;for(const i of n.views.values())e=e||tee(i,t);return e}function h6(n,t){return t._queryParams.loadsAllData()?MA(n):n.views.get(t._queryIdentifier)}function f6(n,t){return null!=h6(n,t)}function jf(n){return null!=MA(n)}function MA(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let dee=1;class p6{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=function UJ(){return{visibleWrites:lc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $N(n,t,e,i,r){return function AJ(n,t,e,i,r){(0,H.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=HC(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?pv(n,new ng({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function Gf(n,t,e=!1){const i=function MJ(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function kJ(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,H.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&RJ(d,i.path)?r=!1:ml(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function OJ(n){n.visibleWrites=YG(n.allWrites,PJ,En()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=$G(n.visibleWrites,i.path):qr(i.children,p=>{n.visibleWrites=$G(n.visibleWrites,gi(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new Zn(null);return null!=i.snap?s=s.set(En(),!0):qr(i.children,c=>{s=s.set(new xn(c),!0)}),pv(n,new CA(i.path,s,e))}return[]}function jC(n,t,e){return pv(n,new ng({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function WN(n,t,e,i){const r=t._path,s=n.syncPointTree_.get(r);let c=[];if(s&&("default"===t._queryIdentifier||f6(s,t))){const d=function lee(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=jf(n);if("default"===r)for(const[p,y]of n.views.entries())c=c.concat(o6(y,e,i)),s6(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(r);p&&(c=c.concat(o6(p,e,i)),s6(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!jf(n)&&s.push(new(function see(){return(0,H.hu)(xA,"Reference.ts has not been loaded"),xA}())(t._repo,t._path)),{removed:s,events:c}}(s,t,e,i);(function oee(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=d.removed;c=d.events;const y=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(r,(D,M)=>jf(M));if(y&&!C){const D=n.syncPointTree_.subtree(r);if(!D.isEmpty()){const M=function vee(n){return n.fold((t,e,i)=>{if(e&&jf(e))return[MA(e)];{let r=[];return e&&(r=d6(e)),qr(i,(s,c)=>{r=r.concat(c)}),r}})}(D);for(let L=0;L<M.length;++L){const j=M[L],le=j.query,we=y6(n,j);n.listenProvider_.startListening(GC(le),OA(n,le),we.hashFn,we.onComplete)}}}!C&&p.length>0&&!i&&(y?n.listenProvider_.stopListening(GC(t),null):p.forEach(D=>{const M=n.queryToTagMap.get(PA(D));n.listenProvider_.stopListening(GC(D),M)})),function bee(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=PA(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return c}function m6(n,t,e){const i=t._path;let r=null,s=!1;n.syncPointTree_.foreachOnPath(i,(D,M)=>{const L=go(D,i);r=r||Hf(M,L),s=s||jf(M)});let d,c=n.syncPointTree_.get(i);c?(s=s||jf(c),r=r||Hf(c,En())):(c=new c6,n.syncPointTree_=n.syncPointTree_.set(i,c)),null!=r?d=!0:(d=!1,r=Gt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((M,L)=>{const j=Hf(L,En());j&&(r=r.updateImmediateChild(M,j))}));const p=f6(c,t);if(!p&&!t._queryParams.loadsAllData()){const D=PA(t);(0,H.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const M=function wee(){return dee++}();n.queryToTagMap.set(D,M),n.tagToQueryMap.set(M,D)}let C=function aee(n,t,e,i,r,s){const c=u6(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function nee(n,t){n.eventRegistrations_.push(t)}(c,e),function iee(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Wn,(s,c)=>{i.push(uv(s,c))}),e.isFullyInitialized()&&i.push(HG(e.getNode())),l6(n,i,e.getNode(),t)}(c,e)}(c,t,e,TA(n.pendingWriteTree_,i),r,d);if(!p&&!s){const D=h6(c,t);C=C.concat(function Cee(n,t,e){const i=t._path,r=OA(n,t),s=y6(n,e),c=n.listenProvider_.startListening(GC(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,H.hu)(!jf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((y,C,D)=>{if(!rn(y)&&C&&jf(C))return[MA(C).query];{let M=[];return C&&(M=M.concat(d6(C).map(L=>L.query))),qr(D,(L,j)=>{M=M.concat(j)}),M}});for(let y=0;y<p.length;++y){const C=p[y];n.listenProvider_.stopListening(GC(C),OA(n,C))}}return c}(n,t,D))}return C}function RA(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const y=Hf(d,go(c,t));if(y)return y});return KG(r,t,s,e,!0)}function pv(n,t){return g6(t,n.syncPointTree_,null,TA(n.pendingWriteTree_,En()))}function g6(n,t,e,i){if(rn(n.path))return _6(n,t,e,i);{const r=t.get(En());null==e&&null!=r&&(e=Hf(r,En()));let s=[];const c=nn(n.path),d=n.operationForChild(c),p=t.children.get(c);if(p&&d){const y=e?e.getImmediateChild(c):null,C=XG(i,c);s=s.concat(g6(d,p,y,C))}return r&&(s=s.concat(qN(r,n,i,e))),s}}function _6(n,t,e,i){const r=t.get(En());null==e&&null!=r&&(e=Hf(r,En()));let s=[];return t.children.inorderTraversal((c,d)=>{const p=e?e.getImmediateChild(c):null,y=XG(i,c),C=n.operationForChild(c);C&&(s=s.concat(_6(C,d,p,y)))}),r&&(s=s.concat(qN(r,n,i,e))),s}function y6(n,t){const e=t.query,i=OA(n,e);return{hashFn:()=>(function JJ(n){return n.viewCache_.serverCache.getNode()}(t)||Gt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function mee(n,t,e){const i=ZN(n,e);if(i){const r=YN(i),s=r.path,c=r.queryId,d=go(s,t);return KN(n,s,new BC(NN(c),d))}return[]}(n,e._path,i):function pee(n,t){return pv(n,new BC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function fX(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return WN(n,e,null,s)}}}}function OA(n,t){const e=PA(t);return n.queryToTagMap.get(e)}function PA(n){return n._path.toString()+"$"+n._queryIdentifier}function ZN(n,t){return n.tagToQueryMap.get(t)}function YN(n){const t=n.indexOf("$");return(0,H.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new xn(n.substr(0,t))}}function KN(n,t,e){const i=n.syncPointTree_.get(t);return(0,H.hu)(i,"Missing sync point for query tag that we're tracking"),qN(i,e,TA(n.pendingWriteTree_,t),null)}function GC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function uee(){return(0,H.hu)(kA,"Reference.ts has not been loaded"),kA}())(n._repo,n._path):n}class QN{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new QN(e)}node(){return this.node_}}class XN{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=gi(this.path_,t);return new XN(this.syncTree_,e)}node(){return RA(this.syncTree_,this.path_)}}const v6=function(n,t,e){return n&&"object"==typeof n?((0,H.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Dee(n[".sv"],t,e):"object"==typeof n[".sv"]?Tee(n[".sv"],t):void(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Dee=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,H.hu)(!1,"Unexpected server value: "+n)},Tee=function(n,t,e){n.hasOwnProperty("increment")||(0,H.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,H.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,H.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},b6=function(n,t,e,i){return eF(t,new XN(e,n),i)},JN=function(n,t,e){return eF(n,new QN(t),e)};function eF(n,t,e){const i=n.getPriority().val(),r=v6(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=v6(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new av(d,Ti(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new av(r))),c.forEachChild(Wn,(d,p)=>{const y=eF(p,t.getImmediateChild(d),e);y!==p&&(s=s.updateImmediateChild(d,y))}),s}}class tF{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function NA(n,t){let e=t instanceof xn?t:new xn(t),i=n,r=nn(e);for(;null!==r;){const s=(0,H.DV)(i.node.children,r)||{children:{},childCount:0};i=new tF(r,i,s),e=Un(e),r=nn(e)}return i}function sg(n){return n.node.value}function nF(n,t){n.node.value=t,iF(n)}function w6(n){return n.node.childCount>0}function FA(n,t){qr(n.node.children,(e,i)=>{t(new tF(e,n,i))})}function C6(n,t,e,i){e&&!i&&t(n),FA(n,r=>{C6(r,t,!0,i)}),e&&i&&t(n)}function zC(n){return new xn(null===n.parent?n.name:zC(n.parent)+"/"+n.name)}function iF(n){null!==n.parent&&function Aee(n,t,e){const i=function Iee(n){return void 0===sg(n)&&!w6(n)}(e),r=(0,H.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,iF(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,iF(n))}(n.parent,n.name,n)}const xee=/[\[\].#$\/\u0000-\u001F\u007F]/,Mee=/[\[\].#$\u0000-\u001F\u007F]/,rF=10485760,LA=function(n){return"string"==typeof n&&0!==n.length&&!xee.test(n)},E6=function(n){return"string"==typeof n&&0!==n.length&&!Mee.test(n)},qC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!cA(n)||n&&"object"==typeof n&&(0,H.r3)(n,".sv")},Iu=function(n,t,e,i){i&&void 0===t||$C((0,H.gK)(n,"value"),t,e)},$C=function(n,t,e){const i=e instanceof xn?new zX(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+eg(i));if("function"==typeof t)throw new Error(n+"contains a function "+eg(i)+" with contents = "+t.toString());if(cA(t))throw new Error(n+"contains "+t.toString()+" "+eg(i));if("string"==typeof t&&t.length>rF/3&&(0,H.ug)(t)>rF)throw new Error(n+"contains a string greater than "+rF+" utf8 bytes "+eg(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(qr(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!LA(c)))throw new Error(n+" contains an invalid key ("+c+") "+eg(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function qX(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,H.ug)(t),AG(n)})(i,c),$C(n,d,i),function $X(n){const t=n.parts_.pop();n.byteLength_-=(0,H.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+eg(i)+" in addition to actual children.")}},D6=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,H.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];qr(t,(c,d)=>{const p=new xn(c);if($C(r,d,gi(e,p)),".priority"===vN(p)&&!qC(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=kC(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!LA(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(GX);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&ml(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},sF=function(n,t,e){if(!e||void 0!==t){if(cA(t))throw new Error((0,H.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qC(t))throw new Error((0,H.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},WC=function(n,t,e,i){if(!(i&&void 0===e||LA(e)))throw new Error((0,H.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ZC=function(n,t,e,i){if(!(i&&void 0===e||E6(e)))throw new Error((0,H.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},_l=function(n,t){if(".info"===nn(t))throw new Error(n+" failed = Can't modify data under /.info/")},T6=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!LA(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),E6(n)}(e))throw new Error((0,H.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Pee{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function BA(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!bN(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function oF(n,t,e){BA(n,e),I6(n,i=>bN(i,t))}function yl(n,t,e){BA(n,e),I6(n,i=>ml(i,t)||ml(t,i))}function I6(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(Nee(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function Nee(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Xm&&zr("event: "+e.toString()),sv(i)}}}const S6="repo_interrupt";class Lee{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Pee,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wA(),this.transactionQueueTree_=new tF,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function A6(n){const e=n.infoData_.getNode(new xn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function YC(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:A6(n)})}function x6(n,t,e,i,r){n.dataUpdateCount++;const s=new xn(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,H.UI)(e,y=>Ti(y));c=function _ee(n,t,e,i){const r=ZN(n,i);if(r){const s=YN(r),c=s.path,d=s.queryId,p=go(c,t),y=Zn.fromObject(e);return KN(n,c,new hv(NN(d),p,y))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=Ti(e);c=function gee(n,t,e,i){const r=ZN(n,i);if(null!=r){const s=YN(r),c=s.path,d=s.queryId,p=go(c,t);return KN(n,c,new ng(NN(d),p,e))}return[]}(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,H.UI)(e,y=>Ti(y));c=function fee(n,t,e){const i=Zn.fromObject(e);return pv(n,new hv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=Ti(e);c=jC(n.serverSyncTree_,s,p)}let d=s;c.length>0&&(d=gv(n,s)),yl(n.eventQueue_,d,c)}function M6(n,t){aF(n,"connected",t),!1===t&&function jee(n){mv(n,"onDisconnectEvents");const t=YC(n),e=wA();RN(n.onDisconnect_,En(),(r,s)=>{const c=b6(r,s,n.serverSyncTree_,t);dv(e,r,c)});let i=[];RN(e,En(),(r,s)=>{i=i.concat(jC(n.serverSyncTree_,r,s));const c=dF(n,r);gv(n,c)}),n.onDisconnect_=wA(),yl(n.eventQueue_,En(),i)}(n)}function aF(n,t,e){const i=new xn("/.info/"+t),r=Ti(e);n.infoData_.updateSnapshot(i,r);const s=jC(n.infoSyncTree_,i,r);yl(n.eventQueue_,i,s)}function VA(n){return n.nextWriteId_++}function lF(n,t,e,i,r){mv(n,"set",{path:t.toString(),value:e,priority:i});const s=YC(n),c=Ti(e,i),d=RA(n.serverSyncTree_,t),p=JN(c,d,s),y=VA(n),C=$N(n.serverSyncTree_,t,p,y,!0);BA(n.eventQueue_,C),n.server_.put(t.toString(),c.val(!0),(M,L)=>{const j="ok"===M;j||Us("set at "+t+" failed: "+M);const le=Gf(n.serverSyncTree_,y,!j);yl(n.eventQueue_,t,le),zf(0,r,M,L)});const D=dF(n,t);gv(n,D),yl(n.eventQueue_,D,[])}function Gee(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&kN(n.onDisconnect_,t),zf(0,e,i,r)})}function k6(n,t,e,i){const r=Ti(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&dv(n.onDisconnect_,t,r),zf(0,i,s,c)})}function cF(n,t,e){let i;i=".info"===nn(t._path)?WN(n.infoSyncTree_,t,e):WN(n.serverSyncTree_,t,e),oF(n.eventQueue_,t._path,i)}function R6(n){n.persistentConnection_&&n.persistentConnection_.interrupt(S6)}function mv(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),zr(e,...t)}function zf(n,t,e,i){t&&sv(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function uF(n,t,e){return RA(n.serverSyncTree_,t,e)||Gt.EMPTY_NODE}function UA(n,t=n.transactionQueueTree_){if(t||HA(n,t),sg(t)){const e=P6(n,t);(0,H.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function Yee(n,t,e){const i=e.map(y=>y.currentWriteId),r=uF(n,t,i);let s=r;const c=r.hash();for(let y=0;y<e.length;y++){const C=e[y];(0,H.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=go(t,C.path);s=s.updateChild(D,C.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,y=>{mv(n,"transaction put response",{path:p.toString(),status:y});let C=[];if("ok"===y){const D=[];for(let M=0;M<e.length;M++)e[M].status=2,C=C.concat(Gf(n.serverSyncTree_,e[M].currentWriteId)),e[M].onComplete&&D.push(()=>e[M].onComplete(null,!0,e[M].currentOutputSnapshotResolved)),e[M].unwatcher();HA(n,NA(n.transactionQueueTree_,t)),UA(n,n.transactionQueueTree_),yl(n.eventQueue_,t,C);for(let M=0;M<D.length;M++)sv(D[M])}else{if("datastale"===y)for(let D=0;D<e.length;D++)e[D].status=3===e[D].status?4:0;else{Us("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<e.length;D++)e[D].status=4,e[D].abortReason=y}gv(n,t)}},c)}(n,zC(t),e)}else w6(t)&&FA(t,e=>{UA(n,e)})}function gv(n,t){const e=O6(n,t),i=zC(e);return function Kee(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],y=go(e,p.path);let D,C=!1;if((0,H.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,D=p.abortReason,r=r.concat(Gf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,D="maxretry",r=r.concat(Gf(n.serverSyncTree_,p.currentWriteId,!0));else{const M=uF(n,p.path,c);p.currentInputSnapshot=M;const L=t[d].update(M.val());if(void 0!==L){$C("transaction failed: Data returned ",L,p.path);let j=Ti(L);"object"==typeof L&&null!=L&&(0,H.r3)(L,".priority")||(j=j.updatePriority(M.getPriority()));const we=p.currentWriteId,Qe=YC(n),Je=JN(j,M,Qe);p.currentOutputSnapshotRaw=j,p.currentOutputSnapshotResolved=Je,p.currentWriteId=VA(n),c.splice(c.indexOf(we),1),r=r.concat($N(n.serverSyncTree_,p.path,Je,p.currentWriteId,p.applyLocally)),r=r.concat(Gf(n.serverSyncTree_,we,!0))}else C=!0,D="nodata",r=r.concat(Gf(n.serverSyncTree_,p.currentWriteId,!0))}yl(n.eventQueue_,e,r),r=[],C&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===D?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(D),!1,null)))}HA(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)sv(i[d]);UA(n,n.transactionQueueTree_)}(n,P6(n,e),i),i}function O6(n,t){let e,i=n.transactionQueueTree_;for(e=nn(t);null!==e&&void 0===sg(i);)i=NA(i,e),e=nn(t=Un(t));return i}function P6(n,t){const e=[];return N6(n,t,e),e.sort((i,r)=>i.order-r.order),e}function N6(n,t,e){const i=sg(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);FA(t,r=>{N6(n,r,e)})}function HA(n,t){const e=sg(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,nF(t,e.length>0?e:void 0)}FA(t,i=>{HA(n,i)})}function dF(n,t){const e=zC(O6(n,t)),i=NA(n.transactionQueueTree_,t);return function See(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{hF(n,r)}),hF(n,i),C6(i,r=>{hF(n,r)}),e}function hF(n,t){const e=sg(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,H.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,H.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(Gf(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?nF(t,void 0):e.length=s+1,yl(n.eventQueue_,zC(t),r);for(let c=0;c<i.length;c++)sv(i[c])}}const fF=function(n,t){const e=Jee(n),i=e.namespace;return"firebase.com"===e.domain&&Eu(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Eu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Us("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fN(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new xn(e.pathString)}},Jee=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),t=n.substring(0,Math.min(C,D)),C<D&&(r=function Qee(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}t+="/"+r}return t}(n.substring(C,D)));const M=function Xee(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Us(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,D)));y=t.indexOf(":"),y>=0?(c="https"===d||"wss"===d,p=parseInt(t.substring(y+1),10)):y=t.length;const L=t.slice(0,y);if("localhost"===L.toLowerCase())e="localhost";else if(L.split(".").length<=2)e=L;else{const j=t.indexOf(".");i=t.substring(0,j).toLowerCase(),e=t.substring(j+1),s=i}"ns"in M&&(s=M.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class F6{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,H.Pz)(this.snapshot.exportVal())}}class L6{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class B6{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,H.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class V6{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new H.BH;return Gee(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){_l("OnDisconnect.remove",this._path);const t=new H.BH;return k6(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){_l("OnDisconnect.set",this._path),Iu("OnDisconnect.set",t,this._path,!1);const e=new H.BH;return k6(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){_l("OnDisconnect.setWithPriority",this._path),Iu("OnDisconnect.setWithPriority",t,this._path,!1),sF("OnDisconnect.setWithPriority",e,!1);const i=new H.BH;return function zee(n,t,e,i,r){const s=Ti(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&dv(n.onDisconnect_,t,s),zf(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){_l("OnDisconnect.update",this._path),D6("OnDisconnect.update",t,this._path,!1);const e=new H.BH;return function qee(n,t,e,i){if((0,H.xb)(e))return zr("onDisconnect().update() called with empty data.  Don't do anything."),void zf(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&qr(e,(c,d)=>{const p=Ti(d);dv(n.onDisconnect_,gi(t,c),p)}),zf(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class jo{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return rn(this._path)?null:vN(this._path)}get ref(){return new vl(this._repo,this._path)}get _queryIdentifier(){const t=GG(this._queryParams),e=uN(t);return"{}"===e?"default":e}get _queryObject(){return GG(this._queryParams)}isEqual(t){if(!((t=(0,H.m9)(t))instanceof jo))return!1;const e=this._repo===t._repo,i=bN(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function jX(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function jA(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function qf(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Tu){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Od)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Du)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Wn){if(null!=t&&!qC(t)||null!=e&&!qC(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,H.hu)(n.getIndex()instanceof TN||n.getIndex()===IN,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function GA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class vl extends jo{constructor(t,e){super(t,e,new yA,!1)}get parent(){const t=SG(this._path);return null===t?null:new vl(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class og{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new xn(t),i=ag(this.ref,t);return new og(this._node.getChild(e),i,Wn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new og(r,ag(this.ref,i),Wn)))}hasChild(t){const e=new xn(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function U6(n,t){return(n=(0,H.m9)(n))._checkNotDeleted("ref"),void 0!==t?ag(n._root,t):n._root}function H6(n,t){(n=(0,H.m9)(n))._checkNotDeleted("refFromURL");const e=fF(t,n._repo.repoInfo_.nodeAdmin);T6("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Eu("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),U6(n,e.path.toString())}function ag(n,t){return null===nn((n=(0,H.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ZC("child","path",e,!1)):ZC("child","path",t,!1),new vl(n._repo,gi(n._path,t));var e}function pF(n,t){n=(0,H.m9)(n),_l("set",n._path),Iu("set",t,n._path,!1);const e=new H.BH;return lF(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function rte(n,t){D6("update",t,n._path,!1);const e=new H.BH;return function Hee(n,t,e,i){mv(n,"update",{path:t.toString(),value:e});let r=!0;const s=YC(n),c={};if(qr(e,(d,p)=>{r=!1,c[d]=b6(gi(t,d),Ti(p),n.serverSyncTree_,s)}),r)zr("update() called with empty data.  Don't do anything."),zf(0,i,"ok",void 0);else{const d=VA(n),p=function hee(n,t,e,i){!function xJ(n,t,e,i){(0,H.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=LN(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Zn.fromObject(e);return pv(n,new hv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);BA(n.eventQueue_,p),n.server_.merge(t.toString(),e,(y,C)=>{const D="ok"===y;D||Us("update at "+t+" failed: "+y);const M=Gf(n.serverSyncTree_,d,!D),L=M.length>0?gv(n,t):t;yl(n.eventQueue_,L,M),zf(0,i,y,C)}),qr(e,y=>{const C=dF(n,gi(t,y));gv(n,C)}),yl(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function ste(n){return function Uee(n,t){const e=function yee(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(y,C)=>{const D=go(y,e);i=i||Hf(C,D)});let r=n.syncPointTree_.get(e);r?i=i||Hf(r,En()):(r=new c6,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new Vf(i,!0,!1):null;return function eee(n){return DA(n.viewCache_)}(u6(r,t,TA(n.pendingWriteTree_,t._path),s?c.getNode():Gt.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(i=>{const r=Ti(i).withIndex(t._queryParams.getIndex()),s=jC(n.serverSyncTree_,t._path,r);return oF(n.eventQueue_,t._path,s),Promise.resolve(r)},i=>(mv(n,"get for query "+(0,H.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,H.m9)(n))._repo,n).then(t=>new og(t,new vl(n._repo,n._path),n._queryParams.getIndex()))}class zA{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new F6("value",this,new og(t.snapshotNode,new vl(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new L6(this,t,e):null}matches(t){return t instanceof zA&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class qA{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new L6(this,t,e):null}createEvent(t,e){(0,H.hu)(null!=t.childName,"Child events should have a childName.");const i=ag(new vl(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new F6(t.type,this,new og(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof qA&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function KC(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,y=(C,D)=>{cF(n._repo,n,d),p(C,D)};y.userCallback=e.userCallback,y.context=e.context,e=y}const c=new B6(e,s||void 0),d="value"===t?new zA(c):new qA(t,c);return function $ee(n,t,e){let i;i=".info"===nn(t._path)?m6(n.infoSyncTree_,t,e):m6(n.serverSyncTree_,t,e),oF(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>cF(n._repo,n,d)}function mF(n,t,e,i){return KC(n,"value",t,e,i)}function j6(n,t,e,i){return KC(n,"child_added",t,e,i)}function G6(n,t,e,i){return KC(n,"child_changed",t,e,i)}function z6(n,t,e,i){return KC(n,"child_moved",t,e,i)}function q6(n,t,e,i){return KC(n,"child_removed",t,e,i)}function $6(n,t,e){let i=null;const r=e?new B6(e):null;"value"===t?i=new zA(r):t&&(i=new qA(t,r)),cF(n._repo,n,i)}class cc{}class W6 extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Iu("endAt",this._value,t._path,!0);const e=MN(t._queryParams,this._value,this._key);if(GA(e),qf(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jo(t._repo,t._path,e,t._orderByCalled)}}class ate extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Iu("endBefore",this._value,t._path,!1);const e=function gJ(n,t,e){let i,r;return n.index_===Tu?("string"==typeof t&&(t=UG(t)),r=MN(n,t,e)):(i=null==e?Od:UG(e),r=MN(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(GA(e),qf(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new jo(t._repo,t._path,e,t._orderByCalled)}}class Z6 extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Iu("startAt",this._value,t._path,!0);const e=xN(t._queryParams,this._value,this._key);if(GA(e),qf(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new jo(t._repo,t._path,e,t._orderByCalled)}}class ute extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Iu("startAfter",this._value,t._path,!1);const e=function mJ(n,t,e){let i;if(n.index_===Tu)"string"==typeof t&&(t=VG(t)),i=xN(n,t,e);else{let r;r=null==e?Du:VG(e),i=xN(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(GA(e),qf(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new jo(t._repo,t._path,e,t._orderByCalled)}}class hte extends cc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new jo(t._repo,t._path,function fJ(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class pte extends cc{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new jo(t._repo,t._path,function pJ(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class gte extends cc{constructor(t){super(),this._path=t}_apply(t){jA(t,"orderByChild");const e=new xn(this._path);if(rn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new TN(e),r=vA(t._queryParams,i);return qf(r),new jo(t._repo,t._path,r,!0)}}class yte extends cc{_apply(t){jA(t,"orderByKey");const e=vA(t._queryParams,Tu);return qf(e),new jo(t._repo,t._path,e,!0)}}class bte extends cc{_apply(t){jA(t,"orderByPriority");const e=vA(t._queryParams,Wn);return qf(e),new jo(t._repo,t._path,e,!0)}}class Cte extends cc{_apply(t){jA(t,"orderByValue");const e=vA(t._queryParams,IN);return qf(e),new jo(t._repo,t._path,e,!0)}}class Dte extends cc{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Iu("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new W6(this._value,this._key)._apply(new Z6(this._value,this._key)._apply(t))}}function uc(n,...t){let e=(0,H.m9)(n);for(const i of t)e=i._apply(e);return e}(function ree(n){(0,H.hu)(!xA,"__referenceConstructor has already been defined"),xA=n})(vl),function cee(n){(0,H.hu)(!kA,"__referenceConstructor has already been defined"),kA=n}(vl);const gF={};function K6(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Eu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=fF(s,r),d=c.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${d.namespace}`,c=fF(s,r),d=c.repoInfo):p=!c.repoInfo.secure;const C=r&&p?new MC(MC.OWNER):new _X(n.name,n.options,t);T6("Invalid Firebase Database URL",c),rn(c.path)||Eu("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function xte(n,t,e,i){let r=gF[t.name];r||(r={},gF[t.name]=r);let s=r[n.toURLString()];return s&&Eu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Lee(n,false,e,i),r[n.toURLString()]=s,s}(d,n,C,new gX(n.name,e));return new kte(D,n)}class kte{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Bee(n,t,e){if(n.stats_=gN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new bA(n.repoInfo_,(i,r,s,c)=>{x6(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>M6(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,H.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new tg(n.repoInfo_,t,(i,r,s,c)=>{x6(n,i,r,s,c)},i=>{M6(n,i)},i=>{!function Vee(n,t){qr(t,(e,i)=>{aF(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function bX(n,t){const e=n.toString();return mN[e]||(mN[e]=t()),mN[e]}(n.repoInfo_,()=>new CJ(n.stats_,n.server_)),n.infoData_=new _J,n.infoSyncTree_=new p6({startListening:(i,r,s,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=jC(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),aF(n,"connected",!1),n.serverSyncTree_=new p6({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,p)=>{const y=c(d,p);yl(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vl(this._repo,En())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ate(n,t){const e=gF[t];(!e||e[n.key]!==n)&&Eu(`Database ${t}(${n.repoInfo_}) has already been deleted.`),R6(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Eu("Cannot call "+t+" on a deleted database.")}}function Q6(){mG.IS_TRANSPORT_INITIALIZED&&Us("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Rte(){Q6(),Lf.forceDisallow()}function Ote(){Q6(),ov.forceDisallow(),Lf.forceAllow()}function Lte(n,t){Yj(n,t)}const Vte={".sv":"timestamp"};class jte{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}tg.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},tg.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function Bte(n){zj(ao.SDK_VERSION),(0,ao._registerComponent)(new tc.wA("database",(t,{instanceIdentifier:e})=>K6(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,ao.registerVersion)(jj,"0.13.0",n),(0,ao.registerVersion)(jj,"0.13.0","esm2017")}();const $te=new nc.Yd("@firebase/database-compat"),X6=function(n){$te.warn("FIREBASE WARNING: "+n)};class Yte{constructor(t){this._delegate=t}cancel(t){(0,H.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,H.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,H.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,H.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,H.Dv)("OnDisconnect.set",1,2,arguments.length),(0,H.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,H.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,H.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,H.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,X6("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,H.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class Kte{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,H.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class $f{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,H.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,H.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,H.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,H.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,H.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),ZC("DataSnapshot.child","path",t,!1),new $f(this._database,this._delegate.child(t))}hasChild(t){return(0,H.Dv)("DataSnapshot.hasChild",1,1,arguments.length),ZC("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,H.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,H.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,H.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new $f(this._database,e)))}hasChildren(){return(0,H.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,H.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,H.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ia(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ds{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,H.Dv)("Query.on",2,4,arguments.length),(0,H.Wj)("Query.on","callback",e,!1);const c=ds.getCancelAndContextArgs_("Query.on",i,r),d=(y,C)=>{e.call(c.context,new $f(this.database,y),C)};d.userCallback=e,d.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return mF(this._delegate,d,p),e;case"child_added":return j6(this._delegate,d,p),e;case"child_removed":return q6(this._delegate,d,p),e;case"child_changed":return G6(this._delegate,d,p),e;case"child_moved":return z6(this._delegate,d,p),e;default:throw new Error((0,H.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,H.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,H.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,H.Wj)("Query.off","callback",e,!0),(0,H.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,$6(this._delegate,t,r)}else $6(this._delegate,t)}get(){return ste(this._delegate).then(t=>new $f(this.database,t))}once(t,e,i,r){(0,H.Dv)("Query.once",1,4,arguments.length),(0,H.Wj)("Query.once","callback",e,!0);const s=ds.getCancelAndContextArgs_("Query.once",i,r),c=new H.BH,d=(y,C)=>{const D=new $f(this.database,y);e&&e.call(s.context,D,C),c.resolve(D)};d.userCallback=e,d.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(t){case"value":mF(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":j6(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":q6(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":G6(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":z6(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,H.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,H.Dv)("Query.limitToFirst",1,1,arguments.length),new ds(this.database,uc(this._delegate,function fte(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new hte(n)}(t)))}limitToLast(t){return(0,H.Dv)("Query.limitToLast",1,1,arguments.length),new ds(this.database,uc(this._delegate,function mte(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new pte(n)}(t)))}orderByChild(t){return(0,H.Dv)("Query.orderByChild",1,1,arguments.length),new ds(this.database,uc(this._delegate,function _te(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ZC("orderByChild","path",n,!1),new gte(n)}(t)))}orderByKey(){return(0,H.Dv)("Query.orderByKey",0,0,arguments.length),new ds(this.database,uc(this._delegate,function vte(){return new yte}()))}orderByPriority(){return(0,H.Dv)("Query.orderByPriority",0,0,arguments.length),new ds(this.database,uc(this._delegate,function wte(){return new bte}()))}orderByValue(){return(0,H.Dv)("Query.orderByValue",0,0,arguments.length),new ds(this.database,uc(this._delegate,function Ete(){return new Cte}()))}startAt(t=null,e){return(0,H.Dv)("Query.startAt",0,2,arguments.length),new ds(this.database,uc(this._delegate,function cte(n=null,t){return WC("startAt","key",t,!0),new Z6(n,t)}(t,e)))}startAfter(t=null,e){return(0,H.Dv)("Query.startAfter",0,2,arguments.length),new ds(this.database,uc(this._delegate,function dte(n,t){return WC("startAfter","key",t,!0),new ute(n,t)}(t,e)))}endAt(t=null,e){return(0,H.Dv)("Query.endAt",0,2,arguments.length),new ds(this.database,uc(this._delegate,function ote(n,t){return WC("endAt","key",t,!0),new W6(n,t)}(t,e)))}endBefore(t=null,e){return(0,H.Dv)("Query.endBefore",0,2,arguments.length),new ds(this.database,uc(this._delegate,function lte(n,t){return WC("endBefore","key",t,!0),new ate(n,t)}(t,e)))}equalTo(t,e){return(0,H.Dv)("Query.equalTo",1,2,arguments.length),new ds(this.database,uc(this._delegate,function Tte(n,t){return WC("equalTo","key",t,!0),new Dte(n,t)}(t,e)))}toString(){return(0,H.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,H.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,H.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof ds))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,H.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,H.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,H.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Ia(this.database,new vl(this._delegate._repo,this._delegate._path))}}class Ia extends ds{constructor(t,e){super(t,new jo(e._repo,e._path,new yA,!1)),this.database=t,this._delegate=e}getKey(){return(0,H.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,H.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Ia(this.database,ag(this._delegate,t))}getParent(){(0,H.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Ia(this.database,t):null}getRoot(){return(0,H.Dv)("Reference.root",0,0,arguments.length),new Ia(this.database,this._delegate.root)}set(t,e){(0,H.Dv)("Reference.set",1,2,arguments.length),(0,H.Wj)("Reference.set","onComplete",e,!0);const i=pF(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,H.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,X6("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_l("Reference.update",this._delegate._path),(0,H.Wj)("Reference.update","onComplete",e,!0);const i=rte(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,H.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,H.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function ite(n,t,e){if(_l("setWithPriority",n._path),Iu("setWithPriority",t,n._path,!1),sF("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new H.BH;return lF(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,H.Dv)("Reference.remove",0,1,arguments.length),(0,H.Wj)("Reference.remove","onComplete",t,!0);const e=function tte(n){return _l("remove",n._path),pF(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,H.Dv)("Reference.transaction",1,3,arguments.length),(0,H.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,H.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,H.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function Gte(n,t,e){var i;if(n=(0,H.m9)(n),_l("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==e?void 0:e.applyLocally)||void 0===i||i,s=new H.BH,d=mF(n,()=>{});return function Zee(n,t,e,i,r,s){mv(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:$j(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=uF(n,t,void 0);c.currentInputSnapshot=d;const p=c.update(d.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{$C("transaction failed: Data returned ",p,c.path),c.status=0;const y=NA(n.transactionQueueTree_,t),C=sg(y)||[];let D;C.push(c),nF(y,C),"object"==typeof p&&null!==p&&(0,H.r3)(p,".priority")?(D=(0,H.DV)(p,".priority"),(0,H.hu)(qC(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(RA(n.serverSyncTree_,t)||Gt.EMPTY_NODE).getPriority().val();const M=YC(n),L=Ti(p,D),j=JN(L,d,M);c.currentOutputSnapshotRaw=L,c.currentOutputSnapshotResolved=j,c.currentWriteId=VA(n);const le=$N(n.serverSyncTree_,t,j,c.currentWriteId,c.applyLocally);yl(n.eventQueue_,t,le),UA(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,y,C)=>{let D=null;p?s.reject(p):(D=new og(C,new vl(n._repo,n._path),Wn),s.resolve(new jte(y,D)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new Kte(s.committed,new $f(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,H.Dv)("Reference.setPriority",1,2,arguments.length),(0,H.Wj)("Reference.setPriority","onComplete",e,!0);const i=function nte(n,t){n=(0,H.m9)(n),_l("setPriority",n._path),sF("setPriority",t,!1);const e=new H.BH;return lF(n._repo,gi(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,H.Dv)("Reference.push",0,2,arguments.length),(0,H.Wj)("Reference.push","onComplete",e,!0);const i=function ete(n,t){n=(0,H.m9)(n),_l("push",n._path),Iu("push",t,n._path,!0);const e=A6(n._repo),i=cJ(e),r=ag(n,i),s=ag(n,i);let c;return c=null!=t?pF(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new Ia(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new Ia(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return _l("Reference.onDisconnect",this._delegate._path),new Yte(new V6(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class QC{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Rte,forceLongPolling:Ote}}useEmulator(t,e,i={}){!function Pte(n,t,e,i={}){(n=(0,H.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Eu("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Eu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new MC(MC.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,H.Sg)(i.mockUserToken,n.app.options.projectId);s=new MC(c)}!function Ste(n,t,e,i){n.repoInfo_=new fN(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,H.Dv)("database.ref",0,1,arguments.length),t instanceof Ia){const e=H6(this._delegate,t.toString());return new Ia(this,e)}{const e=U6(this._delegate,t);return new Ia(this,e)}}refFromURL(t){(0,H.Dv)("database.refFromURL",1,1,arguments.length);const i=H6(this._delegate,t);return new Ia(this,i)}goOffline(){return(0,H.Dv)("database.goOffline",0,0,arguments.length),function Nte(n){(n=(0,H.m9)(n))._checkNotDeleted("goOffline"),R6(n._repo)}(this._delegate)}goOnline(){return(0,H.Dv)("database.goOnline",0,0,arguments.length),function Fte(n){(n=(0,H.m9)(n))._checkNotDeleted("goOnline"),function Wee(n){n.persistentConnection_&&n.persistentConnection_.resume(S6)}(n._repo)}(this._delegate)}}QC.ServerValue={TIMESTAMP:function Ute(){return Vte}(),increment:n=>function Hte(n){return{".sv":{increment:n}}}(n)};var Xte=Object.freeze({__proto__:null,initStandalone:function Qte({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){zj(e);const c=new tc.zt("auth-internal",new tc.H0("database-standalone"));return c.setComponent(new tc.wA("auth-internal",()=>i,"PRIVATE")),{instance:new QC(K6(n,c,void 0,t,s),n),namespace:r}}});const Jte=QC.ServerValue;function J6(n){return null==n}function ez(n){return"function"==typeof n.set}function tz(n,t){return ez(t)?t:n.ref(t)}function nz(n,t){if(function tne(n){return"string"==typeof n}(n))return t.stringCase();if(ez(n))return t.firebaseCase();if(function nne(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function XC(n,t,e="on",i=Qh.z){return new v.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,Ce.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,lP.B)())}function iz(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function sne(n,t){const{payload:e,prevKey:i,key:r}=t,s=iz(n,r),c=function rne(n,t){if(J6(t))return 0;{const e=iz(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function rz(n){return(J6(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function sz(n,t,e){return function ine(n,t,e){return XC(n,"value","once",e).pipe(ii(i=>{const r=[ot(i)];return t.forEach(s=>r.push(XC(n,s,"on",e))),(0,Lr.T)(...r).pipe(to(sne,[]))}),Kp())}(n,t=rz(t),e)}function oz(n,t,e){const i=(t=rz(t)).map(r=>XC(n,r,"on",e));return(0,Lr.T)(...i)}function az(n,t){return function(i,r){return nz(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function cne(n){return function(e){return e?nz(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function lz(n,t){return function(){return XC(n,"value","on",t)}}!function ene(n){n.INTERNAL.registerComponent(new tc.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new QC(r,i)},"PUBLIC").setServiceProps({Reference:Ia,Query:ds,Database:QC,DataSnapshot:$f,enableLogging:Lte,INTERNAL:Xte,ServerValue:Jte}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(uR.Z);const hne=new o.OlP("angularfire2.realtimeDatabaseURL"),fne=new o.OlP("angularfire2.database.use-emulator");let pne=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C,D,M,L,j,le,we){this.schedulers=d;const Qe=p,Je=(0,Cr.on)(e,c,i);y&&PP(Je,c,C,M,L,j,D,le),this.database=(0,Cr.cc)(`${Je.name}.database.${r}`,"AngularFireDatabase",Je.name,()=>{const Ze=c.runOutsideAngular(()=>Je.database(r||void 0));return Qe&&Ze.useEmulator(...Qe),Ze},[Qe])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>tz(this.database,e));let s=r;return i&&(s=i(r)),function une(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:az(i,"update"),set:az(i,"set"),push:r=>i.push(r),remove:cne(i),snapshotChanges:r=>sz(n,r,e).pipe(Tn.iC),stateChanges:r=>oz(n,r,e).pipe(Tn.iC),auditTrail:r=>function one(n,t,e){return function lne(n,t,e){return function ane(n,t){return XC(n,"value","on",t).pipe((0,Ce.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(function rX(...n){const t=(0,jl.jO)(n);return(0,wi.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,Po.Xf)(n[p]).subscribe((0,on.x)(i,y=>{s[p]=y,!d&&!c[p]&&(c[p]=!0,(d=c.every(Ee.y))&&(c=null))},vD.Z));e.subscribe((0,on.x)(i,p=>{if(d){const y=[p,...s];i.next(t?t(...y):y)}}))})}(t),(0,Ce.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function sX(n){return(0,wi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,on.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Ce.U)(r=>r.actions))}(n,oz(n,t).pipe(to((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(Tn.iC),valueChanges:(r,s)=>sz(n,r,e).pipe((0,Ce.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),Tn.iC)}}(s,this)}object(e){return function dne(n,t){return{query:n,snapshotChanges:()=>lz(n,t.schedulers.outsideAngular)().pipe(Tn.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>lz(n,t.schedulers.outsideAngular)().pipe(Tn.iC,(0,Ce.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>tz(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Cr.Dh),o.LFG(Cr.xv,8),o.LFG(hne,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Tn.HU),o.LFG(fne,8),o.LFG(HS,8),o.LFG(AP,8),o.LFG(xP,8),o.LFG(MP,8),o.LFG(kP,8),o.LFG(RP,8),o.LFG(OP,8),o.LFG(cC,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),mne=(()=>{class n{constructor(){SP.Z.registerVersion("angularfire",Tn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[pne]}),n})();const cz="firebasestorage.googleapis.com",uz="storageBucket";class Li extends H.ZR{constructor(t,e){super(_F(t),`Firebase Storage: ${e} (${_F(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Li.prototype)}_codeEquals(t){return _F(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function _F(n){return"storage/"+n}function yF(){return new Li("unknown","An unknown error occurred, please check the error payload for server response.")}function dz(){return new Li("canceled","User canceled the upload/download.")}function hz(){return new Li("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function _v(n){return new Li("invalid-argument",n)}function fz(){return new Li("app-deleted","The Firebase app was deleted.")}function pz(n){return new Li("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function JC(n,t){return new Li("invalid-format","String does not match format '"+n+"': "+t)}function eE(n){throw new Li("internal-error","Internal error: "+n)}class Hs{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Hs.makeFromUrl(t,e)}catch(r){return new Hs(t,"")}if(""===i.path)return i;throw function Tne(n){return new Li("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(We){We.path_=decodeURIComponent(We.path)}const D=e.replace(/[.]/g,"\\."),Ze=[{regex:d,indices:{bucket:1,path:3},postModify:function s(We){"/"===We.path.charAt(We.path.length-1)&&(We.path_=We.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${e===cz?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let We=0;We<Ze.length;We++){const kt=Ze[We],Pt=kt.regex.exec(t);if(Pt){let Yi=Pt[kt.indices.path];Yi||(Yi=""),i=new Hs(Pt[kt.indices.bucket],Yi),kt.postModify(i);break}}if(null==i)throw function Dne(n){return new Li("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class xne{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function $A(n){return"string"==typeof n||n instanceof String}function mz(n){return vF()&&n instanceof Blob}function vF(){return"undefined"!=typeof Blob}function bF(n,t,e,i){if(i<t)throw _v(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw _v(`Invalid value for '${n}'. Expected ${e} or less.`)}function Nd(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function gz(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var Wf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Wf||(Wf={})),Wf))();class Nne{constructor(t,e,i,r,s,c,d,p,y,C,D){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=C,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,L)=>{this.resolve_=M,this.reject_=L,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function Rne(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==d){const p=yF();p.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,p):p)}else c(r.canceled?this.appDelete_?fz():dz():function Ene(){return new Li("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new WA(!1,null,!0)):this.backoffId_=function Mne(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function p(){return 2===d}let y=!1;function C(...we){y||(y=!0,t.apply(null,we))}function D(we){r=setTimeout(()=>{r=null,n(L,p())},we)}function M(){s&&clearTimeout(s)}function L(we,...Qe){if(y)return void M();if(we)return M(),void C.call(null,we,...Qe);if(p()||c)return M(),void C.call(null,we,...Qe);let Ze;i<64&&(i*=2),1===d?(d=2,Ze=0):Ze=1e3*(i+Math.random()),D(Ze)}let j=!1;function le(we){j||(j=!0,M(),!y&&(null!==r?(we||(d=2),clearTimeout(r),D(0)):we||(d=1)))}return D(0),s=setTimeout(()=>{c=!0,le(!0)},e),le}((i,r)=>{if(r)return void i(!1,new WA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===Wf.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const C=s.getErrorCode()===Wf.ABORT;return void i(!1,new WA(!1,null,C))}const y=-1!==this.successCodes_.indexOf(p);i(!0,new WA(y,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function kne(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),s=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||s}}class WA{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function jne(...n){const t=function Hne(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(vF())return new Blob(n);throw new Li("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Sa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wF{constructor(t,e){this.data=t,this.contentType=e||null}}function CF(n,t){switch(n){case Sa.RAW:return new wF(_z(t));case Sa.BASE64:case Sa.BASE64URL:return new wF(yz(n,t));case Sa.DATA_URL:return new wF(function $ne(n){const t=new vz(n);return t.base64?yz(Sa.BASE64,t.rest):function qne(n){let t;try{t=decodeURIComponent(n)}catch(e){throw JC(Sa.DATA_URL,"Malformed data URL.")}return _z(t)}(t.rest)}(t),function Wne(n){return new vz(n).contentType}(t))}throw yF()}function _z(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function yz(n,t){switch(n){case Sa.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw JC(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Sa.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw JC(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function zne(n){return atob(n)}(t)}catch(r){throw JC(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class vz{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw JC(Sa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function Zne(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Su{constructor(t,e){let i=0,r="";mz(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(mz(this.data_)){const r=function Gne(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Su(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Su(i,!0)}}static getBlob(...t){if(vF()){const e=t.map(i=>i instanceof Su?i.data_:i);return new Su(jne.apply(null,e))}{const e=t.map(c=>$A(c)?CF(Sa.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new Su(r,!0)}}uploadData(){return this.data_}}function EF(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function Pne(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function bz(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function Qne(n,t){return t}class _o{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||Qne}}let ZA=null;function tE(){if(ZA)return ZA;const n=[];n.push(new _o("bucket")),n.push(new _o("generation")),n.push(new _o("metageneration")),n.push(new _o("name","fullPath",!0));const e=new _o("name");e.xform=function t(s,c){return function Xne(n){return!$A(n)||n.length<2?n:bz(n)}(c)},n.push(e);const r=new _o("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new _o("timeCreated")),n.push(new _o("updated")),n.push(new _o("md5Hash",null,!0)),n.push(new _o("cacheControl",null,!0)),n.push(new _o("contentDisposition",null,!0)),n.push(new _o("contentEncoding",null,!0)),n.push(new _o("contentLanguage",null,!0)),n.push(new _o("contentType",null,!0)),n.push(new _o("metadata","customMetadata",!0)),ZA=n,ZA}function wz(n,t,e){const i=EF(t);return null===i?null:function eie(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function Jne(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new Hs(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function DF(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const Cz="prefixes";class Au{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function xu(n){if(!n)throw yF()}function YA(n,t){return function e(i,r){const s=wz(n,r,t);return xu(null!==s),s}}function yv(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function wne(){return new Li("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function bne(){return new Li("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function vne(n){return new Li("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Cne(n){return new Li("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function nE(n){const t=yv(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function yne(n){return new Li("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function Dz(n,t,e){const r=Nd(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Au(r,"GET",YA(n,e),c);return d.errorHandler=nE(t),d}function oie(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=Nd(t.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,C=new Au(d,"GET",function rie(n,t){return function e(i,r){const s=function iie(n,t,e){const i=EF(e);return null===i?null:function nie(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[Cz])for(const r of e[Cz]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Hs(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new Hs(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return xu(null!==s),s}}(n,t.bucket),y);return C.urlParams=s,C.errorHandler=yv(t),C}function Iz(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function uie(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class KA{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function TF(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){xu(!1)}return xu(!!e&&-1!==(t||["active"]).indexOf(e)),e}const pie={STATE_CHANGED:"state_changed"},yo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function IF(n){switch(n){case"running":case"pausing":case"canceling":return yo.RUNNING;case"paused":return yo.PAUSED;case"success":return yo.SUCCESS;case"canceled":return yo.CANCELED;default:return yo.ERROR}}class mie{constructor(t,e,i){if(function One(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=i?i:void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function vv(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class _ie extends class gie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wf.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wf.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wf.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw eE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw eE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw eE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw eE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw eE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function dc(){return new _ie}class Mz{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=tE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function die(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=Iz(t,i,r),d={name:c.fullPath},p=Nd(s,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},D=DF(c,e),j=new Au(p,"POST",function L(le){let we;TF(le);try{we=le.getResponseHeader("X-Goog-Upload-URL")}catch(Qe){xu(!1)}return xu($A(we)),we},n.maxUploadRetryTime);return j.urlParams=d,j.headers=C,j.body=D,j.errorHandler=yv(t),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,dc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function hie(n,t,e,i){const p=new Au(e,"POST",function s(y){const C=TF(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(L){xu(!1)}D||xu(!1);const M=Number(D);return xu(!isNaN(M)),new KA(M,i.size(),"final"===C)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=yv(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,dc,e,i);this._request=s,s.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new KA(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function fie(n,t,e,i,r,s,c,d){const p=new KA(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function Sne(){return new Li("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let C=y;r>0&&(C=Math.min(C,r));const D=p.current,j={"X-Goog-Upload-Command":C===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},le=i.slice(D,D+C);if(null===le)throw hz();const Ze=new Au(e,"POST",function we(We,kt){const Pt=TF(We,["active","final"]),cn=p.current+C,Yi=i.size();let Aa;return Aa="final"===Pt?YA(t,s)(We,kt):null,new KA(cn,Yi,"final"===Pt,Aa)},t.maxUploadRetryTime);return Ze.headers=j,Ze.body=le.uploadData(),Ze.progressCallback=d||null,Ze.errorHandler=yv(n),Ze}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(c,dc,r,s);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=Dz(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,dc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function Sz(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let Ze="";for(let We=0;We<2;We++)Ze+=Math.random().toString().slice(2);return Ze}();c["Content-Type"]="multipart/related; boundary="+p;const y=Iz(t,i,r),C=DF(y,e),L=Su.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===L)throw hz();const j={name:y.fullPath},le=Nd(s,n.host,n._protocol),Qe=n.maxUploadRetryTime,Je=new Au(le,"POST",YA(n,e),Qe);return Je.urlParams=j,Je.headers=c,Je.body=L.uploadData(),Je.errorHandler=yv(t),Je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,dc,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=dz(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=IF(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new mie(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(IF(this._state)){case yo.SUCCESS:vv(this._resolve.bind(null,this.snapshot))();break;case yo.CANCELED:case yo.ERROR:vv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(IF(this._state)){case yo.RUNNING:case yo.PAUSED:t.next&&vv(t.next.bind(t,this.snapshot))();break;case yo.SUCCESS:t.complete&&vv(t.complete.bind(t))();break;default:t.error&&vv(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class lg{constructor(t,e){this._service=t,this._location=e instanceof Hs?e:Hs.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new lg(t,e)}get root(){const t=new Hs(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return bz(this._location.path)}get storage(){return this._service}get parent(){const t=function Yne(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Hs(this._location.bucket,t);return new lg(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw pz(t)}}function Rz(n,t,e){return SF.apply(this,arguments)}function SF(){return SF=(0,Ie.Z)(function*(n,t,e){const r=yield Oz(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield Rz(n,t,r.nextPageToken))}),SF.apply(this,arguments)}function Oz(n,t){null!=t&&"number"==typeof t.maxResults&&bF("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=oie(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,dc)}function xie(n){n._throwIfRoot("getDownloadURL");const t=function aie(n,t,e){const r=Nd(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Au(r,"GET",function sie(n,t){return function e(i,r){const s=wz(n,r,t);return xu(null!==s),function tie(n,t,e,i){const r=EF(t);if(null===r||!$A(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const D=n.fullPath;return Nd("/b/"+c(n.bucket)+"/o/"+c(D),e,i)+gz({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=nE(t),d}(n.storage,n._location,tE());return n.storage.makeRequestWithTokens(t,dc).then(e=>{if(null===e)throw function Ane(){return new Li("no-download-url","The given file does not have any download URLs.")}();return e})}function Pz(n,t){const e=function Kne(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new Hs(n._location.bucket,e);return new lg(n.storage,i)}function Nz(n,t){if(n instanceof AF){const e=n;if(null==e._bucket)throw function Ine(){return new Li("no-default-bucket","No default bucket found. Did you set the '"+uz+"' property when initializing the app?")}();const i=new lg(e,e._bucket);return null!=t?Nz(i,t):i}return void 0!==t?Pz(n,t):n}function Oie(n,t){if(t&&function kie(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof AF)return function Rie(n,t){return new lg(n,t)}(n,t);throw _v("To use ref(service, url), the first argument must be a Storage instance.")}return Nz(n,t)}function Fz(n,t){const e=null==t?void 0:t[uz];return null==e?null:Hs.makeFromBucketSpec(e,n)}class AF{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=cz,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Hs.makeFromBucketSpec(r,this._host):Fz(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Hs.makeFromBucketSpec(this._url,t):Fz(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){bF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){bF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Ie.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Ie.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new lg(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new xne(fz());{const s=function Une(n,t,e,i,r,s){const c=gz(n.urlParams),d=n.url+c,p=Object.assign({},n.headers);return function Bne(n,t){t&&(n["X-Firebase-GMPID"]=t)}(p,t),function Fne(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(p,e),function Lne(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(p,s),function Vne(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(p,i),new Nne(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var i=this;return(0,Ie.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const Lz="@firebase/storage";function Uz(n,t){return Oie(n=(0,H.m9)(n),t)}function zie(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new AF(e,i,r,t,ao.SDK_VERSION)}!function qie(){(0,ao._registerComponent)(new tc.wA("storage",zie,"PUBLIC").setMultipleInstances(!0)),(0,ao.registerVersion)(Lz,"0.9.6",""),(0,ao.registerVersion)(Lz,"0.9.6","esm2017")}();class QA{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Hz{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new QA(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new QA(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new QA(c,this,this._ref)):{next:e.next?c=>e.next(new QA(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class jz{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Fd(t,this._service))}get items(){return this._delegate.items.map(t=>new Fd(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Fd{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function jie(n,t){return Pz(n,t)}(this._delegate,t);return new Fd(e,this.storage)}get root(){return new Fd(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Fd(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new Hz(function Nie(n,t,e){return function Die(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new Mz(n,new Su(t),e)}(n=(0,H.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Sa.RAW,i){this._throwIfRoot("putString");const r=CF(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new Hz(new Mz(this._delegate,new Su(r.data,!0),s),this)}listAll(){return function Vie(n){return function Iie(n){const t={prefixes:[],items:[]};return Rz(n,t).then(()=>t)}(n=(0,H.m9)(n))}(this._delegate).then(t=>new jz(t,this.storage))}list(t){return function Bie(n,t){return Oz(n=(0,H.m9)(n),t)}(this._delegate,t||void 0).then(e=>new jz(e,this.storage))}getMetadata(){return function Fie(n){return function Sie(n){n._throwIfRoot("getMetadata");const t=Dz(n.storage,n._location,tE());return n.storage.makeRequestWithTokens(t,dc)}(n=(0,H.m9)(n))}(this._delegate)}updateMetadata(t){return function Lie(n,t){return function Aie(n,t){n._throwIfRoot("updateMetadata");const e=function lie(n,t,e,i){const s=Nd(t.fullServerUrl(),n.host,n._protocol),d=DF(e,i),y=n.maxOperationRetryTime,C=new Au(s,"PATCH",YA(n,i),y);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=d,C.errorHandler=nE(t),C}(n.storage,n._location,t,tE());return n.storage.makeRequestWithTokens(e,dc)}(n=(0,H.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function Uie(n){return xie(n=(0,H.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Hie(n){return function Mie(n){n._throwIfRoot("deleteObject");const t=function cie(n,t){const i=Nd(t.fullServerUrl(),n.host,n._protocol),d=new Au(i,"DELETE",function c(p,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=nE(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,dc)}(n=(0,H.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw pz(t)}}class Gz{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(zz(t))throw _v("ref() expected a child path but got a URL, use refFromURL instead.");return new Fd(Uz(this._delegate,t),this)}refFromURL(t){if(!zz(t))throw _v("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hs.makeFromUrl(t,this._delegate.host)}catch(e){throw _v("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fd(Uz(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function Gie(n,t,e,i={}){!function Pie(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,H.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function zz(n){return/^[A-Za-z]+:\/\//.test(n)}function Yie(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new Gz(e,i)}function qz(n){const t=function Qie(n){return new v.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(yd(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,Ce.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function XA(n){return{getDownloadURL:()=>ot(void 0).pipe(Tn.fc,ii(()=>n.getDownloadURL()),Tn.iC),getMetadata:()=>ot(void 0).pipe(Tn.fc,ii(()=>n.getMetadata()),Tn.iC),delete:()=>(0,gn.D)(n.delete()),child:t=>XA(n.child(t)),updateMetadata:t=>(0,gn.D)(n.updateMetadata(t)),put:(t,e)=>qz(n.put(t,e)),putString:(t,e,i)=>qz(n.putString(t,e,i)),list:t=>(0,gn.D)(n.list(t)),listAll:()=>(0,gn.D)(n.listAll())}}!function Kie(n){const t={TaskState:yo,TaskEvent:pie,StringFormat:Sa,Storage:Gz,Reference:Fd};n.INTERNAL.registerComponent(new tc.wA("storage-compat",Yie,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(uR.Z);const Xie=new o.OlP("angularfire2.storageBucket"),Jie=new o.OlP("angularfire2.storage.maxUploadRetryTime"),ere=new o.OlP("angularfire2.storage.maxOperationRetryTime"),tre=new o.OlP("angularfire2.storage.use-emulator");let nre=(()=>{class n{constructor(e,i,r,s,c,d,p,y,C,D){const M=(0,Cr.on)(e,c,i);this.storage=(0,Cr.cc)(`${M.name}.storage.${r}`,"AngularFireStorage",M.name,()=>{const L=c.runOutsideAngular(()=>M.storage(r||void 0)),j=C;return j&&L.useEmulator(...j),p&&L.setMaxUploadRetryTime(p),y&&L.setMaxOperationRetryTime(y),L},[p,y])}ref(e){return XA(this.storage.ref(e))}refFromURL(e){return XA(this.storage.refFromURL(e))}upload(e,i,r){return XA(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Cr.Dh),o.LFG(Cr.xv,8),o.LFG(Xie,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Tn.HU),o.LFG(Jie,8),o.LFG(ere,8),o.LFG(tre,8),o.LFG(cC,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ire=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),rre=(()=>{class n{constructor(){SP.Z.registerVersion("angularfire",Tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[nre],imports:[ire]}),n})(),sre=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[vQ]}),n.\u0275inj=o.cJS({providers:[],imports:[[Ba,H9,qg,aQ,Q9,RK,X7,XY,wQ,PT,Oe,bI,Oq,M7,dK,$3,o7,v7,uQ,eX,iX,Cr.hO.initializeApp(Oj_firebase),mne,sY,rre,VQ,jQ]]}),n})();(0,o.G48)(),Ec().bootstrapModule(sre).catch(n=>console.error(n))},4901:Ve=>{"use strict";var $={single_source_shortest_paths:function(O,o,B){var x={},V={};V[o]=0;var W,G,Y,se,Z,ee,U=$.PriorityQueue.make();for(U.push(o,0);!U.empty();)for(Y in se=(W=U.pop()).cost,Z=O[G=W.value]||{})Z.hasOwnProperty(Y)&&(ee=se+Z[Y],(void 0===V[Y]||V[Y]>ee)&&(V[Y]=ee,U.push(Y,ee),x[Y]=G));if(void 0!==B&&void 0===V[B]){var Me=["Could not find a path from ",o," to ",B,"."].join("");throw new Error(Me)}return x},extract_shortest_path_from_predecessor_list:function(O,o){for(var B=[],x=o;x;)B.push(x),x=O[x];return B.reverse(),B},find_path:function(O,o,B){var x=$.single_source_shortest_paths(O,o,B);return $.extract_shortest_path_from_predecessor_list(x,B)},PriorityQueue:{make:function(O){var x,o=$.PriorityQueue,B={};for(x in O=O||{},o)o.hasOwnProperty(x)&&(B[x]=o[x]);return B.queue=[],B.sorter=O.sorter||o.default_sorter,B},default_sorter:function(O,o){return O.cost-o.cost},push:function(O,o){this.queue.push({value:O,cost:o}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};Ve.exports=$},8419:Ve=>{"use strict";Ve.exports=function(O){for(var o=[],B=O.length,x=0;x<B;x++){var V=O.charCodeAt(x);if(V>=55296&&V<=56319&&B>x+1){var U=O.charCodeAt(x+1);U>=56320&&U<=57343&&(V=1024*(V-55296)+U-56320+65536,x+=1)}V<128?o.push(V):V<2048?(o.push(V>>6|192),o.push(63&V|128)):V<55296||V>=57344&&V<65536?(o.push(V>>12|224),o.push(V>>6&63|128),o.push(63&V|128)):V>=65536&&V<=1114111?(o.push(V>>18|240),o.push(V>>12&63|128),o.push(V>>6&63|128),o.push(63&V|128)):o.push(239,191,189)}return new Uint8Array(o).buffer}},5867:(Ve,$,O)=>{"use strict";O.d($,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=O(9681);(0,o.registerVersion)("firebase","9.8.1","app")},127:(Ve,$,O)=>{"use strict";O.d($,{Z:()=>o.Z});var o=O(3942);o.Z.registerVersion("firebase","9.8.1","app-compat")},7092:(Ve,$,O)=>{"use strict";O.r($);var o=O(5861),B=O(3942),x=O(2090),V=O(9681),U=O(655),W=O(1877),G=O(4859);const Me=function ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},je=function ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new x.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Pe=new W.Yd("@firebase/auth");function Fe(v,...m){Pe.logLevel<=W.in.ERROR&&Pe.error(`Auth (${V.SDK_VERSION}): ${v}`,...m)}function xe(v,...m){throw Ae(v,...m)}function De(v,...m){return Ae(v,...m)}function he(v,m,_){const w=Object.assign(Object.assign({},je()),{[m]:_});return new x.LL("auth","Firebase",w).create(m,{appName:v.name})}function Re(v,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&xe(v,"argument-error"),he(v,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ae(v,...m){if("string"!=typeof v){const _=m[0],w=[...m.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(_,...w)}return de.create(v,...m)}function q(v,m,..._){if(!v)throw Ae(m,..._)}function ge(v){const m="INTERNAL ASSERTION FAILED: "+v;throw Fe(m),new Error(m)}function X(v,m){v||ge(m)}const re=new Map;function oe(v){X(v instanceof Function,"Expected a class definition");let m=re.get(v);return m?(X(m instanceof v,"Instance stored in cache mismatched with class"),m):(m=new v,re.set(v,m),m)}function ze(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function ft(){return"http:"===zt()||"https:"===zt()}function zt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Xt{constructor(m,_){this.shortDelay=m,this.longDelay=_,X(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,x.uI)()||(0,x.b$)()}get(){return function jt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,x.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mn(v,m){X(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class ln{static initialize(m,_,w){this.fetchImpl=m,_&&(this.headersImpl=_),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ai=new Xt(3e4,6e4);function Zt(v,m){return v.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:v.tenantId}):m}function xt(v,m,_,w){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,o.Z)(function*(v,m,_,w,k={}){return Yn(v,k,(0,o.Z)(function*(){let F={},ce={};w&&("GET"===m?ce=w:F={body:JSON.stringify(w)});const Ee=(0,x.xO)(Object.assign({key:v.config.apiKey},ce)).slice(1),Ce=yield v._getAdditionalHeaders();return Ce["Content-Type"]="application/json",v.languageCode&&(Ce["X-Firebase-Locale"]=v.languageCode),ln.fetch()(bo(v,v.config.apiHost,_,Ee),Object.assign({method:m,headers:Ce,referrerPolicy:"no-referrer"},F))}))})).apply(this,arguments)}function Yn(v,m,_){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,o.Z)(function*(v,m,_){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},sn),m);try{const k=new dr(v),F=yield Promise.race([_(),k.promise]);k.clearNetworkTimeout();const ce=yield F.json();if("needConfirmation"in ce)throw fs(v,"account-exists-with-different-credential",ce);if(F.ok&&!("errorMessage"in ce))return ce;{const Ee=F.ok?ce.errorMessage:ce.error.message,[Ce,it]=Ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ce)throw fs(v,"credential-already-in-use",ce);if("EMAIL_EXISTS"===Ce)throw fs(v,"email-already-in-use",ce);const yt=w[Ce]||Ce.toLowerCase().replace(/[_\s]+/g,"-");if(it)throw he(v,yt,it);xe(v,yt)}}catch(k){if(k instanceof x.ZR)throw k;xe(v,"network-request-failed")}})).apply(this,arguments)}function Ki(v,m,_,w){return hs.apply(this,arguments)}function hs(){return(hs=(0,o.Z)(function*(v,m,_,w,k={}){const F=yield xt(v,m,_,w,k);return"mfaPendingCredential"in F&&xe(v,"multi-factor-auth-required",{_serverResponse:F}),F})).apply(this,arguments)}function bo(v,m,_,w){const k=`${m}${_}?${w}`;return v.config.emulator?Mn(v.config,k):`${v.config.apiScheme}://${k}`}class dr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,w)=>{this.timer=setTimeout(()=>w(De(this.auth,"network-request-failed")),ai.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function fs(v,m,_){const w={appName:v.name};_.email&&(w.email=_.email),_.phoneNumber&&(w.phoneNumber=_.phoneNumber);const k=De(v,m,w);return k.customData._tokenResponse=_,k}function Tr(){return(Tr=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Ln(v,m){return jn.apply(this,arguments)}function jn(){return(jn=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function wo(v,m){return hr.apply(this,arguments)}function hr(){return(hr=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function _i(v){if(v)try{const m=new Date(Number(v));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function Go(){return(Go=(0,o.Z)(function*(v,m=!1){const _=(0,x.m9)(v),w=yield _.getIdToken(m),k=ct(w);q(k&&k.exp&&k.auth_time&&k.iat,_.auth,"internal-error");const F="object"==typeof k.firebase?k.firebase:void 0,ce=null==F?void 0:F.sign_in_provider;return{claims:k,token:w,authTime:_i(Jt(k.auth_time)),issuedAtTime:_i(Jt(k.iat)),expirationTime:_i(Jt(k.exp)),signInProvider:ce||null,signInSecondFactor:(null==F?void 0:F.sign_in_second_factor)||null}})).apply(this,arguments)}function Jt(v){return 1e3*Number(v)}function ct(v){const[m,_,w]=v.split(".");if(void 0===m||void 0===_||void 0===w)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,x.tV)(_);return k?JSON.parse(k):(Fe("Failed to decode base64 JWT payload"),null)}catch(k){return Fe("Caught error parsing JWT payload as JSON",k),null}}function Bi(v,m){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,o.Z)(function*(v,m,_=!1){if(_)return m;try{return yield m}catch(w){throw w instanceof x.ZR&&Yt(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}function Yt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class zo{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const k=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const w=this.getInterval(m);this.timerId=setTimeout((0,o.Z)(function*(){yield _.iteration()}),w)}iteration(){var m=this;return(0,o.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class Vi{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=_i(this.lastLoginAt),this.creationTime=_i(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ui(v){return J.apply(this,arguments)}function J(){return(J=(0,o.Z)(function*(v){var m;const _=v.auth,w=yield v.getIdToken(),k=yield Bi(v,wo(_,{idToken:w}));q(null==k?void 0:k.users.length,_,"internal-error");const F=k.users[0];v._notifyReloadListener(F);const ce=(null===(m=F.providerUserInfo)||void 0===m?void 0:m.length)?ne(F.providerUserInfo):[],Ee=Ne(v.providerData,ce),yt=!!v.isAnonymous&&!(v.email&&F.passwordHash||(null==Ee?void 0:Ee.length)),pt={uid:F.localId,displayName:F.displayName||null,photoURL:F.photoUrl||null,email:F.email||null,emailVerified:F.emailVerified||!1,phoneNumber:F.phoneNumber||null,tenantId:F.tenantId||null,providerData:Ee,metadata:new Vi(F.createdAt,F.lastLoginAt),isAnonymous:yt};Object.assign(v,pt)})).apply(this,arguments)}function ae(){return(ae=(0,o.Z)(function*(v){const m=(0,x.m9)(v);yield Ui(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Ne(v,m){return[...v.filter(w=>!m.some(k=>k.providerId===w.providerId)),...m]}function ne(v){return v.map(m=>{var{providerId:_}=m,w=(0,U._T)(m,["providerId"]);return{providerId:_,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function He(){return(He=(0,o.Z)(function*(v,m){const _=yield Yn(v,{},(0,o.Z)(function*(){const w=(0,x.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:k,apiKey:F}=v.config,ce=bo(v,k,"/v1/token",`key=${F}`),Ee=yield v._getAdditionalHeaders();return Ee["Content-Type"]="application/x-www-form-urlencoded",ln.fetch()(ce,{method:"POST",headers:Ee,body:w})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){q(m.idToken,"internal-error"),q(void 0!==m.idToken,"internal-error"),q(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function Et(v){const m=ct(v);return q(m,"internal-error"),q(void 0!==m.exp,"internal-error"),q(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var w=this;return(0,o.Z)(function*(){return q(!w.accessToken||w.refreshToken,m,"user-token-expired"),_||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(m,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var w=this;return(0,o.Z)(function*(){const{accessToken:k,refreshToken:F,expiresIn:ce}=yield function me(v,m){return He.apply(this,arguments)}(m,_);w.updateTokensAndExpiration(k,F,Number(ce))})()}updateTokensAndExpiration(m,_,w){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(m,_){const{refreshToken:w,accessToken:k,expirationTime:F}=_,ce=new nt;return w&&(q("string"==typeof w,"internal-error",{appName:m}),ce.refreshToken=w),k&&(q("string"==typeof k,"internal-error",{appName:m}),ce.accessToken=k),F&&(q("number"==typeof F,"internal-error",{appName:m}),ce.expirationTime=F),ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new nt,this.toJSON())}_performRefresh(){return ge("not implemented")}}function vt(v,m){q("string"==typeof v||void 0===v,"internal-error",{appName:m})}class Mt{constructor(m){var{uid:_,auth:w,stsTokenManager:k}=m,F=(0,U._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=w,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=F.displayName||null,this.email=F.email||null,this.emailVerified=F.emailVerified||!1,this.phoneNumber=F.phoneNumber||null,this.photoURL=F.photoURL||null,this.isAnonymous=F.isAnonymous||!1,this.tenantId=F.tenantId||null,this.providerData=F.providerData?[...F.providerData]:[],this.metadata=new Vi(F.createdAt||void 0,F.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,o.Z)(function*(){const w=yield Bi(_,_.stsTokenManager.getToken(_.auth,m));return q(w,_.auth,"internal-error"),_.accessToken!==w&&(_.accessToken=w,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),w})()}getIdTokenResult(m){return function Ir(v){return Go.apply(this,arguments)}(this,m)}reload(){return function ie(v){return ae.apply(this,arguments)}(this)}_assign(m){this!==m&&(q(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Mt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var w=this;return(0,o.Z)(function*(){let k=!1;m.idToken&&m.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(m),k=!0),_&&(yield Ui(w)),yield w.auth._persistUserIfCurrent(w),k&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var m=this;return(0,o.Z)(function*(){const _=yield m.getIdToken();return yield Bi(m,function wt(v,m){return Tr.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var w,k,F,ce,Ee,Ce,it,yt;const pt=null!==(w=_.displayName)&&void 0!==w?w:void 0,ni=null!==(k=_.email)&&void 0!==k?k:void 0,on=null!==(F=_.phoneNumber)&&void 0!==F?F:void 0,ru=null!==(ce=_.photoURL)&&void 0!==ce?ce:void 0,xh=null!==(Ee=_.tenantId)&&void 0!==Ee?Ee:void 0,$g=null!==(Ce=_._redirectEventId)&&void 0!==Ce?Ce:void 0,Qa=null!==(it=_.createdAt)&&void 0!==it?it:void 0,vr=null!==(yt=_.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:Xa,emailVerified:Wg,isAnonymous:Gl,providerData:su,stsTokenManager:Zg}=_;q(Xa&&Zg,m,"internal-error");const cd=nt.fromJSON(this.name,Zg);q("string"==typeof Xa,m,"internal-error"),vt(pt,m.name),vt(ni,m.name),q("boolean"==typeof Wg,m,"internal-error"),q("boolean"==typeof Gl,m,"internal-error"),vt(on,m.name),vt(ru,m.name),vt(xh,m.name),vt($g,m.name),vt(Qa,m.name),vt(vr,m.name);const Po=new Mt({uid:Xa,auth:m,email:ni,emailVerified:Wg,displayName:pt,isAnonymous:Gl,photoURL:ru,phoneNumber:on,tenantId:xh,stsTokenManager:cd,createdAt:Qa,lastLoginAt:vr});return su&&Array.isArray(su)&&(Po.providerData=su.map(Mh=>Object.assign({},Mh))),$g&&(Po._redirectEventId=$g),Po}static _fromIdTokenResponse(m,_,w=!1){return(0,o.Z)(function*(){const k=new nt;k.updateFromServerResponse(_);const F=new Mt({uid:_.localId,auth:m,stsTokenManager:k,isAnonymous:w});return yield Ui(F),F})()}}const It=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(_,w){var k=this;return(0,o.Z)(function*(){k.storage[_]=w})()}_get(_){var w=this;return(0,o.Z)(function*(){const k=w.storage[_];return void 0===k?null:k})()}_remove(_){var w=this;return(0,o.Z)(function*(){delete w.storage[_]})()}_addListener(_,w){}_removeListener(_,w){}}return v.type="NONE",v})();function li(v,m,_){return`firebase:${v}:${m}:${_}`}class Qi{constructor(m,_,w){this.persistence=m,this.auth=_,this.userKey=w;const{config:k,name:F}=this.auth;this.fullUserKey=li(this.userKey,k.apiKey,F),this.fullPersistenceKey=li("persistence",k.apiKey,F),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,o.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?Mt._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,o.Z)(function*(){if(_.persistence===m)return;const w=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,w?_.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,w="authUser"){return(0,o.Z)(function*(){if(!_.length)return new Qi(oe(It),m,w);const k=(yield Promise.all(_.map(function(){var it=(0,o.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return it.apply(this,arguments)}}()))).filter(it=>it);let F=k[0]||oe(It);const ce=li(w,m.config.apiKey,m.name);let Ee=null;for(const it of _)try{const yt=yield it._get(ce);if(yt){const pt=Mt._fromJSON(m,yt);it!==F&&(Ee=pt),F=it;break}}catch(yt){}const Ce=k.filter(it=>it._shouldAllowMigration);return F._shouldAllowMigration&&Ce.length?(F=Ce[0],Ee&&(yield F._set(ce,Ee.toJSON())),yield Promise.all(_.map(function(){var it=(0,o.Z)(function*(yt){if(yt!==F)try{yield yt._remove(ce)}catch(pt){}});return function(yt){return it.apply(this,arguments)}}())),new Qi(F,m,w)):new Qi(F,m,w)})()}}function bl(v){const m=v.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(ci(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(wl(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(js(m))return"Blackberry";if(ui(m))return"Webos";if(hc(m))return"Safari";if((m.includes("chrome/")||Cl(m))&&!m.includes("edge/"))return"Chrome";if(Xi(m))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function wl(v=(0,x.z$)()){return/firefox\//i.test(v)}function hc(v=(0,x.z$)()){const m=v.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Cl(v=(0,x.z$)()){return/crios\//i.test(v)}function ci(v=(0,x.z$)()){return/iemobile/i.test(v)}function Xi(v=(0,x.z$)()){return/android/i.test(v)}function js(v=(0,x.z$)()){return/blackberry/i.test(v)}function ui(v=(0,x.z$)()){return/webos/i.test(v)}function fr(v=(0,x.z$)()){return/iphone|ipad|ipod/i.test(v)}function Co(v=(0,x.z$)()){return fr(v)||Xi(v)||ui(v)||js(v)||/windows phone/i.test(v)||ci(v)}function Ma(v,m=[]){let _;switch(v){case"Browser":_=bl((0,x.z$)());break;case"Worker":_=`${bl((0,x.z$)())}-${v}`;break;default:_=v}const w=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${V.SDK_VERSION}/${w}`}class pr{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const w=F=>new Promise((ce,Ee)=>{try{ce(m(F))}catch(Ce){Ee(Ce)}});w.onAbort=_,this.queue.push(w);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,o.Z)(function*(){if(_.auth.currentUser===m)return;const w=[];try{for(const k of _.queue)yield k(m),k.onAbort&&w.push(k.onAbort)}catch(k){w.reverse();for(const F of w)try{F()}catch(ce){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:k.message})}})()}}class et{constructor(m,_,w){this.app=m,this.heartbeatServiceProvider=_,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mn(this),this.idTokenSubscription=new mn(this),this.beforeStateQueue=new pr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(m,_){var w=this;return _&&(this._popupRedirectResolver=oe(_)),this._initializationPromise=this.queue((0,o.Z)(function*(){var k,F;if(!w._deleted&&(w.persistenceManager=yield Qi.create(w,m),!w._deleted)){if(null===(k=w._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(ce){}yield w.initializeCurrentUser(_),w.lastNotifiedUid=(null===(F=w.currentUser)||void 0===F?void 0:F.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,o.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,o.Z)(function*(){var w;const k=yield _.assertedPersistence.getCurrentUser();let F=k,ce=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ee=null===(w=_.redirectUser)||void 0===w?void 0:w._redirectEventId,Ce=null==F?void 0:F._redirectEventId,it=yield _.tryRedirectSignIn(m);(!Ee||Ee===Ce)&&(null==it?void 0:it.user)&&(F=it.user,ce=!0)}if(!F)return _.directlySetCurrentUser(null);if(!F._redirectEventId){if(ce)try{yield _.beforeStateQueue.runMiddleware(F)}catch(Ee){F=k,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ee))}return F?_.reloadAndSetCurrentUserOrClear(F):_.directlySetCurrentUser(null)}return q(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===F._redirectEventId?_.directlySetCurrentUser(F):_.reloadAndSetCurrentUserOrClear(F)})()}tryRedirectSignIn(m){var _=this;return(0,o.Z)(function*(){let w=null;try{w=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(k){yield _._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,o.Z)(function*(){try{yield Ui(m)}catch(w){if("auth/network-request-failed"!==w.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Ye(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var m=this;return(0,o.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,o.Z)(function*(){const w=m?(0,x.m9)(m):null;return w&&q(w.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(w&&w._clone(_))})()}_updateCurrentUser(m,_=!1){var w=this;return(0,o.Z)(function*(){if(!w._deleted)return m&&q(w.tenantId===m.tenantId,w,"tenant-id-mismatch"),_||(yield w.beforeStateQueue.runMiddleware(m)),w.queue((0,o.Z)(function*(){yield w.directlySetCurrentUser(m),w.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,o.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,o.Z)(function*(){yield _.assertedPersistence.setPersistence(oe(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new x.LL("auth","Firebase",m())}onAuthStateChanged(m,_,w){return this.registerStateListener(this.authStateSubscription,m,_,w)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,w){return this.registerStateListener(this.idTokenSubscription,m,_,w)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var w=this;return(0,o.Z)(function*(){const k=yield w.getOrInitRedirectPersistenceManager(_);return null===m?k.removeCurrentUser():k.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,o.Z)(function*(){if(!_.redirectPersistenceManager){const w=m&&oe(m)||_._popupRedirectResolver;q(w,_,"argument-error"),_.redirectPersistenceManager=yield Qi.create(_,[oe(w._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,o.Z)(function*(){var w,k;return _._isInitialized&&(yield _.queue((0,o.Z)(function*(){}))),(null===(w=_._currentUser)||void 0===w?void 0:w._redirectEventId)===m?_._currentUser:(null===(k=_.redirectUser)||void 0===k?void 0:k._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,o.Z)(function*(){if(m===_.currentUser)return _.queue((0,o.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,w,k){if(this._deleted)return()=>{};const F="function"==typeof _?_:_.next.bind(_),ce=this._isInitialized?Promise.resolve():this._initializationPromise;return q(ce,this,"internal-error"),ce.then(()=>F(this.currentUser)),"function"==typeof _?m.addObserver(_,w,k):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,o.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Ma(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,o.Z)(function*(){var _;const w={"X-Client-Version":m.clientVersion};m.app.options.appId&&(w["X-Firebase-gmpid"]=m.app.options.appId);const k=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return k&&(w["X-Firebase-Client"]=k),w})()}}function gt(v){return(0,x.m9)(v)}class mn{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,x.ne)(_=>this.observer=_)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ps(v){const m=v.indexOf(":");return m<0?"":v.substr(0,m+1)}function ms(v){if(!v)return null;const m=Number(v);return isNaN(m)?null:m}class Wr{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return ge("not implemented")}_getIdTokenResponse(m){return ge("not implemented")}_linkToIdToken(m,_){return ge("not implemented")}_getReauthenticationResolver(m){return ge("not implemented")}}function zn(v,m){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:resetPassword",Zt(v,m))})).apply(this,arguments)}function Dl(v,m){return gs.apply(this,arguments)}function gs(){return(gs=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function fc(v,m){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:update",Zt(v,m))})).apply(this,arguments)}function $o(){return($o=(0,o.Z)(function*(v,m){return Ki(v,"POST","/v1/accounts:signInWithPassword",Zt(v,m))})).apply(this,arguments)}function Do(v,m){return un.apply(this,arguments)}function un(){return(un=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:sendOobCode",Zt(v,m))})).apply(this,arguments)}function vn(v,m){return pc.apply(this,arguments)}function pc(){return(pc=(0,o.Z)(function*(v,m){return Do(v,m)})).apply(this,arguments)}function Tl(v,m){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,o.Z)(function*(v,m){return Do(v,m)})).apply(this,arguments)}function Zr(v,m){return mc.apply(this,arguments)}function mc(){return(mc=(0,o.Z)(function*(v,m){return Do(v,m)})).apply(this,arguments)}function Vd(v,m){return _s.apply(this,arguments)}function _s(){return(_s=(0,o.Z)(function*(v,m){return Do(v,m)})).apply(this,arguments)}function ku(){return(ku=(0,o.Z)(function*(v,m){return Ki(v,"POST","/v1/accounts:signInWithEmailLink",Zt(v,m))})).apply(this,arguments)}function Ud(){return(Ud=(0,o.Z)(function*(v,m){return Ki(v,"POST","/v1/accounts:signInWithEmailLink",Zt(v,m))})).apply(this,arguments)}class Hi extends Wr{constructor(m,_,w,k=null){super("password",w),this._email=m,this._password=_,this._tenantId=k}static _fromEmailAndPassword(m,_){return new Hi(m,_,"password")}static _fromEmailAndCode(m,_,w=null){return new Hi(m,_,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,o.Z)(function*(){switch(_.signInMethod){case"password":return function Nn(v,m){return $o.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ys(v,m){return ku.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:xe(m,"internal-error")}})()}_linkToIdToken(m,_){var w=this;return(0,o.Z)(function*(){switch(w.signInMethod){case"password":return Dl(m,{idToken:_,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function hg(v,m){return Ud.apply(this,arguments)}(m,{idToken:_,email:w._email,oobCode:w._password});default:xe(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function To(v,m){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,o.Z)(function*(v,m){return Ki(v,"POST","/v1/accounts:signInWithIdp",Zt(v,m))})).apply(this,arguments)}class Gs extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Gs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):xe("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:k}=_,F=(0,U._T)(_,["providerId","signInMethod"]);if(!w||!k)return null;const ce=new Gs(w,k);return ce.idToken=F.idToken||void 0,ce.accessToken=F.accessToken||void 0,ce.secret=F.secret,ce.nonce=F.nonce,ce.pendingToken=F.pendingToken||null,ce}_getIdTokenResponse(m){return To(m,this.buildRequest())}_linkToIdToken(m,_){const w=this.buildRequest();return w.idToken=_,To(m,w)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,To(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,x.xO)(_)}return m}}function pg(v,m){return jd.apply(this,arguments)}function jd(){return(jd=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:sendVerificationCode",Zt(v,m))})).apply(this,arguments)}function Io(){return(Io=(0,o.Z)(function*(v,m){return Ki(v,"POST","/v1/accounts:signInWithPhoneNumber",Zt(v,m))})).apply(this,arguments)}function Gd(){return(Gd=(0,o.Z)(function*(v,m){const _=yield Ki(v,"POST","/v1/accounts:signInWithPhoneNumber",Zt(v,m));if(_.temporaryProof)throw fs(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const gg={USER_NOT_FOUND:"user-not-found"};function zd(){return(zd=(0,o.Z)(function*(v,m){return Ki(v,"POST","/v1/accounts:signInWithPhoneNumber",Zt(v,Object.assign(Object.assign({},m),{operation:"REAUTH"})),gg)})).apply(this,arguments)}class ka extends Wr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new ka({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new ka({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Ru(v,m){return Io.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function mg(v,m){return Gd.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function _g(v,m){return zd.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:w,verificationCode:k}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:w,code:k}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:w,phoneNumber:k,temporaryProof:F}=m;return w||_||k||F?new ka({verificationId:_,verificationCode:w,phoneNumber:k,temporaryProof:F}):null}}class gc{constructor(m){var _,w,k,F,ce,Ee;const Ce=(0,x.zd)((0,x.pd)(m)),it=null!==(_=Ce.apiKey)&&void 0!==_?_:null,yt=null!==(w=Ce.oobCode)&&void 0!==w?w:null,pt=function Kf(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=Ce.mode)&&void 0!==k?k:null);q(it&&yt&&pt,"argument-error"),this.apiKey=it,this.operation=pt,this.code=yt,this.continueUrl=null!==(F=Ce.continueUrl)&&void 0!==F?F:null,this.languageCode=null!==(ce=Ce.languageCode)&&void 0!==ce?ce:null,this.tenantId=null!==(Ee=Ce.tenantId)&&void 0!==Ee?Ee:null}static parseLink(m){const _=function Il(v){const m=(0,x.zd)((0,x.pd)(v)).link,_=m?(0,x.zd)((0,x.pd)(m)).deep_link_id:null,w=(0,x.zd)((0,x.pd)(v)).deep_link_id;return(w?(0,x.zd)((0,x.pd)(w)).link:null)||w||_||m||v}(m);try{return new gc(_)}catch(w){return null}}}let $d=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,w){return Hi._fromEmailAndPassword(_,w)}static credentialWithLink(_,w){const k=gc.parseLink(w);return q(k,"argument-error"),Hi._fromEmailAndCode(_,k.code,k.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class ji{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Wo extends ji{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class vs extends Wo{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return q("providerId"in _&&"signInMethod"in _,"argument-error"),Gs._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return q(m.idToken||m.accessToken,"argument-error"),Gs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return vs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return vs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:w,oauthTokenSecret:k,pendingToken:F,nonce:ce,providerId:Ee}=m;if(!w&&!k&&!_&&!F||!Ee)return null;try{return new vs(Ee)._credential({idToken:_,accessToken:w,nonce:ce,pendingToken:F})}catch(Ce){return null}}}let Ra=(()=>{class v extends Wo{constructor(){super("facebook.com")}static credential(_){return Gs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Wd=(()=>{class v extends Wo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,w){return Gs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:w,oauthAccessToken:k}=_;if(!w&&!k)return null;try{return v.credential(w,k)}catch(F){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Qf=(()=>{class v extends Wo{constructor(){super("github.com")}static credential(_){return Gs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(w){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Zo extends Wr{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return To(m,this.buildRequest())}_linkToIdToken(m,_){const w=this.buildRequest();return w.idToken=_,To(m,w)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,To(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:w,signInMethod:k,pendingToken:F}=_;return w&&k&&F&&w===k?new Zo(w,F):null}static _create(m,_){return new Zo(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class er extends ji{constructor(m){q(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return er.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return er.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Zo.fromJSON(m);return q(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:w}=m;if(!_||!w)return null;try{return Zo._create(w,_)}catch(k){return null}}}let Zd=(()=>{class v extends Wo{constructor(){super("twitter.com")}static credential(_,w){return Gs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:w})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:w,oauthTokenSecret:k}=_;if(!w||!k)return null;try{return v.credential(w,k)}catch(F){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Gi(v,m){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,o.Z)(function*(v,m){return Ki(v,"POST","/v1/accounts:signUp",Zt(v,m))})).apply(this,arguments)}class Ar{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,w,k=!1){return(0,o.Z)(function*(){const F=yield Mt._fromIdTokenResponse(m,w,k),ce=Ou(w);return new Ar({user:F,providerId:ce,_tokenResponse:w,operationType:_})})()}static _forOperation(m,_,w){return(0,o.Z)(function*(){yield m._updateTokensIfNecessary(w,!0);const k=Ou(w);return new Ar({user:m,providerId:k,_tokenResponse:w,operationType:_})})()}}function Ou(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Pu(){return(Pu=(0,o.Z)(function*(v){var m;const _=gt(v);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new Ar({user:_.currentUser,providerId:null,operationType:"signIn"});const w=yield Gi(_,{returnSecureToken:!0}),k=yield Ar._fromIdTokenResponse(_,"signIn",w,!0);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class Na extends x.ZR{constructor(m,_,w,k){var F;super(_.code,_.message),this.operationType=w,this.user=k,Object.setPrototypeOf(this,Na.prototype),this.customData={appName:m.name,tenantId:null!==(F=m.tenantId)&&void 0!==F?F:void 0,_serverResponse:_.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(m,_,w,k){return new Na(m,_,w,k)}}function Nu(v,m,_,w){return("reauthenticate"===m?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(F=>{throw"auth/multi-factor-auth-required"===F.code?Na._fromErrorAndOperation(v,F,m,w):F})}function bs(v){return new Set(v.map(({providerId:m})=>m).filter(m=>!!m))}function bn(){return(bn=(0,o.Z)(function*(v,m){const _=(0,x.m9)(v);yield dn(!0,_,m);const{providerUserInfo:w}=yield Ln(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),k=bs(w||[]);return _.providerData=_.providerData.filter(F=>k.has(F.providerId)),k.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Sl(v,m){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,o.Z)(function*(v,m,_=!1){const w=yield Bi(v,m._linkToIdToken(v.auth,yield v.getIdToken()),_);return Ar._forOperation(v,"link",w)})).apply(this,arguments)}function dn(v,m,_){return Al.apply(this,arguments)}function Al(){return(Al=(0,o.Z)(function*(v,m,_){yield Ui(m);const k=!1===v?"provider-already-linked":"no-such-provider";q(bs(m.providerData).has(_)===v,m.auth,k)})).apply(this,arguments)}function _c(v,m){return So.apply(this,arguments)}function So(){return(So=(0,o.Z)(function*(v,m,_=!1){const{auth:w}=v,k="reauthenticate";try{const F=yield Bi(v,Nu(w,k,m,v),_);q(F.idToken,w,"internal-error");const ce=ct(F.idToken);q(ce,w,"internal-error");const{sub:Ee}=ce;return q(v.uid===Ee,w,"user-mismatch"),Ar._forOperation(v,k,F)}catch(F){throw"auth/user-not-found"===(null==F?void 0:F.code)&&xe(w,"user-mismatch"),F}})).apply(this,arguments)}function Ai(v,m){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,o.Z)(function*(v,m,_=!1){const w="signIn",k=yield Nu(v,w,m),F=yield Ar._fromIdTokenResponse(v,w,k);return _||(yield v._updateCurrentUser(F.user)),F})).apply(this,arguments)}function Fn(v,m){return ws.apply(this,arguments)}function ws(){return(ws=(0,o.Z)(function*(v,m){return Ai(gt(v),m)})).apply(this,arguments)}function xi(v,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,o.Z)(function*(v,m){const _=(0,x.m9)(v);return yield dn(!1,_,m.providerId),Sl(_,m)})).apply(this,arguments)}function zs(v,m){return xl.apply(this,arguments)}function xl(){return(xl=(0,o.Z)(function*(v,m){return _c((0,x.m9)(v),m)})).apply(this,arguments)}function Yr(v,m){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,o.Z)(function*(v,m){return Ki(v,"POST","/v1/accounts:signInWithCustomToken",Zt(v,m))})).apply(this,arguments)}function Ct(){return(Ct=(0,o.Z)(function*(v,m){const _=gt(v),w=yield Yr(_,{token:m,returnSecureToken:!0}),k=yield Ar._fromIdTokenResponse(_,"signIn",w);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class Ao{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Lu._fromServerResponse(m,_):xe(m,"internal-error")}}class Lu extends Ao{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Lu(_)}}function Ml(v,m,_){var w;q((null===(w=_.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),q(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(q(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(q(_.android.packageName.length>0,v,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function yc(){return(yc=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v),k={requestType:"PASSWORD_RESET",email:m};_&&Ml(w,k,_),yield Tl(w,k)})).apply(this,arguments)}function Vu(){return(Vu=(0,o.Z)(function*(v,m,_){yield zn((0,x.m9)(v),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Le(){return(Le=(0,o.Z)(function*(v,m){yield fc((0,x.m9)(v),{oobCode:m})})).apply(this,arguments)}function qt(v,m){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,o.Z)(function*(v,m){const _=(0,x.m9)(v),w=yield zn(_,{oobCode:m}),k=w.requestType;switch(q(k,_,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(w.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(w.mfaInfo,_,"internal-error");default:q(w.email,_,"internal-error")}let F=null;return w.mfaInfo&&(F=Ao._fromServerResponse(gt(_),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:F},operation:k}})).apply(this,arguments)}function bc(){return(bc=(0,o.Z)(function*(v,m){const{data:_}=yield qt((0,x.m9)(v),m);return _.email})).apply(this,arguments)}function xr(){return(xr=(0,o.Z)(function*(v,m,_){const w=gt(v),k=yield Gi(w,{returnSecureToken:!0,email:m,password:_}),F=yield Ar._fromIdTokenResponse(w,"signIn",k);return yield w._updateCurrentUser(F.user),F})).apply(this,arguments)}function ju(){return(ju=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v),k={requestType:"EMAIL_SIGNIN",email:m};q(_.handleCodeInApp,w,"argument-error"),_&&Ml(w,k,_),yield Zr(w,k)})).apply(this,arguments)}function qs(){return(qs=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v),k=$d.credentialWithLink(m,_||ze());return q(k._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Fn(w,k)})).apply(this,arguments)}function zi(v,m){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:createAuthUri",Zt(v,m))})).apply(this,arguments)}function xo(){return(xo=(0,o.Z)(function*(v,m){const w={identifier:m,continueUri:ft()?ze():"http://localhost"},{signinMethods:k}=yield zi((0,x.m9)(v),w);return k||[]})).apply(this,arguments)}function Gu(){return(Gu=(0,o.Z)(function*(v,m){const _=(0,x.m9)(v),k={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};m&&Ml(_.auth,k,m);const{email:F}=yield vn(_.auth,k);F!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ec(){return(Ec=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v),F={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:m};_&&Ml(w.auth,F,_);const{email:ce}=yield Vd(w.auth,F);ce!==v.email&&(yield v.reload())})).apply(this,arguments)}function zu(v,m){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,o.Z)(function*(v,m){return xt(v,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Tc(){return(Tc=(0,o.Z)(function*(v,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const w=(0,x.m9)(v),F={idToken:yield w.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},ce=yield Bi(w,zu(w.auth,F));w.displayName=ce.displayName||null,w.photoURL=ce.photoUrl||null;const Ee=w.providerData.find(({providerId:Ce})=>"password"===Ce);Ee&&(Ee.displayName=w.displayName,Ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(ce)})).apply(this,arguments)}function Ic(v,m,_){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,o.Z)(function*(v,m,_){const{auth:w}=v,F={idToken:yield v.getIdToken(),returnSecureToken:!0};m&&(F.email=m),_&&(F.password=_);const ce=yield Bi(v,Dl(w,F));yield v._updateTokensIfNecessary(ce,!0)})).apply(this,arguments)}class Va{constructor(m,_,w={}){this.isNewUser=m,this.providerId=_,this.profile=w}}class eh extends Va{constructor(m,_,w,k){super(m,_,w),this.username=k}}class Sc extends Va{constructor(m,_){super(m,"facebook.com",_)}}class _r extends eh{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Jf extends Va{constructor(m,_){super(m,"google.com",_)}}class qu extends eh{constructor(m,_,w){super(m,"twitter.com",_,w)}}function yi(v){const{user:m,_tokenResponse:_}=v;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Jd(v){var m,_;if(!v)return null;const{providerId:w}=v,k=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},F=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&(null==v?void 0:v.idToken)){const ce=null===(_=null===(m=ct(v.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(ce)return new Va(F,"anonymous"!==ce&&"custom"!==ce?ce:null)}if(!w)return null;switch(w){case"facebook.com":return new Sc(F,k);case"github.com":return new _r(F,k);case"google.com":return new Jf(F,k);case"twitter.com":return new qu(F,k,v.screenName||null);case"custom":case"anonymous":return new Va(F,null);default:return new Va(F,w,k)}}(_)}class $s{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new $s("enroll",m)}static _fromMfaPendingCredential(m){return new $s("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,w;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return $s._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(w=m.multiFactorSession)||void 0===w?void 0:w.idToken)return $s._fromIdtoken(m.multiFactorSession.idToken)}return null}}class ta{constructor(m,_,w){this.session=m,this.hints=_,this.signInResolver=w}static _fromError(m,_){const w=gt(m),k=_.customData._serverResponse,F=(k.mfaInfo||[]).map(Ee=>Ao._fromServerResponse(w,Ee));q(k.mfaPendingCredential,w,"internal-error");const ce=$s._fromMfaPendingCredential(k.mfaPendingCredential);return new ta(ce,F,function(){var Ee=(0,o.Z)(function*(Ce){const it=yield Ce._process(w,ce);delete k.mfaInfo,delete k.mfaPendingCredential;const yt=Object.assign(Object.assign({},k),{idToken:it.idToken,refreshToken:it.refreshToken});switch(_.operationType){case"signIn":const pt=yield Ar._fromIdTokenResponse(w,_.operationType,yt);return yield w._updateCurrentUser(pt.user),pt;case"reauthenticate":return q(_.user,w,"internal-error"),Ar._forOperation(_.user,_.operationType,yt);default:xe(w,"internal-error")}});return function(Ce){return Ee.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,o.Z)(function*(){return _.signInResolver(m)})()}}function ih(v,m){return xt(v,"POST","/v2/accounts/mfaEnrollment:start",Zt(v,m))}class Ua{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(w=>Ao._fromServerResponse(m.auth,w)))})}static _fromUser(m){return new Ua(m)}getSession(){var m=this;return(0,o.Z)(function*(){return $s._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var w=this;return(0,o.Z)(function*(){const k=m,F=yield w.getSession(),ce=yield Bi(w.user,k._process(w.user.auth,F,_));return yield w.user._updateTokensIfNecessary(ce),w.user.reload()})()}unenroll(m){var _=this;return(0,o.Z)(function*(){const w="string"==typeof m?m:m.uid,k=yield _.user.getIdToken(),F=yield Bi(_.user,function na(v,m){return xt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Zt(v,m))}(_.user.auth,{idToken:k,mfaEnrollmentId:w}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ce})=>ce!==w),yield _.user._updateTokensIfNecessary(F);try{yield _.user.reload()}catch(ce){if("auth/user-token-expired"!==ce.code)throw ce}})()}}const Ac=new WeakMap,Es="__sak";class Rl{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Es,"1"),this.storage.removeItem(Es),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rn=(()=>{class v extends Rl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,w)=>this.onStorageEvent(_,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cg(){const v=(0,x.z$)();return hc(v)||fr(v)}()&&function Si(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Co(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const w of Object.keys(this.listeners)){const k=this.storage.getItem(w),F=this.localCache[w];k!==F&&_(w,F,k)}}onStorageEvent(_,w=!1){if(!_.key)return void this.forAllChangedKeys((Ee,Ce,it)=>{this.notifyListeners(Ee,it)});const k=_.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ee=this.storage.getItem(k);if(_.newValue!==Ee)null!==_.newValue?this.storage.setItem(k,_.newValue):this.storage.removeItem(k);else if(this.localCache[k]===_.newValue&&!w)return}const F=()=>{const Ee=this.storage.getItem(k);!w&&this.localCache[k]===Ee||this.notifyListeners(k,Ee)},ce=this.storage.getItem(k);!function El(){return(0,x.w1)()&&10===document.documentMode}()||ce===_.newValue||_.newValue===_.oldValue?F():setTimeout(F,10)}notifyListeners(_,w){this.localCache[_]=w;const k=this.listeners[_];if(k)for(const F of Array.from(k))F(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,w,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:w,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,w){var k=()=>super._set,F=this;return(0,o.Z)(function*(){yield k().call(F,_,w),F.localCache[_]=JSON.stringify(w)})()}_get(_){var w=()=>super._get,k=this;return(0,o.Z)(function*(){const F=yield w().call(k,_);return k.localCache[_]=JSON.stringify(F),F})()}_remove(_){var w=()=>super._remove,k=this;return(0,o.Z)(function*(){yield w().call(k,_),delete k.localCache[_]})()}}return v.type="LOCAL",v})(),Qr=(()=>{class v extends Rl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,w){}_removeListener(_,w){}}return v.type="SESSION",v})();let _t=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const w=this.receivers.find(F=>F.isListeningto(_));if(w)return w;const k=new v(_);return this.receivers.push(k),k}isListeningto(_){return this.eventTarget===_}handleEvent(_){var w=this;return(0,o.Z)(function*(){const k=_,{eventId:F,eventType:ce,data:Ee}=k.data,Ce=w.handlersMap[ce];if(!(null==Ce?void 0:Ce.size))return;k.ports[0].postMessage({status:"ack",eventId:F,eventType:ce});const it=Array.from(Ce).map(function(){var pt=(0,o.Z)(function*(ni){return ni(k.origin,Ee)});return function(ni){return pt.apply(this,arguments)}}()),yt=yield function Ha(v){return Promise.all(v.map(function(){var m=(0,o.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(w){return{fulfilled:!1,reason:w}}});return function(_){return m.apply(this,arguments)}}()))}(it);k.ports[0].postMessage({status:"done",eventId:F,eventType:ce,response:yt})})()}_subscribe(_,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(w)}_unsubscribe(_,w){this.handlersMap[_]&&w&&this.handlersMap[_].delete(w),(!w||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Kt(v="",m=10){let _="";for(let w=0;w<m;w++)_+=Math.floor(10*Math.random());return v+_}class kr{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,w=50){var k=this;return(0,o.Z)(function*(){const F="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!F)throw new Error("connection_unavailable");let ce,Ee;return new Promise((Ce,it)=>{const yt=Kt("",20);F.port1.start();const pt=setTimeout(()=>{it(new Error("unsupported_event"))},w);Ee={messageChannel:F,onMessage(ni){const on=ni;if(on.data.eventId===yt)switch(on.data.status){case"ack":clearTimeout(pt),ce=setTimeout(()=>{it(new Error("timeout"))},3e3);break;case"done":clearTimeout(ce),Ce(on.data.response);break;default:clearTimeout(pt),clearTimeout(ce),it(new Error("invalid_response"))}}},k.handlers.add(Ee),F.port1.addEventListener("message",Ee.onMessage),k.target.postMessage({eventType:m,eventId:yt,data:_},[F.port2])}).finally(()=>{Ee&&k.removeMessageHandler(Ee)})})()}}function Rt(){return window}function Ws(){return void 0!==Rt().WorkerGlobalScope&&"function"==typeof Rt().importScripts}function Pl(){return(Pl=(0,o.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const ja="firebaseLocalStorageDb",Ds="firebaseLocalStorage",Lt="fbase_key";class Ts{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Mi(v,m){return v.transaction([Ds],m?"readwrite":"readonly").objectStore(Ds)}function Mc(){const v=indexedDB.open(ja,1);return new Promise((m,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(Ds,{keyPath:Lt})}catch(k){_(k)}}),v.addEventListener("success",(0,o.Z)(function*(){const w=v.result;w.objectStoreNames.contains(Ds)?m(w):(w.close(),yield function Nl(){const v=indexedDB.deleteDatabase(ja);return new Ts(v).toPromise()}(),m(yield Mc()))}))})}function Ga(v,m,_){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,o.Z)(function*(v,m,_){const w=Mi(v,!0).put({[Lt]:m,value:_});return new Ts(w).toPromise()})).apply(this,arguments)}function Mo(){return(Mo=(0,o.Z)(function*(v,m){const _=Mi(v,!1).get(m),w=yield new Ts(_).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function kc(v,m){const _=Mi(v,!0).delete(m);return new Ts(_).toPromise()}const Ll=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,o.Z)(function*(){return _.db||(_.db=yield Mc()),_.db})()}_withRetries(_){var w=this;return(0,o.Z)(function*(){let k=0;for(;;)try{const F=yield w._openDb();return yield _(F)}catch(F){if(k++>3)throw F;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,o.Z)(function*(){return Ws()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,o.Z)(function*(){_.receiver=_t._getInstance(function Wu(){return Ws()?self:null}()),_.receiver._subscribe("keyChanged",function(){var w=(0,o.Z)(function*(k,F){return{keyProcessed:(yield _._poll()).includes(F.key)}});return function(k,F){return w.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var w=(0,o.Z)(function*(k,F){return["keyChanged"]});return function(k,F){return w.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,o.Z)(function*(){var w,k;if(_.activeServiceWorker=yield function Ol(){return Pl.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new kr(_.activeServiceWorker);const F=yield _.sender._send("ping",{},800);!F||(null===(w=F[0])||void 0===w?void 0:w.fulfilled)&&(null===(k=F[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var w=this;return(0,o.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function ep(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:_},w.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Mc();return yield Ga(_,Es,"1"),yield kc(_,Es),!0}catch(_){}return!1})()}_withPendingWrite(_){var w=this;return(0,o.Z)(function*(){w.pendingWrites++;try{yield _()}finally{w.pendingWrites--}})()}_set(_,w){var k=this;return(0,o.Z)(function*(){return k._withPendingWrite((0,o.Z)(function*(){return yield k._withRetries(F=>Ga(F,_,w)),k.localCache[_]=w,k.notifyServiceWorker(_)}))})()}_get(_){var w=this;return(0,o.Z)(function*(){const k=yield w._withRetries(F=>function Zu(v,m){return Mo.apply(this,arguments)}(F,_));return w.localCache[_]=k,k})()}_remove(_){var w=this;return(0,o.Z)(function*(){return w._withPendingWrite((0,o.Z)(function*(){return yield w._withRetries(k=>kc(k,_)),delete w.localCache[_],w.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,o.Z)(function*(){const w=yield _._withRetries(ce=>{const Ee=Mi(ce,!1).getAll();return new Ts(Ee).toPromise()});if(!w)return[];if(0!==_.pendingWrites)return[];const k=[],F=new Set;for(const{fbase_key:ce,value:Ee}of w)F.add(ce),JSON.stringify(_.localCache[ce])!==JSON.stringify(Ee)&&(_.notifyListeners(ce,Ee),k.push(ce));for(const ce of Object.keys(_.localCache))_.localCache[ce]&&!F.has(ce)&&(_.notifyListeners(ce,null),k.push(ce));return k})()}notifyListeners(_,w){this.localCache[_]=w;const k=this.listeners[_];if(k)for(const F of Array.from(k))F(w)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(w)}_removeListener(_,w){this.listeners[_]&&(this.listeners[_].delete(w),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Pc(v,m){return xt(v,"POST","/v2/accounts/mfaSignIn:start",Zt(v,m))}function Nc(){return(Nc=(0,o.Z)(function*(v){return(yield xt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fc(v){return new Promise((m,_)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=m,w.onerror=k=>{const F=De("internal-error");F.customData=k,_(F)},w.type="text/javascript",w.charset="UTF-8",function Bl(){var v,m;return null!==(m=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==m?m:document}().appendChild(w)})}function Zs(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Lc=1e12;class Yu{constructor(m){this.auth=m,this.counter=Lc,this._widgets=new Map}render(m,_){const w=this.counter;return this._widgets.set(w,new qa(m,this.auth.name,_||{})),this.counter++,w}reset(m){var _;const w=m||Lc;null===(_=this._widgets.get(w))||void 0===_||_.delete(),this._widgets.delete(w)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Lc))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,o.Z)(function*(){var w;return null===(w=_._widgets.get(m||Lc))||void 0===w||w.execute(),""})()}}class qa{constructor(m,_,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof m?document.getElementById(m):m;q(k,"argument-error",{appName:_}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bc(v){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const oh=Zs("rcb"),Bn=new Xt(3e4,6e4);class wv{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Rt().grecaptcha}load(m,_=""){return q(function tp(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Rt().grecaptcha):new Promise((w,k)=>{const F=Rt().setTimeout(()=>{k(De(m,"network-request-failed"))},Bn.get());Rt()[oh]=()=>{Rt().clearTimeout(F),delete Rt()[oh];const Ee=Rt().grecaptcha;if(!Ee)return void k(De(m,"internal-error"));const Ce=Ee.render;Ee.render=(it,yt)=>{const pt=Ce(it,yt);return this.counter++,pt},this.hostLanguage=_,w(Ee)},Fc(`https://www.google.com/recaptcha/api.js??${(0,x.xO)({onload:oh,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(F),k(De(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!Rt().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class np{load(m){return(0,o.Z)(function*(){return new Yu(m)})()}clearedOneInstance(){}}const ah="recaptcha",Ig={theme:"light",type:"image"};class ip{constructor(m,_=Object.assign({},Ig),w){this.parameters=_,this.type=ah,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gt(w),this.isInvisible="invisible"===this.parameters.size,q("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof m?document.getElementById(m):m;q(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new np:new wv,this.validateStartingState()}verify(){var m=this;return(0,o.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),w=m.getAssertedRecaptcha();return w.getResponse(_)||new Promise(F=>{const ce=Ee=>{!Ee||(m.tokenChangeListeners.delete(ce),F(Ee))};m.tokenChangeListeners.add(ce),m.isInvisible&&w.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(w=>w(_)),"function"==typeof m)m(_);else if("string"==typeof m){const w=Rt()[m];"function"==typeof w&&w(_)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,o.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const w=document.createElement("div");_.appendChild(w),_=w}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,o.Z)(function*(){q(ft()&&!Ws(),m.auth,"internal-error"),yield function Vc(){let v=null;return new Promise(m=>{"complete"!==document.readyState?(v=()=>m(),window.addEventListener("load",v)):m()}).catch(m=>{throw v&&window.removeEventListener("load",v),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function ko(v){return Nc.apply(this,arguments)}(m.auth);q(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class lh{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=ka._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function ra(){return(ra=(0,o.Z)(function*(v,m,_){const w=gt(v),k=yield qi(w,m,(0,x.m9)(_));return new lh(k,F=>Fn(w,F))})).apply(this,arguments)}function Ku(){return(Ku=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v);yield dn(!1,w,"phone");const k=yield qi(w.auth,m,(0,x.m9)(_));return new lh(k,F=>xi(w,F))})).apply(this,arguments)}function vi(){return(vi=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v),k=yield qi(w.auth,m,(0,x.m9)(_));return new lh(k,F=>zs(w,F))})).apply(this,arguments)}function qi(v,m,_){return ki.apply(this,arguments)}function ki(){return(ki=(0,o.Z)(function*(v,m,_){var w;const k=yield _.verify();try{let F;if(q("string"==typeof k,v,"argument-error"),q(_.type===ah,v,"argument-error"),F="string"==typeof m?{phoneNumber:m}:m,"session"in F){const ce=F.session;if("phoneNumber"in F)return q("enroll"===ce.type,v,"internal-error"),(yield ih(v,{idToken:ce.credential,phoneEnrollmentInfo:{phoneNumber:F.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{q("signin"===ce.type,v,"internal-error");const Ee=(null===(w=F.multiFactorHint)||void 0===w?void 0:w.uid)||F.multiFactorUid;return q(Ee,v,"missing-multi-factor-info"),(yield Pc(v,{mfaPendingCredential:ce.credential,mfaEnrollmentId:Ee,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ce}=yield pg(v,{phoneNumber:F.phoneNumber,recaptchaToken:k});return ce}}finally{_._reset()}})).apply(this,arguments)}function Jr(){return(Jr=(0,o.Z)(function*(v,m){yield Sl((0,x.m9)(v),m)})).apply(this,arguments)}let Ys=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=gt(_)}verifyPhoneNumber(_,w){return qi(this.auth,_,(0,x.m9)(w))}static credential(_,w){return ka._fromVerification(_,w)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:w,temporaryProof:k}=_;return w&&k?ka._fromTokenResponse(w,k):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function Is(v,m){return m?oe(m):(q(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class oa extends Wr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return To(m,this._buildIdpRequest())}_linkToIdToken(m,_){return To(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return To(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function rp(v){return Ai(v.auth,new oa(v),v.bypassAuthState)}function ch(v){const{auth:m,user:_}=v;return q(_,m,"internal-error"),_c(_,new oa(v),v.bypassAuthState)}function aa(v){return $i.apply(this,arguments)}function $i(){return($i=(0,o.Z)(function*(v){const{auth:m,user:_}=v;return q(_,m,"internal-error"),Sl(_,new oa(v),v.bypassAuthState)})).apply(this,arguments)}class Uc{constructor(m,_,w,k,F=!1){this.auth=m,this.resolver=w,this.user=k,this.bypassAuthState=F,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,o.Z)(function*(w,k){m.pendingPromise={resolve:w,reject:k};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(F){m.reject(F)}});return function(w,k){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,o.Z)(function*(){const{urlResponse:w,sessionId:k,postBody:F,tenantId:ce,error:Ee,type:Ce}=m;if(Ee)return void _.reject(Ee);const it={auth:_.auth,requestUri:w,sessionId:k,tenantId:ce||void 0,postBody:F||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(Ce)(it))}catch(yt){_.reject(yt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return rp;case"linkViaPopup":case"linkViaRedirect":return aa;case"reauthViaPopup":case"reauthViaRedirect":return ch;default:xe(this.auth,"internal-error")}}resolve(m){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const $a=new Xt(2e3,1e4);function Ss(){return(Ss=(0,o.Z)(function*(v,m,_){const w=gt(v);Re(v,m,ji);const k=Is(w,_);return new jc(w,"signInViaPopup",m,k).executeNotNull()})).apply(this,arguments)}function Hc(){return(Hc=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v);Re(w.auth,m,ji);const k=Is(w.auth,_);return new jc(w.auth,"reauthViaPopup",m,k,w).executeNotNull()})).apply(this,arguments)}function Ks(){return(Ks=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v);Re(w.auth,m,ji);const k=Is(w.auth,_);return new jc(w.auth,"linkViaPopup",m,k,w).executeNotNull()})).apply(this,arguments)}let jc=(()=>{class v extends Uc{constructor(_,w,k,F,ce){super(_,w,F,ce),this.provider=k,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,o.Z)(function*(){const w=yield _.execute();return q(w,_.auth,"internal-error"),w})()}onExecution(){var _=this;return(0,o.Z)(function*(){X(1===_.filter.length,"Popup operations only handle one event");const w=Kt();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],w),_.authWindow.associatedEvent=w,_.resolver._originValidation(_.auth).catch(k=>{_.reject(k)}),_.resolver._isIframeWebStorageSupported(_.auth,k=>{k||_.reject(De(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(De(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var w,k;this.pollId=(null===(k=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(De(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,$a.get())};_()}}return v.currentPopupAction=null,v})();const Qs=new Map;class Wa extends Uc{constructor(m,_,w=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,w),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,o.Z)(function*(){let w=Qs.get(_.auth._key());if(!w){try{const F=(yield function Gc(v,m){return As.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;w=()=>Promise.resolve(F)}catch(k){w=()=>Promise.reject(k)}Qs.set(_.auth._key(),w)}return _.bypassAuthState||Qs.set(_.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,w=this;return(0,o.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(w,m);if("unknown"!==m.type){if(m.eventId){const k=yield w.auth._redirectUserForId(m.eventId);if(k)return w.user=k,_().call(w,m);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function As(){return(As=(0,o.Z)(function*(v,m){const _=K(m),w=N(v);if(!(yield w._isAvailable()))return!1;const k="true"===(yield w._get(_));return yield w._remove(_),k})).apply(this,arguments)}function Za(v,m){return la.apply(this,arguments)}function la(){return(la=(0,o.Z)(function*(v,m){return N(v)._set(K(m),"true")})).apply(this,arguments)}function S(v,m){Qs.set(v._key(),m)}function N(v){return oe(v._redirectPersistence)}function K(v){return li("pendingRedirect",v.config.apiKey,v.name)}function Ue(){return(Ue=(0,o.Z)(function*(v,m,_){const w=gt(v);Re(v,m,ji);const k=Is(w,_);return yield Za(k,w),k._openRedirect(w,m,"signInViaRedirect")})).apply(this,arguments)}function dt(){return(dt=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v);Re(w.auth,m,ji);const k=Is(w.auth,_);yield Za(k,w.auth);const F=yield Rr(w);return k._openRedirect(w.auth,m,"reauthViaRedirect",F)})).apply(this,arguments)}function hi(){return(hi=(0,o.Z)(function*(v,m,_){const w=(0,x.m9)(v);Re(w.auth,m,ji);const k=Is(w.auth,_);yield dn(!1,w,m.providerId),yield Za(k,w.auth);const F=yield Rr(w);return k._openRedirect(w.auth,m,"linkViaRedirect",F)})).apply(this,arguments)}function ca(){return(ca=(0,o.Z)(function*(v,m){return yield gt(v)._initializationPromise,Xs(v,m,!1)})).apply(this,arguments)}function Xs(v,m){return yr.apply(this,arguments)}function yr(){return(yr=(0,o.Z)(function*(v,m,_=!1){const w=gt(v),k=Is(w,m),ce=yield new Wa(w,k,_).execute();return ce&&!_&&(delete ce.user._redirectEventId,yield w._persistUserIfCurrent(ce.user),yield w._setRedirectUser(null,m)),ce})).apply(this,arguments)}function Rr(v){return es.apply(this,arguments)}function es(){return(es=(0,o.Z)(function*(v){const m=Kt(`${v.uid}:::`);return v._redirectEventId=m,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),m})).apply(this,arguments)}class Sg{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(m,w)&&(_=!0,this.sendToConsumer(m,w),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Ju(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tr(v);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var w;if(m.error&&!tr(m)){const k=(null===(w=m.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";_.onError(De(this.auth,k))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const w=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&w}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ap(m))}saveEventToCache(m){this.cachedEventUids.add(ap(m)),this.lastProcessedEventTime=Date.now()}}function ap(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(m=>m).join("-")}function tr({type:v,error:m}){return"unknown"===v&&"auth/no-auth-event"===(null==m?void 0:m.code)}function zc(v){return qc.apply(this,arguments)}function qc(){return(qc=(0,o.Z)(function*(v,m={}){return xt(v,"GET","/v1/projects",m)})).apply(this,arguments)}const Cv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$c=/^https?/;function Ag(){return(Ag=(0,o.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:m}=yield zc(v);for(const _ of m)try{if(JA(_))return}catch(w){}xe(v,"unauthorized-domain")})).apply(this,arguments)}function JA(v){const m=ze(),{protocol:_,hostname:w}=new URL(m);if(v.startsWith("chrome-extension://")){const ce=new URL(v);return""===ce.hostname&&""===w?"chrome-extension:"===_&&v.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&ce.hostname===w}if(!$c.test(_))return!1;if(Cv.test(v))return w===v;const k=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(w)}const td=new Xt(3e4,6e4);function xg(){const v=Rt().___jsl;if(null==v?void 0:v.H)for(const m of Object.keys(v.H))if(v.H[m].r=v.H[m].r||[],v.H[m].L=v.H[m].L||[],v.H[m].r=[...v.H[m].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let uh=null;function dh(v){return uh=uh||function sE(v){return new Promise((m,_)=>{var w,k,F;function ce(){xg(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{xg(),_(De(v,"network-request-failed"))},timeout:td.get()})}if(null===(k=null===(w=Rt().gapi)||void 0===w?void 0:w.iframes)||void 0===k?void 0:k.Iframe)m(gapi.iframes.getContext());else{if(!(null===(F=Rt().gapi)||void 0===F?void 0:F.load)){const Ee=Zs("iframefcb");return Rt()[Ee]=()=>{gapi.load?ce():_(De(v,"network-request-failed"))},Fc(`https://apis.google.com/js/api.js?onload=${Ee}`).catch(Ce=>_(Ce))}ce()}}).catch(m=>{throw uh=null,m})}(v),uh}const hh=new Xt(5e3,15e3),Wc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mg(v){const m=v.config;q(m.authDomain,v,"auth-domain-config-required");const _=m.emulator?Mn(m,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,w={apiKey:m.apiKey,appName:v.name,v:V.SDK_VERSION},k=lp.get(v.config.apiHost);k&&(w.eid=k);const F=v._getFrameworks();return F.length&&(w.fw=F.join(",")),`${_}?${(0,x.xO)(w).slice(1)}`}function Zc(){return Zc=(0,o.Z)(function*(v){const m=yield dh(v),_=Rt().gapi;return q(_,v,"internal-error"),m.open({where:document.body,url:Mg(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Wc,dontclear:!0},w=>new Promise(function(){var k=(0,o.Z)(function*(F,ce){yield w.restyle({setHideOnLeave:!1});const Ee=De(v,"network-request-failed"),Ce=Rt().setTimeout(()=>{ce(Ee)},hh.get());function it(){Rt().clearTimeout(Ce),F(w)}w.ping(it).then(it,()=>{ce(Ee)})});return function(F,ce){return k.apply(this,arguments)}}()))}),Zc.apply(this,arguments)}const cp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ka{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function Js(v,m,_,w,k,F){q(v.config.authDomain,v,"auth-domain-config-required"),q(v.config.apiKey,v,"invalid-api-key");const ce={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:w,v:V.SDK_VERSION,eventId:k};if(m instanceof ji){m.setDefaultLanguage(v.languageCode),ce.providerId=m.providerId||"",(0,x.xb)(m.getCustomParameters())||(ce.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Ce,it]of Object.entries(F||{}))ce[Ce]=it}if(m instanceof Wo){const Ce=m.getScopes().filter(it=>""!==it);Ce.length>0&&(ce.scopes=Ce.join(","))}v.tenantId&&(ce.tid=v.tenantId);const Ee=ce;for(const Ce of Object.keys(Ee))void 0===Ee[Ce]&&delete Ee[Ce];return`${function Yc({config:v}){return v.emulator?Mn(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,x.xO)(Ee).slice(1)}`}const mh="webStorageSupport";class Kc extends class Tv{constructor(m){this.factorId=m}_process(m,_,w){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,w);case"signin":return this._finalizeSignIn(m,_.credential);default:return ge("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Kc(m)}_finalizeEnroll(m,_,w){return function wg(v,m){return xt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Zt(v,m))}(m,{idToken:_,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function sh(v,m){return xt(v,"POST","/v2/accounts/mfaSignIn:finalize",Zt(v,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hp=(()=>{class v{constructor(){}static assertion(_){return Kc._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Qc="@firebase/auth";class Pg{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,o.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(w=>{var k;m((null===(k=w)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Xc(){return window}function xs(){return(xs=(0,o.Z)(function*(v,m,_){var w;const{BuildInfo:k}=Xc();X(m.sessionId,"AuthEvent did not contain a session ID");const F=yield cE(m.sessionId),ce={};return fr()?ce.ibi=k.packageName:Xi()?ce.apn=k.packageName:xe(v,"operation-not-supported-in-this-environment"),k.displayName&&(ce.appDisplayName=k.displayName),ce.sessionId=F,Js(v,_,m.type,void 0,null!==(w=m.eventId)&&void 0!==w?w:void 0,ce)})).apply(this,arguments)}function eu(){return(eu=(0,o.Z)(function*(v){const{BuildInfo:m}=Xc(),_={};fr()?_.iosBundleId=m.packageName:Xi()?_.androidPackageName=m.packageName:xe(v,"operation-not-supported-in-this-environment"),yield zc(v,_)})).apply(this,arguments)}function Lg(){return(Lg=(0,o.Z)(function*(v,m,_){const{cordova:w}=Xc();let k=()=>{};try{yield new Promise((F,ce)=>{let Ee=null;function Ce(){var pt;F();const ni=null===(pt=w.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof ni&&ni(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function it(){Ee||(Ee=window.setTimeout(()=>{ce(De(v,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===(null==document?void 0:document.visibilityState)&&it()}m.addPassiveListener(Ce),document.addEventListener("resume",it,!1),Xi()&&document.addEventListener("visibilitychange",yt,!1),k=()=>{m.removePassiveListener(Ce),document.removeEventListener("resume",it,!1),document.removeEventListener("visibilitychange",yt,!1),Ee&&window.clearTimeout(Ee)}})}finally{k()}})).apply(this,arguments)}function cE(v){return sd.apply(this,arguments)}function sd(){return(sd=(0,o.Z)(function*(v){const m=_h(v),_=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(_)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function _h(v){if(X(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const m=new ArrayBuffer(v.length),_=new Uint8Array(m);for(let w=0;w<v.length;w++)_[w]=v.charCodeAt(w);return _}!function aE(v){(0,V._registerComponent)(new G.wA("auth",(m,{options:_})=>{const w=m.getProvider("app").getImmediate(),k=m.getProvider("heartbeat"),{apiKey:F,authDomain:ce}=w.options;return((Ee,Ce)=>{q(F&&!F.includes(":"),"invalid-api-key",{appName:Ee.name}),q(!(null==ce?void 0:ce.includes(":")),"argument-error",{appName:Ee.name});const it={apiKey:F,authDomain:ce,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ma(v)},yt=new et(Ee,Ce,it);return function ve(v,m){const _=(null==m?void 0:m.persistence)||[],w=(Array.isArray(_)?_:[_]).map(oe);(null==m?void 0:m.errorMap)&&v._updateErrorMap(m.errorMap),v._initializeWithPersistence(w,null==m?void 0:m.popupRedirectResolver)}(yt,_),yt})(w,k)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,w)=>{m.getProvider("auth-internal").initialize()})),(0,V._registerComponent)(new G.wA("auth-internal",m=>{const _=gt(m.getProvider("auth").getImmediate());return new Pg(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,V.registerVersion)(Qc,"0.20.1",function Iv(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,V.registerVersion)(Qc,"0.20.1","esm2017")}("Browser");class uE extends Sg{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(m)),super.onEvent(m)}initialized(){var m=this;return(0,o.Z)(function*(){yield m.initPromise})()}}function yh(v){return mp.apply(this,arguments)}function mp(){return(mp=(0,o.Z)(function*(v){const m=yield vh()._get(Ul(v));return m&&(yield vh()._remove(Ul(v))),m})).apply(this,arguments)}function Mv(){const v=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const w=Math.floor(Math.random()*m.length);v.push(m.charAt(w))}return v.join("")}function vh(){return oe(Rn)}function Ul(v){return li("authEvent",v.config.apiKey,v.name)}function tu(v){if(!(null==v?void 0:v.includes("?")))return{};const[m,..._]=v.split("?");return(0,x.zd)(_.join("?"))}function bh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:De("no-auth-event")}}function Eh(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function Hg(v=(0,x.z$)()){return!("file:"!==Eh()&&"ionic:"!==Eh()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function yp(){try{const v=self.localStorage,m=Kt();if(v)return v.setItem(m,"1"),v.removeItem(m),!function _p(v=(0,x.z$)()){return function nr(){return(0,x.w1)()&&11===(null==document?void 0:document.documentMode)}()||function fi(v=(0,x.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,x.hl)()}catch(v){return od()&&(0,x.hl)()}return!1}function od(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ri(){return(function Ug(){return"http:"===Eh()||"https:"===Eh()}()||(0,x.ru)()||Hg())&&!function Pv(){return(0,x.b$)()||(0,x.UG)()}()&&yp()&&!od()}function Hl(){return Hg()&&"undefined"!=typeof document}function vp(){return(vp=(0,o.Z)(function*(){return!!Hl()&&new Promise(v=>{const m=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),v(!0)})})})).apply(this,arguments)}const ir={LOCAL:"local",NONE:"none",SESSION:"session"},ad=q,Dh="persistence";function Th(v){return bp.apply(this,arguments)}function bp(){return(bp=(0,o.Z)(function*(v){yield v._initializationPromise;const m=ld(),_=li(Dh,v.config.apiKey,v.name);m&&m.setItem(_,v._getPersistence())})).apply(this,arguments)}function ld(){var v;try{return(null===(v=function Nv(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(m){return null}}const Ih=q;class ua{constructor(){this.browserResolver=oe(class Dv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qr,this._completeRedirectFn=Xs,this._overrideRedirectResult=S}_openPopup(m,_,w,k){var F=this;return(0,o.Z)(function*(){var ce;X(null===(ce=F.eventManagers[m._key()])||void 0===ce?void 0:ce.manager,"_initialize() not called before _openPopup()");const Ee=Js(m,_,w,ze(),k);return function up(v,m,_,w=500,k=600){const F=Math.max((window.screen.availHeight-k)/2,0).toString(),ce=Math.max((window.screen.availWidth-w)/2,0).toString();let Ee="";const Ce=Object.assign(Object.assign({},cp),{width:w.toString(),height:k.toString(),top:F,left:ce}),it=(0,x.z$)().toLowerCase();_&&(Ee=Cl(it)?"_blank":_),wl(it)&&(m=m||"http://localhost",Ce.scrollbars="yes");const yt=Object.entries(Ce).reduce((ni,[on,ru])=>`${ni}${on}=${ru},`,"");if(function qo(v=(0,x.z$)()){var m;return fr(v)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(it)&&"_self"!==Ee)return function dp(v,m){const _=document.createElement("a");_.href=v,_.target=m;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(w)}(m||"",Ee),new Ka(null);const pt=window.open(m||"",Ee,yt);q(pt,v,"popup-blocked");try{pt.focus()}catch(ni){}return new Ka(pt)}(m,Ee,Kt())})()}_openRedirect(m,_,w,k){var F=this;return(0,o.Z)(function*(){return yield F._originValidation(m),function ia(v){Rt().location.href=v}(Js(m,_,w,ze(),k)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:k,promise:F}=this.eventManagers[_];return k?Promise.resolve(k):(X(F,"If manager is not set, promise should be"),F)}const w=this.initAndGetManager(m);return this.eventManagers[_]={promise:w},w.catch(()=>{delete this.eventManagers[_]}),w}initAndGetManager(m){var _=this;return(0,o.Z)(function*(){const w=yield function oE(v){return Zc.apply(this,arguments)}(m),k=new Sg(m);return w.register("authEvent",F=>(q(null==F?void 0:F.authEvent,m,"invalid-auth-event"),{status:k.onEvent(F.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:k},_.iframes[m._key()]=w,k})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(mh,{type:mh},k=>{var F;const ce=null===(F=null==k?void 0:k[0])||void 0===F?void 0:F[mh];void 0!==ce&&_(!!ce),xe(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ed(v){return Ag.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return Co()||hc()||fr()}}),this.cordovaResolver=oe(class gp{constructor(){this._redirectPersistence=Qr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xs,this._overrideRedirectResult=S}_initialize(m){var _=this;return(0,o.Z)(function*(){const w=m._key();let k=_.eventManagers.get(w);return k||(k=new uE(m),_.eventManagers.set(w,k),_.attachCallbackListeners(m,k)),k})()}_openPopup(m){xe(m,"operation-not-supported-in-this-environment")}_openRedirect(m,_,w,k){var F=this;return(0,o.Z)(function*(){!function lE(v){var m,_,w,k,F,ce,Ee,Ce,it,yt;const pt=Xc();q("function"==typeof(null===(m=null==pt?void 0:pt.universalLinks)||void 0===m?void 0:m.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(void 0!==(null===(_=null==pt?void 0:pt.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q("function"==typeof(null===(F=null===(k=null===(w=null==pt?void 0:pt.cordova)||void 0===w?void 0:w.plugins)||void 0===k?void 0:k.browsertab)||void 0===F?void 0:F.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(Ce=null===(Ee=null===(ce=null==pt?void 0:pt.cordova)||void 0===ce?void 0:ce.plugins)||void 0===Ee?void 0:Ee.browsertab)||void 0===Ce?void 0:Ce.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q("function"==typeof(null===(yt=null===(it=null==pt?void 0:pt.cordova)||void 0===it?void 0:it.InAppBrowser)||void 0===yt?void 0:yt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const ce=yield F._initialize(m);yield ce.initialized(),ce.resetRedirect(),function I(){Qs.clear()}(),yield F._originValidation(m);const Ee=function Av(v,m,_=null){return{type:m,eventId:_,urlResponse:null,sessionId:Mv(),postBody:null,tenantId:v.tenantId,error:De(v,"no-auth-event")}}(m,w,k);yield function Bg(v,m){return vh()._set(Ul(v),m)}(m,Ee);const Ce=yield function Ng(v,m,_){return xs.apply(this,arguments)}(m,Ee,_),it=yield function fp(v){const{cordova:m}=Xc();return new Promise(_=>{m.plugins.browsertab.isAvailable(w=>{let k=null;w?m.plugins.browsertab.openUrl(v):k=m.InAppBrowser.open(v,function Bd(v=(0,x.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(k)})})}(Ce);return function Fg(v,m,_){return Lg.apply(this,arguments)}(m,ce,it)})()}_isIframeWebStorageSupported(m,_){throw new Error("Method not implemented.")}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Jc(v){return eu.apply(this,arguments)}(m)),this.originValidationPromises[_]}attachCallbackListeners(m,_){const{universalLinks:w,handleOpenURL:k,BuildInfo:F}=Xc(),ce=setTimeout((0,o.Z)(function*(){yield yh(m),_.onEvent(bh())}),500),Ee=function(){var yt=(0,o.Z)(function*(pt){clearTimeout(ce);const ni=yield yh(m);let on=null;ni&&(null==pt?void 0:pt.url)&&(on=function xv(v,m){var _,w;const k=function Or(v){const m=tu(v),_=m.link?decodeURIComponent(m.link):void 0,w=tu(_).link,k=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return tu(k).link||k||w||_||v}(m);if(k.includes("/__/auth/callback")){const F=tu(k),ce=F.firebaseError?function Vg(v){try{return JSON.parse(v)}catch(m){return null}}(decodeURIComponent(F.firebaseError)):null,Ee=null===(w=null===(_=null==ce?void 0:ce.code)||void 0===_?void 0:_.split("auth/"))||void 0===w?void 0:w[1],Ce=Ee?De(Ee):null;return Ce?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ce,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:k,postBody:null}}return null}(ni,pt.url)),_.onEvent(on||bh())});return function(ni){return yt.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,Ee);const Ce=k,it=`${F.packageName.toLowerCase()}://`;Xc().handleOpenURL=function(){var yt=(0,o.Z)(function*(pt){if(pt.toLowerCase().startsWith(it)&&Ee({url:pt}),"function"==typeof Ce)try{Ce(pt)}catch(ni){console.error(ni)}});return function(pt){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Qr,this._completeRedirectFn=Xs,this._overrideRedirectResult=S}_initialize(m){var _=this;return(0,o.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,_,w,k){var F=this;return(0,o.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openPopup(m,_,w,k)})()}_openRedirect(m,_,w,k){var F=this;return(0,o.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._openRedirect(m,_,w,k)})()}_isIframeWebStorageSupported(m,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,_)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return Hl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ih(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,o.Z)(function*(){if(m.underlyingResolver)return;const _=yield function nu(){return vp.apply(this,arguments)}();m.underlyingResolver=_?m.cordovaResolver:m.browserResolver})()}}function Sh(v){return v.unwrap()}function Bv(v){return Gg(v)}function Gg(v){const{_tokenResponse:m}=v instanceof x.ZR?v.customData:v;if(!m)return null;if(!(v instanceof x.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Ys.credentialFromResult(v);const _=m.providerId;if(!_||"password"===_)return null;let w;switch(_){case"google.com":w=Wd;break;case"facebook.com":w=Ra;break;case"github.com":w=Qf;break;case"twitter.com":w=Zd;break;default:const{oauthIdToken:k,oauthAccessToken:F,oauthTokenSecret:ce,pendingToken:Ee,nonce:Ce}=m;return F||ce||k||Ee?Ee?_.startsWith("saml.")?Zo._create(_,Ee):Gs._fromParams({providerId:_,signInMethod:_,pendingToken:Ee,idToken:k,accessToken:F}):new vs(_).credential({idToken:k,accessToken:F,rawNonce:Ce}):null}return v instanceof x.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function Pr(v,m){return m.catch(_=>{throw _ instanceof x.ZR&&function Ah(v,m){var _;const w=null===(_=m.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===m.code)m.resolver=new Ms(v,function di(v,m){var _;const w=(0,x.m9)(v),k=m;return q(m.customData.operationType,w,"argument-error"),q(null===(_=k.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,w,"argument-error"),ta._fromError(w,k)}(v,m));else if(w){const k=Gg(m),F=m;k&&(F.credential=k,F.tenantId=w.tenantId||void 0,F.email=w.email||void 0,F.phoneNumber=w.phoneNumber||void 0)}}(v,_),_}).then(_=>{const k=_.user;return{operationType:_.operationType,credential:Bv(_),additionalUserInfo:yi(_),user:eo.getOrCreate(k)}})}function wp(v,m){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,o.Z)(function*(v,m){const _=yield m;return{verificationId:_.verificationId,confirm:w=>Pr(v,_.confirm(w))}})).apply(this,arguments)}class Ms{constructor(m,_){this.resolver=_,this.auth=function jg(v){return v.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Pr(Sh(this.auth),this.resolver.resolveSignIn(m))}}class eo{constructor(m){this._delegate=m,this.multiFactor=function $u(v){const m=(0,x.m9)(v);return Ac.has(m)||Ac.set(m,Ua._fromUser(m)),Ac.get(m)}(m)}static getOrCreate(m){return eo.USER_MAP.has(m)||eo.USER_MAP.set(m,new eo(m)),eo.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var _=this;return(0,o.Z)(function*(){return Pr(_.auth,xi(_._delegate,m))})()}linkWithPhoneNumber(m,_){var w=this;return(0,o.Z)(function*(){return wp(w.auth,function Xr(v,m,_){return Ku.apply(this,arguments)}(w._delegate,m,_))})()}linkWithPopup(m){var _=this;return(0,o.Z)(function*(){return Pr(_.auth,function Xu(v,m,_){return Ks.apply(this,arguments)}(_._delegate,m,ua))})()}linkWithRedirect(m){var _=this;return(0,o.Z)(function*(){return yield Th(gt(_.auth)),function Vt(v,m,_){return function Dt(v,m,_){return hi.apply(this,arguments)}(v,m,_)}(_._delegate,m,ua)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var _=this;return(0,o.Z)(function*(){return Pr(_.auth,zs(_._delegate,m))})()}reauthenticateWithPhoneNumber(m,_){return wp(this.auth,function Qu(v,m,_){return vi.apply(this,arguments)}(this._delegate,m,_))}reauthenticateWithPopup(m){return Pr(this.auth,function op(v,m,_){return Hc.apply(this,arguments)}(this._delegate,m,ua))}reauthenticateWithRedirect(m){var _=this;return(0,o.Z)(function*(){return yield Th(gt(_.auth)),function rt(v,m,_){return function st(v,m,_){return dt.apply(this,arguments)}(v,m,_)}(_._delegate,m,ua)})()}sendEmailVerification(m){return function Kr(v,m){return Gu.apply(this,arguments)}(this._delegate,m)}unlink(m){var _=this;return(0,o.Z)(function*(){return yield function Xf(v,m){return bn.apply(this,arguments)}(_._delegate,m),_})()}updateEmail(m){return function Qd(v,m){return Ic((0,x.m9)(v),m,null)}(this._delegate,m)}updatePassword(m){return function Xd(v,m){return Ic((0,x.m9)(v),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function sa(v,m){return Jr.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function Dc(v,m){return Tc.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,_){return function Cc(v,m,_){return Ec.apply(this,arguments)}(this._delegate,m,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}eo.USER_MAP=new WeakMap;const iu=q;let zg=(()=>{class v{constructor(_,w){if(this.app=_,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=_.options;iu(k,"invalid-api-key",{appName:_.name}),iu(k,"invalid-api-key",{appName:_.name});const F="undefined"!=typeof window?ua:void 0;this._delegate=w.initialize({options:{persistence:dE(k,_.name),popupRedirectResolver:F}}),this._delegate._updateErrorMap(Me),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?eo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,w){!function mr(v,m,_){const w=gt(v);q(w._canInitEmulator,w,"emulator-config-failed"),q(/^https?:\/\//.test(m),w,"invalid-emulator-scheme");const k=!!(null==_?void 0:_.disableWarnings),F=ps(m),{host:ce,port:Ee}=function Qn(v){const m=ps(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(m.length));if(!_)return{host:"",port:null};const w=_[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(w);if(k){const F=k[1];return{host:F,port:ms(w.substr(F.length+1))}}{const[F,ce]=w.split(":");return{host:F,port:ms(ce)}}}(m);w.config.emulator={url:`${F}//${ce}${null===Ee?"":`:${Ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:ce,port:Ee,protocol:F.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function Sn(){function v(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,w)}applyActionCode(_){return function La(v,m){return Le.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return qt(this._delegate,_)}confirmPasswordReset(_,w){return function vc(v,m,_){return Vu.apply(this,arguments)}(this._delegate,_,w)}createUserWithEmailAndPassword(_,w){var k=this;return(0,o.Z)(function*(){return Pr(k._delegate,function Xo(v,m,_){return xr.apply(this,arguments)}(k._delegate,_,w))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function wc(v,m){return xo.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Kd(v,m){const _=gc.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,o.Z)(function*(){iu(Ri(),_._delegate,"operation-not-supported-in-this-environment");const w=yield function ti(v,m){return ca.apply(this,arguments)}(_._delegate,ua);return w?Pr(_._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function wh(v,m){gt(v)._logFramework(m)}(this._delegate,_)}onAuthStateChanged(_,w,k){const{next:F,error:ce,complete:Ee}=qg(_,w,k);return this._delegate.onAuthStateChanged(F,ce,Ee)}onIdTokenChanged(_,w,k){const{next:F,error:ce,complete:Ee}=qg(_,w,k);return this._delegate.onIdTokenChanged(F,ce,Ee)}sendSignInLinkToEmail(_,w){return function Hu(v,m,_){return ju.apply(this,arguments)}(this._delegate,_,w)}sendPasswordResetEmail(_,w){return function Bu(v,m,_){return yc.apply(this,arguments)}(this._delegate,_,w||void 0)}setPersistence(_){var w=this;return(0,o.Z)(function*(){let k;switch(function Fv(v,m){ad(Object.values(ir).includes(m),v,"invalid-persistence-type"),(0,x.b$)()?ad(m!==ir.SESSION,v,"unsupported-persistence-type"):(0,x.UG)()?ad(m===ir.NONE,v,"unsupported-persistence-type"):od()?ad(m===ir.NONE||m===ir.LOCAL&&(0,x.hl)(),v,"unsupported-persistence-type"):ad(m===ir.NONE||yp(),v,"unsupported-persistence-type")}(w._delegate,_),_){case ir.SESSION:k=Qr;break;case ir.LOCAL:k=(yield oe(Ll)._isAvailable())?Ll:Rn;break;case ir.NONE:k=It;break;default:return xe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Pr(this._delegate,function Yd(v){return Pu.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Pr(this._delegate,Fn(this._delegate,_))}signInWithCustomToken(_){return Pr(this._delegate,function Fa(v,m){return Ct.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,w){return Pr(this._delegate,function Uu(v,m,_){return Fn((0,x.m9)(v),$d.credential(m,_))}(this._delegate,_,w))}signInWithEmailLink(_,w){return Pr(this._delegate,function yg(v,m,_){return qs.apply(this,arguments)}(this._delegate,_,w))}signInWithPhoneNumber(_,w){return wp(this._delegate,function ei(v,m,_){return ra.apply(this,arguments)}(this._delegate,_,w))}signInWithPopup(_){var w=this;return(0,o.Z)(function*(){return iu(Ri(),w._delegate,"operation-not-supported-in-this-environment"),Pr(w._delegate,function sp(v,m,_){return Ss.apply(this,arguments)}(w._delegate,_,ua))})()}signInWithRedirect(_){var w=this;return(0,o.Z)(function*(){return iu(Ri(),w._delegate,"operation-not-supported-in-this-environment"),yield Th(w._delegate),function ue(v,m,_){return function be(v,m,_){return Ue.apply(this,arguments)}(v,m,_)}(w._delegate,_,ua)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function kn(v,m){return bc.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=ir,v})();function qg(v,m,_){let w=v;"function"!=typeof v&&({next:w,error:m,complete:_}=v);const k=w;return{next:ce=>k(ce&&eo.getOrCreate(ce)),error:m,complete:_}}function dE(v,m){const _=function Lv(v,m){const _=ld();if(!_)return[];const w=li(Dh,v,m);switch(_.getItem(w)){case ir.NONE:return[It];case ir.LOCAL:return[Ll,Qr];case ir.SESSION:return[Qr];default:return[]}}(v,m);if("undefined"!=typeof self&&!_.includes(Ll)&&_.push(Ll),"undefined"!=typeof window)for(const w of[Rn,Qr])_.includes(w)||_.push(w);return _.includes(It)||_.push(It),_}class gn{constructor(){this.providerId="phone",this._delegate=new Ys(Sh(B.Z.auth()))}static credential(m,_){return Ys.credential(m,_)}verifyPhoneNumber(m,_){return this._delegate.verifyPhoneNumber(m,_)}unwrap(){return this._delegate}}gn.PHONE_SIGN_IN_METHOD=Ys.PHONE_SIGN_IN_METHOD,gn.PROVIDER_ID=Ys.PROVIDER_ID;const jl=q;class ot{constructor(m,_,w=B.Z.app()){var k;jl(null===(k=w.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new ip(m,_,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function bi(v){v.INTERNAL.registerComponent(new G.wA("auth-compat",m=>{const _=m.getProvider("app-compat").getImmediate(),w=m.getProvider("auth");return new zg(_,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:$d,FacebookAuthProvider:Ra,GithubAuthProvider:Qf,GoogleAuthProvider:Wd,OAuthProvider:vs,SAMLAuthProvider:er,PhoneAuthProvider:gn,PhoneMultiFactorGenerator:hp,RecaptchaVerifier:ot,TwitterAuthProvider:Zd,Auth:zg,AuthCredential:Wr,Error:x.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.14")}(B.Z)},3259:(Ve,$,O)=>{const o=O(8695),B=O(1465),x=O(3210),V=O(2334);function U(W,G,Y,se,Z){const Q=[].slice.call(arguments,1),ee=Q.length,ke="function"==typeof Q[ee-1];if(!ke&&!o())throw new Error("Callback required as last argument");if(!ke){if(ee<1)throw new Error("Too few arguments provided");return 1===ee?(Y=G,G=se=void 0):2===ee&&!G.getContext&&(se=Y,Y=G,G=void 0),new Promise(function(ye,Me){try{const je=B.create(Y,se);ye(W(je,G,se))}catch(je){Me(je)}})}if(ee<2)throw new Error("Too few arguments provided");2===ee?(Z=Y,Y=G,G=se=void 0):3===ee&&(G.getContext&&void 0===Z?(Z=se,se=void 0):(Z=se,se=Y,Y=G,G=void 0));try{const ye=B.create(Y,se);Z(null,W(ye,G,se))}catch(ye){Z(ye)}}$.create=B.create,$.toCanvas=U.bind(null,x.render),$.toDataURL=U.bind(null,x.renderToDataURL),$.toString=U.bind(null,function(W,G,Y){return V.render(W,Y)})},8695:Ve=>{Ve.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6221:(Ve,$,O)=>{const o=O(4792).getSymbolSize;$.getRowColCoords=function(x){if(1===x)return[];const V=Math.floor(x/7)+2,U=o(x),W=145===U?26:2*Math.ceil((U-13)/(2*V-2)),G=[U-7];for(let Y=1;Y<V-1;Y++)G[Y]=G[Y-1]-W;return G.push(6),G.reverse()},$.getPositions=function(x){const V=[],U=$.getRowColCoords(x),W=U.length;for(let G=0;G<W;G++)for(let Y=0;Y<W;Y++)0===G&&0===Y||0===G&&Y===W-1||G===W-1&&0===Y||V.push([U[G],U[Y]]);return V}},2424:(Ve,$,O)=>{const o=O(4016),B=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function x(V){this.mode=o.ALPHANUMERIC,this.data=V}x.getBitsLength=function(U){return 11*Math.floor(U/2)+U%2*6},x.prototype.getLength=function(){return this.data.length},x.prototype.getBitsLength=function(){return x.getBitsLength(this.data.length)},x.prototype.write=function(U){let W;for(W=0;W+2<=this.data.length;W+=2){let G=45*B.indexOf(this.data[W]);G+=B.indexOf(this.data[W+1]),U.put(G,11)}this.data.length%2&&U.put(B.indexOf(this.data[W]),6)},Ve.exports=x},2118:Ve=>{function $(){this.buffer=[],this.length=0}$.prototype={get:function(O){const o=Math.floor(O/8);return 1==(this.buffer[o]>>>7-O%8&1)},put:function(O,o){for(let B=0;B<o;B++)this.putBit(1==(O>>>o-B-1&1))},getLengthInBits:function(){return this.length},putBit:function(O){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),O&&(this.buffer[o]|=128>>>this.length%8),this.length++}},Ve.exports=$},4425:Ve=>{function $(O){if(!O||O<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=O,this.data=new Uint8Array(O*O),this.reservedBit=new Uint8Array(O*O)}$.prototype.set=function(O,o,B,x){const V=O*this.size+o;this.data[V]=B,x&&(this.reservedBit[V]=!0)},$.prototype.get=function(O,o){return this.data[O*this.size+o]},$.prototype.xor=function(O,o,B){this.data[O*this.size+o]^=B},$.prototype.isReserved=function(O,o){return this.reservedBit[O*this.size+o]},Ve.exports=$},5663:(Ve,$,O)=>{const o=O(8419),B=O(4016);function x(V){this.mode=B.BYTE,this.data=new Uint8Array(o(V))}x.getBitsLength=function(U){return 8*U},x.prototype.getLength=function(){return this.data.length},x.prototype.getBitsLength=function(){return x.getBitsLength(this.data.length)},x.prototype.write=function(V){for(let U=0,W=this.data.length;U<W;U++)V.put(this.data[U],8)},Ve.exports=x},4655:(Ve,$,O)=>{const o=O(2259),B=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],x=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];$.getBlocksCount=function(U,W){switch(W){case o.L:return B[4*(U-1)+0];case o.M:return B[4*(U-1)+1];case o.Q:return B[4*(U-1)+2];case o.H:return B[4*(U-1)+3];default:return}},$.getTotalCodewordsCount=function(U,W){switch(W){case o.L:return x[4*(U-1)+0];case o.M:return x[4*(U-1)+1];case o.Q:return x[4*(U-1)+2];case o.H:return x[4*(U-1)+3];default:return}}},2259:(Ve,$)=>{$.L={bit:1},$.M={bit:0},$.Q={bit:3},$.H={bit:2},$.isValid=function(B){return B&&void 0!==B.bit&&B.bit>=0&&B.bit<4},$.from=function(B,x){if($.isValid(B))return B;try{return function O(o){if("string"!=typeof o)throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return $.L;case"m":case"medium":return $.M;case"q":case"quartile":return $.Q;case"h":case"high":return $.H;default:throw new Error("Unknown EC Level: "+o)}}(B)}catch(V){return x}}},3114:(Ve,$,O)=>{const o=O(4792).getSymbolSize;$.getPositions=function(V){const U=o(V);return[[0,0],[U-7,0],[0,U-7]]}},7078:(Ve,$,O)=>{const o=O(4792),V=o.getBCHDigit(1335);$.getEncodedBits=function(W,G){const Y=W.bit<<3|G;let se=Y<<10;for(;o.getBCHDigit(se)-V>=0;)se^=1335<<o.getBCHDigit(se)-V;return 21522^(Y<<10|se)}},5339:(Ve,$)=>{const O=new Uint8Array(512),o=new Uint8Array(256);(function(){let x=1;for(let V=0;V<255;V++)O[V]=x,o[x]=V,x<<=1,256&x&&(x^=285);for(let V=255;V<512;V++)O[V]=O[V-255]})(),$.log=function(x){if(x<1)throw new Error("log("+x+")");return o[x]},$.exp=function(x){return O[x]},$.mul=function(x,V){return 0===x||0===V?0:O[o[x]+o[V]]}},449:(Ve,$,O)=>{const o=O(4016),B=O(4792);function x(V){this.mode=o.KANJI,this.data=V}x.getBitsLength=function(U){return 13*U},x.prototype.getLength=function(){return this.data.length},x.prototype.getBitsLength=function(){return x.getBitsLength(this.data.length)},x.prototype.write=function(V){let U;for(U=0;U<this.data.length;U++){let W=B.toSJIS(this.data[U]);if(W>=33088&&W<=40956)W-=33088;else{if(!(W>=57408&&W<=60351))throw new Error("Invalid SJIS character: "+this.data[U]+"\nMake sure your charset is UTF-8");W-=49472}W=192*(W>>>8&255)+(255&W),V.put(W,13)}},Ve.exports=x},3667:(Ve,$)=>{$.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function o(B,x,V){switch(B){case $.Patterns.PATTERN000:return(x+V)%2==0;case $.Patterns.PATTERN001:return x%2==0;case $.Patterns.PATTERN010:return V%3==0;case $.Patterns.PATTERN011:return(x+V)%3==0;case $.Patterns.PATTERN100:return(Math.floor(x/2)+Math.floor(V/3))%2==0;case $.Patterns.PATTERN101:return x*V%2+x*V%3==0;case $.Patterns.PATTERN110:return(x*V%2+x*V%3)%2==0;case $.Patterns.PATTERN111:return(x*V%3+(x+V)%2)%2==0;default:throw new Error("bad maskPattern:"+B)}}$.isValid=function(x){return null!=x&&""!==x&&!isNaN(x)&&x>=0&&x<=7},$.from=function(x){return $.isValid(x)?parseInt(x,10):void 0},$.getPenaltyN1=function(x){const V=x.size;let U=0,W=0,G=0,Y=null,se=null;for(let Z=0;Z<V;Z++){W=G=0,Y=se=null;for(let Q=0;Q<V;Q++){let ee=x.get(Z,Q);ee===Y?W++:(W>=5&&(U+=W-5+3),Y=ee,W=1),ee=x.get(Q,Z),ee===se?G++:(G>=5&&(U+=G-5+3),se=ee,G=1)}W>=5&&(U+=W-5+3),G>=5&&(U+=G-5+3)}return U},$.getPenaltyN2=function(x){const V=x.size;let U=0;for(let W=0;W<V-1;W++)for(let G=0;G<V-1;G++){const Y=x.get(W,G)+x.get(W,G+1)+x.get(W+1,G)+x.get(W+1,G+1);(4===Y||0===Y)&&U++}return 3*U},$.getPenaltyN3=function(x){const V=x.size;let U=0,W=0,G=0;for(let Y=0;Y<V;Y++){W=G=0;for(let se=0;se<V;se++)W=W<<1&2047|x.get(Y,se),se>=10&&(1488===W||93===W)&&U++,G=G<<1&2047|x.get(se,Y),se>=10&&(1488===G||93===G)&&U++}return 40*U},$.getPenaltyN4=function(x){let V=0;const U=x.data.length;for(let G=0;G<U;G++)V+=x.data[G];return 10*Math.abs(Math.ceil(100*V/U/5)-10)},$.applyMask=function(x,V){const U=V.size;for(let W=0;W<U;W++)for(let G=0;G<U;G++)V.isReserved(G,W)||V.xor(G,W,o(x,G,W))},$.getBestMask=function(x,V){const U=Object.keys($.Patterns).length;let W=0,G=1/0;for(let Y=0;Y<U;Y++){V(Y),$.applyMask(Y,x);const se=$.getPenaltyN1(x)+$.getPenaltyN2(x)+$.getPenaltyN3(x)+$.getPenaltyN4(x);$.applyMask(Y,x),se<G&&(G=se,W=Y)}return W}},4016:(Ve,$,O)=>{const o=O(4406),B=O(2699);$.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},$.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},$.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},$.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},$.MIXED={bit:-1},$.getCharCountIndicator=function(U,W){if(!U.ccBits)throw new Error("Invalid mode: "+U);if(!o.isValid(W))throw new Error("Invalid version: "+W);return W>=1&&W<10?U.ccBits[0]:W<27?U.ccBits[1]:U.ccBits[2]},$.getBestModeForData=function(U){return B.testNumeric(U)?$.NUMERIC:B.testAlphanumeric(U)?$.ALPHANUMERIC:B.testKanji(U)?$.KANJI:$.BYTE},$.toString=function(U){if(U&&U.id)return U.id;throw new Error("Invalid mode")},$.isValid=function(U){return U&&U.bit&&U.ccBits},$.from=function(U,W){if($.isValid(U))return U;try{return function x(V){if("string"!=typeof V)throw new Error("Param is not a string");switch(V.toLowerCase()){case"numeric":return $.NUMERIC;case"alphanumeric":return $.ALPHANUMERIC;case"kanji":return $.KANJI;case"byte":return $.BYTE;default:throw new Error("Unknown mode: "+V)}}(U)}catch(G){return W}}},7783:(Ve,$,O)=>{const o=O(4016);function B(x){this.mode=o.NUMERIC,this.data=x.toString()}B.getBitsLength=function(V){return 10*Math.floor(V/3)+(V%3?V%3*3+1:0)},B.prototype.getLength=function(){return this.data.length},B.prototype.getBitsLength=function(){return B.getBitsLength(this.data.length)},B.prototype.write=function(V){let U,W,G;for(U=0;U+3<=this.data.length;U+=3)W=this.data.substr(U,3),G=parseInt(W,10),V.put(G,10);const Y=this.data.length-U;Y>0&&(W=this.data.substr(U),G=parseInt(W,10),V.put(G,3*Y+1))},Ve.exports=B},1106:(Ve,$,O)=>{const o=O(5339);$.mul=function(x,V){const U=new Uint8Array(x.length+V.length-1);for(let W=0;W<x.length;W++)for(let G=0;G<V.length;G++)U[W+G]^=o.mul(x[W],V[G]);return U},$.mod=function(x,V){let U=new Uint8Array(x);for(;U.length-V.length>=0;){const W=U[0];for(let Y=0;Y<V.length;Y++)U[Y]^=o.mul(V[Y],W);let G=0;for(;G<U.length&&0===U[G];)G++;U=U.slice(G)}return U},$.generateECPolynomial=function(x){let V=new Uint8Array([1]);for(let U=0;U<x;U++)V=$.mul(V,new Uint8Array([1,o.exp(U)]));return V}},1465:(Ve,$,O)=>{const o=O(4792),B=O(2259),x=O(2118),V=O(4425),U=O(6221),W=O(3114),G=O(3667),Y=O(4655),se=O(2636),Z=O(2088),Q=O(7078),ee=O(4016),ke=O(2033);function _e(he,Re,Ae){const q=he.size,ge=Q.getEncodedBits(Re,Ae);let X,re;for(X=0;X<15;X++)re=1==(ge>>X&1),he.set(X<6?X:X<8?X+1:q-15+X,8,re,!0),he.set(8,X<8?q-X-1:X<9?15-X-1+1:15-X-1,re,!0);he.set(q-8,8,1,!0)}function De(he,Re,Ae,q){let ge;if(Array.isArray(he))ge=ke.fromArray(he);else{if("string"!=typeof he)throw new Error("Invalid data");{let ve=Re;if(!ve){const ze=ke.rawSplit(he);ve=Z.getBestVersionForData(ze,Ae)}ge=ke.fromString(he,ve||40)}}const X=Z.getBestVersionForData(ge,Ae);if(!X)throw new Error("The amount of data is too big to be stored in a QR Code");if(Re){if(Re<X)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+X+".\n")}else Re=X;const re=function Fe(he,Re,Ae){const q=new x;Ae.forEach(function(pe){q.put(pe.mode.bit,4),q.put(pe.getLength(),ee.getCharCountIndicator(pe.mode,he)),pe.write(q)});const re=8*(o.getSymbolTotalCodewords(he)-Y.getTotalCodewordsCount(he,Re));for(q.getLengthInBits()+4<=re&&q.put(0,4);q.getLengthInBits()%8!=0;)q.putBit(0);const oe=(re-q.getLengthInBits())/8;for(let pe=0;pe<oe;pe++)q.put(pe%2?17:236,8);return function xe(he,Re,Ae){const q=o.getSymbolTotalCodewords(Re),X=q-Y.getTotalCodewordsCount(Re,Ae),re=Y.getBlocksCount(Re,Ae),pe=re-q%re,ve=Math.floor(q/re),ze=Math.floor(X/re),ft=ze+1,zt=ve-ze,jt=new se(zt);let Ye=0;const Xt=new Array(re),Mn=new Array(re);let ln=0;const sn=new Uint8Array(he.buffer);for(let Yn=0;Yn<re;Yn++){const Kn=Yn<pe?ze:ft;Xt[Yn]=sn.slice(Ye,Ye+Kn),Mn[Yn]=jt.encode(Xt[Yn]),Ye+=Kn,ln=Math.max(ln,Kn)}const ai=new Uint8Array(q);let xt,Hn,Zt=0;for(xt=0;xt<ln;xt++)for(Hn=0;Hn<re;Hn++)xt<Xt[Hn].length&&(ai[Zt++]=Xt[Hn][xt]);for(xt=0;xt<zt;xt++)for(Hn=0;Hn<re;Hn++)ai[Zt++]=Mn[Hn][xt];return ai}(q,he,Re)}(Re,Ae,ge),oe=o.getSymbolSize(Re),pe=new V(oe);return function ye(he,Re){const Ae=he.size,q=W.getPositions(Re);for(let ge=0;ge<q.length;ge++){const X=q[ge][0],re=q[ge][1];for(let oe=-1;oe<=7;oe++)if(!(X+oe<=-1||Ae<=X+oe))for(let pe=-1;pe<=7;pe++)re+pe<=-1||Ae<=re+pe||he.set(X+oe,re+pe,oe>=0&&oe<=6&&(0===pe||6===pe)||pe>=0&&pe<=6&&(0===oe||6===oe)||oe>=2&&oe<=4&&pe>=2&&pe<=4,!0)}}(pe,Re),function Me(he){const Re=he.size;for(let Ae=8;Ae<Re-8;Ae++){const q=Ae%2==0;he.set(Ae,6,q,!0),he.set(6,Ae,q,!0)}}(pe),function je(he,Re){const Ae=U.getPositions(Re);for(let q=0;q<Ae.length;q++){const ge=Ae[q][0],X=Ae[q][1];for(let re=-2;re<=2;re++)for(let oe=-2;oe<=2;oe++)he.set(ge+re,X+oe,-2===re||2===re||-2===oe||2===oe||0===re&&0===oe,!0)}}(pe,Re),_e(pe,Ae,0),Re>=7&&function de(he,Re){const Ae=he.size,q=Z.getEncodedBits(Re);let ge,X,re;for(let oe=0;oe<18;oe++)ge=Math.floor(oe/3),X=oe%3+Ae-8-3,re=1==(q>>oe&1),he.set(ge,X,re,!0),he.set(X,ge,re,!0)}(pe,Re),function Pe(he,Re){const Ae=he.size;let q=-1,ge=Ae-1,X=7,re=0;for(let oe=Ae-1;oe>0;oe-=2)for(6===oe&&oe--;;){for(let pe=0;pe<2;pe++)if(!he.isReserved(ge,oe-pe)){let ve=!1;re<Re.length&&(ve=1==(Re[re]>>>X&1)),he.set(ge,oe-pe,ve),X--,-1===X&&(re++,X=7)}if(ge+=q,ge<0||Ae<=ge){ge-=q,q=-q;break}}}(pe,re),isNaN(q)&&(q=G.getBestMask(pe,_e.bind(null,pe,Ae))),G.applyMask(q,pe),_e(pe,Ae,q),{modules:pe,version:Re,errorCorrectionLevel:Ae,maskPattern:q,segments:ge}}$.create=function(Re,Ae){if(void 0===Re||""===Re)throw new Error("No input text");let ge,X,q=B.M;return void 0!==Ae&&(q=B.from(Ae.errorCorrectionLevel,B.M),ge=Z.from(Ae.version),X=G.from(Ae.maskPattern),Ae.toSJISFunc&&o.setToSJISFunction(Ae.toSJISFunc)),De(Re,ge,q,X)}},2636:(Ve,$,O)=>{const o=O(1106);function B(x){this.genPoly=void 0,this.degree=x,this.degree&&this.initialize(this.degree)}B.prototype.initialize=function(V){this.degree=V,this.genPoly=o.generateECPolynomial(this.degree)},B.prototype.encode=function(V){if(!this.genPoly)throw new Error("Encoder not initialized");const U=new Uint8Array(V.length+this.degree);U.set(V);const W=o.mod(U,this.genPoly),G=this.degree-W.length;if(G>0){const Y=new Uint8Array(this.degree);return Y.set(W,G),Y}return W},Ve.exports=B},2699:(Ve,$)=>{const O="[0-9]+";let B="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";B=B.replace(/u/g,"\\u");const x="(?:(?![A-Z0-9 $%*+\\-./:]|"+B+")(?:.|[\r\n]))+";$.KANJI=new RegExp(B,"g"),$.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),$.BYTE=new RegExp(x,"g"),$.NUMERIC=new RegExp(O,"g"),$.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const V=new RegExp("^"+B+"$"),U=new RegExp("^"+O+"$"),W=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");$.testKanji=function(Y){return V.test(Y)},$.testNumeric=function(Y){return U.test(Y)},$.testAlphanumeric=function(Y){return W.test(Y)}},2033:(Ve,$,O)=>{const o=O(4016),B=O(7783),x=O(2424),V=O(5663),U=O(449),W=O(2699),G=O(4792),Y=O(4901);function se(de){return unescape(encodeURIComponent(de)).length}function Z(de,_e,Pe){const Fe=[];let xe;for(;null!==(xe=de.exec(Pe));)Fe.push({data:xe[0],index:xe.index,mode:_e,length:xe[0].length});return Fe}function Q(de){const _e=Z(W.NUMERIC,o.NUMERIC,de),Pe=Z(W.ALPHANUMERIC,o.ALPHANUMERIC,de);let Fe,xe;return G.isKanjiModeEnabled()?(Fe=Z(W.BYTE,o.BYTE,de),xe=Z(W.KANJI,o.KANJI,de)):(Fe=Z(W.BYTE_KANJI,o.BYTE,de),xe=[]),_e.concat(Pe,Fe,xe).sort(function(he,Re){return he.index-Re.index}).map(function(he){return{data:he.data,mode:he.mode,length:he.length}})}function ee(de,_e){switch(_e){case o.NUMERIC:return B.getBitsLength(de);case o.ALPHANUMERIC:return x.getBitsLength(de);case o.KANJI:return U.getBitsLength(de);case o.BYTE:return V.getBitsLength(de)}}function je(de,_e){let Pe;const Fe=o.getBestModeForData(de);if(Pe=o.from(_e,Fe),Pe!==o.BYTE&&Pe.bit<Fe.bit)throw new Error('"'+de+'" cannot be encoded with mode '+o.toString(Pe)+".\n Suggested mode is: "+o.toString(Fe));switch(Pe===o.KANJI&&!G.isKanjiModeEnabled()&&(Pe=o.BYTE),Pe){case o.NUMERIC:return new B(de);case o.ALPHANUMERIC:return new x(de);case o.KANJI:return new U(de);case o.BYTE:return new V(de)}}$.fromArray=function(_e){return _e.reduce(function(Pe,Fe){return"string"==typeof Fe?Pe.push(je(Fe,null)):Fe.data&&Pe.push(je(Fe.data,Fe.mode)),Pe},[])},$.fromString=function(_e,Pe){const xe=function ye(de){const _e=[];for(let Pe=0;Pe<de.length;Pe++){const Fe=de[Pe];switch(Fe.mode){case o.NUMERIC:_e.push([Fe,{data:Fe.data,mode:o.ALPHANUMERIC,length:Fe.length},{data:Fe.data,mode:o.BYTE,length:Fe.length}]);break;case o.ALPHANUMERIC:_e.push([Fe,{data:Fe.data,mode:o.BYTE,length:Fe.length}]);break;case o.KANJI:_e.push([Fe,{data:Fe.data,mode:o.BYTE,length:se(Fe.data)}]);break;case o.BYTE:_e.push([{data:Fe.data,mode:o.BYTE,length:se(Fe.data)}])}}return _e}(Q(_e,G.isKanjiModeEnabled())),De=function Me(de,_e){const Pe={},Fe={start:{}};let xe=["start"];for(let De=0;De<de.length;De++){const he=de[De],Re=[];for(let Ae=0;Ae<he.length;Ae++){const q=he[Ae],ge=""+De+Ae;Re.push(ge),Pe[ge]={node:q,lastCount:0},Fe[ge]={};for(let X=0;X<xe.length;X++){const re=xe[X];Pe[re]&&Pe[re].node.mode===q.mode?(Fe[re][ge]=ee(Pe[re].lastCount+q.length,q.mode)-ee(Pe[re].lastCount,q.mode),Pe[re].lastCount+=q.length):(Pe[re]&&(Pe[re].lastCount=q.length),Fe[re][ge]=ee(q.length,q.mode)+4+o.getCharCountIndicator(q.mode,_e))}}xe=Re}for(let De=0;De<xe.length;De++)Fe[xe[De]].end=0;return{map:Fe,table:Pe}}(xe,Pe),he=Y.find_path(De.map,"start","end"),Re=[];for(let Ae=1;Ae<he.length-1;Ae++)Re.push(De.table[he[Ae]].node);return $.fromArray(function ke(de){return de.reduce(function(_e,Pe){const Fe=_e.length-1>=0?_e[_e.length-1]:null;return Fe&&Fe.mode===Pe.mode?(_e[_e.length-1].data+=Pe.data,_e):(_e.push(Pe),_e)},[])}(Re))},$.rawSplit=function(_e){return $.fromArray(Q(_e,G.isKanjiModeEnabled()))}},4792:(Ve,$)=>{let O;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];$.getSymbolSize=function(x){if(!x)throw new Error('"version" cannot be null or undefined');if(x<1||x>40)throw new Error('"version" should be in range from 1 to 40');return 4*x+17},$.getSymbolTotalCodewords=function(x){return o[x]},$.getBCHDigit=function(B){let x=0;for(;0!==B;)x++,B>>>=1;return x},$.setToSJISFunction=function(x){if("function"!=typeof x)throw new Error('"toSJISFunc" is not a valid function.');O=x},$.isKanjiModeEnabled=function(){return void 0!==O},$.toSJIS=function(x){return O(x)}},4406:(Ve,$)=>{$.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40}},2088:(Ve,$,O)=>{const o=O(4792),B=O(4655),x=O(2259),V=O(4016),U=O(4406),G=o.getBCHDigit(7973);function se(ee,ke){return V.getCharCountIndicator(ee,ke)+4}function Z(ee,ke){let ye=0;return ee.forEach(function(Me){ye+=se(Me.mode,ke)+Me.getBitsLength()}),ye}$.from=function(ke,ye){return U.isValid(ke)?parseInt(ke,10):ye},$.getCapacity=function(ke,ye,Me){if(!U.isValid(ke))throw new Error("Invalid QR Code version");void 0===Me&&(Me=V.BYTE);const _e=8*(o.getSymbolTotalCodewords(ke)-B.getTotalCodewordsCount(ke,ye));if(Me===V.MIXED)return _e;const Pe=_e-se(Me,ke);switch(Me){case V.NUMERIC:return Math.floor(Pe/10*3);case V.ALPHANUMERIC:return Math.floor(Pe/11*2);case V.KANJI:return Math.floor(Pe/13);default:return Math.floor(Pe/8)}},$.getBestVersionForData=function(ke,ye){let Me;const je=x.from(ye,x.M);if(Array.isArray(ke)){if(ke.length>1)return function Q(ee,ke){for(let ye=1;ye<=40;ye++)if(Z(ee,ye)<=$.getCapacity(ye,ke,V.MIXED))return ye}(ke,je);if(0===ke.length)return 1;Me=ke[0]}else Me=ke;return function Y(ee,ke,ye){for(let Me=1;Me<=40;Me++)if(ke<=$.getCapacity(Me,ye,ee))return Me}(Me.mode,Me.getLength(),je)},$.getEncodedBits=function(ke){if(!U.isValid(ke)||ke<7)throw new Error("Invalid QR Code version");let ye=ke<<12;for(;o.getBCHDigit(ye)-G>=0;)ye^=7973<<o.getBCHDigit(ye)-G;return ke<<12|ye}},3210:(Ve,$,O)=>{const o=O(6355);$.render=function(U,W,G){let Y=G,se=W;void 0===Y&&(!W||!W.getContext)&&(Y=W,W=void 0),W||(se=function x(){try{return document.createElement("canvas")}catch(V){throw new Error("You need to specify a canvas element")}}()),Y=o.getOptions(Y);const Z=o.getImageWidth(U.modules.size,Y),Q=se.getContext("2d"),ee=Q.createImageData(Z,Z);return o.qrToImageData(ee.data,U,Y),function B(V,U,W){V.clearRect(0,0,U.width,U.height),U.style||(U.style={}),U.height=W,U.width=W,U.style.height=W+"px",U.style.width=W+"px"}(Q,se,Z),Q.putImageData(ee,0,0),se},$.renderToDataURL=function(U,W,G){let Y=G;return void 0===Y&&(!W||!W.getContext)&&(Y=W,W=void 0),Y||(Y={}),$.render(U,W,Y).toDataURL(Y.type||"image/png",(Y.rendererOpts||{}).quality)}},2334:(Ve,$,O)=>{const o=O(6355);function B(U,W){const G=U.a/255,Y=W+'="'+U.hex+'"';return G<1?Y+" "+W+'-opacity="'+G.toFixed(2).slice(1)+'"':Y}function x(U,W,G){let Y=U+W;return void 0!==G&&(Y+=" "+G),Y}$.render=function(W,G,Y){const se=o.getOptions(G),Z=W.modules.size,Q=W.modules.data,ee=Z+2*se.margin,ke=se.color.light.a?"<path "+B(se.color.light,"fill")+' d="M0 0h'+ee+"v"+ee+'H0z"/>':"",ye="<path "+B(se.color.dark,"stroke")+' d="'+function V(U,W,G){let Y="",se=0,Z=!1,Q=0;for(let ee=0;ee<U.length;ee++){const ke=Math.floor(ee%W),ye=Math.floor(ee/W);!ke&&!Z&&(Z=!0),U[ee]?(Q++,ee>0&&ke>0&&U[ee-1]||(Y+=Z?x("M",ke+G,.5+ye+G):x("m",se,0),se=0,Z=!1),ke+1<W&&U[ee+1]||(Y+=x("h",Q),Q=0)):se++}return Y}(Q,Z,se.margin)+'"/>',de='<svg xmlns="http://www.w3.org/2000/svg" '+(se.width?'width="'+se.width+'" height="'+se.width+'" ':"")+'viewBox="0 0 '+ee+" "+ee+'" shape-rendering="crispEdges">'+ke+ye+"</svg>\n";return"function"==typeof Y&&Y(null,de),de}},6355:(Ve,$)=>{function O(o){if("number"==typeof o&&(o=o.toString()),"string"!=typeof o)throw new Error("Color should be defined as hex string");let B=o.slice().replace("#","").split("");if(B.length<3||5===B.length||B.length>8)throw new Error("Invalid hex color: "+o);(3===B.length||4===B.length)&&(B=Array.prototype.concat.apply([],B.map(function(V){return[V,V]}))),6===B.length&&B.push("F","F");const x=parseInt(B.join(""),16);return{r:x>>24&255,g:x>>16&255,b:x>>8&255,a:255&x,hex:"#"+B.slice(0,6).join("")}}$.getOptions=function(B){B||(B={}),B.color||(B.color={});const V=B.width&&B.width>=21?B.width:void 0;return{width:V,scale:V?4:B.scale||4,margin:null==B.margin||B.margin<0?4:B.margin,color:{dark:O(B.color.dark||"#000000ff"),light:O(B.color.light||"#ffffffff")},type:B.type,rendererOpts:B.rendererOpts||{}}},$.getScale=function(B,x){return x.width&&x.width>=B+2*x.margin?x.width/(B+2*x.margin):x.scale},$.getImageWidth=function(B,x){const V=$.getScale(B,x);return Math.floor((B+2*x.margin)*V)},$.qrToImageData=function(B,x,V){const U=x.modules.size,W=x.modules.data,G=$.getScale(U,V),Y=Math.floor((U+2*V.margin)*G),se=V.margin*G,Z=[V.color.light,V.color.dark];for(let Q=0;Q<Y;Q++)for(let ee=0;ee<Y;ee++){let ke=4*(Q*Y+ee),ye=V.color.light;Q>=se&&ee>=se&&Q<Y-se&&ee<Y-se&&(ye=Z[W[Math.floor((Q-se)/G)*U+Math.floor((ee-se)/G)]?1:0]),B[ke++]=ye.r,B[ke++]=ye.g,B[ke++]=ye.b,B[ke]=ye.a}}},8306:(Ve,$,O)=>{"use strict";O.d($,{y:()=>Z});var o=O(930),B=O(727),x=O(8822),V=O(4671);var G=O(2416),Y=O(576),se=O(2806);let Z=(()=>{class ye{constructor(je){je&&(this._subscribe=je)}lift(je){const de=new ye;return de.source=this,de.operator=je,de}subscribe(je,de,_e){const Pe=function ke(ye){return ye&&ye instanceof o.Lv||function ee(ye){return ye&&(0,Y.m)(ye.next)&&(0,Y.m)(ye.error)&&(0,Y.m)(ye.complete)}(ye)&&(0,B.Nn)(ye)}(je)?je:new o.Hp(je,de,_e);return(0,se.x)(()=>{const{operator:Fe,source:xe}=this;Pe.add(Fe?Fe.call(Pe,xe):xe?this._subscribe(Pe):this._trySubscribe(Pe))}),Pe}_trySubscribe(je){try{return this._subscribe(je)}catch(de){je.error(de)}}forEach(je,de){return new(de=Q(de))((_e,Pe)=>{const Fe=new o.Hp({next:xe=>{try{je(xe)}catch(De){Pe(De),Fe.unsubscribe()}},error:Pe,complete:_e});this.subscribe(Fe)})}_subscribe(je){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(je)}[x.L](){return this}pipe(...je){return function W(ye){return 0===ye.length?V.y:1===ye.length?ye[0]:function(je){return ye.reduce((de,_e)=>_e(de),je)}}(je)(this)}toPromise(je){return new(je=Q(je))((de,_e)=>{let Pe;this.subscribe(Fe=>Pe=Fe,Fe=>_e(Fe),()=>de(Pe))})}}return ye.create=Me=>new ye(Me),ye})();function Q(ye){var Me;return null!==(Me=null!=ye?ye:G.v.Promise)&&void 0!==Me?Me:Promise}},7579:(Ve,$,O)=>{"use strict";O.d($,{x:()=>G});var o=O(8306),B=O(727);const V=(0,O(3888).d)(se=>function(){se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var U=O(8737),W=O(2806);let G=(()=>{class se extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Q){const ee=new Y(this,this);return ee.operator=Q,ee}_throwIfClosed(){if(this.closed)throw new V}next(Q){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(Q)}})}error(Q){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Q;const{observers:ee}=this;for(;ee.length;)ee.shift().error(Q)}})}complete(){(0,W.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Q}=this;for(;Q.length;)Q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Q;return(null===(Q=this.observers)||void 0===Q?void 0:Q.length)>0}_trySubscribe(Q){return this._throwIfClosed(),super._trySubscribe(Q)}_subscribe(Q){return this._throwIfClosed(),this._checkFinalizedStatuses(Q),this._innerSubscribe(Q)}_innerSubscribe(Q){const{hasError:ee,isStopped:ke,observers:ye}=this;return ee||ke?B.Lc:(this.currentObservers=null,ye.push(Q),new B.w0(()=>{this.currentObservers=null,(0,U.P)(ye,Q)}))}_checkFinalizedStatuses(Q){const{hasError:ee,thrownError:ke,isStopped:ye}=this;ee?Q.error(ke):ye&&Q.complete()}asObservable(){const Q=new o.y;return Q.source=this,Q}}return se.create=(Z,Q)=>new Y(Z,Q),se})();class Y extends G{constructor(Z,Q){super(),this.destination=Z,this.source=Q}next(Z){var Q,ee;null===(ee=null===(Q=this.destination)||void 0===Q?void 0:Q.next)||void 0===ee||ee.call(Q,Z)}error(Z){var Q,ee;null===(ee=null===(Q=this.destination)||void 0===Q?void 0:Q.error)||void 0===ee||ee.call(Q,Z)}complete(){var Z,Q;null===(Q=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===Q||Q.call(Z)}_subscribe(Z){var Q,ee;return null!==(ee=null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(Z))&&void 0!==ee?ee:B.Lc}}},930:(Ve,$,O)=>{"use strict";O.d($,{Hp:()=>je,Lv:()=>ee});var o=O(576),B=O(727),x=O(2416),V=O(7849),U=O(5032);const W=se("C",void 0,void 0);function se(xe,De,he){return{kind:xe,value:De,error:he}}var Z=O(3410),Q=O(2806);class ee extends B.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,B.Nn)(De)&&De.add(this)):this.destination=Fe}static create(De,he,Re){return new je(De,he,Re)}next(De){this.isStopped?Pe(function Y(xe){return se("N",xe,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Pe(function G(xe){return se("E",void 0,xe)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Pe(W,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function ye(xe,De){return ke.call(xe,De)}class Me{constructor(De){this.partialObserver=De}next(De){const{partialObserver:he}=this;if(he.next)try{he.next(De)}catch(Re){de(Re)}}error(De){const{partialObserver:he}=this;if(he.error)try{he.error(De)}catch(Re){de(Re)}else de(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(he){de(he)}}}class je extends ee{constructor(De,he,Re){let Ae;if(super(),(0,o.m)(De)||!De)Ae={next:null!=De?De:void 0,error:null!=he?he:void 0,complete:null!=Re?Re:void 0};else{let q;this&&x.v.useDeprecatedNextContext?(q=Object.create(De),q.unsubscribe=()=>this.unsubscribe(),Ae={next:De.next&&ye(De.next,q),error:De.error&&ye(De.error,q),complete:De.complete&&ye(De.complete,q)}):Ae=De}this.destination=new Me(Ae)}}function de(xe){x.v.useDeprecatedSynchronousErrorHandling?(0,Q.O)(xe):(0,V.h)(xe)}function Pe(xe,De){const{onStoppedNotification:he}=x.v;he&&Z.z.setTimeout(()=>he(xe,De))}const Fe={closed:!0,next:U.Z,error:function _e(xe){throw xe},complete:U.Z}},727:(Ve,$,O)=>{"use strict";O.d($,{Lc:()=>W,w0:()=>U,Nn:()=>G});var o=O(576);const x=(0,O(3888).d)(se=>function(Q){se(this),this.message=Q?`${Q.length} errors occurred during unsubscription:\n${Q.map((ee,ke)=>`${ke+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Q});var V=O(8737);class U{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:Q}=this;if(Q)if(this._parentage=null,Array.isArray(Q))for(const ye of Q)ye.remove(this);else Q.remove(this);const{initialTeardown:ee}=this;if((0,o.m)(ee))try{ee()}catch(ye){Z=ye instanceof x?ye.errors:[ye]}const{_finalizers:ke}=this;if(ke){this._finalizers=null;for(const ye of ke)try{Y(ye)}catch(Me){Z=null!=Z?Z:[],Me instanceof x?Z=[...Z,...Me.errors]:Z.push(Me)}}if(Z)throw new x(Z)}}add(Z){var Q;if(Z&&Z!==this)if(this.closed)Y(Z);else{if(Z instanceof U){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(Q=this._finalizers)&&void 0!==Q?Q:[]).push(Z)}}_hasParent(Z){const{_parentage:Q}=this;return Q===Z||Array.isArray(Q)&&Q.includes(Z)}_addParent(Z){const{_parentage:Q}=this;this._parentage=Array.isArray(Q)?(Q.push(Z),Q):Q?[Q,Z]:Z}_removeParent(Z){const{_parentage:Q}=this;Q===Z?this._parentage=null:Array.isArray(Q)&&(0,V.P)(Q,Z)}remove(Z){const{_finalizers:Q}=this;Q&&(0,V.P)(Q,Z),Z instanceof U&&Z._removeParent(this)}}U.EMPTY=(()=>{const se=new U;return se.closed=!0,se})();const W=U.EMPTY;function G(se){return se instanceof U||se&&"closed"in se&&(0,o.m)(se.remove)&&(0,o.m)(se.add)&&(0,o.m)(se.unsubscribe)}function Y(se){(0,o.m)(se)?se():se.unsubscribe()}},2416:(Ve,$,O)=>{"use strict";O.d($,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ve,$,O)=>{"use strict";O.d($,{E:()=>B});const B=new(O(8306).y)(U=>U.complete())},8996:(Ve,$,O)=>{"use strict";O.d($,{D:()=>De});var o=O(8421),B=O(5363),x=O(9468),W=O(8306),Y=O(2202),se=O(576),Z=O(9672);function ee(he,Re){if(!he)throw new Error("Iterable cannot be null");return new W.y(Ae=>{(0,Z.f)(Ae,Re,()=>{const q=he[Symbol.asyncIterator]();(0,Z.f)(Ae,Re,()=>{q.next().then(ge=>{ge.done?Ae.complete():Ae.next(ge.value)})},0,!0)})})}var ke=O(3670),ye=O(8239),Me=O(1144),je=O(6495),de=O(2206),_e=O(4532),Pe=O(3260);function De(he,Re){return Re?function xe(he,Re){if(null!=he){if((0,ke.c)(he))return function V(he,Re){return(0,o.Xf)(he).pipe((0,x.R)(Re),(0,B.Q)(Re))}(he,Re);if((0,Me.z)(he))return function G(he,Re){return new W.y(Ae=>{let q=0;return Re.schedule(function(){q===he.length?Ae.complete():(Ae.next(he[q++]),Ae.closed||this.schedule())})})}(he,Re);if((0,ye.t)(he))return function U(he,Re){return(0,o.Xf)(he).pipe((0,x.R)(Re),(0,B.Q)(Re))}(he,Re);if((0,de.D)(he))return ee(he,Re);if((0,je.T)(he))return function Q(he,Re){return new W.y(Ae=>{let q;return(0,Z.f)(Ae,Re,()=>{q=he[Y.h](),(0,Z.f)(Ae,Re,()=>{let ge,X;try{({value:ge,done:X}=q.next())}catch(re){return void Ae.error(re)}X?Ae.complete():Ae.next(ge)},0,!0)}),()=>(0,se.m)(null==q?void 0:q.return)&&q.return()})}(he,Re);if((0,Pe.L)(he))return function Fe(he,Re){return ee((0,Pe.Q)(he),Re)}(he,Re)}throw(0,_e.z)(he)}(he,Re):(0,o.Xf)(he)}},8421:(Ve,$,O)=>{"use strict";O.d($,{Xf:()=>ke});var o=O(655),B=O(1144),x=O(8239),V=O(8306),U=O(3670),W=O(2206),G=O(4532),Y=O(6495),se=O(3260),Z=O(576),Q=O(7849),ee=O(8822);function ke(xe){if(xe instanceof V.y)return xe;if(null!=xe){if((0,U.c)(xe))return function ye(xe){return new V.y(De=>{const he=xe[ee.L]();if((0,Z.m)(he.subscribe))return he.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,B.z)(xe))return function Me(xe){return new V.y(De=>{for(let he=0;he<xe.length&&!De.closed;he++)De.next(xe[he]);De.complete()})}(xe);if((0,x.t)(xe))return function je(xe){return new V.y(De=>{xe.then(he=>{De.closed||(De.next(he),De.complete())},he=>De.error(he)).then(null,Q.h)})}(xe);if((0,W.D)(xe))return _e(xe);if((0,Y.T)(xe))return function de(xe){return new V.y(De=>{for(const he of xe)if(De.next(he),De.closed)return;De.complete()})}(xe);if((0,se.L)(xe))return function Pe(xe){return _e((0,se.Q)(xe))}(xe)}throw(0,G.z)(xe)}function _e(xe){return new V.y(De=>{(function Fe(xe,De){var he,Re,Ae,q;return(0,o.mG)(this,void 0,void 0,function*(){try{for(he=(0,o.KL)(xe);!(Re=yield he.next()).done;)if(De.next(Re.value),De.closed)return}catch(ge){Ae={error:ge}}finally{try{Re&&!Re.done&&(q=he.return)&&(yield q.call(he))}finally{if(Ae)throw Ae.error}}De.complete()})})(xe,De).catch(he=>De.error(he))})}},6451:(Ve,$,O)=>{"use strict";O.d($,{T:()=>W});var o=O(8189),B=O(8421),x=O(515),V=O(3269),U=O(8996);function W(...G){const Y=(0,V.yG)(G),se=(0,V._6)(G,1/0),Z=G;return Z.length?1===Z.length?(0,B.Xf)(Z[0]):(0,o.J)(se)((0,U.D)(Z,Y)):x.E}},5403:(Ve,$,O)=>{"use strict";O.d($,{x:()=>B});var o=O(930);function B(V,U,W,G,Y){return new x(V,U,W,G,Y)}class x extends o.Lv{constructor(U,W,G,Y,se,Z){super(U),this.onFinalize=se,this.shouldUnsubscribe=Z,this._next=W?function(Q){try{W(Q)}catch(ee){U.error(ee)}}:super._next,this._error=Y?function(Q){try{Y(Q)}catch(ee){U.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=G?function(){try{G()}catch(Q){U.error(Q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var U;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:W}=this;super.unsubscribe(),!W&&(null===(U=this.onFinalize)||void 0===U||U.call(this))}}}},4004:(Ve,$,O)=>{"use strict";O.d($,{U:()=>x});var o=O(4482),B=O(5403);function x(V,U){return(0,o.e)((W,G)=>{let Y=0;W.subscribe((0,B.x)(G,se=>{G.next(V.call(U,se,Y++))}))})}},8189:(Ve,$,O)=>{"use strict";O.d($,{J:()=>x});var o=O(5577),B=O(4671);function x(V=1/0){return(0,o.z)(B.y,V)}},5577:(Ve,$,O)=>{"use strict";O.d($,{z:()=>Y});var o=O(4004),B=O(8421),x=O(4482),V=O(9672),U=O(5403),G=O(576);function Y(se,Z,Q=1/0){return(0,G.m)(Z)?Y((ee,ke)=>(0,o.U)((ye,Me)=>Z(ee,ye,ke,Me))((0,B.Xf)(se(ee,ke))),Q):("number"==typeof Z&&(Q=Z),(0,x.e)((ee,ke)=>function W(se,Z,Q,ee,ke,ye,Me,je){const de=[];let _e=0,Pe=0,Fe=!1;const xe=()=>{Fe&&!de.length&&!_e&&Z.complete()},De=Re=>_e<ee?he(Re):de.push(Re),he=Re=>{ye&&Z.next(Re),_e++;let Ae=!1;(0,B.Xf)(Q(Re,Pe++)).subscribe((0,U.x)(Z,q=>{null==ke||ke(q),ye?De(q):Z.next(q)},()=>{Ae=!0},void 0,()=>{if(Ae)try{for(_e--;de.length&&_e<ee;){const q=de.shift();Me?(0,V.f)(Z,Me,()=>he(q)):he(q)}xe()}catch(q){Z.error(q)}}))};return se.subscribe((0,U.x)(Z,De,()=>{Fe=!0,xe()})),()=>{null==je||je()}}(ee,ke,se,Q)))}},5363:(Ve,$,O)=>{"use strict";O.d($,{Q:()=>V});var o=O(9672),B=O(4482),x=O(5403);function V(U,W=0){return(0,B.e)((G,Y)=>{G.subscribe((0,x.x)(Y,se=>(0,o.f)(Y,U,()=>Y.next(se),W),()=>(0,o.f)(Y,U,()=>Y.complete(),W),se=>(0,o.f)(Y,U,()=>Y.error(se),W)))})}},3099:(Ve,$,O)=>{"use strict";O.d($,{B:()=>W});var o=O(8996),B=O(5698),x=O(7579),V=O(930),U=O(4482);function W(Y={}){const{connector:se=(()=>new x.x),resetOnError:Z=!0,resetOnComplete:Q=!0,resetOnRefCountZero:ee=!0}=Y;return ke=>{let ye=null,Me=null,je=null,de=0,_e=!1,Pe=!1;const Fe=()=>{null==Me||Me.unsubscribe(),Me=null},xe=()=>{Fe(),ye=je=null,_e=Pe=!1},De=()=>{const he=ye;xe(),null==he||he.unsubscribe()};return(0,U.e)((he,Re)=>{de++,!Pe&&!_e&&Fe();const Ae=je=null!=je?je:se();Re.add(()=>{de--,0===de&&!Pe&&!_e&&(Me=G(De,ee))}),Ae.subscribe(Re),ye||(ye=new V.Hp({next:q=>Ae.next(q),error:q=>{Pe=!0,Fe(),Me=G(xe,Z,q),Ae.error(q)},complete:()=>{_e=!0,Fe(),Me=G(xe,Q),Ae.complete()}}),(0,o.D)(he).subscribe(ye))})(ke)}}function G(Y,se,...Z){return!0===se?(Y(),null):!1===se?null:se(...Z).pipe((0,B.q)(1)).subscribe(()=>Y())}},9468:(Ve,$,O)=>{"use strict";O.d($,{R:()=>B});var o=O(4482);function B(x,V=0){return(0,o.e)((U,W)=>{W.add(x.schedule(()=>U.subscribe(W),V))})}},5698:(Ve,$,O)=>{"use strict";O.d($,{q:()=>V});var o=O(515),B=O(4482),x=O(5403);function V(U){return U<=0?()=>o.E:(0,B.e)((W,G)=>{let Y=0;W.subscribe((0,x.x)(G,se=>{++Y<=U&&(G.next(se),U<=Y&&G.complete())}))})}},8505:(Ve,$,O)=>{"use strict";O.d($,{b:()=>U});var o=O(576),B=O(4482),x=O(5403),V=O(4671);function U(W,G,Y){const se=(0,o.m)(W)||G||Y?{next:W,error:G,complete:Y}:W;return se?(0,B.e)((Z,Q)=>{var ee;null===(ee=se.subscribe)||void 0===ee||ee.call(se);let ke=!0;Z.subscribe((0,x.x)(Q,ye=>{var Me;null===(Me=se.next)||void 0===Me||Me.call(se,ye),Q.next(ye)},()=>{var ye;ke=!1,null===(ye=se.complete)||void 0===ye||ye.call(se),Q.complete()},ye=>{var Me;ke=!1,null===(Me=se.error)||void 0===Me||Me.call(se,ye),Q.error(ye)},()=>{var ye,Me;ke&&(null===(ye=se.unsubscribe)||void 0===ye||ye.call(se)),null===(Me=se.finalize)||void 0===Me||Me.call(se)}))}):V.y}},4408:(Ve,$,O)=>{"use strict";O.d($,{o:()=>U});var o=O(727);class B extends o.w0{constructor(G,Y){super()}schedule(G,Y=0){return this}}const x={setInterval(W,G,...Y){const{delegate:se}=x;return(null==se?void 0:se.setInterval)?se.setInterval(W,G,...Y):setInterval(W,G,...Y)},clearInterval(W){const{delegate:G}=x;return((null==G?void 0:G.clearInterval)||clearInterval)(W)},delegate:void 0};var V=O(8737);class U extends B{constructor(G,Y){super(G,Y),this.scheduler=G,this.work=Y,this.pending=!1}schedule(G,Y=0){if(this.closed)return this;this.state=G;const se=this.id,Z=this.scheduler;return null!=se&&(this.id=this.recycleAsyncId(Z,se,Y)),this.pending=!0,this.delay=Y,this.id=this.id||this.requestAsyncId(Z,this.id,Y),this}requestAsyncId(G,Y,se=0){return x.setInterval(G.flush.bind(G,this),se)}recycleAsyncId(G,Y,se=0){if(null!=se&&this.delay===se&&!1===this.pending)return Y;x.clearInterval(Y)}execute(G,Y){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const se=this._execute(G,Y);if(se)return se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(G,Y){let Z,se=!1;try{this.work(G)}catch(Q){se=!0,Z=Q||new Error("Scheduled action threw falsy error")}if(se)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:G,scheduler:Y}=this,{actions:se}=Y;this.work=this.state=this.scheduler=null,this.pending=!1,(0,V.P)(se,this),null!=G&&(this.id=this.recycleAsyncId(Y,G,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ve,$,O)=>{"use strict";O.d($,{v:()=>x});var o=O(6063);class B{constructor(U,W=B.now){this.schedulerActionCtor=U,this.now=W}schedule(U,W=0,G){return new this.schedulerActionCtor(this,U).schedule(G,W)}}B.now=o.l.now;class x extends B{constructor(U,W=B.now){super(U,W),this.actions=[],this._active=!1,this._scheduled=void 0}flush(U){const{actions:W}=this;if(this._active)return void W.push(U);let G;this._active=!0;do{if(G=U.execute(U.state,U.delay))break}while(U=W.shift());if(this._active=!1,G){for(;U=W.shift();)U.unsubscribe();throw G}}}},4986:(Ve,$,O)=>{"use strict";O.d($,{P:()=>V,z:()=>x});var o=O(4408);const x=new(O(7565).v)(o.o),V=x},6063:(Ve,$,O)=>{"use strict";O.d($,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(Ve,$,O)=>{"use strict";O.d($,{z:()=>o});const o={setTimeout(B,x,...V){const{delegate:U}=o;return(null==U?void 0:U.setTimeout)?U.setTimeout(B,x,...V):setTimeout(B,x,...V)},clearTimeout(B){const{delegate:x}=o;return((null==x?void 0:x.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(Ve,$,O)=>{"use strict";O.d($,{h:()=>B});const B=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ve,$,O)=>{"use strict";O.d($,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ve,$,O)=>{"use strict";O.d($,{_6:()=>W,jO:()=>V,yG:()=>U});var o=O(576),B=O(3532);function x(G){return G[G.length-1]}function V(G){return(0,o.m)(x(G))?G.pop():void 0}function U(G){return(0,B.K)(x(G))?G.pop():void 0}function W(G,Y){return"number"==typeof x(G)?G.pop():Y}},8737:(Ve,$,O)=>{"use strict";function o(B,x){if(B){const V=B.indexOf(x);0<=V&&B.splice(V,1)}}O.d($,{P:()=>o})},3888:(Ve,$,O)=>{"use strict";function o(B){const V=B(U=>{Error.call(U),U.stack=(new Error).stack});return V.prototype=Object.create(Error.prototype),V.prototype.constructor=V,V}O.d($,{d:()=>o})},2806:(Ve,$,O)=>{"use strict";O.d($,{O:()=>V,x:()=>x});var o=O(2416);let B=null;function x(U){if(o.v.useDeprecatedSynchronousErrorHandling){const W=!B;if(W&&(B={errorThrown:!1,error:null}),U(),W){const{errorThrown:G,error:Y}=B;if(B=null,G)throw Y}}else U()}function V(U){o.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=U)}},9672:(Ve,$,O)=>{"use strict";function o(B,x,V,U=0,W=!1){const G=x.schedule(function(){V(),W?B.add(this.schedule(null,U)):this.unsubscribe()},U);if(B.add(G),!W)return G}O.d($,{f:()=>o})},4671:(Ve,$,O)=>{"use strict";function o(B){return B}O.d($,{y:()=>o})},1144:(Ve,$,O)=>{"use strict";O.d($,{z:()=>o});const o=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(Ve,$,O)=>{"use strict";O.d($,{D:()=>B});var o=O(576);function B(x){return Symbol.asyncIterator&&(0,o.m)(null==x?void 0:x[Symbol.asyncIterator])}},576:(Ve,$,O)=>{"use strict";function o(B){return"function"==typeof B}O.d($,{m:()=>o})},3670:(Ve,$,O)=>{"use strict";O.d($,{c:()=>x});var o=O(8822),B=O(576);function x(V){return(0,B.m)(V[o.L])}},6495:(Ve,$,O)=>{"use strict";O.d($,{T:()=>x});var o=O(2202),B=O(576);function x(V){return(0,B.m)(null==V?void 0:V[o.h])}},8239:(Ve,$,O)=>{"use strict";O.d($,{t:()=>B});var o=O(576);function B(x){return(0,o.m)(null==x?void 0:x.then)}},3260:(Ve,$,O)=>{"use strict";O.d($,{L:()=>V,Q:()=>x});var o=O(655),B=O(576);function x(U){return(0,o.FC)(this,arguments,function*(){const G=U.getReader();try{for(;;){const{value:Y,done:se}=yield(0,o.qq)(G.read());if(se)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(Y)}}finally{G.releaseLock()}})}function V(U){return(0,B.m)(null==U?void 0:U.getReader)}},3532:(Ve,$,O)=>{"use strict";O.d($,{K:()=>B});var o=O(576);function B(x){return x&&(0,o.m)(x.schedule)}},4482:(Ve,$,O)=>{"use strict";O.d($,{A:()=>B,e:()=>x});var o=O(576);function B(V){return(0,o.m)(null==V?void 0:V.lift)}function x(V){return U=>{if(B(U))return U.lift(function(W){try{return V(W,this)}catch(G){this.error(G)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ve,$,O)=>{"use strict";function o(){}O.d($,{Z:()=>o})},7849:(Ve,$,O)=>{"use strict";O.d($,{h:()=>x});var o=O(2416),B=O(3410);function x(V){B.z.setTimeout(()=>{const{onUnhandledError:U}=o.v;if(!U)throw V;U(V)})}},4532:(Ve,$,O)=>{"use strict";function o(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d($,{z:()=>o})},655:(Ve,$,O)=>{"use strict";function V(X,re){var oe={};for(var pe in X)Object.prototype.hasOwnProperty.call(X,pe)&&re.indexOf(pe)<0&&(oe[pe]=X[pe]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var ve=0;for(pe=Object.getOwnPropertySymbols(X);ve<pe.length;ve++)re.indexOf(pe[ve])<0&&Object.prototype.propertyIsEnumerable.call(X,pe[ve])&&(oe[pe[ve]]=X[pe[ve]])}return oe}function Y(X,re,oe,pe){return new(oe||(oe=Promise))(function(ze,ft){function zt(Xt){try{Ye(pe.next(Xt))}catch(Mn){ft(Mn)}}function jt(Xt){try{Ye(pe.throw(Xt))}catch(Mn){ft(Mn)}}function Ye(Xt){Xt.done?ze(Xt.value):function ve(ze){return ze instanceof oe?ze:new oe(function(ft){ft(ze)})}(Xt.value).then(zt,jt)}Ye((pe=pe.apply(X,re||[])).next())})}function de(X){return this instanceof de?(this.v=X,this):new de(X)}function _e(X,re,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,pe=oe.apply(X,re||[]),ze=[];return ve={},ft("next"),ft("throw"),ft("return"),ve[Symbol.asyncIterator]=function(){return this},ve;function ft(ln){pe[ln]&&(ve[ln]=function(sn){return new Promise(function(ai,Zt){ze.push([ln,sn,ai,Zt])>1||zt(ln,sn)})})}function zt(ln,sn){try{!function jt(ln){ln.value instanceof de?Promise.resolve(ln.value.v).then(Ye,Xt):Mn(ze[0][2],ln)}(pe[ln](sn))}catch(ai){Mn(ze[0][3],ai)}}function Ye(ln){zt("next",ln)}function Xt(ln){zt("throw",ln)}function Mn(ln,sn){ln(sn),ze.shift(),ze.length&&zt(ze[0][0],ze[0][1])}}function Fe(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,re=X[Symbol.asyncIterator];return re?re.call(X):(X=function ee(X){var re="function"==typeof Symbol&&Symbol.iterator,oe=re&&X[re],pe=0;if(oe)return oe.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&pe>=X.length&&(X=void 0),{value:X&&X[pe++],done:!X}}};throw new TypeError(re?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),oe={},pe("next"),pe("throw"),pe("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function pe(ze){oe[ze]=X[ze]&&function(ft){return new Promise(function(zt,jt){!function ve(ze,ft,zt,jt){Promise.resolve(jt).then(function(Ye){ze({value:Ye,done:zt})},ft)}(zt,jt,(ft=X[ze](ft)).done,ft.value)})}}}O.d($,{FC:()=>_e,KL:()=>Fe,_T:()=>V,mG:()=>Y,qq:()=>de})},5e3:(Ve,$,O)=>{"use strict";O.d($,{$8M:()=>Fc,$Z:()=>tM,AFp:()=>qk,AaK:()=>Y,BQk:()=>Pb,CHM:()=>Qo,CRH:()=>p0,CZH:()=>zT,CqO:()=>P_,EJc:()=>w2,EiD:()=>Vg,EpF:()=>nM,F$t:()=>tf,F4k:()=>Yl,FYo:()=>fT,FiY:()=>Rr,G48:()=>wn,Gf:()=>kT,GfV:()=>mT,GkF:()=>xD,Gpc:()=>Q,Hsn:()=>PD,IIB:()=>S0,Ikx:()=>YD,JOm:()=>F,JVY:()=>Dv,L6k:()=>gh,LAX:()=>Kc,LFG:()=>st,LSH:()=>bh,Lbi:()=>$k,MAs:()=>Wx,MGl:()=>Nb,NdJ:()=>kD,O4$:()=>th,OlP:()=>Bn,Oqu:()=>fu,PXZ:()=>P0,Q6J:()=>SD,QGY:()=>MD,Qsj:()=>pT,R0b:()=>Ns,RDi:()=>Nu,Rgc:()=>ff,SBq:()=>vd,Sil:()=>Wk,Suo:()=>al,TTD:()=>vs,TgZ:()=>O_,Tol:()=>Vb,Udp:()=>Bb,VKq:()=>Y_,VLi:()=>KT,WFA:()=>RD,X6Q:()=>V0,XFs:()=>wt,Xpm:()=>vt,Y36:()=>R_,YKP:()=>bT,YNc:()=>Ab,Yjl:()=>Cl,Yz7:()=>sn,ZZ4:()=>$0,_Bn:()=>uT,_UZ:()=>Hp,_Vd:()=>n0,_c5:()=>iR,_uU:()=>bM,aQg:()=>W0,c2e:()=>v2,cJS:()=>Zt,cg1:()=>QD,d8E:()=>KD,dDg:()=>YT,deG:()=>Tg,dqk:()=>Yt,eBb:()=>Tv,eFA:()=>cm,ekj:()=>Kl,f3M:()=>Vt,g9A:()=>om,h0i:()=>cf,hGG:()=>_I,hij:()=>V_,i9L:()=>ip,iGM:()=>MT,ifc:()=>Jt,ip1:()=>x0,kL8:()=>FM,kYT:()=>bl,kcU:()=>vg,lG2:()=>hc,mCW:()=>rd,n5z:()=>Nc,n_E:()=>im,oAB:()=>Qi,oxw:()=>N_,pB0:()=>hp,q3G:()=>On,q4F:()=>gT,qLn:()=>Ah,qOj:()=>Db,qZA:()=>ef,qzn:()=>Yc,sBO:()=>pm,sIi:()=>Fp,s_b:()=>mu,soG:()=>qT,tBr:()=>yr,tb:()=>ay,tp0:()=>Ya,uIk:()=>Tb,vHH:()=>Me,vpe:()=>Bo,wAp:()=>St,xp6:()=>sr,yhl:()=>mh,ynx:()=>Ob,z2F:()=>dy,z3N:()=>Js,zSh:()=>hb,zs3:()=>ga});var o=O(7579),B=O(727),x=O(8306),V=O(6451),U=O(3099);function W(a){for(let l in a)if(a[l]===W)return l;throw Error("Could not find renamed property on target object.")}function G(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function Y(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Y).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function se(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const Z=W({__forward_ref__:W});function Q(a){return a.__forward_ref__=Q,a.toString=function(){return Y(this())},a}function ee(a){return ke(a)?a():a}function ke(a){return"function"==typeof a&&a.hasOwnProperty(Z)&&a.__forward_ref__===Q}class Me extends Error{constructor(l,u){super(function je(a,l){return`NG0${Math.abs(a)}${l?": "+l:""}`}(l,u)),this.code=l}}function de(a){return"string"==typeof a?a:null==a?"":String(a)}function _e(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():de(a)}function De(a,l){const u=l?` in ${l}`:"";throw new Me(-201,`No provider for ${_e(a)} found${u}`)}function jt(a,l){null==a&&function Ye(a,l,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${l} <=Actual]`))}(l,a,null,"!=")}function sn(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function Zt(a){return{providers:a.providers||[],imports:a.imports||[]}}function xt(a){return Hn(a,hs)||Hn(a,dr)}function Hn(a,l){return a.hasOwnProperty(l)?a[l]:null}function Ki(a){return a&&(a.hasOwnProperty(bo)||a.hasOwnProperty(fs))?a[bo]:null}const hs=W({\u0275prov:W}),bo=W({\u0275inj:W}),dr=W({ngInjectableDef:W}),fs=W({ngInjectorDef:W});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let Tr;function jn(a){const l=Tr;return Tr=a,l}function wo(a,l,u){const h=xt(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&wt.Optional?null:void 0!==l?l:void De(Y(a),"Injector")}function _i(a){return{toString:a}.toString()}var Gn=(()=>((Gn=Gn||{})[Gn.OnPush=0]="OnPush",Gn[Gn.Default=1]="Default",Gn))(),Jt=(()=>{return(a=Jt||(Jt={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",Jt;var a})();const ct="undefined"!=typeof globalThis&&globalThis,Et="undefined"!=typeof window&&window,Bi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yt=ct||"undefined"!=typeof global&&global||Et||Bi,Ui={},J=[],ie=W({\u0275cmp:W}),ae=W({\u0275dir:W}),Ne=W({\u0275pipe:W}),ne=W({\u0275mod:W}),me=W({\u0275fac:W}),He=W({__NG_ELEMENT_ID__:W});let nt=0;function vt(a){return _i(()=>{const u={},h={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Gn.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||J,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||Jt.Emulated,id:"c",styles:a.styles||J,_:null,setInput:null,schemas:a.schemas||null,tView:null},f=a.directives,g=a.features,b=a.pipes;return h.id+=nt++,h.inputs=wl(a.inputs,u),h.outputs=wl(a.outputs),g&&g.forEach(E=>E(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(In):null,h.pipeDefs=b?()=>("function"==typeof b?b():b).map(It):null,h})}function In(a){return ci(a)||function Xi(a){return a[ae]||null}(a)}function It(a){return function js(a){return a[Ne]||null}(a)}const li={};function Qi(a){return _i(()=>{const l={type:a.type,bootstrap:a.bootstrap||J,declarations:a.declarations||J,imports:a.imports||J,exports:a.exports||J,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(li[a.id]=a.type),l})}function bl(a,l){return _i(()=>{const u=ui(a,!0);u.declarations=l.declarations||J,u.imports=l.imports||J,u.exports=l.exports||J})}function wl(a,l){if(null==a)return Ui;const u={};for(const h in a)if(a.hasOwnProperty(h)){let f=a[h],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),u[f]=h,l&&(l[f]=g)}return u}const hc=vt;function Cl(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function ci(a){return a[ie]||null}function ui(a,l){const u=a[ne]||null;if(!u&&!0===l)throw new Error(`Type ${Y(a)} does not have '\u0275mod' property.`);return u}function Ji(a){return Array.isArray(a)&&"object"==typeof a[1]}function Zr(a){return Array.isArray(a)&&!0===a[1]}function mc(a){return 0!=(8&a.flags)}function Vd(a){return 2==(2&a.flags)}function _s(a){return 1==(1&a.flags)}function ys(a){return null!==a.template}function ku(a){return 0!=(512&a[2])}function ji(a,l){return a.hasOwnProperty(me)?a[me]:null}class Wo{constructor(l,u,h){this.previousValue=l,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function vs(){return Ra}function Ra(a){return a.type.prototype.ngOnChanges&&(a.setInput=Qf),Wd}function Wd(){const a=Zo(this),l=null==a?void 0:a.current;if(l){const u=a.previous;if(u===Ui)a.previous=l;else for(let h in l)u[h]=l[h];a.current=null,this.ngOnChanges(l)}}function Qf(a,l,u,h){const f=Zo(a)||function Oa(a,l){return a[gr]=l}(a,{previous:Ui,current:null}),g=f.current||(f.current={}),b=f.previous,E=this.declaredInputs[u],T=b[E];g[E]=new Wo(T&&T.currentValue,l,b===Ui),a[h]=l}vs.ngInherit=!0;const gr="__ngSimpleChanges__";function Zo(a){return a[gr]||null}let Na;function Nu(a){Na=a}function bn(a){return!!a.listen}const Sl={createRenderer:(a,l)=>function bs(){return void 0!==Na?Na:"undefined"!=typeof document?document:void 0}()};function dn(a){for(;Array.isArray(a);)a=a[0];return a}function So(a,l){return dn(l[a])}function Ai(a,l){return dn(l[a.index])}function Fn(a,l){return a.data[l]}function xi(a,l){const u=l[a];return Ji(u)?u:u[0]}function Ko(a){return 4==(4&a[2])}function zs(a){return 128==(128&a[2])}function Yr(a,l){return null==l?null:a[l]}function Cs(a){a[18]=0}function Fa(a,l){a[5]+=l;let u=a,h=a[3];for(;null!==h&&(1===l&&1===u[5]||-1===l&&0===u[5]);)h[5]+=l,u=h,h=h[3]}const Ct={lFrame:Va(null),bindingsEnabled:!0};function vc(){return Ct.bindingsEnabled}function Le(){return Ct.lFrame.lView}function qt(){return Ct.lFrame.tView}function Qo(a){return Ct.lFrame.contextLView=a,a[8]}function kn(){let a=bc();for(;null!==a&&64===a.type;)a=a.parent;return a}function bc(){return Ct.lFrame.currentTNode}function xr(a,l){const u=Ct.lFrame;u.currentTNode=a,u.isParent=l}function Uu(){return Ct.lFrame.isParent}function Hu(){Ct.lFrame.isParent=!1}function xo(){return Ct.lFrame.bindingIndex++}function Kr(a){const l=Ct.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Ec(a,l){const u=Ct.lFrame;u.bindingIndex=u.bindingRootIndex=a,Ba(l)}function Ba(a){Ct.lFrame.currentDirectiveIndex=a}function Dc(a){const l=Ct.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Tc(){return Ct.lFrame.currentQueryIndex}function Qd(a){Ct.lFrame.currentQueryIndex=a}function Xd(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Ic(a,l,u){if(u&wt.SkipSelf){let f=l,g=a;for(;!(f=f.parent,null!==f||u&wt.Host||(f=Xd(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;l=f,a=g}const h=Ct.lFrame=Jd();return h.currentTNode=l,h.lView=a,!0}function Jo(a){const l=Jd(),u=a[1];Ct.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Jd(){const a=Ct.lFrame,l=null===a?null:a.child;return null===l?Va(a):l}function Va(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function eh(){const a=Ct.lFrame;return Ct.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const Sc=eh;function _r(){const a=eh();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function yi(){return Ct.lFrame.selectedIndex}function ea(a){Ct.lFrame.selectedIndex=a}function Xn(){const a=Ct.lFrame;return Fn(a.tView,a.selectedIndex)}function th(){Ct.lFrame.currentNamespace="svg"}function vg(){!function nh(){Ct.lFrame.currentNamespace=null}()}function kl(a,l){for(let u=l.directiveStart,h=l.directiveEnd;u<h;u++){const g=a.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:R,ngOnDestroy:P}=g;b&&(a.contentHooks||(a.contentHooks=[])).push(-u,b),E&&((a.contentHooks||(a.contentHooks=[])).push(u,E),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,E)),T&&(a.viewHooks||(a.viewHooks=[])).push(-u,T),R&&((a.viewHooks||(a.viewHooks=[])).push(u,R),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,R)),null!=P&&(a.destroyHooks||(a.destroyHooks=[])).push(u,P)}}function $s(a,l,u){ih(a,l,3,u)}function ta(a,l,u,h){(3&a[2])===u&&ih(a,l,u,h)}function di(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function ih(a,l,u,h){const g=null!=h?h:-1,b=l.length-1;let E=0;for(let T=void 0!==h?65535&a[18]:0;T<b;T++)if("number"==typeof l[T+1]){if(E=l[T],null!=h&&E>=h)break}else l[T]<0&&(a[18]+=65536),(E<g||-1==g)&&(wg(a,u,l,T),a[18]=(4294901760&a[18])+T+2),T++}function wg(a,l,u,h){const f=u[h]<0,g=u[h+1],E=a[f?-u[h]:u[h]];if(f){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Ua{constructor(l,u,h){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Rn(a,l,u){const h=bn(a);let f=0;for(;f<u.length;){const g=u[f];if("number"==typeof g){if(0!==g)break;f++;const b=u[f++],E=u[f++],T=u[f++];h?a.setAttribute(l,E,T,b):l.setAttributeNS(b,E,T)}else{const b=g,E=u[++f];Qr(b)?h&&a.setProperty(l,b,E):h?a.setAttribute(l,b,E):l.setAttribute(b,E),f++}}return f}function Dn(a){return 3===a||4===a||6===a}function Qr(a){return 64===a.charCodeAt(0)}function Ha(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let h=0;h<l.length;h++){const f=l[h];"number"==typeof f?u=f:0===u||_t(a,u,f,null,-1===u||2===u?l[++h]:null)}}return a}function _t(a,l,u,h,f){let g=0,b=a.length;if(-1===l)b=-1;else for(;g<a.length;){const E=a[g++];if("number"==typeof E){if(E===l){b=-1;break}if(E>l){b=g-1;break}}}for(;g<a.length;){const E=a[g];if("number"==typeof E)break;if(E===u){if(null===h)return void(null!==f&&(a[g+1]=f));if(h===a[g+1])return void(a[g+2]=f)}g++,null!==h&&g++,null!==f&&g++}-1!==b&&(a.splice(b,0,l),g=b+1),a.splice(g++,0,u),null!==h&&a.splice(g++,0,h),null!==f&&a.splice(g++,0,f)}function Kt(a){return-1!==a}function kr(a){return 32767&a}function ia(a,l){let u=function Rt(a){return a>>16}(a),h=l;for(;u>0;)h=h[15],u--;return h}let Ws=!0;function Ol(a){const l=Ws;return Ws=a,l}let ja=0;function Ds(a,l){const u=Ts(a,l);if(-1!==u)return u;const h=l[1];h.firstCreatePass&&(a.injectorIndex=l.length,Lt(h.data,a),Lt(l,null),Lt(h.blueprint,null));const f=Mi(a,l),g=a.injectorIndex;if(Kt(f)){const b=kr(f),E=ia(f,l),T=E[1].data;for(let R=0;R<8;R++)l[g+R]=E[b+R]|T[b+R]}return l[g+8]=f,g}function Lt(a,l){a.push(0,0,0,0,0,0,0,0,l)}function Ts(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function Mi(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,f=l;for(;null!==f;){const g=f[1],b=g.type;if(h=2===b?g.declTNode:1===b?f[6]:null,null===h)return-1;if(u++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Nl(a,l,u){!function xc(a,l,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(He)&&(h=u[He]),null==h&&(h=u[He]=ja++);const f=255&h;l.data[a+(f>>5)]|=1<<f}(a,l,u)}function Ga(a,l,u){if(u&wt.Optional)return a;De(l,"NodeInjector")}function Fl(a,l,u,h){if(u&wt.Optional&&void 0===h&&(h=null),0==(u&(wt.Self|wt.Host))){const f=a[9],g=jn(void 0);try{return f?f.get(l,h,u&wt.Optional):wo(l,h,u&wt.Optional)}finally{jn(g)}}return Ga(h,l,u)}function Zu(a,l,u,h=wt.Default,f){if(null!==a){const g=function Ll(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(He)?a[He]:void 0;return"number"==typeof l?l>=0?255&l:kc:l}(u);if("function"==typeof g){if(!Ic(l,a,h))return h&wt.Host?Ga(f,u,h):Fl(l,u,h,f);try{const b=g(h);if(null!=b||h&wt.Optional)return b;De(u)}finally{Sc()}}else if("number"==typeof g){let b=null,E=Ts(a,l),T=-1,R=h&wt.Host?l[16][6]:null;for((-1===E||h&wt.SkipSelf)&&(T=-1===E?Mi(a,l):l[E+8],-1!==T&&sh(h,!1)?(b=l[1],E=kr(T),l=ia(T,l)):E=-1);-1!==E;){const P=l[1];if(Pc(g,E,P.data)){const z=Dg(E,l,u,b,h,R);if(z!==Mo)return z}T=l[E+8],-1!==T&&sh(h,l[1].data[E+8]===R)&&Pc(g,E,l)?(b=P,E=kr(T),l=ia(T,l)):E=-1}}}return Fl(l,u,h,f)}const Mo={};function kc(){return new ko(kn(),Le())}function Dg(a,l,u,h,f,g){const b=l[1],E=b.data[a+8],P=Rc(E,b,u,null==h?Vd(E)&&Ws:h!=b&&0!=(3&E.type),f&wt.Host&&g===E);return null!==P?Oc(l,b,P,E):Mo}function Rc(a,l,u,h,f){const g=a.providerIndexes,b=l.data,E=1048575&g,T=a.directiveStart,P=g>>20,te=f?E+P:a.directiveEnd;for(let fe=h?E:E+P;fe<te;fe++){const Oe=b[fe];if(fe<T&&u===Oe||fe>=T&&Oe.type===u)return fe}if(f){const fe=b[T];if(fe&&ys(fe)&&fe.type===u)return T}return null}function Oc(a,l,u,h){let f=a[u];const g=l.data;if(function Ac(a){return a instanceof Ua}(f)){const b=f;b.resolving&&function Pe(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new Me(-200,`Circular dependency in DI detected for ${a}${u}`)}(_e(g[u]));const E=Ol(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?jn(b.injectImpl):null;Ic(a,h,wt.Default);try{f=a[u]=b.factory(void 0,g,a,h),l.firstCreatePass&&u>=h.directiveStart&&function bv(a,l,u){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:g}=l.type.prototype;if(h){const b=Ra(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,b)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,f),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,g))}(u,g[u],l)}finally{null!==T&&jn(T),Ol(E),b.resolving=!1,Sc()}}return f}function Pc(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function sh(a,l){return!(a&wt.Self||a&wt.Host&&l)}class ko{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,h){return Zu(this._tNode,this._lView,l,h,u)}}function Nc(a){return _i(()=>{const l=a.prototype.constructor,u=l[me]||Bl(l),h=Object.prototype;let f=Object.getPrototypeOf(a.prototype).constructor;for(;f&&f!==h;){const g=f[me]||Bl(f);if(g&&g!==u)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Bl(a){return ke(a)?()=>{const l=Bl(ee(a));return l&&l()}:ji(a)}function Fc(a){return function Mc(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const h=u.length;let f=0;for(;f<h;){const g=u[f];if(Dn(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<h&&"string"==typeof u[f];)f++;else{if(g===l)return u[f+1];f+=2}}}return null}(kn(),a)}const za="__parameters__",Ro="__prop__metadata__";function Yu(a){return function(...u){if(a){const h=a(...u);for(const f in h)this[f]=h[f]}}}function qa(a,l,u){return _i(()=>{const h=Yu(l);function f(...g){if(this instanceof f)return h.apply(this,g),this;const b=new f(...g);return E.annotation=b,E;function E(T,R,P){const z=T.hasOwnProperty(za)?T[za]:Object.defineProperty(T,za,{value:[]})[za];for(;z.length<=P;)z.push(null);return(z[P]=z[P]||[]).push(b),T}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=a,f.annotationCls=f,f})}function Bc(a,l,u,h){return _i(()=>{const f=Yu(l);function g(...b){if(this instanceof g)return f.apply(this,b),this;const E=new g(...b);return function T(R,P){const z=R.constructor,te=z.hasOwnProperty(Ro)?z[Ro]:Object.defineProperty(z,Ro,{value:{}})[Ro];te[P]=te.hasOwnProperty(P)&&te[P]||[],te[P].unshift(E),h&&h(R,P,...b)}}return u&&(g.prototype=Object.create(u.prototype)),g.prototype.ngMetadataName=a,g.annotationCls=g,g})}class Bn{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=sn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Tg=new Bn("AnalyzeForEntryComponents");class tp{}const ip=Bc("ViewChild",(a,l)=>Object.assign({selector:a,first:!0,isViewQuery:!0,descendants:!0},l),tp);function vi(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let h=a[u];Array.isArray(h)?(l===a&&(l=a.slice(0,u)),vi(h,l)):l!==a&&l.push(h)}return l}function qi(a,l){a.forEach(u=>Array.isArray(u)?qi(u,l):l(u))}function ki(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function sa(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function Jr(a,l){const u=[];for(let h=0;h<a;h++)u.push(l);return u}function $i(a,l,u){let h=$a(a,l);return h>=0?a[1|h]=u:(h=~h,function oa(a,l,u,h){let f=a.length;if(f==l)a.push(u,h);else if(1===f)a.push(h,a[0]),a[0]=u;else{for(f--,a.push(a[f-1],a[f]);f>l;)a[f]=a[f-2],f--;a[l]=u,a[l+1]=h}}(a,h,l,u)),h}function Uc(a,l){const u=$a(a,l);if(u>=0)return a[1|u]}function $a(a,l){return function Ss(a,l,u){let h=0,f=a.length>>u;for(;f!==h;){const g=h+(f-h>>1),b=a[g<<u];if(l===b)return g<<u;b>l?f=g:h=g+1}return~(f<<u)}(a,l,1)}const As={},Za="__NG_DI_FLAG__",la="ngTempTokenPath",S=/\n/gm,K="__source",ue=W({provide:String,useValue:W});let be;function Ue(a){const l=be;return be=a,l}function rt(a,l=wt.Default){if(void 0===be)throw new Me(203,"");return null===be?wo(a,void 0,l):be.get(a,l&wt.Optional?null:void 0,l)}function st(a,l=wt.Default){return(function Ln(){return Tr}()||rt)(ee(a),l)}const Vt=st;function Dt(a){const l=[];for(let u=0;u<a.length;u++){const h=ee(a[u]);if(Array.isArray(h)){if(0===h.length)throw new Me(900,"");let f,g=wt.Default;for(let b=0;b<h.length;b++){const E=h[b],T=ti(E);"number"==typeof T?-1===T?f=E.token:g|=T:f=E}l.push(st(f,g))}else l.push(st(h))}return l}function hi(a,l){return a[Za]=l,a.prototype[Za]=l,a}function ti(a){return a[Za]}const yr=hi(qa("Inject",a=>({token:a})),-1),Rr=hi(qa("Optional"),8),Ya=hi(qa("SkipSelf"),4);let nd;function Wc(a){var l;return(null===(l=function fh(){if(void 0===nd&&(nd=null,Yt.trustedTypes))try{nd=Yt.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return nd}())||void 0===l?void 0:l.createHTML(a))||a}class Vl{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ka extends Vl{getTypeName(){return"HTML"}}class up extends Vl{getTypeName(){return"Style"}}class dp extends Vl{getTypeName(){return"Script"}}class ph extends Vl{getTypeName(){return"URL"}}class Ev extends Vl{getTypeName(){return"ResourceURL"}}function Js(a){return a instanceof Vl?a.changingThisBreaksApplicationSecurity:a}function Yc(a,l){const u=mh(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function mh(a){return a instanceof Vl&&a.getTypeName()||null}function Dv(a){return new Ka(a)}function gh(a){return new up(a)}function Tv(a){return new dp(a)}function Kc(a){return new ph(a)}function hp(a){return new Ev(a)}class Og{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(Wc(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Pg{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Wc(l),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Wc(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(l){const u=l.attributes;for(let f=u.length-1;0<f;f--){const b=u.item(f).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&l.removeAttribute(b)}let h=l.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const aE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xc=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function rd(a){return(a=String(a)).match(aE)||a.match(Xc)?a:"unsafe:"+a}function xs(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function Jc(...a){const l={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(l[h]=!0);return l}const eu=xs("area,br,col,hr,img,wbr"),fp=xs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Fg=xs("rp,rt"),sd=Jc(eu,Jc(fp,xs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jc(Fg,xs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jc(Fg,fp)),_h=xs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),pp=xs("srcset"),Bg=Jc(_h,pp,xs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yh=xs("script,style,template");class mp{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let f=this.checkClobberedElement(u,u.nextSibling);if(f){u=f;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!sd.hasOwnProperty(u))return this.sanitizedSomething=!0,!yh.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=l.attributes;for(let f=0;f<h.length;f++){const g=h.item(f),b=g.name,E=b.toLowerCase();if(!Bg.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let T=g.value;_h[E]&&(T=rd(T)),pp[E]&&(a=T,T=(a=String(a)).split(",").map(l=>rd(l.trim())).join(", ")),this.buf.push(" ",b,'="',vh(T),'"')}var a;return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();sd.hasOwnProperty(u)&&!eu.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(vh(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const xv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Mv=/([^\#-~ |!])/g;function vh(a){return a.replace(/&/g,"&amp;").replace(xv,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Mv,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ul;function Vg(a,l){let u=null;try{Ul=Ul||function Qc(a){const l=new Pg(a);return function Iv(){try{return!!(new window.DOMParser).parseFromString(Wc(""),"text/html")}catch(a){return!1}}()?new Og(l):l}(a);let h=l?String(l):"";u=Ul.getInertBodyElement(h);let f=5,g=h;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,h=g,g=u.innerHTML,u=Ul.getInertBodyElement(h)}while(h!==g);return Wc((new mp).sanitizeChildren(Or(u)||u))}finally{if(u){const h=Or(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function Or(a){return"content"in a&&function tu(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var On=(()=>((On=On||{})[On.NONE=0]="NONE",On[On.HTML=1]="HTML",On[On.STYLE=2]="STYLE",On[On.SCRIPT=3]="SCRIPT",On[On.URL=4]="URL",On[On.RESOURCE_URL=5]="RESOURCE_URL",On))();function bh(a){const l=function nr(){const a=Le();return a&&a[12]}();return l?l.sanitize(On.URL,a)||"":Yc(a,"URL")?Js(a):rd(de(a))}const od="__ngContext__";function Ri(a,l){a[od]=l}function nu(a){const l=function Hl(a){return a[od]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function Sh(a){return a.ngOriginalError}function Bv(a,...l){a.error(...l)}class Ah{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l),h=function jg(a){return a&&a.ngErrorLogger||Bv}(l);h(this._console,"ERROR",l),u&&h(this._console,"ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Sh(l);for(;u&&Sh(u);)u=Sh(u);return u||null}}const gn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Yt))();function v(a){return a instanceof Function?a():a}var F=(()=>((F=F||{})[F.Important=1]="Important",F[F.DashCase=2]="DashCase",F))();function Ee(a,l){return undefined(a,l)}function yt(a){const l=a[3];return Zr(l)?l[3]:l}function on(a){return xh(a[13])}function ru(a){return xh(a[4])}function xh(a){for(;null!==a&&!Zr(a);)a=a[4];return a}function Qa(a,l,u,h,f){if(null!=h){let g,b=!1;Zr(h)?g=h:Ji(h)&&(b=!0,h=h[0]);const E=dn(h);0===a&&null!==u?null==f?_n(l,u,E):to(l,u,E,f||null,!0):1===a&&null!==u?to(l,u,E,f||null,!0):2===a?function kh(a,l,u){const h=zl(a,l);h&&function rr(a,l,u,h){bn(a)?a.removeChild(l,u,h):l.removeChild(u)}(a,h,l,u)}(l,E,b):3===a&&l.destroyNode(E),null!=g&&function tx(a,l,u,h,f){const g=u[7];g!==dn(u)&&Qa(l,a,h,g,f);for(let E=10;E<u.length;E++){const T=u[E];Tp(T[1],T,a,l,h,g)}}(l,a,g,u,f)}}function Gl(a,l,u){if(bn(a))return a.createElement(l,u);{const h=null!==u?function Pu(a){const l=a.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(u):null;return null===h?a.createElement(l):a.createElementNS(h,l)}}function ks(a,l){const u=a[9],h=u.indexOf(l),f=l[3];1024&l[2]&&(l[2]&=-1025,Fa(f,-1)),u.splice(h,1)}function wi(a,l){if(a.length<=10)return;const u=10+l,h=a[u];if(h){const f=h[17];null!==f&&f!==a&&ks(f,h),l>0&&(a[u-1][4]=h[4]);const g=sa(a,10+l);!function su(a,l){Tp(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(h[1],h);const b=g[19];null!==b&&b.detachView(g[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Vv(a,l){if(!(256&l[2])){const u=l[11];bn(u)&&u.destroyNode&&Tp(a,l,u,3,null,null),function Po(a){let l=a[13];if(!l)return Uv(a[1],a);for(;l;){let u=null;if(Ji(l))u=l[13];else{const h=l[10];h&&(u=h)}if(!u){for(;l&&!l[4]&&l!==a;)Ji(l)&&Uv(l[1],l),l=l[3];null===l&&(l=a),Ji(l)&&Uv(l[1],l),u=l&&l[4]}l=u}}(l)}}function Uv(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function Vn(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const f=l[u[h]];if(!(f instanceof Ua)){const g=u[h+1];if(Array.isArray(g))for(let b=0;b<g.length;b+=2){const E=f[g[b]],T=g[b+1];try{T.call(E)}finally{}}else try{g.call(f)}finally{}}}}(a,l),function ii(a,l){const u=a.cleanup,h=l[7];let f=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const b=u[g+1],E="function"==typeof b?b(l):dn(l[b]),T=h[f=u[g+2]],R=u[g+3];"boolean"==typeof R?E.removeEventListener(u[g],T,R):R>=0?h[f=R]():h[f=-R].unsubscribe(),g+=2}else{const b=h[f=u[g+1]];u[g].call(b)}if(null!==h){for(let g=f+1;g<h.length;g++)h[g]();l[7]=null}}(a,l),1===l[1].type&&bn(l[11])&&l[11].destroy();const u=l[17];if(null!==u&&Zr(l[3])){u!==l[3]&&ks(u,l);const h=l[19];null!==h&&h.detachView(a)}}}function Ci(a,l,u){return function hE(a,l,u){let h=l;for(;null!==h&&40&h.type;)h=(l=h).parent;if(null===h)return u[0];if(2&h.flags){const f=a.data[h.directiveStart].encapsulation;if(f===Jt.None||f===Jt.Emulated)return null}return Ai(h,u)}(a,l.parent,u)}function to(a,l,u,h,f){bn(a)?a.insertBefore(l,u,h,f):l.insertBefore(u,h,f)}function _n(a,l,u){bn(a)?a.appendChild(l,u):l.appendChild(u)}function br(a,l,u,h,f){null!==h?to(a,l,u,h,f):_n(a,l,u)}function zl(a,l){return bn(a)?a.parentNode(l):l.parentNode}function jv(a,l,u){return Gv(a,l,u)}let Gv=function fE(a,l,u){return 40&a.type?Ai(a,u):null};function Ei(a,l,u,h){const f=Ci(a,h,l),g=l[11],E=jv(h.parent||l[6],h,l);if(null!=f)if(Array.isArray(u))for(let T=0;T<u.length;T++)br(g,f,u[T],E,!1);else br(g,f,u,E,!1)}function Ep(a,l){if(null!==l){const u=l.type;if(3&u)return Ai(l,a);if(4&u)return Dp(-1,a[l.index]);if(8&u){const h=l.child;if(null!==h)return Ep(a,h);{const f=a[l.index];return Zr(f)?Dp(-1,f):dn(f)}}if(32&u)return Ee(l,a)()||dn(a[l.index]);{const h=Ja(a,l);return null!==h?Array.isArray(h)?h[0]:Ep(yt(a[16]),h):Ep(a,l.next)}}return null}function Ja(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Dp(a,l){const u=10+a+1;if(u<l.length){const h=l[u],f=h[1].firstChild;if(null!==f)return Ep(h,f)}return l[7]}function Yg(a,l,u,h,f,g,b){for(;null!=u;){const E=h[u.index],T=u.type;if(b&&0===l&&(E&&Ri(dn(E),h),u.flags|=4),64!=(64&u.flags))if(8&T)Yg(a,l,u.child,h,f,g,!1),Qa(l,a,f,E,g);else if(32&T){const R=Ee(u,h);let P;for(;P=R();)Qa(l,a,f,P,g);Qa(l,a,f,E,g)}else 16&T?pE(a,l,h,u,f,g):Qa(l,a,f,E,g);u=b?u.projectionNext:u.next}}function Tp(a,l,u,h,f,g){Yg(u,h,a.firstChild,l,f,g,!1)}function pE(a,l,u,h,f,g){const b=u[16],T=b[6].projection[h.projection];if(Array.isArray(T))for(let R=0;R<T.length;R++)Qa(l,a,f,T[R],g);else Yg(a,l,T,b[3],f,g,!0)}function mE(a,l,u){bn(a)?a.setAttribute(l,"style",u):l.style.cssText=u}function Kg(a,l,u){bn(a)?""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u):l.className=u}function qv(a,l,u){let h=a.length;for(;;){const f=a.indexOf(l,u);if(-1===f)return f;if(0===f||a.charCodeAt(f-1)<=32){const g=l.length;if(f+g===h||a.charCodeAt(f+g)<=32)return f}u=f+1}}const gE="ng-template";function ix(a,l,u){let h=0;for(;h<a.length;){let f=a[h++];if(u&&"class"===f){if(f=a[h],-1!==qv(f.toLowerCase(),l,0))return!0}else if(1===f){for(;h<a.length&&"string"==typeof(f=a[h++]);)if(f.toLowerCase()===l)return!0;return!1}}return!1}function _E(a){return 4===a.type&&a.value!==gE}function yE(a,l,u){return l===(4!==a.type||u?a.value:gE)}function Qt(a,l,u){let h=4;const f=a.attrs||[],g=function rx(a){for(let l=0;l<a.length;l++)if(Dn(a[l]))return l;return a.length}(f);let b=!1;for(let E=0;E<l.length;E++){const T=l[E];if("number"!=typeof T){if(!b)if(4&h){if(h=2|1&h,""!==T&&!yE(a,T,u)||""===T&&1===l.length){if(da(h))return!1;b=!0}}else{const R=8&h?T:l[++E];if(8&h&&null!==a.attrs){if(!ix(a.attrs,R,u)){if(da(h))return!1;b=!0}continue}const z=Rh(8&h?"class":T,f,_E(a),u);if(-1===z){if(da(h))return!1;b=!0;continue}if(""!==R){let te;te=z>g?"":f[z+1].toLowerCase();const fe=8&h?te:null;if(fe&&-1!==qv(fe,R,0)||2&h&&R!==te){if(da(h))return!1;b=!0}}}}else{if(!b&&!da(h)&&!da(T))return!1;if(b&&da(T))continue;b=!1,h=T|1&h}}return da(h)||b}function da(a){return 0==(1&a)}function Rh(a,l,u,h){if(null===l)return-1;let f=0;if(h||!u){let g=!1;for(;f<l.length;){const b=l[f];if(b===a)return f;if(3===b||6===b)g=!0;else{if(1===b||2===b){let E=l[++f];for(;"string"==typeof E;)E=l[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=g?1:2}return-1}return function sx(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===l)return u;u++}return-1}(l,a)}function $v(a,l,u=!1){for(let h=0;h<l.length;h++)if(Qt(a,l[h],u))return!0;return!1}function ox(a,l){e:for(let u=0;u<l.length;u++){const h=l[u];if(a.length===h.length){for(let f=0;f<a.length;f++)if(a[f]!==h[f])continue e;return!0}}return!1}function ha(a,l){return a?":not("+l.trim()+")":l}function vE(a){let l=a[0],u=1,h=2,f="",g=!1;for(;u<a.length;){let b=a[u];if("string"==typeof b)if(2&h){const E=a[++u];f+="["+b+(E.length>0?'="'+E+'"':"")+"]"}else 8&h?f+="."+b:4&h&&(f+=" "+b);else""!==f&&!da(b)&&(l+=ha(g,f),f=""),h=b,g=g||!da(h);u++}return""!==f&&(l+=ha(g,f)),l}const Ut={};function sr(a){fa(qt(),Le(),yi()+a,!1)}function fa(a,l,u,h){if(!h)if(3==(3&l[2])){const g=a.preOrderCheckHooks;null!==g&&$s(l,g,u)}else{const g=a.preOrderHooks;null!==g&&ta(l,g,0,u)}ea(u)}function Qg(a,l){return a<<17|l<<2}function No(a){return a>>17&32767}function Xg(a){return 2|a}function ql(a){return(131068&a)>>2}function Jg(a,l){return-131069&a|l<<2}function Oh(a){return 1|a}function RE(a,l){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const f=u[h],g=u[h+1];if(-1!==g){const b=a.data[g];Qd(f),b.contentQueries(2,l[g],g)}}}function xp(a,l,u,h,f,g,b,E,T,R){const P=l.blueprint.slice();return P[0]=f,P[2]=140|h,Cs(P),P[3]=P[15]=a,P[8]=u,P[10]=b||a&&a[10],P[11]=E||a&&a[11],P[12]=T||a&&a[12]||null,P[9]=R||a&&a[9]||null,P[6]=g,P[16]=2==l.type?a[16]:P,P}function Nh(a,l,u,h,f){let g=a.data[l];if(null===g)g=function Fh(a,l,u,h,f){const g=bc(),b=Uu(),T=a.data[l]=function VE(a,l,u,h,f,g){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?g:g&&g.parent,u,l,h,f);return null===a.firstChild&&(a.firstChild=T),null!==g&&(b?null==g.child&&null!==T.parent&&(g.child=T):null===g.next&&(g.next=T)),T}(a,l,u,h,f),function Gu(){return Ct.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=h,g.attrs=f;const b=function Xo(){const a=Ct.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}();g.injectorIndex=null===b?-1:b.injectorIndex}return xr(g,!0),g}function tl(a,l,u,h){if(0===u)return-1;const f=l.length;for(let g=0;g<u;g++)l.push(h),a.blueprint.push(h),a.data.push(null);return f}function ud(a,l,u){Jo(l);try{const h=a.viewQuery;null!==h&&ub(1,h,u);const f=a.template;null!==f&&PE(a,l,f,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&RE(a,l),a.staticViewQueries&&ub(2,a.viewQuery,u);const g=a.components;null!==g&&function dx(a,l){for(let u=0;u<l.length;u++)g_(a,l[u])}(l,g)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{l[2]&=-5,_r()}}function dd(a,l,u,h){const f=l[2];if(256!=(256&f)){Jo(l);try{Cs(l),function wc(a){return Ct.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&PE(a,l,u,2,h);const b=3==(3&f);if(b){const R=a.preOrderCheckHooks;null!==R&&$s(l,R,null)}else{const R=a.preOrderHooks;null!==R&&ta(l,R,0,null),di(l,0)}if(function p_(a){for(let l=on(a);null!==l;l=ru(l)){if(!l[2])continue;const u=l[9];for(let h=0;h<u.length;h++){const f=u[h],g=f[3];0==(1024&f[2])&&Fa(g,1),f[2]|=1024}}}(l),function bx(a){for(let l=on(a);null!==l;l=ru(l))for(let u=10;u<l.length;u++){const h=l[u],f=h[1];zs(h)&&dd(f,h,f.template,h[8])}}(l),null!==a.contentQueries&&RE(a,l),b){const R=a.contentCheckHooks;null!==R&&$s(l,R)}else{const R=a.contentHooks;null!==R&&ta(l,R,1),di(l,1)}!function nb(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const f=u[h];if(f<0)ea(~f);else{const g=f,b=u[++h],E=u[++h];Ec(b,g),E(2,l[g])}}}finally{ea(-1)}}(a,l);const E=a.components;null!==E&&function Ap(a,l){for(let u=0;u<l.length;u++)$E(a,l[u])}(l,E);const T=a.viewQuery;if(null!==T&&ub(2,T,h),b){const R=a.viewCheckHooks;null!==R&&$s(l,R)}else{const R=a.viewHooks;null!==R&&ta(l,R,2),di(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),l[2]&=-73,1024&l[2]&&(l[2]&=-1025,Fa(l[3],-1))}finally{_r()}}}function OE(a,l,u,h){const f=l[10],b=Ko(l);try{!b&&f.begin&&f.begin(),b&&ud(a,l,h),dd(a,l,u,h)}finally{!b&&f.end&&f.end()}}function PE(a,l,u,h,f){const g=yi(),b=2&h;try{ea(-1),b&&l.length>20&&fa(a,l,20,!1),u(h,f)}finally{ea(g)}}function u_(a,l,u){if(mc(l)){const f=l.directiveEnd;for(let g=l.directiveStart;g<f;g++){const b=a.data[g];b.contentQueries&&b.contentQueries(1,u[g],g)}}}function ib(a,l,u){!vc()||(function kp(a,l,u,h){const f=u.directiveStart,g=u.directiveEnd;a.firstCreatePass||Ds(u,l),Ri(h,l);const b=u.initialInputs;for(let E=f;E<g;E++){const T=a.data[E],R=ys(T);R&&zE(l,u,T);const P=Oc(l,a,E,u);Ri(P,l),null!==b&&f_(0,E-f,P,T,0,b),R&&(xi(u.index,l)[8]=P)}}(a,l,u,Ai(u,l)),128==(128&u.flags)&&function ob(a,l,u){const h=u.directiveStart,f=u.directiveEnd,b=u.index,E=function zu(){return Ct.lFrame.currentDirectiveIndex}();try{ea(b);for(let T=h;T<f;T++){const R=a.data[T],P=l[T];Ba(T),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&jE(R,P)}}finally{ea(-1),Ba(E)}}(a,l,u))}function rb(a,l,u=Ai){const h=l.localNames;if(null!==h){let f=l.index+1;for(let g=0;g<h.length;g+=2){const b=h[g+1],E=-1===b?u(l,a):a[b];a[f++]=E}}}function NE(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Mp(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Mp(a,l,u,h,f,g,b,E,T,R){const P=20+h,z=P+f,te=function d_(a,l){const u=[];for(let h=0;h<l;h++)u.push(h<a?null:Ut);return u}(P,z),fe="function"==typeof R?R():R;return te[1]={type:a,blueprint:te,template:u,queries:null,viewQuery:E,declTNode:l,data:te.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:z,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:fe,incompleteFirstPass:!1}}function sb(a,l,u,h){const f=KE(l);null===u?f.push(h):(f.push(u),a.firstCreatePass&&QE(a).push(h,f.length-1))}function UE(a,l,u){for(let h in a)if(a.hasOwnProperty(h)){const f=a[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(l,f):u[h]=[l,f]}return u}function ts(a,l,u,h,f,g,b,E){const T=Ai(l,u);let P,R=l.inputs;!E&&null!=R&&(P=R[h])?(Uh(a,u,P,h,f),Vd(l)&&function cu(a,l){const u=xi(l,a);16&u[2]||(u[2]|=64)}(u,l.index)):3&l.type&&(h=function fx(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),f=null!=b?b(f,l.value||"",h):f,bn(g)?g.setProperty(T,h,f):Qr(h)||(T.setProperty?T.setProperty(h,f):T[h]=f))}function hd(a,l,u,h){let f=!1;if(vc()){const g=function GE(a,l,u){const h=a.directiveRegistry;let f=null;if(h)for(let g=0;g<h.length;g++){const b=h[g];$v(u,b.selectors,!1)&&(f||(f=[]),Nl(Ds(u,l),a,b.type),ys(b)?(ab(a,u),f.unshift(b)):f.push(b))}return f}(a,l,u),b=null===h?null:{"":-1};if(null!==g){f=!0,h_(u,a.data.length,g.length);for(let P=0;P<g.length;P++){const z=g[P];z.providersResolver&&z.providersResolver(z)}let E=!1,T=!1,R=tl(a,l,g.length,null);for(let P=0;P<g.length;P++){const z=g[P];u.mergedAttrs=Ha(u.mergedAttrs,z.hostAttrs),io(a,u,l,R,z),yx(R,z,b),null!==z.contentQueries&&(u.flags|=8),(null!==z.hostBindings||null!==z.hostAttrs||0!==z.hostVars)&&(u.flags|=128);const te=z.type.prototype;!E&&(te.ngOnChanges||te.ngOnInit||te.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),E=!0),!T&&(te.ngOnChanges||te.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),T=!0),R++}!function hx(a,l){const h=l.directiveEnd,f=a.data,g=l.attrs,b=[];let E=null,T=null;for(let R=l.directiveStart;R<h;R++){const P=f[R],z=P.inputs,te=null===g||_E(l)?null:vx(z,g);b.push(te),E=UE(z,R,E),T=UE(P.outputs,R,T)}null!==E&&(E.hasOwnProperty("class")&&(l.flags|=16),E.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=b,l.inputs=E,l.outputs=T}(a,u)}b&&function _x(a,l,u){if(l){const h=a.localNames=[];for(let f=0;f<l.length;f+=2){const g=u[l[f+1]];if(null==g)throw new Me(-301,!1);h.push(l[f],g)}}}(u,h,b)}return u.mergedAttrs=Ha(u.mergedAttrs,u.attrs),f}function Bh(a,l,u,h,f,g){const b=g.hostBindings;if(b){let E=a.hostBindingOpCodes;null===E&&(E=a.hostBindingOpCodes=[]);const T=~l.index;(function gx(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(E)!=T&&E.push(T),E.push(h,f,b)}}function jE(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function ab(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function yx(a,l,u){if(u){if(l.exportAs)for(let h=0;h<l.exportAs.length;h++)u[l.exportAs[h]]=a;ys(l)&&(u[""]=a)}}function h_(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function io(a,l,u,h,f){a.data[h]=f;const g=f.factory||(f.factory=ji(f.type)),b=new Ua(g,ys(f),null);a.blueprint[h]=b,u[h]=b,Bh(a,l,0,h,tl(a,u,f.hostVars,Ut),f)}function zE(a,l,u){const h=Ai(l,a),f=NE(u),g=a[10],b=uu(a,xp(a,f,null,u.onPush?64:16,h,l,g,g.createRenderer(h,u),null,null));a[l.index]=b}function ma(a,l,u,h,f,g){const b=Ai(a,l);!function Vh(a,l,u,h,f,g,b){if(null==g)bn(a)?a.removeAttribute(l,f,u):l.removeAttribute(f);else{const E=null==b?de(g):b(g,h||"",f);bn(a)?a.setAttribute(l,f,E,u):u?l.setAttributeNS(u,f,E):l.setAttribute(f,E)}}(l[11],b,g,a.value,u,h,f)}function f_(a,l,u,h,f,g){const b=g[l];if(null!==b){const E=h.setInput;for(let T=0;T<b.length;){const R=b[T++],P=b[T++],z=b[T++];null!==E?h.setInput(u,z,R,P):u[P]=z}}}function vx(a,l){let u=null,h=0;for(;h<l.length;){const f=l[h];if(0!==f)if(5!==f){if("number"==typeof f)break;a.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,a[f],l[h+1])),h+=2}else h+=2;else h+=4}return u}function qE(a,l,u,h){return new Array(a,!0,!1,l,null,0,h,u,null,null)}function $E(a,l){const u=xi(l,a);if(zs(u)){const h=u[1];80&u[2]?dd(h,u,h.template,u[8]):u[5]>0&&m_(u)}}function m_(a){for(let h=on(a);null!==h;h=ru(h))for(let f=10;f<h.length;f++){const g=h[f];if(1024&g[2]){const b=g[1];dd(b,g,b.template,g[8])}else g[5]>0&&m_(g)}const u=a[1].components;if(null!==u)for(let h=0;h<u.length;h++){const f=xi(u[h],a);zs(f)&&f[5]>0&&m_(f)}}function g_(a,l){const u=xi(l,a),h=u[1];(function WE(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(h,u),ud(h,u,u[8])}function uu(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function __(a){for(;a;){a[2]|=64;const l=yt(a);if(ku(a)&&!l)return a;a=l}return null}function ZE(a){!function lb(a){for(let l=0;l<a.components.length;l++){const u=a.components[l],h=nu(u),f=h[1];OE(f,h,f.template,u)}}(a[8])}function ub(a,l,u){Qd(0),l(a,u)}const y_=(()=>Promise.resolve(null))();function KE(a){return a[7]||(a[7]=[])}function QE(a){return a.cleanup||(a.cleanup=[])}function Rp(a,l,u){return(null===a||ys(a))&&(u=function Al(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function XE(a,l){const u=a[9],h=u?u.get(Ah,null):null;h&&h.handleError(l)}function Uh(a,l,u,h,f){for(let g=0;g<u.length;){const b=u[g++],E=u[g++],T=l[b],R=a.data[b];null!==R.setInput?R.setInput(T,f,h,E):T[E]=f}}function Wl(a,l,u){const h=So(l,a);!function Xa(a,l,u){bn(a)?a.setValue(l,u):l.textContent=u}(a[11],h,u)}function v_(a,l,u){let h=u?a.styles:null,f=u?a.classes:null,g=0;if(null!==l)for(let b=0;b<l.length;b++){const E=l[b];"number"==typeof E?g=E:1==g?f=se(f,E):2==g&&(h=se(h,E+": "+l[++b]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=f:a.classesWithoutHost=f}const db=new Bn("INJECTOR",-1);class JE{get(l,u=As){if(u===As){const h=new Error(`NullInjectorError: No provider for ${Y(l)}!`);throw h.name="NullInjectorError",h}return u}}const hb=new Bn("Set Injector scope."),Pp={},Dx={};let fb;function eD(){return void 0===fb&&(fb=new JE),fb}function pb(a,l=null,u=null,h){const f=tD(a,l,u,h);return f._resolveInjectorDefTypes(),f}function tD(a,l=null,u=null,h){return new Tx(a,u,l||eD(),h)}class Tx{constructor(l,u,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];u&&qi(u,E=>this.processProvider(E,l,u)),qi([l],E=>this.processInjectorType(E,[],g)),this.records.set(db,Np(void 0,this));const b=this.records.get(hb);this.scope=null!=b?b.value:null,this.source=f||("object"==typeof l?null:Y(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,u=As,h=wt.Default){this.assertNotDestroyed();const f=Ue(this),g=jn(void 0);try{if(!(h&wt.SkipSelf)){let E=this.records.get(l);if(void 0===E){const T=function kx(a){return"function"==typeof a||"object"==typeof a&&a instanceof Bn}(l)&&xt(l);E=T&&this.injectableDefInScope(T)?Np(mb(l),Pp):null,this.records.set(l,E)}if(null!=E)return this.hydrate(l,E)}return(h&wt.Self?eD():this.parent).get(l,u=h&wt.Optional&&u===As?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[la]=b[la]||[]).unshift(Y(l)),f)throw b;return function ca(a,l,u,h){const f=a[la];throw l[K]&&f.unshift(l[K]),a.message=function Xs(a,l,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let f=Y(l);if(Array.isArray(l))f=l.map(Y).join(" -> ");else if("object"==typeof l){let g=[];for(let b in l)if(l.hasOwnProperty(b)){let E=l[b];g.push(b+":"+("string"==typeof E?JSON.stringify(E):Y(E)))}f=`{${g.join(", ")}}`}return`${u}${h?"("+h+")":""}[${f}]: ${a.replace(S,"\n  ")}`}("\n"+a.message,f,u,h),a.ngTokenPath=f,a[la]=null,a}(b,l,"R3InjectorError",this.source)}throw b}finally{jn(g),Ue(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((h,f)=>l.push(Y(f))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processInjectorType(l,u,h){if(!(l=ee(l)))return!1;let f=Ki(l);const g=null==f&&l.ngModule||void 0,b=void 0===g?l:g,E=-1!==h.indexOf(b);if(void 0!==g&&(f=Ki(g)),null==f)return!1;if(null!=f.imports&&!E){let P;h.push(b);try{qi(f.imports,z=>{this.processInjectorType(z,u,h)&&(void 0===P&&(P=[]),P.push(z))})}finally{}if(void 0!==P)for(let z=0;z<P.length;z++){const{ngModule:te,providers:fe}=P[z];qi(fe,Oe=>this.processProvider(Oe,te,fe||J))}}this.injectorDefTypes.add(b);const T=ji(b)||(()=>new b);this.records.set(b,Np(T,Pp));const R=f.providers;if(null!=R&&!E){const P=l;qi(R,z=>this.processProvider(z,P,R))}return void 0!==g&&void 0!==l.providers}processProvider(l,u,h){let f=fd(l=ee(l))?l:ee(l&&l.provide);const g=function Sx(a,l,u){return _b(a)?Np(void 0,a.useValue):Np(gb(a),Pp)}(l);if(fd(l)||!0!==l.multi)this.records.get(f);else{let b=this.records.get(f);b||(b=Np(void 0,Pp,!0),b.factory=()=>Dt(b.multi),this.records.set(f,b)),f=l,b.multi.push(l)}this.records.set(f,g)}hydrate(l,u){return u.value===Pp&&(u.value=Dx,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Mx(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=ee(l.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function mb(a){const l=xt(a),u=null!==l?l.factory:ji(a);if(null!==u)return u;if(a instanceof Bn)throw new Me(204,!1);if(a instanceof Function)return function Ix(a){const l=a.length;if(l>0)throw Jr(l,"?"),new Me(204,!1);const u=function Yn(a){const l=a&&(a[hs]||a[dr]);if(l){const u=function Kn(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new Me(204,!1)}function gb(a,l,u){let h;if(fd(a)){const f=ee(a);return ji(f)||mb(f)}if(_b(a))h=()=>ee(a.useValue);else if(function iD(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Dt(a.deps||[]));else if(function nD(a){return!(!a||!a.useExisting)}(a))h=()=>st(ee(a.useExisting));else{const f=ee(a&&(a.useClass||a.provide));if(!function xx(a){return!!a.deps}(a))return ji(f)||mb(f);h=()=>new f(...Dt(a.deps))}return h}function Np(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function _b(a){return null!==a&&"object"==typeof a&&ue in a}function fd(a){return"function"==typeof a}let ga=(()=>{class a{static create(u,h){var f;if(Array.isArray(u))return pb({name:""},h,u,"");{const g=null!==(f=u.name)&&void 0!==f?f:"";return pb({name:g},u.parent,u.providers,g)}}}return a.THROW_IF_NOT_FOUND=As,a.NULL=new JE,a.\u0275prov=sn({token:a,providedIn:"any",factory:()=>st(db)}),a.__NG_ELEMENT_ID__=-1,a})();function $F(a,l){kl(nu(a)[1],kn())}function Db(a){let l=function Eb(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;l;){let f;if(ys(a))f=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new Me(903,"");f=l.\u0275dir}if(f){if(u){h.push(f);const b=a;b.inputs=D_(a.inputs),b.declaredInputs=D_(a.declaredInputs),b.outputs=D_(a.outputs);const E=f.hostBindings;E&&Ux(a,E);const T=f.viewQuery,R=f.contentQueries;if(T&&Bx(a,T),R&&Vx(a,R),G(a.inputs,f.inputs),G(a.declaredInputs,f.declaredInputs),G(a.outputs,f.outputs),ys(f)&&f.data.animation){const P=a.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let b=0;b<g.length;b++){const E=g[b];E&&E.ngInherit&&E(a),E===Db&&(u=!1)}}l=Object.getPrototypeOf(l)}!function Lx(a){let l=0,u=null;for(let h=a.length-1;h>=0;h--){const f=a[h];f.hostVars=l+=f.hostVars,f.hostAttrs=Ha(f.hostAttrs,u=Ha(u,f.hostAttrs))}}(h)}function D_(a){return a===Ui?{}:a===J?[]:a}function Bx(a,l){const u=a.viewQuery;a.viewQuery=u?(h,f)=>{l(h,f),u(h,f)}:l}function Vx(a,l){const u=a.contentQueries;a.contentQueries=u?(h,f,g)=>{l(h,f,g),u(h,f,g)}:l}function Ux(a,l){const u=a.hostBindings;a.hostBindings=u?(h,f)=>{l(h,f),u(h,f)}:l}let T_=null;function du(){if(!T_){const a=Yt.Symbol;if(a&&a.iterator)T_=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const h=l[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(T_=h)}}}return T_}function Fp(a){return!!dD(a)&&(Array.isArray(a)||!(a instanceof Map)&&du()in a)}function dD(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Fr(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Tb(a,l,u,h){const f=Le();return Fr(f,xo(),l)&&(qt(),ma(Xn(),f,a,l,u,h)),Tb}function zh(a,l,u,h){return Fr(a,xo(),u)?l+de(u)+h:Ut}function Ab(a,l,u,h,f,g,b,E){const T=Le(),R=qt(),P=a+20,z=R.firstCreatePass?function S_(a,l,u,h,f,g,b,E,T){const R=l.consts,P=Nh(l,a,4,b||null,Yr(R,E));hd(l,u,P,Yr(R,T)),kl(l,P);const z=P.tViews=Mp(2,P,h,f,g,l.directiveRegistry,l.pipeRegistry,null,l.schemas,R);return null!==l.queries&&(l.queries.template(l,P),z.queries=l.queries.embeddedTView(P)),P}(P,R,T,l,u,h,f,g,b):R.data[P];xr(z,!1);const te=T[11].createComment("");Ei(R,T,te,z),Ri(te,T),uu(T,T[P]=qE(te,T,te,z)),_s(z)&&ib(R,T,z),null!=b&&rb(T,z,E)}function Wx(a){return function ws(a,l){return a[l]}(function Kd(){return Ct.lFrame.contextLView}(),20+a)}function R_(a,l=wt.Default){const u=Le();return null===u?st(a,l):Zu(kn(),u,ee(a),l)}function tM(){throw new Error("invalid")}function SD(a,l,u){const h=Le();return Fr(h,xo(),l)&&ts(qt(),Xn(),h,a,l,h[11],u,!1),SD}function AD(a,l,u,h,f){const b=f?"class":"style";Uh(a,u,l.inputs[b],b,h)}function O_(a,l,u,h){const f=Le(),g=qt(),b=20+a,E=f[11],T=f[b]=Gl(E,l,function bg(){return Ct.lFrame.currentNamespace}()),R=g.firstCreatePass?function YF(a,l,u,h,f,g,b){const E=l.consts,R=Nh(l,a,2,f,Yr(E,g));return hd(l,u,R,Yr(E,b)),null!==R.attrs&&v_(R,R.attrs,!1),null!==R.mergedAttrs&&v_(R,R.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,R),R}(b,g,f,0,l,u,h):g.data[b];xr(R,!0);const P=R.mergedAttrs;null!==P&&Rn(E,T,P);const z=R.classes;null!==z&&Kg(E,T,z);const te=R.styles;return null!==te&&mE(E,T,te),64!=(64&R.flags)&&Ei(g,f,T,R),0===function Ml(){return Ct.lFrame.elementDepthCount}()&&Ri(T,f),function Bu(){Ct.lFrame.elementDepthCount++}(),_s(R)&&(ib(g,f,R),u_(g,R,f)),null!==h&&rb(f,R),O_}function ef(){let a=kn();Uu()?Hu():(a=a.parent,xr(a,!1));const l=a;!function yc(){Ct.lFrame.elementDepthCount--}();const u=qt();return u.firstCreatePass&&(kl(u,a),mc(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Cg(a){return 0!=(16&a.flags)}(l)&&AD(u,l,Le(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function rh(a){return 0!=(32&a.flags)}(l)&&AD(u,l,Le(),l.stylesWithoutHost,!1),ef}function Hp(a,l,u,h){return O_(a,l,u,h),ef(),Hp}function Ob(a,l,u){const h=Le(),f=qt(),g=a+20,b=f.firstCreatePass?function jp(a,l,u,h,f){const g=l.consts,b=Yr(g,h),E=Nh(l,a,8,"ng-container",b);return null!==b&&v_(E,b,!0),hd(l,u,E,Yr(g,f)),null!==l.queries&&l.queries.elementStart(l,E),E}(g,f,h,l,u):f.data[g];xr(b,!0);const E=h[g]=h[11].createComment("");return Ei(f,h,E,b),Ri(E,h),_s(b)&&(ib(f,h,b),u_(f,b,h)),null!=u&&rb(h,b),Ob}function Pb(){let a=kn();const l=qt();return Uu()?Hu():(a=a.parent,xr(a,!1)),l.firstCreatePass&&(kl(l,a),mc(a)&&l.queries.elementEnd(a)),Pb}function xD(a,l,u){return Ob(a,l,u),Pb(),xD}function nM(){return Le()}function MD(a){return!!a&&"function"==typeof a.then}function Yl(a){return!!a&&"function"==typeof a.subscribe}const P_=Yl;function kD(a,l,u,h){const f=Le(),g=qt(),b=kn();return iM(g,f,f[11],b,a,l,!!u,h),kD}function RD(a,l){const u=kn(),h=Le(),f=qt();return iM(f,h,Rp(Dc(f.data),u,h),u,a,l,!1),RD}function iM(a,l,u,h,f,g,b,E){const T=_s(h),P=a.firstCreatePass&&QE(a),z=l[8],te=KE(l);let fe=!0;if(3&h.type||E){const Ke=Ai(h,l),at=E?E(Ke):Ke,Be=te.length,bt=E?tn=>E(dn(tn[h.index])):h.index;if(bn(u)){let tn=null;if(!E&&T&&(tn=function QF(a,l,u,h){const f=a.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const b=f[g];if(b===u&&f[g+1]===h){const E=l[7],T=f[g+2];return E.length>T?E[T]:null}"string"==typeof b&&(g+=2)}return null}(a,l,f,h.index)),null!==tn)(tn.__ngLastListenerFn__||tn).__ngNextListenerFn__=g,tn.__ngLastListenerFn__=g,fe=!1;else{g=OD(h,l,z,g,!1);const Cn=u.listen(at,f,g);te.push(g,Cn),P&&P.push(f,bt,Be,Be+1)}}else g=OD(h,l,z,g,!0),at.addEventListener(f,g,b),te.push(g),P&&P.push(f,bt,Be,b)}else g=OD(h,l,z,g,!1);const Oe=h.outputs;let qe;if(fe&&null!==Oe&&(qe=Oe[f])){const Ke=qe.length;if(Ke)for(let at=0;at<Ke;at+=2){const oo=l[qe[at]][qe[at+1]].subscribe(g),Cd=te.length;te.push(g,oo),P&&P.push(f,h.index,Cd,-(Cd+1))}}}function rM(a,l,u,h){try{return!1!==u(h)}catch(f){return XE(a,f),!1}}function OD(a,l,u,h,f){return function g(b){if(b===Function)return h;const E=2&a.flags?xi(a.index,l):l;0==(32&l[2])&&__(E);let T=rM(l,0,h,b),R=g.__ngNextListenerFn__;for(;R;)T=rM(l,0,R,b)&&T,R=R.__ngNextListenerFn__;return f&&!1===T&&(b.preventDefault(),b.returnValue=!1),T}}function N_(a=1){return function Jf(a){return(Ct.lFrame.contextLView=function qu(a,l){for(;a>0;)l=l[15],a--;return l}(a,Ct.lFrame.contextLView))[8]}(a)}function Gp(a,l){let u=null;const h=function Wv(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let f=0;f<l.length;f++){const g=l[f];if("*"!==g){if(null===h?$v(a,g,!0):ox(h,g))return f}else u=f}return u}function tf(a){const l=Le()[16][6];if(!l.projection){const h=l.projection=Jr(a?a.length:1,null),f=h.slice();let g=l.child;for(;null!==g;){const b=a?Gp(g,a):0;null!==b&&(f[b]?f[b].projectionNext=g:h[b]=g,f[b]=g),g=g.next}}}function PD(a,l=0,u){const h=Le(),f=qt(),g=Nh(f,20+a,16,null,u||null);null===g.projection&&(g.projection=l),Hu(),64!=(64&g.flags)&&function ex(a,l,u){pE(l[11],0,l,u,Ci(a,u,l),jv(u.parent||l[6],u,l))}(f,h,g)}function Nb(a,l,u,h,f){const g=Le(),b=zh(g,l,u,h);return b!==Ut&&ts(qt(),Xn(),g,a,b,g[11],f,!1),Nb}function dM(a,l,u,h,f){const g=a[u+1],b=null===l;let E=h?No(g):ql(g),T=!1;for(;0!==E&&(!1===T||b);){const P=a[E+1];hM(a[E],l)&&(T=!0,a[E+1]=h?Oh(P):Xg(P)),E=h?No(P):ql(P)}T&&(a[u+1]=h?Xg(g):Oh(g))}function hM(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&$a(a,l)>=0}const Ni={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function F_(a){return a.substring(Ni.key,Ni.keyEnd)}function BD(a,l){const u=Ni.textEnd;return u===l?-1:(l=Ni.keyEnd=function XF(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,Ni.key=l,u),nf(a,l,u))}function nf(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function Bb(a,l,u){return va(a,l,u,!1),Bb}function Kl(a,l){return va(a,l,null,!0),Kl}function Vb(a){!function Fo(a,l,u,h){const f=qt(),g=Kr(2);f.firstUpdatePass&&jD(f,null,g,h);const b=Le();if(u!==Ut&&Fr(b,g,u)){const E=f.data[yi()];if(B_(E,h)&&!HD(f,g)){let T=h?E.classesWithoutHost:E.stylesWithoutHost;null!==T&&(u=se(T,u||"")),AD(f,E,b,u,h)}else!function rf(a,l,u,h,f,g,b,E){f===Ut&&(f=J);let T=0,R=0,P=0<f.length?f[0]:null,z=0<g.length?g[0]:null;for(;null!==P||null!==z;){const te=T<f.length?f[T+1]:void 0,fe=R<g.length?g[R+1]:void 0;let qe,Oe=null;P===z?(T+=2,R+=2,te!==fe&&(Oe=z,qe=fe)):null===z||null!==P&&P<z?(T+=2,Oe=P):(R+=2,Oe=z,qe=fe),null!==Oe&&vM(a,l,u,h,Oe,qe,b,E),P=T<f.length?f[T]:null,z=R<g.length?g[R]:null}}(f,E,b,b[11],b[g+1],b[g+1]=function yM(a,l,u){if(null==u||""===u)return J;const h=[],f=Js(u);if(Array.isArray(f))for(let g=0;g<f.length;g++)a(h,f[g],!0);else if("object"==typeof f)for(const g in f)f.hasOwnProperty(g)&&a(h,g,f[g]);else"string"==typeof f&&l(h,f);return h}(a,l,u),h,g)}}($i,rl,a,!0)}function rl(a,l){for(let u=function fM(a){return function mM(a){Ni.key=0,Ni.keyEnd=0,Ni.value=0,Ni.valueEnd=0,Ni.textEnd=a.length}(a),BD(a,nf(a,0,Ni.textEnd))}(l);u>=0;u=BD(l,u))$i(a,F_(l),!0)}function va(a,l,u,h){const f=Le(),g=qt(),b=Kr(2);g.firstUpdatePass&&jD(g,a,b,h),l!==Ut&&Fr(f,b,l)&&vM(g,g.data[yi()],f,f[11],a,f[b+1]=function jb(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=Y(Js(a)))),a}(l,u),h,b)}function HD(a,l){return l>=a.expandoStartIndex}function jD(a,l,u,h){const f=a.data;if(null===f[u+1]){const g=f[yi()],b=HD(a,u);B_(g,h)&&null===l&&!b&&(l=!1),l=function gM(a,l,u,h){const f=Dc(a);let g=h?l.residualClasses:l.residualStyles;if(null===f)0===(h?l.classBindings:l.styleBindings)&&(u=L_(u=GD(null,a,l,u,h),l.attrs,h),g=null);else{const b=l.directiveStylingLast;if(-1===b||a[b]!==f)if(u=GD(f,a,l,u,h),null===g){let T=function Lo(a,l,u){const h=u?l.classBindings:l.styleBindings;if(0!==ql(h))return a[No(h)]}(a,l,h);void 0!==T&&Array.isArray(T)&&(T=GD(null,a,l,T[1],h),T=L_(T,l.attrs,h),function tL(a,l,u,h){a[No(u?l.classBindings:l.styleBindings)]=h}(a,l,h,T))}else g=function _M(a,l,u){let h;const f=l.directiveEnd;for(let g=1+l.directiveStylingLast;g<f;g++)h=L_(h,a[g].hostAttrs,u);return L_(h,l.attrs,u)}(a,l,h)}return void 0!==g&&(h?l.residualClasses=g:l.residualStyles=g),u}(f,g,l,h),function FD(a,l,u,h,f,g){let b=g?l.classBindings:l.styleBindings,E=No(b),T=ql(b);a[h]=u;let P,R=!1;if(Array.isArray(u)){const z=u;P=z[1],(null===P||$a(z,P)>0)&&(R=!0)}else P=u;if(f)if(0!==T){const te=No(a[E+1]);a[h+1]=Qg(te,E),0!==te&&(a[te+1]=Jg(a[te+1],h)),a[E+1]=function ax(a,l){return 131071&a|l<<17}(a[E+1],h)}else a[h+1]=Qg(E,0),0!==E&&(a[E+1]=Jg(a[E+1],h)),E=h;else a[h+1]=Qg(T,0),0===E?E=h:a[T+1]=Jg(a[T+1],h),T=h;R&&(a[h+1]=Xg(a[h+1])),dM(a,P,h,!0),dM(a,P,h,!1),function uM(a,l,u,h,f){const g=f?a.residualClasses:a.residualStyles;null!=g&&"string"==typeof l&&$a(g,l)>=0&&(u[h+1]=Oh(u[h+1]))}(l,P,a,h,g),b=Qg(E,T),g?l.classBindings=b:l.styleBindings=b}(f,g,l,u,b,h)}}function GD(a,l,u,h,f){let g=null;const b=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<b&&(g=l[E],h=L_(h,g.hostAttrs,f),g!==a);)E++;return null!==a&&(u.directiveStylingLast=E),h}function L_(a,l,u){const h=u?1:2;let f=-1;if(null!==l)for(let g=0;g<l.length;g++){const b=l[g];"number"==typeof b?f=b:f===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),$i(a,b,!!u||l[++g]))}return void 0===a?null:a}function vM(a,l,u,h,f,g,b,E){if(!(3&l.type))return;const T=a.data,R=T[E+1];Hb(function Yv(a){return 1==(1&a)}(R)?Ub(T,l,u,f,ql(R),b):void 0)||(Hb(g)||function Zv(a){return 2==(2&a)}(R)&&(g=Ub(T,null,u,f,E,b)),function nx(a,l,u,h,f){const g=bn(a);if(l)f?g?a.addClass(u,h):u.classList.add(h):g?a.removeClass(u,h):u.classList.remove(h);else{let b=-1===h.indexOf("-")?void 0:F.DashCase;if(null==f)g?a.removeStyle(u,h,b):u.style.removeProperty(h);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),b|=F.Important),g?a.setStyle(u,h,f,b):u.style.setProperty(h,f,E?"important":"")}}}(h,b,So(yi(),u),f,g))}function Ub(a,l,u,h,f,g){const b=null===l;let E;for(;f>0;){const T=a[f],R=Array.isArray(T),P=R?T[1]:T,z=null===P;let te=u[f+1];te===Ut&&(te=z?J:void 0);let fe=z?Uc(te,h):P===h?te:void 0;if(R&&!Hb(fe)&&(fe=Uc(T,h)),Hb(fe)&&(E=fe,b))return E;const Oe=a[f+1];f=b?No(Oe):ql(Oe)}if(null!==l){let T=g?l.residualClasses:l.residualStyles;null!=T&&(E=Uc(T,h))}return E}function Hb(a){return void 0!==a}function B_(a,l){return 0!=(a.flags&(l?16:32))}function bM(a,l=""){const u=Le(),h=qt(),f=a+20,g=h.firstCreatePass?Nh(h,f,1,l,null):h.data[f],b=u[f]=function vr(a,l){return bn(a)?a.createText(l):a.createTextNode(l)}(u[11],l);Ei(h,u,b,g),xr(g,!1)}function fu(a){return V_("",a,""),fu}function V_(a,l,u){const h=Le(),f=zh(h,a,l,u);return f!==Ut&&Wl(h,yi(),f),V_}function YD(a,l,u){const h=Le();return Fr(h,xo(),l)&&ts(qt(),Xn(),h,a,l,h[11],u,!0),YD}function KD(a,l,u){const h=Le();if(Fr(h,xo(),l)){const g=qt(),b=Xn();ts(g,b,h,a,l,Rp(Dc(g.data),b,h),u,!0)}return KD}const af=void 0;var fL=["en",[["a","p"],["AM","PM"],af],[["AM","PM"],af,af],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],af,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],af,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",af,"{1} 'at' {0}",af],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hL(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let Zp={};function QD(a){const l=function pL(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=LM(l);if(u)return u;const h=l.split("-")[0];if(u=LM(h),u)return u;if("en"===h)return fL;throw new Error(`Missing locale data for the locale "${a}".`)}function FM(a){return QD(a)[St.PluralCase]}function LM(a){return a in Zp||(Zp[a]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[a]),Zp[a]}var St=(()=>((St=St||{})[St.LocaleId=0]="LocaleId",St[St.DayPeriodsFormat=1]="DayPeriodsFormat",St[St.DayPeriodsStandalone=2]="DayPeriodsStandalone",St[St.DaysFormat=3]="DaysFormat",St[St.DaysStandalone=4]="DaysStandalone",St[St.MonthsFormat=5]="MonthsFormat",St[St.MonthsStandalone=6]="MonthsStandalone",St[St.Eras=7]="Eras",St[St.FirstDayOfWeek=8]="FirstDayOfWeek",St[St.WeekendRange=9]="WeekendRange",St[St.DateFormat=10]="DateFormat",St[St.TimeFormat=11]="TimeFormat",St[St.DateTimeFormat=12]="DateTimeFormat",St[St.NumberSymbols=13]="NumberSymbols",St[St.NumberFormats=14]="NumberFormats",St[St.CurrencyCode=15]="CurrencyCode",St[St.CurrencySymbol=16]="CurrencySymbol",St[St.CurrencyName=17]="CurrencyName",St[St.Currencies=18]="Currencies",St[St.Directionality=19]="Directionality",St[St.PluralCase=20]="PluralCase",St[St.ExtraData=21]="ExtraData",St))();const $b="en-US";let XD=$b;function Jb(a,l,u,h,f){if(a=ee(a),Array.isArray(a))for(let g=0;g<a.length;g++)Jb(a[g],l,u,h,f);else{const g=qt(),b=Le();let E=fd(a)?a:ee(a.provide),T=gb(a);const R=kn(),P=1048575&R.providerIndexes,z=R.directiveStart,te=R.providerIndexes>>20;if(fd(a)||!a.multi){const fe=new Ua(T,f,R_),Oe=t0(E,l,f?P:P+te,z);-1===Oe?(Nl(Ds(R,b),g,E),e0(g,a,l.length),l.push(E),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),u.push(fe),b.push(fe)):(u[Oe]=fe,b[Oe]=fe)}else{const fe=t0(E,l,P+te,z),Oe=t0(E,l,P,P+te),qe=fe>=0&&u[fe],Ke=Oe>=0&&u[Oe];if(f&&!Ke||!f&&!qe){Nl(Ds(R,b),g,E);const at=function dk(a,l,u,h,f){const g=new Ua(a,u,R_);return g.multi=[],g.index=l,g.componentProviders=0,lT(g,f,h&&!u),g}(f?cT:uk,u.length,f,h,T);!f&&Ke&&(u[Oe].providerFactory=at),e0(g,a,l.length,0),l.push(E),R.directiveStart++,R.directiveEnd++,f&&(R.providerIndexes+=1048576),u.push(at),b.push(at)}else e0(g,a,fe>-1?fe:Oe,lT(u[f?Oe:fe],T,!f&&h));!f&&h&&Ke&&u[Oe].componentProviders++}}}function e0(a,l,u,h){const f=fd(l),g=function Ax(a){return!!a.useClass}(l);if(f||g){const T=(g?ee(l.useClass):l).prototype.ngOnDestroy;if(T){const R=a.destroyHooks||(a.destroyHooks=[]);if(!f&&l.multi){const P=R.indexOf(u);-1===P?R.push(u,[h,T]):R[P+1].push(h,T)}else R.push(u,T)}}}function lT(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function t0(a,l,u,h){for(let f=u;f<h;f++)if(l[f]===a)return f;return-1}function uk(a,l,u,h){return $_(this.multi,[])}function cT(a,l,u,h){const f=this.multi;let g;if(this.providerFactory){const b=this.providerFactory.componentProviders,E=Oc(u,u[1],this.providerFactory.index,h);g=E.slice(0,b),$_(f,g);for(let T=b;T<E.length;T++)g.push(E[T])}else g=[],$_(f,g);return g}function $_(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function uT(a,l=[]){return u=>{u.providersResolver=(h,f)=>function ck(a,l,u){const h=qt();if(h.firstCreatePass){const f=ys(a);Jb(u,h.data,h.blueprint,f,!0),Jb(l,h.data,h.blueprint,f,!1)}}(h,f?f(a):a,l)}}class dT{}class ZL{resolveComponentFactory(l){throw function hT(a){const l=Error(`No component factory found for ${Y(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let n0=(()=>{class a{}return a.NULL=new ZL,a})();function YL(){return Xp(kn(),Le())}function Xp(a,l){return new vd(Ai(a,l))}let vd=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=YL,a})();function r0(a){return a instanceof vd?a.nativeElement:a}class fT{}let pT=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function pk(){const a=Le(),u=xi(kn().index,a);return function lf(a){return a[11]}(Ji(u)?u:a)}(),a})(),mk=(()=>{class a{}return a.\u0275prov=sn({token:a,providedIn:"root",factory:()=>null}),a})();class mT{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const gT=new mT("13.3.8"),W_={};function s0(a,l,u,h,f=!1){for(;null!==u;){const g=l[u.index];if(null!==g&&h.push(dn(g)),Zr(g))for(let E=10;E<g.length;E++){const T=g[E],R=T[1].firstChild;null!==R&&s0(T[1],T,R,h)}const b=u.type;if(8&b)s0(a,l,u.child,h);else if(32&b){const E=Ee(u,l);let T;for(;T=E();)h.push(T)}else if(16&b){const E=Ja(l,u);if(Array.isArray(E))h.push(...E);else{const T=yt(l[16]);s0(T[1],T,E,h,!0)}}u=f?u.projectionNext:u.next}return h}class Jp{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return s0(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Zr(l)){const u=l[8],h=u?u.indexOf(this):-1;h>-1&&(wi(l,h),sa(u,h))}this._attachedToViewContainer=!1}Vv(this._lView[1],this._lView)}onDestroy(l){sb(this._lView[1],this._lView,null,l)}markForCheck(){__(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function cb(a,l,u){const h=l[10];h.begin&&h.begin();try{dd(a,l,a.template,u)}catch(f){throw XE(l,f),f}finally{h.end&&h.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cd(a,l){Tp(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new Me(902,"");this._appRef=l}}class Z_ extends Jp{constructor(l){super(l),this._view=l}detectChanges(){ZE(this._view)}checkNoChanges(){}get context(){return null}}class pu extends n0{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=ci(l);return new em(u,this.ngModule)}}function gk(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class em extends dT{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function bE(a){return a.map(vE).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return gk(this.componentDef.inputs)}get outputs(){return gk(this.componentDef.outputs)}create(l,u,h,f){const g=(f=f||this.ngModule)?function yT(a,l){return{get:(u,h,f)=>{const g=a.get(u,W_,f);return g!==W_||h===W_?g:l.get(u,h,f)}}}(l,f.injector):l,b=g.get(fT,Sl),E=g.get(mk,null),T=b.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",P=h?function BE(a,l,u){if(bn(a))return a.selectRootElement(l,u===Jt.ShadowDom);let h="string"==typeof l?a.querySelector(l):l;return h.textContent="",h}(T,h,this.componentDef.encapsulation):Gl(b.createRenderer(null,this.componentDef),R,function _T(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(R)),z=this.componentDef.onPush?576:528,te=function E_(a,l){return{components:[],scheduler:a||gn,clean:y_,playerHandler:l||null,flags:0}}(),fe=Mp(0,null,null,1,0,null,null,null,null,null),Oe=xp(null,fe,te,z,null,null,b,T,E,g);let qe,Ke;Jo(Oe);try{const at=function wb(a,l,u,h,f,g){const b=u[1];u[20]=a;const T=Nh(b,20,2,"#host",null),R=T.mergedAttrs=l.hostAttrs;null!==R&&(v_(T,R,!0),null!==a&&(Rn(f,a,R),null!==T.classes&&Kg(f,a,T.classes),null!==T.styles&&mE(f,a,T.styles)));const P=h.createRenderer(a,l),z=xp(u,NE(l),null,l.onPush?64:16,u[20],T,h,P,g||null,null);return b.firstCreatePass&&(Nl(Ds(T,u),b,l.type),ab(b,T),h_(T,u.length,1)),uu(u,z),u[20]=z}(P,this.componentDef,Oe,b,T);if(P)if(h)Rn(T,P,["ng-version",gT.full]);else{const{attrs:Be,classes:bt}=function wE(a){const l=[],u=[];let h=1,f=2;for(;h<a.length;){let g=a[h];if("string"==typeof g)2===f?""!==g&&l.push(g,a[++h]):8===f&&u.push(g);else{if(!da(f))break;f=g}h++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);Be&&Rn(T,P,Be),bt&&bt.length>0&&Kg(T,P,bt.join(" "))}if(Ke=Fn(fe,20),void 0!==u){const Be=Ke.projection=[];for(let bt=0;bt<this.ngContentSelectors.length;bt++){const tn=u[bt];Be.push(null!=tn?Array.from(tn):null)}}qe=function Cb(a,l,u,h,f){const g=u[1],b=function mx(a,l,u){const h=kn();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),io(a,h,l,tl(a,l,1,null),u));const f=Oc(l,a,h.directiveStart,h);Ri(f,l);const g=Ai(h,l);return g&&Ri(g,l),f}(g,u,l);if(h.components.push(b),a[8]=b,f&&f.forEach(T=>T(b,l)),l.contentQueries){const T=kn();l.contentQueries(1,b,T.directiveStart)}const E=kn();return!g.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(ea(E.index),Bh(u[1],E,0,E.directiveStart,E.directiveEnd,l),jE(l,b)),b}(at,this.componentDef,Oe,te,[$F]),ud(fe,Oe,null)}finally{_r()}return new XL(this.componentType,qe,Xp(Ke,Oe),Oe,Ke)}}class XL extends class hk{}{constructor(l,u,h,f,g){super(),this.location=h,this._rootLView=f,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new Z_(f),this.componentType=l}get injector(){return new ko(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class cf{}class bT{}const uf=new Map;class vk extends cf{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pu(this);const h=ui(l);this._bootstrapComponents=v(h.bootstrap),this._r3Injector=tD(l,u,[{provide:cf,useValue:this},{provide:n0,useValue:this.componentFactoryResolver}],Y(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,u=ga.THROW_IF_NOT_FOUND,h=wt.Default){return l===ga||l===cf||l===db?this:this._r3Injector.get(l,u,h)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class ET extends bT{constructor(l){super(),this.moduleType=l,null!==ui(l)&&function yk(a){const l=new Set;!function u(h){const f=ui(h,!0),g=f.id;null!==g&&(function wT(a,l,u){if(l&&l!==u)throw new Error(`Duplicate module registered for ${a} - ${Y(l)} vs ${Y(l.name)}`)}(g,uf.get(g),h),uf.set(g,h));const b=v(f.imports);for(const E of b)l.has(E)||(l.add(E),u(E))}(a)}(l)}create(l){return new vk(this.moduleType,l)}}function Y_(a,l,u,h){return function wk(a,l,u,h,f,g){const b=l+u;return Fr(a,b,f)?function Tt(a,l,u){return a[l]=u}(a,b+1,g?h.call(g,f):h(f)):function K_(a,l){const u=a[l];return u===Ut?void 0:u}(a,b+1)}(Le(),function zi(){const a=Ct.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}(),a,l,u,h)}function a0(a){return l=>{setTimeout(a,void 0,l)}}const Bo=class TT extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,h){var f,g,b;let E=l,T=u||(()=>null),R=h;if(l&&"object"==typeof l){const z=l;E=null===(f=z.next)||void 0===f?void 0:f.bind(z),T=null===(g=z.error)||void 0===g?void 0:g.bind(z),R=null===(b=z.complete)||void 0===b?void 0:b.bind(z)}this.__isAsync&&(T=a0(T),E&&(E=a0(E)),R&&(R=a0(R)));const P=super.subscribe({next:E,error:T,complete:R});return l instanceof B.w0&&l.add(P),P}};function IT(){return this._results[du()]()}class im{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=du(),h=im.prototype;h[u]||(h[u]=IT)}get changes(){return this._changes||(this._changes=new Bo)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const h=this;h.dirty=!1;const f=vi(l);(this._changesDetected=!function Qu(a,l,u){if(a.length!==l.length)return!1;for(let h=0;h<a.length;h++){let f=a[h],g=l[h];if(u&&(f=u(f),g=u(g)),g!==f)return!1}return!0}(h._results,f,u))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ff=(()=>{class a{}return a.__NG_ELEMENT_ID__=ST,a})();const Ik=ff,Sk=class extends Ik{constructor(l,u,h){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(l){const u=this._declarationTContainer.tViews,h=xp(this._declarationLView,u,l,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(h[19]=g.createEmbeddedView(u)),ud(u,h,l),new Jp(h)}};function ST(){return ol(kn(),Le())}function ol(a,l){return 4&a.type?new Sk(l,a,Xp(a,l)):null}let mu=(()=>{class a{}return a.__NG_ELEMENT_ID__=Ak,a})();function Ak(){return kk(kn(),Le())}const xk=mu,l0=class extends xk{constructor(l,u,h){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=h}get element(){return Xp(this._hostTNode,this._hostLView)}get injector(){return new ko(this._hostTNode,this._hostLView)}get parentInjector(){const l=Mi(this._hostTNode,this._hostLView);if(Kt(l)){const u=ia(l,this._hostLView),h=kr(l);return new ko(u[1].data[h+8],u)}return new ko(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=Mk(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,h){const f=l.createEmbeddedView(u||{});return this.insert(f,h),f}createComponent(l,u,h,f,g){const b=l&&!function Xr(a){return"function"==typeof a}(l);let E;if(b)E=u;else{const z=u||{};E=z.index,h=z.injector,f=z.projectableNodes,g=z.ngModuleRef}const T=b?l:new em(ci(l)),R=h||this.parentInjector;if(!g&&null==T.ngModule){const te=(b?R:this.parentInjector).get(cf,null);te&&(g=te)}const P=T.create(R,f,void 0,g);return this.insert(P.hostView,E),P}insert(l,u){const h=l._lView,f=h[1];if(function xl(a){return Zr(a[3])}(h)){const P=this.indexOf(l);if(-1!==P)this.detach(P);else{const z=h[3],te=new l0(z,z[6],z[3]);te.detach(te.indexOf(l))}}const g=this._adjustIndex(u),b=this._lContainer;!function Mh(a,l,u,h){const f=10+h,g=u.length;h>0&&(u[f-1][4]=l),h<g-10?(l[4]=u[f],ki(u,10+h,l)):(u.push(l),l[4]=null),l[3]=u;const b=l[17];null!==b&&u!==b&&function ou(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(b,l);const E=l[19];null!==E&&E.insertView(a),l[2]|=128}(f,h,b,g);const E=Dp(g,b),T=h[11],R=zl(T,b[7]);return null!==R&&function Zg(a,l,u,h,f,g){h[0]=f,h[6]=l,Tp(a,h,u,1,f,g)}(f,b[6],T,h,R,E),l.attachToViewContainerRef(),ki(AT(b),g,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=Mk(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),h=wi(this._lContainer,u);h&&(sa(AT(this._lContainer),u),Vv(h[1],h))}detach(l){const u=this._adjustIndex(l,-1),h=wi(this._lContainer,u);return h&&null!=sa(AT(this._lContainer),u)?new Jp(h):null}_adjustIndex(l,u=0){return null==l?this.length+u:l}};function Mk(a){return a[8]}function AT(a){return a[8]||(a[8]=[])}function kk(a,l){let u;const h=l[a.index];if(Zr(h))u=h;else{let f;if(8&a.type)f=dn(h);else{const g=l[11];f=g.createComment("");const b=Ai(a,l);to(g,zl(g,b),f,function Hv(a,l){return bn(a)?a.nextSibling(l):l.nextSibling}(g,b),!1)}l[a.index]=u=qE(h,l,f,a),uu(l,u)}return new l0(u,a,l)}class X_{constructor(l){this.queryList=l,this.matches=null}clone(){return new X_(this.queryList)}setDirty(){this.queryList.setDirty()}}class c0{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const h=null!==l.contentQueries?l.contentQueries[0]:u.length,f=[];for(let g=0;g<h;g++){const b=u.getByIndex(g);f.push(this.queries[b.indexInDeclarationView].clone())}return new c0(f)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==OT(l,u).matches&&this.queries[u].setDirty()}}class pf{constructor(l,u,h=null){this.predicate=l,this.flags=u,this.read=h}}class u0{constructor(l=[]){this.queries=l}elementStart(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let h=0;h<this.length;h++){const f=null!==u?u.length:0,g=this.getByIndex(h).embeddedTView(l,f);g&&(g.indexInDeclarationView=h,null!==u?u.push(g):u=[g])}return null!==u?new u0(u):null}template(l,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class d0{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new d0(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=l.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const g=h[f];this.matchTNodeWithReadOption(l,u,J_(u,g)),this.matchTNodeWithReadOption(l,u,Rc(u,l,g,!1,!1))}else h===ff?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Rc(u,l,h,!1,!1))}matchTNodeWithReadOption(l,u,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===vd||f===mu||f===ff&&4&u.type)this.addMatch(u.index,-2);else{const g=Rc(u,l,f,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,h)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function J_(a,l){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===l)return u[h+1];return null}function h0(a,l,u,h){return-1===u?function Rk(a,l){return 11&a.type?Xp(a,l):4&a.type?ol(a,l):null}(l,a):-2===u?function Ok(a,l,u){return u===vd?Xp(l,a):u===ff?ol(l,a):u===mu?kk(l,a):void 0}(a,l,h):Oc(a,a[1],u,l)}function Pk(a,l,u,h){const f=l[19].queries[h];if(null===f.matches){const g=a.data,b=u.matches,E=[];for(let T=0;T<b.length;T+=2){const R=b[T];E.push(R<0?null:h0(l,g[R],b[T+1],u.metadata.read))}f.matches=E}return f.matches}function f0(a,l,u,h){const f=a.queries.getByIndex(u),g=f.matches;if(null!==g){const b=Pk(a,l,f,u);for(let E=0;E<g.length;E+=2){const T=g[E];if(T>0)h.push(b[E/2]);else{const R=g[E+1],P=l[-T];for(let z=10;z<P.length;z++){const te=P[z];te[17]===te[3]&&f0(te[1],te,R,h)}if(null!==P[9]){const z=P[9];for(let te=0;te<z.length;te++){const fe=z[te];f0(fe[1],fe,R,h)}}}}}return h}function MT(a){const l=Le(),u=qt(),h=Tc();Qd(h+1);const f=OT(u,h);if(a.dirty&&Ko(l)===(2==(2&f.metadata.flags))){if(null===f.matches)a.reset([]);else{const g=f.crossesNgTemplate?f0(u,l,h,[]):Pk(u,l,f,h);a.reset(g,r0),a.notifyOnChanges()}return!0}return!1}function kT(a,l,u){const h=qt();h.firstCreatePass&&(m0(h,new pf(a,l,u),-1),2==(2&l)&&(h.staticViewQueries=!0)),RT(h,Le(),l)}function al(a,l,u,h){const f=qt();if(f.firstCreatePass){const g=kn();m0(f,new pf(l,u,h),g.index),function f2(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(f,a),2==(2&u)&&(f.staticContentQueries=!0)}RT(f,Le(),u)}function p0(){return function mf(a,l){return a[19].queries[l].queryList}(Le(),Tc())}function RT(a,l,u){const h=new im(4==(4&u));sb(a,l,h,h.destroy),null===l[19]&&(l[19]=new c0),l[19].queries.push(new X_(h))}function m0(a,l,u){null===a.queries&&(a.queries=new u0),a.queries.track(new d0(l,u))}function OT(a,l){return a.queries.getByIndex(l)}const S0=Bc("Input",a=>({bindingPropertyName:a}));function ro(...a){}const x0=new Bn("Application Initializer");let zT=(()=>{class a{constructor(u){this.appInits=u,this.resolve=ro,this.reject=ro,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(MD(g))u.push(g);else if(P_(g)){const b=new Promise((E,T)=>{g.subscribe({complete:E,error:T})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(f=>{this.reject(f)}),0===u.length&&h(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(st(x0,8))},a.\u0275prov=sn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const qk=new Bn("AppId",{providedIn:"root",factory:function so(){return`${sm()}${sm()}${sm()}`}});function sm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const om=new Bn("Platform Initializer"),$k=new Bn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ay=new Bn("appBootstrapListener");let v2=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=sn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const qT=new Bn("LocaleId",{providedIn:"root",factory:()=>Vt(qT,wt.Optional|wt.SkipSelf)||function b2(){return"undefined"!=typeof $localize&&$localize.locale||$b}()}),w2=new Bn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class $T{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let Wk=(()=>{class a{compileModuleSync(u){return new ET(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),g=v(ui(u).declarations).reduce((b,E)=>{const T=ci(E);return T&&b.push(new em(T)),b},[]);return new $T(h,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=sn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const ly=(()=>Promise.resolve(0))();function bd(a){"undefined"==typeof Zone?ly.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class Ns{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bo(!1),this.onMicrotaskEmpty=new Bo(!1),this.onStable=new Bo(!1),this.onError=new Bo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&u,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function cy(){let a=Yt.requestAnimationFrame,l=Yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function Kk(a){const l=()=>{!function uy(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Yt,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,M0(a),a.isCheckStableRunning=!0,am(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),M0(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,f,g,b,E)=>{try{return k0(a),u.invokeTask(f,g,b,E)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||a.shouldCoalesceRunChangeDetection)&&l(),WT(a)}},onInvoke:(u,h,f,g,b,E,T)=>{try{return k0(a),u.invoke(f,g,b,E,T)}finally{a.shouldCoalesceRunChangeDetection&&l(),WT(a)}},onHasTask:(u,h,f,g)=>{u.hasTask(f,g),h===f&&("microTask"==g.change?(a._hasPendingMicrotasks=g.microTask,M0(a),am(a)):"macroTask"==g.change&&(a.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,h,f,g)=>(u.handleError(f,g),a.runOutsideAngular(()=>a.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ns.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ns.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,u,h){return this._inner.run(l,u,h)}runTask(l,u,h,f){const g=this._inner,b=g.scheduleEventTask("NgZoneEvent: "+f,l,Yk,ro,ro);try{return g.runTask(b,u,h)}finally{g.cancelTask(b)}}runGuarded(l,u,h){return this._inner.runGuarded(l,u,h)}runOutsideAngular(l){return this._outer.run(l)}}const Yk={};function am(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function M0(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function k0(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function WT(a){a._nesting--,am(a)}class ZT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bo,this.onMicrotaskEmpty=new Bo,this.onStable=new Bo,this.onError=new Bo}run(l,u,h){return l.apply(u,h)}runGuarded(l,u,h){return l.apply(u,h)}runOutsideAngular(l){return l()}runTask(l,u,h,f){return l.apply(u,h)}}let YT=(()=>{class a{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ns.assertNotInAngularZone(),bd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bd(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,f){let g=-1;h&&h>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==g),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:f})}whenStable(u,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,f){return[]}}return a.\u0275fac=function(u){return new(u||a)(st(Ns))},a.\u0275prov=sn({token:a,factory:a.\u0275fac}),a})(),D2=(()=>{class a{constructor(){this._applications=new Map,QT.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return QT.findTestabilityInTree(this,u,h)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=sn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();class Qk{addToWindow(l){}findTestabilityInTree(l,u,h){return null}}function KT(a){QT=a}let QT=new Qk,Xl=null;const XT=new Bn("AllowMultipleToken"),R0=new Bn("PlatformOnDestroy");class P0{constructor(l,u){this.name=l,this.token=u}}function cm(a,l,u=[]){const h=`Platform: ${l}`,f=new Bn(h);return(g=[])=>{let b=dm();if(!b||b.injector.get(XT,!1)){const E=[...u,...g,{provide:f,useValue:!0}];a?a(E):function lm(a){if(Xl&&!Xl.get(XT,!1))throw new Me(400,"");Xl=a;const l=a.get(N0),u=a.get(om,null);u&&u.forEach(h=>h())}(function um(a=[],l){return ga.create({name:l,providers:[{provide:hb,useValue:"platform"},{provide:R0,useValue:()=>Xl=null},...a]})}(E,h))}return function gf(a){const l=dm();if(!l)throw new Me(401,"");return l}()}}function dm(){var a;return null!==(a=null==Xl?void 0:Xl.get(N0))&&void 0!==a?a:null}let N0=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const E=function F0(a,l){let u;return u="noop"===a?new ZT:("zone.js"===a?void 0:a)||new Ns({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),T=[{provide:Ns,useValue:E}];return E.run(()=>{const R=ga.create({providers:T,parent:this.injector,name:u.moduleType.name}),P=u.create(R),z=P.injector.get(Ah,null);if(!z)throw new Me(402,"");return E.runOutsideAngular(()=>{const te=E.onError.subscribe({next:fe=>{z.handleError(fe)}});P.onDestroy(()=>{fm(this._modules,P),te.unsubscribe()})}),function eI(a,l,u){try{const h=u();return MD(h)?h.catch(f=>{throw l.runOutsideAngular(()=>a.handleError(f)),f}):h}catch(h){throw l.runOutsideAngular(()=>a.handleError(h)),h}}(z,E,()=>{const te=P.injector.get(zT);return te.runInitializers(),te.donePromise.then(()=>(function BM(a){jt(a,"Expected localeId to be defined"),"string"==typeof a&&(XD=a.toLowerCase().replace(/_/g,"-"))}(P.injector.get(qT,$b)||$b),this._moduleDoBootstrap(P),P))})})}bootstrapModule(u,h=[]){const f=hm({},h);return function O0(a,l,u){const h=new ET(u);return Promise.resolve(h)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(u){const h=u.injector.get(dy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!u.instance.ngDoBootstrap)throw new Me(403,"");u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,"");this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(R0,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(st(ga))},a.\u0275prov=sn({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function hm(a,l){return Array.isArray(l)?l.reduce(hm,a):Object.assign(Object.assign({},a),l)}let dy=(()=>{class a{constructor(u,h,f,g){this._zone=u,this._injector=h,this._exceptionHandler=f,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new x.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),E=new x.y(T=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Ns.assertNotInAngularZone(),bd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{Ns.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{R.unsubscribe(),P.unsubscribe()}});this.isStable=(0,V.T)(b,E.pipe((0,U.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Me(405,"");let f;f=u instanceof dT?u:this._injector.get(n0).resolveComponentFactory(u),this.componentTypes.push(f.componentType);const g=function T2(a){return a.isBoundToModule}(f)?void 0:this._injector.get(cf),E=f.create(ga.NULL,[],h||f.selector,g),T=E.location.nativeElement,R=E.injector.get(YT,null),P=R&&E.injector.get(D2);return R&&P&&P.registerApplication(T,R),E.onDestroy(()=>{this.detachView(E.hostView),fm(this.components,E),P&&P.unregisterApplication(T)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Me(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;fm(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(ay,[]).concat(this._bootstrapListeners).forEach(f=>f(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(u){return new(u||a)(st(Ns),st(ga),st(Ah),st(zT))},a.\u0275prov=sn({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function fm(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let L0=!0,B0=!1;function V0(){return B0=!0,L0}function wn(){if(B0)throw new Error("Cannot enable prod mode after platform setup.");L0=!1}let pm=(()=>{class a{}return a.__NG_ELEMENT_ID__=mm,a})();function mm(a){return function rI(a,l,u){if(Vd(a)&&!u){const h=xi(a.index,l);return new Jp(h,h)}return 47&a.type?new Jp(l[16],l):null}(kn(),Le(),16==(16&a))}class dI{constructor(){}supports(l){return Fp(l)}create(l){return new Jk(l)}}const Fs=(a,l)=>l;class Jk{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||Fs}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,h=this._removalsHead,f=0,g=null;for(;u||h;){const b=!h||u&&u.currentIndex<z0(h,f,g)?u:h,E=z0(b,f,g),T=b.currentIndex;if(b===h)f--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)f++;else{g||(g=[]);const R=E-f,P=T-f;if(R!=P){for(let te=0;te<R;te++){const fe=te<g.length?g[te]:g[te]=0,Oe=fe+te;P<=Oe&&Oe<R&&(g[te]=fe+1)}g[b.previousIndex]=P-R}}E!==T&&l(b,E,T)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!Fp(l))throw new Me(900,"");return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let f,g,b,u=this._itHead,h=!1;if(Array.isArray(l)){this.length=l.length;for(let E=0;E<this.length;E++)g=l[E],b=this._trackByFn(E,g),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,g,b,E)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,b,E),h=!0),u=u._next}else f=0,function zx(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[du()]();let h;for(;!(h=u.next()).done;)l(h.value)}}(l,E=>{b=this._trackByFn(f,E),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,E,b,f)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,b,f),h=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,h,f){let g;return null===l?g=this._itTail:(g=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,g,f)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,g,f)):l=this._addAfter(new G0(u,h),g,f),l}_verifyReinsertion(l,u,h,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==g?l=this._reinsertAfter(g,l._prev,f):l.currentIndex!=f&&(l.currentIndex=f,this._addToMoves(l,f)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const f=l._prevRemoved,g=l._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(l,u,h),this._addToMoves(l,h),l}_moveAfter(l,u,h){return this._unlink(l),this._insertAfter(l,u,h),this._addToMoves(l,h),l}_addAfter(l,u,h){return this._insertAfter(l,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,h){const f=null===u?this._itHead:u._next;return l._next=f,l._prev=u,null===f?this._itTail=l:f._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new gy),this._linkedRecords.put(l),l.currentIndex=h,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,h=l._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gy),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class G0{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eR{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,l))return h;return null}remove(l){const u=l._prevDup,h=l._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class gy{constructor(){this.map=new Map}put(l){const u=l.trackById;let h=this.map.get(u);h||(h=new eR,this.map.set(u,h)),h.add(l)}get(l,u){const f=this.map.get(l);return f?f.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function z0(a,l,u){const h=a.previousIndex;if(null===h)return h;let f=0;return u&&h<u.length&&(f=u[h]),h+l+f}class hI{constructor(){}supports(l){return l instanceof Map||dD(l)}create(){return new Ca}}class Ca{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||dD(l)))throw new Me(900,"")}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(h,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(f,h);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const h=l._prev;return u._next=l,u._prev=h,l._prev=u,h&&(h._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const f=this._records.get(l);this._maybeAddToChanges(f,u);const g=f._prev,b=f._next;return g&&(g._next=b),b&&(b._prev=g),f._next=null,f._prev=null,f}const h=new tR(l);return this._records.set(l,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(h=>u(l[h],h))}}class tR{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function q0(){return new $0([new dI])}let $0=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(null!=h){const f=h.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||q0()),deps:[[a,new Ya,new Rr]]}}find(u){const h=this.factories.find(f=>f.supports(u));if(null!=h)return h;throw new Me(901,"")}}return a.\u0275prov=sn({token:a,providedIn:"root",factory:q0}),a})();function pI(){return new W0([new hI])}let W0=(()=>{class a{constructor(u){this.factories=u}static create(u,h){if(h){const f=h.factories.slice();u=u.concat(f)}return new a(u)}static extend(u){return{provide:a,useFactory:h=>a.create(u,h||pI()),deps:[[a,new Ya,new Rr]]}}find(u){const h=this.factories.find(g=>g.supports(u));if(h)return h;throw new Me(901,"")}}return a.\u0275prov=sn({token:a,providedIn:"root",factory:pI}),a})();const iR=cm(null,"core",[]);let _I=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(st(dy))},a.\u0275mod=Qi({type:a}),a.\u0275inj=Zt({}),a})()},3942:(Ve,$,O)=>{"use strict";O.d($,{Z:()=>Me});var o=O(2090),B=O(4859),x=O(9681),V=O(1877);class U{constructor(de,_e){this._delegate=de,this.firebase=_e,(0,x._addComponent)(de,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,x.deleteApp)(this._delegate)))}_getService(de,_e=x._DEFAULT_ENTRY_NAME){var Pe;this._delegate.checkDestroyed();const Fe=this._delegate.container.getProvider(de);return!Fe.isInitialized()&&"EXPLICIT"===(null===(Pe=Fe.getComponent())||void 0===Pe?void 0:Pe.instantiationMode)&&Fe.initialize(),Fe.getImmediate({identifier:_e})}_removeServiceInstance(de,_e=x._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(_e)}_addComponent(de){(0,x._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,x._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const G=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function se(){const je=function Y(je){const de={},_e={__esModule:!0,initializeApp:function xe(Ae,q={}){const ge=x.initializeApp(Ae,q);if((0,o.r3)(de,ge.name))return de[ge.name];const X=new je(ge,_e);return de[ge.name]=X,X},app:Fe,registerVersion:x.registerVersion,setLogLevel:x.setLogLevel,onLog:x.onLog,apps:null,SDK_VERSION:x.SDK_VERSION,INTERNAL:{registerComponent:function he(Ae){const q=Ae.name,ge=q.replace("-compat","");if(x._registerComponent(Ae)&&"PUBLIC"===Ae.type){const X=(re=Fe())=>{if("function"!=typeof re[ge])throw G.create("invalid-app-argument",{appName:q});return re[ge]()};void 0!==Ae.serviceProps&&(0,o.ZB)(X,Ae.serviceProps),_e[ge]=X,je.prototype[ge]=function(...re){return this._getService.bind(this,q).apply(this,Ae.multipleInstances?re:[])}}return"PUBLIC"===Ae.type?_e[ge]:null},removeApp:function Pe(Ae){delete de[Ae]},useAsService:function Re(Ae,q){return"serverAuth"===q?null:q},modularAPIs:x}};function Fe(Ae){if(!(0,o.r3)(de,Ae=Ae||x._DEFAULT_ENTRY_NAME))throw G.create("no-app",{appName:Ae});return de[Ae]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function De(){return Object.keys(de).map(Ae=>de[Ae])}}),Fe.App=je,_e}(U);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:se,extendNamespace:function de(_e){(0,o.ZB)(je,_e)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),je}(),Q=new V.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){Q.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&Q.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=Z;!function ye(je){(0,x.registerVersion)("@firebase/app-compat","0.1.25",je)}()},9681:(Ve,$,O)=>{"use strict";O.r($),O.d($,{FirebaseError:()=>V.ZR,SDK_VERSION:()=>hs,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>ln,_addOrOverwriteComponent:()=>sn,_apps:()=>Xt,_clearComponents:()=>Hn,_components:()=>Mn,_getProvider:()=>Zt,_registerComponent:()=>ai,_removeServiceInstance:()=>xt,deleteApp:()=>wt,getApp:()=>dr,getApps:()=>fs,initializeApp:()=>bo,onLog:()=>jn,registerVersion:()=>Ln,setLogLevel:()=>wo});var o=O(5861),B=O(4859),x=O(1877),V=O(2090),U=O(8766);class W{constructor(me){this.container=me}getPlatformInfoString(){return this.container.getProviders().map(He=>{if(function G(ne){const me=ne.getComponent();return"VERSION"===(null==me?void 0:me.type)}(He)){const nt=He.getImmediate();return`${nt.library}/${nt.version}`}return null}).filter(He=>He).join(" ")}}const Y="@firebase/app",Z=new x.Yd("@firebase/app"),jt="[DEFAULT]",Ye={[Y]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,Mn=new Map;function ln(ne,me){try{ne.container.addComponent(me)}catch(He){Z.debug(`Component ${me.name} failed to register with FirebaseApp ${ne.name}`,He)}}function sn(ne,me){ne.container.addOrOverwriteComponent(me)}function ai(ne){const me=ne.name;if(Mn.has(me))return Z.debug(`There were multiple attempts to register component ${me}.`),!1;Mn.set(me,ne);for(const He of Xt.values())ln(He,ne);return!0}function Zt(ne,me){const He=ne.container.getProvider("heartbeat").getImmediate({optional:!0});return He&&He.triggerHeartbeat(),ne.container.getProvider(me)}function xt(ne,me,He=jt){Zt(ne,me).clearInstance(He)}function Hn(){Mn.clear()}const Kn=new V.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ki{constructor(me,He,nt){this._isDeleted=!1,this._options=Object.assign({},me),this._config=Object.assign({},He),this._name=He.name,this._automaticDataCollectionEnabled=He.automaticDataCollectionEnabled,this._container=nt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this.checkDestroyed(),this._automaticDataCollectionEnabled=me}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(me){this._isDeleted=me}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}const hs="9.8.1";function bo(ne,me={}){"object"!=typeof me&&(me={name:me});const He=Object.assign({name:jt,automaticDataCollectionEnabled:!1},me),nt=He.name;if("string"!=typeof nt||!nt)throw Kn.create("bad-app-name",{appName:String(nt)});const vt=Xt.get(nt);if(vt){if((0,V.vZ)(ne,vt.options)&&(0,V.vZ)(He,vt.config))return vt;throw Kn.create("duplicate-app",{appName:nt})}const Mt=new B.H0(nt);for(const It of Mn.values())Mt.addComponent(It);const In=new Ki(ne,He,Mt);return Xt.set(nt,In),In}function dr(ne=jt){const me=Xt.get(ne);if(!me)throw Kn.create("no-app",{appName:ne});return me}function fs(){return Array.from(Xt.values())}function wt(ne){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,o.Z)(function*(ne){const me=ne.name;Xt.has(me)&&(Xt.delete(me),yield Promise.all(ne.container.getProviders().map(He=>He.delete())),ne.isDeleted=!0)})).apply(this,arguments)}function Ln(ne,me,He){var nt;let vt=null!==(nt=Ye[ne])&&void 0!==nt?nt:ne;He&&(vt+=`-${He}`);const Mt=vt.match(/\s|\//),In=me.match(/\s|\//);if(Mt||In){const It=[`Unable to register library "${vt}" with version "${me}":`];return Mt&&It.push(`library name "${vt}" contains illegal characters (whitespace or "/")`),Mt&&In&&It.push("and"),In&&It.push(`version name "${me}" contains illegal characters (whitespace or "/")`),void Z.warn(It.join(" "))}ai(new B.wA(`${vt}-version`,()=>({library:vt,version:me}),"VERSION"))}function jn(ne,me){if(null!==ne&&"function"!=typeof ne)throw Kn.create("invalid-log-argument");(0,x.Am)(ne,me)}function wo(ne){(0,x.Ub)(ne)}const Gn="firebase-heartbeat-store";let Ir=null;function Go(){return Ir||(Ir=(0,U.X3)("firebase-heartbeat-database",1,{upgrade:(ne,me)=>{0===me&&ne.createObjectStore(Gn)}}).catch(ne=>{throw Kn.create("storage-open",{originalErrorMessage:ne.message})})),Ir}function ct(){return(ct=(0,o.Z)(function*(ne){try{return(yield Go()).transaction(Gn).objectStore(Gn).get(Sr(ne))}catch(me){throw Kn.create("storage-get",{originalErrorMessage:me.message})}})).apply(this,arguments)}function Et(ne,me){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,o.Z)(function*(ne,me){try{const nt=(yield Go()).transaction(Gn,"readwrite");return yield nt.objectStore(Gn).put(me,Sr(ne)),nt.done}catch(He){throw Kn.create("storage-set",{originalErrorMessage:He.message})}})).apply(this,arguments)}function Sr(ne){return`${ne.name}!${ne.options.appId}`}class Vi{constructor(me){this.container=me,this._heartbeatsCache=null;const He=this.container.getProvider("app").getImmediate();this._storage=new ie(He),this._heartbeatsCachePromise=this._storage.read().then(nt=>(this._heartbeatsCache=nt,nt))}triggerHeartbeat(){var me=this;return(0,o.Z)(function*(){const nt=me.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),vt=Ui();if(null===me._heartbeatsCache&&(me._heartbeatsCache=yield me._heartbeatsCachePromise),me._heartbeatsCache.lastSentHeartbeatDate!==vt&&!me._heartbeatsCache.heartbeats.some(Mt=>Mt.date===vt))return me._heartbeatsCache.heartbeats.push({date:vt,agent:nt}),me._heartbeatsCache.heartbeats=me._heartbeatsCache.heartbeats.filter(Mt=>{const In=new Date(Mt.date).valueOf();return Date.now()-In<=2592e6}),me._storage.overwrite(me._heartbeatsCache)})()}getHeartbeatsHeader(){var me=this;return(0,o.Z)(function*(){if(null===me._heartbeatsCache&&(yield me._heartbeatsCachePromise),null===me._heartbeatsCache||0===me._heartbeatsCache.heartbeats.length)return"";const He=Ui(),{heartbeatsToSend:nt,unsentEntries:vt}=function J(ne,me=1024){const He=[];let nt=ne.slice();for(const vt of ne){const Mt=He.find(In=>In.agent===vt.agent);if(Mt){if(Mt.dates.push(vt.date),ae(He)>me){Mt.dates.pop();break}}else if(He.push({agent:vt.agent,dates:[vt.date]}),ae(He)>me){He.pop();break}nt=nt.slice(1)}return{heartbeatsToSend:He,unsentEntries:nt}}(me._heartbeatsCache.heartbeats),Mt=(0,V.L)(JSON.stringify({version:2,heartbeats:nt}));return me._heartbeatsCache.lastSentHeartbeatDate=He,vt.length>0?(me._heartbeatsCache.heartbeats=vt,yield me._storage.overwrite(me._heartbeatsCache)):(me._heartbeatsCache.heartbeats=[],me._storage.overwrite(me._heartbeatsCache)),Mt})()}}function Ui(){return(new Date).toISOString().substring(0,10)}class ie{constructor(me){this.app=me,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,V.hl)()&&(0,V.eu)().then(()=>!0).catch(()=>!1)})()}read(){var me=this;return(0,o.Z)(function*(){return(yield me._canUseIndexedDBPromise)&&(yield function Jt(ne){return ct.apply(this,arguments)}(me.app))||{heartbeats:[]}})()}overwrite(me){var He=this;return(0,o.Z)(function*(){var nt;if(yield He._canUseIndexedDBPromise){const Mt=yield He.read();return Et(He.app,{lastSentHeartbeatDate:null!==(nt=me.lastSentHeartbeatDate)&&void 0!==nt?nt:Mt.lastSentHeartbeatDate,heartbeats:me.heartbeats})}})()}add(me){var He=this;return(0,o.Z)(function*(){var nt;if(yield He._canUseIndexedDBPromise){const Mt=yield He.read();return Et(He.app,{lastSentHeartbeatDate:null!==(nt=me.lastSentHeartbeatDate)&&void 0!==nt?nt:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...me.heartbeats]})}})()}}function ae(ne){return(0,V.L)(JSON.stringify({version:2,heartbeats:ne})).length}!function Ne(ne){ai(new B.wA("platform-logger",me=>new W(me),"PRIVATE")),ai(new B.wA("heartbeat",me=>new Vi(me),"PRIVATE")),Ln(Y,"0.7.24",ne),Ln(Y,"0.7.24","esm2017"),Ln("fire-js","")}("")},4859:(Ve,$,O)=>{"use strict";O.d($,{H0:()=>Y,wA:()=>x,zt:()=>U});var o=O(5861),B=O(2090);class x{constructor(Z,Q,ee){this.name=Z,this.instanceFactory=Q,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const V="[DEFAULT]";class U{constructor(Z,Q){this.name=Z,this.container=Q,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const Q=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(Q)){const ee=new B.BH;if(this.instancesDeferred.set(Q,ee),this.isInitialized(Q)||this.shouldAutoInitialize())try{const ke=this.getOrInitializeService({instanceIdentifier:Q});ke&&ee.resolve(ke)}catch(ke){}}return this.instancesDeferred.get(Q).promise}getImmediate(Z){var Q;const ee=this.normalizeInstanceIdentifier(null==Z?void 0:Z.identifier),ke=null!==(Q=null==Z?void 0:Z.optional)&&void 0!==Q&&Q;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(ye){if(ke)return null;throw ye}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function G(se){return"EAGER"===se.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:V})}catch(Q){}for(const[Q,ee]of this.instancesDeferred.entries()){const ke=this.normalizeInstanceIdentifier(Q);try{const ye=this.getOrInitializeService({instanceIdentifier:ke});ee.resolve(ye)}catch(ye){}}}}clearInstance(Z=V){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,o.Z)(function*(){const Q=Array.from(Z.instances.values());yield Promise.all([...Q.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...Q.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=V){return this.instances.has(Z)}getOptions(Z=V){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:Q={}}=Z,ee=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ke=this.getOrInitializeService({instanceIdentifier:ee,options:Q});for(const[ye,Me]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(ye)&&Me.resolve(ke);return ke}onInit(Z,Q){var ee;const ke=this.normalizeInstanceIdentifier(Q),ye=null!==(ee=this.onInitCallbacks.get(ke))&&void 0!==ee?ee:new Set;ye.add(Z),this.onInitCallbacks.set(ke,ye);const Me=this.instances.get(ke);return Me&&Z(Me,ke),()=>{ye.delete(Z)}}invokeOnInitCallbacks(Z,Q){const ee=this.onInitCallbacks.get(Q);if(ee)for(const ke of ee)try{ke(Z,Q)}catch(ye){}}getOrInitializeService({instanceIdentifier:Z,options:Q={}}){let ee=this.instances.get(Z);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(se=Z,se===V?void 0:se),options:Q}),this.instances.set(Z,ee),this.instancesOptions.set(Z,Q),this.invokeOnInitCallbacks(ee,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,ee)}catch(ke){}var se;return ee||null}normalizeInstanceIdentifier(Z=V){return this.component?this.component.multipleInstances?Z:V:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Y{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const Q=this.getProvider(Z.name);if(Q.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);Q.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const Q=new U(Z,this);return this.providers.set(Z,Q),Q}getProviders(){return Array.from(this.providers.values())}}},1877:(Ve,$,O)=>{"use strict";O.d($,{Am:()=>se,Ub:()=>Y,Yd:()=>G,in:()=>B});const o=[];var B=(()=>{return(Z=B||(B={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",B;var Z})();const x={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},V=B.INFO,U={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},W=(Z,Q,...ee)=>{if(Q<Z.logLevel)return;const ke=(new Date).toISOString(),ye=U[Q];if(!ye)throw new Error(`Attempted to log a message with an invalid logType (value: ${Q})`);console[ye](`[${ke}]  ${Z.name}:`,...ee)};class G{constructor(Q){this.name=Q,this._logLevel=V,this._logHandler=W,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(Q){if(!(Q in B))throw new TypeError(`Invalid value "${Q}" assigned to \`logLevel\``);this._logLevel=Q}setLogLevel(Q){this._logLevel="string"==typeof Q?x[Q]:Q}get logHandler(){return this._logHandler}set logHandler(Q){if("function"!=typeof Q)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Q}get userLogHandler(){return this._userLogHandler}set userLogHandler(Q){this._userLogHandler=Q}debug(...Q){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...Q),this._logHandler(this,B.DEBUG,...Q)}log(...Q){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...Q),this._logHandler(this,B.VERBOSE,...Q)}info(...Q){this._userLogHandler&&this._userLogHandler(this,B.INFO,...Q),this._logHandler(this,B.INFO,...Q)}warn(...Q){this._userLogHandler&&this._userLogHandler(this,B.WARN,...Q),this._logHandler(this,B.WARN,...Q)}error(...Q){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...Q),this._logHandler(this,B.ERROR,...Q)}}function Y(Z){o.forEach(Q=>{Q.setLogLevel(Z)})}function se(Z,Q){for(const ee of o){let ke=null;Q&&Q.level&&(ke=x[Q.level]),ee.userLogHandler=null===Z?null:(ye,Me,...je)=>{const de=je.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch(Pe){return null}}).filter(_e=>_e).join(" ");Me>=(null!=ke?ke:ye.logLevel)&&Z({level:B[Me].toLowerCase(),message:de,args:je,type:ye.name})}}}},8766:(Ve,$,O)=>{"use strict";O.d($,{Lj:()=>xe,X3:()=>Fe});var o=O(5861);let x,V;const G=new WeakMap,Y=new WeakMap,se=new WeakMap,Z=new WeakMap,Q=new WeakMap;let ye={get(q,ge,X){if(q instanceof IDBTransaction){if("done"===ge)return Y.get(q);if("objectStoreNames"===ge)return q.objectStoreNames||se.get(q);if("store"===ge)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return _e(q[ge])},set:(q,ge,X)=>(q[ge]=X,!0),has:(q,ge)=>q instanceof IDBTransaction&&("done"===ge||"store"===ge)||ge in q};function de(q){return"function"==typeof q?function je(q){return q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function W(){return V||(V=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(q)?function(...ge){return q.apply(Pe(this),ge),_e(G.get(this))}:function(...ge){return _e(q.apply(Pe(this),ge))}:function(ge,...X){const re=q.call(Pe(this),ge,...X);return se.set(re,ge.sort?ge.sort():[ge]),_e(re)}}(q):(q instanceof IDBTransaction&&function ke(q){if(Y.has(q))return;const ge=new Promise((X,re)=>{const oe=()=>{q.removeEventListener("complete",pe),q.removeEventListener("error",ve),q.removeEventListener("abort",ve)},pe=()=>{X(),oe()},ve=()=>{re(q.error||new DOMException("AbortError","AbortError")),oe()};q.addEventListener("complete",pe),q.addEventListener("error",ve),q.addEventListener("abort",ve)});Y.set(q,ge)}(q),((q,ge)=>ge.some(X=>q instanceof X))(q,function U(){return x||(x=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(q,ye):q)}function _e(q){if(q instanceof IDBRequest)return function ee(q){const ge=new Promise((X,re)=>{const oe=()=>{q.removeEventListener("success",pe),q.removeEventListener("error",ve)},pe=()=>{X(_e(q.result)),oe()},ve=()=>{re(q.error),oe()};q.addEventListener("success",pe),q.addEventListener("error",ve)});return ge.then(X=>{X instanceof IDBCursor&&G.set(X,q)}).catch(()=>{}),Q.set(ge,q),ge}(q);if(Z.has(q))return Z.get(q);const ge=de(q);return ge!==q&&(Z.set(q,ge),Q.set(ge,q)),ge}const Pe=q=>Q.get(q);function Fe(q,ge,{blocked:X,upgrade:re,blocking:oe,terminated:pe}={}){const ve=indexedDB.open(q,ge),ze=_e(ve);return re&&ve.addEventListener("upgradeneeded",ft=>{re(_e(ve.result),ft.oldVersion,ft.newVersion,_e(ve.transaction))}),X&&ve.addEventListener("blocked",()=>X()),ze.then(ft=>{pe&&ft.addEventListener("close",()=>pe()),oe&&ft.addEventListener("versionchange",()=>oe())}).catch(()=>{}),ze}function xe(q,{blocked:ge}={}){const X=indexedDB.deleteDatabase(q);return ge&&X.addEventListener("blocked",()=>ge()),_e(X).then(()=>{})}const De=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],Re=new Map;function Ae(q,ge){if(!(q instanceof IDBDatabase)||ge in q||"string"!=typeof ge)return;if(Re.get(ge))return Re.get(ge);const X=ge.replace(/FromIndex$/,""),re=ge!==X,oe=he.includes(X);if(!(X in(re?IDBIndex:IDBObjectStore).prototype)||!oe&&!De.includes(X))return;const pe=function(){var ve=(0,o.Z)(function*(ze,...ft){const zt=this.transaction(ze,oe?"readwrite":"readonly");let jt=zt.store;return re&&(jt=jt.index(ft.shift())),(yield Promise.all([jt[X](...ft),oe&&zt.done]))[0]});return function(ft){return ve.apply(this,arguments)}}();return Re.set(ge,pe),pe}!function Me(q){ye=q(ye)}(q=>Jz(Xz({},q),{get:(ge,X,re)=>Ae(ge,X)||q.get(ge,X,re),has:(ge,X)=>!!Ae(ge,X)||q.has(ge,X)}))},5861:(Ve,$,O)=>{"use strict";function o(x,V,U,W,G,Y,se){try{var Z=x[Y](se),Q=Z.value}catch(ee){return void U(ee)}Z.done?V(Q):Promise.resolve(Q).then(W,G)}function B(x){return function(){var V=this,U=arguments;return new Promise(function(W,G){var Y=x.apply(V,U);function se(Q){o(Y,W,G,se,Z,"next",Q)}function Z(Q){o(Y,W,G,se,Z,"throw",Q)}se(void 0)})}}O.d($,{Z:()=>B})}},Ve=>{Ve(Ve.s=7520)}]);